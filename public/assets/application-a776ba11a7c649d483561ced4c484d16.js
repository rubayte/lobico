/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */
/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if(function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=ie.type(e);return"function"===n||ie.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(ie.isFunction(t))return ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ie.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ie.filter(t,e,n);t=ie.filter(t,e)}return ie.grep(e,function(e){return ie.inArray(e,t)>=0!==n})}function i(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function a(e){var t=be[e]={};return ie.each(e.match(xe)||[],function(e,n){t[n]=!0}),t}function o(){pe.addEventListener?(pe.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(pe.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(pe.addEventListener||"load"===event.type||"complete"===pe.readyState)&&(o(),ie.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(_e,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ce.test(n)?ie.parseJSON(n):n}catch(i){}ie.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!ie.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,r){if(ie.acceptData(e)){var i,a,o=ie.expando,s=e.nodeType,l=s?ie.cache:e,u=s?e[o]:e[o]&&o;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[o]=H.pop()||ie.guid++:o),l[u]||(l[u]=s?{}:{toJSON:ie.noop}),("object"==typeof t||"function"==typeof t)&&(r?l[u]=ie.extend(l[u],t):l[u].data=ie.extend(l[u].data,t)),a=l[u],r||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[ie.camelCase(t)]=n),"string"==typeof t?(i=a[t],null==i&&(i=a[ie.camelCase(t)])):i=a,i}}function d(e,t,n){if(ie.acceptData(e)){var r,i,a=e.nodeType,o=a?ie.cache:e,s=a?e[ie.expando]:ie.expando;if(o[s]){if(t&&(r=n?o[s]:o[s].data)){ie.isArray(t)?t=t.concat(ie.map(t,ie.camelCase)):t in r?t=[t]:(t=ie.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!u(r):!ie.isEmptyObject(r))return}(n||(delete o[s].data,u(o[s])))&&(a?ie.cleanData([e],!0):ne.deleteExpando||o!=o.window?delete o[s]:o[s]=null)}}}function f(){return!0}function h(){return!1}function p(){try{return pe.activeElement}catch(e){}}function g(e){var t=Ee.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function m(e,t){var n,r,i=0,a=typeof e.getElementsByTagName!==Ae?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ae?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||ie.nodeName(r,t)?a.push(r):ie.merge(a,m(r,t));return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],a):a}function v(e){Se.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function x(e){return e.type=(null!==ie.find.attr(e,"type"))+"/"+e.type,e}function b(e){var t=Xe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,r=0;null!=(n=e[r]);r++)ie._data(n,"globalEval",!t||ie._data(t[r],"globalEval"))}function I(e,t){if(1===t.nodeType&&ie.hasData(e)){var n,r,i,a=ie._data(e),o=ie._data(t,a),s=a.events;if(s){delete o.handle,o.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)ie.event.add(t,n,s[n][r])}o.data&&(o.data=ie.extend({},o.data))}}function A(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[ie.expando]){i=ie._data(t);for(r in i.events)ie.removeEvent(t,r,i.handle);t.removeAttribute(ie.expando)}"script"===n&&t.text!==e.text?(x(t).text=e.text,b(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!ie.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Se.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function C(t,n){var r,i=ie(n.createElement(t)).appendTo(n.body),a=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:ie.css(i[0],"display");return i.detach(),a}function _(e){var t=pe,n=$e[e];return n||(n=C(e,t),"none"!==n&&n||(Ke=(Ke||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ke[0].contentWindow||Ke[0].contentDocument).document,t.write(),t.close(),n=C(e,t),Ke.detach()),$e[e]=n),n}function k(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function M(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=ft.length;i--;)if(t=ft[i]+n,t in e)return t;return r}function z(e,t){for(var n,r,i,a=[],o=0,s=e.length;s>o;o++)r=e[o],r.style&&(a[o]=ie._data(r,"olddisplay"),n=r.style.display,t?(a[o]||"none"!==n||(r.style.display=""),""===r.style.display&&ze(r)&&(a[o]=ie._data(r,"olddisplay",_(r.nodeName)))):(i=ze(r),(n&&"none"!==n||!i)&&ie._data(r,"olddisplay",i?n:ie.css(r,"display"))));for(o=0;s>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[o]||"":"none"));return e}function N(e,t,n){var r=lt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function S(e,t,n,r,i){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=ie.css(e,n+Me[a],!0,i)),r?("content"===n&&(o-=ie.css(e,"padding"+Me[a],!0,i)),"margin"!==n&&(o-=ie.css(e,"border"+Me[a]+"Width",!0,i))):(o+=ie.css(e,"padding"+Me[a],!0,i),"padding"!==n&&(o+=ie.css(e,"border"+Me[a]+"Width",!0,i)));return o}function j(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=et(e),o=ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,a);if(0>=i||null==i){if(i=tt(e,t,a),(0>i||null==i)&&(i=e.style[t]),rt.test(i))return i;r=o&&(ne.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+S(e,t,n||(o?"border":"content"),r,a)+"px"}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function T(){return setTimeout(function(){ht=void 0}),ht=ie.now()}function O(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Me[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function L(e,t,n){for(var r,i=(xt[t]||[]).concat(xt["*"]),a=0,o=i.length;o>a;a++)if(r=i[a].call(n,t,e))return r}function E(e,t,n){var r,i,a,o,s,l,u,c,d=this,f={},h=e.style,p=e.nodeType&&ze(e),g=ie._data(e,"fxshow");n.queue||(s=ie._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,ie.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=ie.css(e,"display"),c="none"===u?ie._data(e,"olddisplay")||_(e.nodeName):u,"inline"===c&&"none"===ie.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==_(e.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",ne.shrinkWrapBlocks()||d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],gt.exec(i)){if(delete t[r],a=a||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}f[r]=g&&g[r]||ie.style(e,r)}else u=void 0;if(ie.isEmptyObject(f))"inline"===("none"===u?_(e.nodeName):u)&&(h.display=u);else{g?"hidden"in g&&(p=g.hidden):g=ie._data(e,"fxshow",{}),a&&(g.hidden=!p),p?ie(e).show():d.done(function(){ie(e).hide()}),d.done(function(){var t;ie._removeData(e,"fxshow");for(t in f)ie.style(e,t,f[t])});for(r in f)o=L(p?g[r]:0,r,d),r in g||(g[r]=o.start,p&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function B(e,t){var n,r,i,a,o;for(n in e)if(r=ie.camelCase(n),i=t[r],a=e[n],ie.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),o=ie.cssHooks[r],o&&"expand"in o){a=o.expand(a),delete e[r];for(n in a)n in e||(e[n]=a[n],t[n]=i)}else t[r]=i}function F(e,t,n){var r,i,a=0,o=yt.length,s=ie.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=ht||T(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,a=1-r,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(a);return s.notifyWith(e,[u,a,n]),1>a&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:ht||T(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ie.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(B(c,u.opts.specialEasing);o>a;a++)if(r=yt[a].call(u,e,c,u.opts))return r;return ie.map(c,L,u),ie.isFunction(u.opts.start)&&u.opts.start.call(e,u),ie.fx.timer(ie.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function P(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(xe)||[];if(ie.isFunction(n))for(;r=a[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function G(e,t,n,r){function i(s){var l;return a[s]=!0,ie.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||o||a[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var a={},o=e===Yt;return i(t.dataTypes[0])||!a["*"]&&i("*")}function Z(e,t){var n,r,i=ie.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&ie.extend(!0,e,n),e}function R(e,t,n){for(var r,i,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)a=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}r||(r=o)}a=a||r}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}function Y(e,t,n,r){var i,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(o=u[l+" "+a]||u["* "+a],!o)for(i in u)if(s=i.split(" "),s[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){o===!0?o=u[i]:u[i]!==!0&&(a=s[0],c.unshift(s[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(d){return{state:"parsererror",error:o?d:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function W(e,t,n,r){var i;if(ie.isArray(t))ie.each(t,function(t,i){n||Xt.test(e)?r(e,i):W(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(i in t)W(e+"["+i+"]",t[i],n,r)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function V(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function X(e){return ie.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var H=[],J=H.slice,q=H.concat,Q=H.push,K=H.indexOf,$={},ee=$.toString,te=$.hasOwnProperty,ne={},re="1.11.1",ie=function(e,t){return new ie.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oe=/^-ms-/,se=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:re,constructor:ie,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ie.each(this,e,t)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:H.sort,splice:H.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||ie.isFunction(o)||(o={}),s===l&&(o=this,s--);l>s;s++)if(null!=(i=arguments[s]))for(r in i)e=o[r],n=i[r],o!==n&&(u&&n&&(ie.isPlainObject(n)||(t=ie.isArray(n)))?(t?(t=!1,a=e&&ie.isArray(e)?e:[]):a=e&&ie.isPlainObject(e)?e:{},o[r]=ie.extend(u,a,n)):void 0!==n&&(o[r]=n));return o},ie.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray||function(e){return"array"===ie.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ie.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?$[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ie.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(oe,"ms-").replace(se,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,a=0,o=e.length,s=n(e);if(r){if(s)for(;o>a&&(i=t.apply(e[a],r),i!==!1);a++);else for(a in e)if(i=t.apply(e[a],r),i===!1)break}else if(s)for(;o>a&&(i=t.call(e[a],a,e[a]),i!==!1);a++);else for(a in e)if(i=t.call(e[a],a,e[a]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ie.merge(r,"string"==typeof e?[e]:e):Q.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(K)return K.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],a=0,o=e.length,s=!n;o>a;a++)r=!t(e[a],a),r!==s&&i.push(e[a]);return i},map:function(e,t,r){var i,a=0,o=e.length,s=n(e),l=[];if(s)for(;o>a;a++)i=t(e[a],a,r),null!=i&&l.push(i);else for(a in e)i=t(e[a],a,r),null!=i&&l.push(i);return q.apply([],l)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),ie.isFunction(e)?(n=J.call(arguments,2),r=function(){return e.apply(t||this,n.concat(J.call(arguments)))},r.guid=e.guid=e.guid||ie.guid++,r):void 0},now:function(){return+new Date},support:ne}),ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){$["[object "+t+"]"]=t.toLowerCase()});var ue=/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
function(e){function t(e,t,n,r){var i,a,o,s,l,u,d,h,p,g;if((t?t.ownerDocument||t:G)!==D&&j(t),t=t||D,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(O&&!r){if(i=ye.exec(e))if(o=i[1]){if(9===s){if(a=t.getElementById(o),!a||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&F(t,a)&&a.id===o)return n.push(a),n}else{if(i[2])return $.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&w.getElementsByClassName&&t.getElementsByClassName)return $.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&(!L||!L.test(e))){if(h=d=P,p=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=_(e),(d=t.getAttribute("id"))?h=d.replace(be,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+f(u[l]);p=xe.test(e)&&c(t.parentNode)||t,g=u.join(",")}if(g)try{return $.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{d||t.removeAttribute("id")}}}return M(e.replace(le,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>I.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[P]=!0,e}function i(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=e.length;r--;)I.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||H)-(~e.sourceIndex||H);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&typeof e.getElementsByTagName!==X&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,a=R++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,a)}:function(t,n,o){var s,l,u=[Z,a];if(o){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[P]||(t[P]={}),(s=l[r])&&s[0]===Z&&s[1]===a)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,o))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,a=n.length;a>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var a,o=[],s=0,l=e.length,u=null!=t;l>s;s++)(a=e[s])&&(!n||n(a,r,i))&&(o.push(a),u&&t.push(s));return o}function v(e,t,n,i,a,o){return i&&!i[P]&&(i=v(i)),a&&!a[P]&&(a=v(a,o)),r(function(r,o,s,l){var u,c,d,f=[],h=[],p=o.length,v=r||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:m(v,f,e,s,l),x=n?a||(r?e:p||i)?[]:o:y;if(n&&n(y,x,s,l),i)for(u=m(x,h),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(x[h[c]]=!(y[h[c]]=d));if(r){if(a||e){if(a){for(u=[],c=x.length;c--;)(d=x[c])&&u.push(y[c]=d);a(null,x=[],u,l)}for(c=x.length;c--;)(d=x[c])&&(u=a?te.call(r,d):f[c])>-1&&(r[u]=!(o[u]=d))}}else x=m(x===o?x.splice(p,x.length):x),a?a(null,o,x,l):$.apply(o,x)})}function y(e){for(var t,n,r,i=e.length,a=I.relative[e[0].type],o=a||I.relative[" "],s=a?1:0,l=h(function(e){return e===t},o,!0),u=h(function(e){return te.call(t,e)>-1},o,!0),c=[function(e,n,r){return!a&&(r||n!==z)||((t=n).nodeType?l(e,n,r):u(e,n,r))}];i>s;s++)if(n=I.relative[e[s].type])c=[h(p(c),n)];else{if(n=I.filter[e[s].type].apply(null,e[s].matches),n[P]){for(r=++s;i>r&&!I.relative[e[r].type];r++);return v(s>1&&p(c),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}c.push(n)}return p(c)}function x(e,n){var i=n.length>0,a=e.length>0,o=function(r,o,s,l,u){var c,d,f,h=0,p="0",g=r&&[],v=[],y=z,x=r||a&&I.find.TAG("*",u),b=Z+=null==y?1:Math.random()||.1,w=x.length;for(u&&(z=o!==D&&o);p!==w&&null!=(c=x[p]);p++){if(a&&c){for(d=0;f=e[d++];)if(f(c,o,s)){l.push(c);break}u&&(Z=b)}i&&((c=!f&&c)&&h--,r&&g.push(c))}if(h+=p,i&&p!==h){for(d=0;f=n[d++];)f(g,v,o,s);if(r){if(h>0)for(;p--;)g[p]||v[p]||(v[p]=Q.call(l));v=m(v)}$.apply(l,v),u&&!r&&v.length>0&&h+n.length>1&&t.uniqueSort(l)}return u&&(Z=b,z=y),g};return i?r(o):o}var b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P="sizzle"+-new Date,G=e.document,Z=0,R=0,Y=n(),W=n(),U=n(),V=function(e,t){return e===t&&(S=!0),0},X="undefined",H=1<<31,J={}.hasOwnProperty,q=[],Q=q.pop,K=q.push,$=q.push,ee=q.slice,te=q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=ie.replace("w","w#"),oe="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ae+"))|)"+re+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",le=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),ue=new RegExp("^"+re+"*,"+re+"*"),ce=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),de=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),fe=new RegExp(se),he=new RegExp("^"+ae+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),Ie=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{$.apply(q=ee.call(G.childNodes),G.childNodes),q[G.childNodes.length].nodeType}catch(Ae){$={apply:q.length?function(e,t){K.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},j=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:G,r=n.defaultView;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,T=n.documentElement,O=!C(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){j()},!1):r.attachEvent&&r.attachEvent("onunload",function(){j()})),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=i(function(e){return T.appendChild(e).id=P,!n.getElementsByName||!n.getElementsByName(P).length}),w.getById?(I.find.ID=function(e,t){if(typeof t.getElementById!==X&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},I.filter.ID=function(e){var t=e.replace(we,Ie);return function(e){return e.getAttribute("id")===t}}):(delete I.find.ID,I.filter.ID=function(e){var t=e.replace(we,Ie);return function(e){var n=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return n&&n.value===t}}),I.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},I.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&O?t.getElementsByClassName(e):void 0},E=[],L=[],(w.qsa=ve.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&L.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+re+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||L.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=ve.test(B=T.matches||T.webkitMatchesSelector||T.mozMatchesSelector||T.oMatchesSelector||T.msMatchesSelector))&&i(function(e){w.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),E.push("!=",se)}),L=L.length&&new RegExp(L.join("|")),E=E.length&&new RegExp(E.join("|")),t=ve.test(T.compareDocumentPosition),F=t||ve.test(T.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return S=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!w.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===G&&F(G,e)?-1:t===n||t.ownerDocument===G&&F(G,t)?1:N?te.call(N,e)-te.call(N,t):0:4&r?-1:1)}:function(e,t){if(e===t)return S=!0,0;var r,i=0,a=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!a||!s)return e===n?-1:t===n?1:a?-1:s?1:N?te.call(N,e)-te.call(N,t):0;if(a===s)return o(e,t);for(r=e;r=r.parentNode;)l.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;l[i]===u[i];)i++;return i?o(l[i],u[i]):l[i]===G?-1:u[i]===G?1:0},n):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&j(e),n=n.replace(de,"='$1']"),w.matchesSelector&&O&&(!E||!E.test(n))&&(!L||!L.test(n)))try{var r=B.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&j(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&j(e);var n=I.attrHandle[t.toLowerCase()],r=n&&J.call(I.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(S=!w.detectDuplicates,N=!w.sortStable&&e.slice(0),e.sort(V),S){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return N=null,e},A=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=A(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=A(t);return n},I=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ie),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=_(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Y[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&Y(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var a=t.attr(i,e);return null==a?"!="===n:n?(a+="","="===n?a===r:"!="===n?a!==r:"^="===n?r&&0===a.indexOf(r):"*="===n?r&&a.indexOf(r)>-1:"$="===n?r&&a.slice(-r.length)===r:"~="===n?(" "+a+" ").indexOf(r)>-1:"|="===n?a===r||a.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,h,p,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(m){if(a){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&y){for(c=m[P]||(m[P]={}),u=c[e]||[],h=u[0]===Z&&u[1],f=u[0]===Z&&u[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[Z,h,f];break}}else if(y&&(u=(t[P]||(t[P]={}))[e])&&u[0]===Z)f=u[1];else for(;(d=++h&&d&&d[g]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[P]||(d[P]={}))[e]=[Z,f]),d!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,n){var i,a=I.pseudos[e]||I.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[P]?a(n):a.length>1?(i=[e,e,"",n],I.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=a(e,n),o=i.length;o--;)r=te.call(e,i[o]),e[r]=!(t[r]=i[o])}):function(e){return a(e,0,i)}):a}},pseudos:{not:r(function(e){var t=[],n=[],i=k(e.replace(le,"$1"));return i[P]?r(function(e,t,n,r){for(var a,o=i(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,i(t,null,a,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||A(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ie).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===T},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!I.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},I.pseudos.nth=I.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})I.pseudos[b]=l(b);return d.prototype=I.filters=I.pseudos,I.setFilters=new d,_=t.tokenize=function(e,n){var r,i,a,o,s,l,u,c=W[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=I.preFilter;s;){(!r||(i=ue.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(le," ")}),s=s.slice(r.length));for(o in I.filter)!(i=pe[o].exec(s))||u[o]&&!(i=u[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):W(e,l).slice(0)},k=t.compile=function(e,t){var n,r=[],i=[],a=U[e+" "];if(!a){for(t||(t=_(e)),n=t.length;n--;)a=y(t[n]),a[P]?r.push(a):i.push(a);a=U(e,x(i,r)),a.selector=e}return a},M=t.select=function(e,t,n,r){var i,a,o,s,l,u="function"==typeof e&&e,d=!r&&_(e=u.selector||e);if(n=n||[],1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&w.getById&&9===t.nodeType&&O&&I.relative[a[1].type]){if(t=(I.find.ID(o.matches[0].replace(we,Ie),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(i=pe.needsContext.test(e)?0:a.length;i--&&(o=a[i],!I.relative[s=o.type]);)if((l=I.find[s])&&(r=l(o.matches[0].replace(we,Ie),xe.test(a[0].type)&&c(t.parentNode)||t))){if(a.splice(i,1),e=r.length&&f(a),!e)return $.apply(n,r),n;break}}return(u||k(e,d))(r,t,!O,n,xe.test(e)&&c(t.parentNode)||t),n},w.sortStable=P.split("").sort(V).join("")===P,w.detectDuplicates=!!S,j(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||a(ne,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=ue,ie.expr=ue.selectors,ie.expr[":"]=ie.expr.pseudos,ie.unique=ue.uniqueSort,ie.text=ue.getText,ie.isXMLDoc=ue.isXML,ie.contains=ue.contains;var ce=ie.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;i>t;t++)if(ie.contains(r[t],this))return!0}));for(t=0;i>t;t++)ie.find(e,r[t],n);return n=this.pushStack(i>1?ie.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ce.test(e)?ie(e):e||[],!1).length}});var he,pe=e.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=ie.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ge.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||he).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:pe,!0)),de.test(n[1])&&ie.isPlainObject(t))for(n in t)ie.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=pe.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return he.find(e);this.length=1,this[0]=r}return this.context=pe,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?"undefined"!=typeof he.ready?he.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))};me.prototype=ie.fn,he=ie(pe);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};ie.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!ie(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ie.fn.extend({has:function(e){var t,n=ie(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(ie.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,a=[],o=ce.test(e)||"string"!=typeof e?ie(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?ie.unique(a):a)},index:function(e){return e?"string"==typeof e?ie.inArray(this[0],ie(e)):ie.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.unique(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ie.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ie.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ie.dir(e,"nextSibling")},prevAll:function(e){return ie.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ie.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ie.dir(e,"previousSibling",n)},siblings:function(e){return ie.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ie.sibling(e.firstChild)},contents:function(e){return ie.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(n,r){var i=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ie.filter(r,i)),this.length>1&&(ye[e]||(i=ie.unique(i)),ve.test(e)&&(i=i.reverse())),this.pushStack(i)}});var xe=/\S+/g,be={};ie.Callbacks=function(e){e="string"==typeof e?be[e]||a(e):ie.extend({},e);var t,n,r,i,o,s,l=[],u=!e.once&&[],c=function(a){for(n=e.memory&&a,r=!0,o=s||0,s=0,i=l.length,t=!0;l&&i>o;o++)if(l[o].apply(a[0],a[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var r=l.length;!function a(t){ie.each(t,function(t,n){var r=ie.type(n);"function"===r?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==r&&a(n)})}(arguments),t?i=l.length:n&&(s=r,c(n))}return this},remove:function(){return l&&ie.each(arguments,function(e,n){for(var r;(r=ie.inArray(n,l,r))>-1;)l.splice(r,1),t&&(i>=r&&i--,o>=r&&o--)}),this},has:function(e){return e?ie.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],i=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!l||r&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):c(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(n){ie.each(t,function(t,a){var o=ie.isFunction(e[t])&&e[t];i[a[1]](function(){var e=o&&o.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,r):r}},i={};return r.pipe=r.then,ie.each(t,function(e,a){var o=a[2],s=a[3];r[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,a=J.call(arguments),o=a.length,s=1!==o||e&&ie.isFunction(e.promise)?o:0,l=1===s?e:ie.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?J.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);o>i;i++)a[i]&&ie.isFunction(a[i].promise)?a[i].promise().done(u(i,r,a)).fail(l.reject).progress(u(i,n,t)):--s;return s||l.resolveWith(r,a),l.promise()}});var we;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){if(e===!0?!--ie.readyWait:!ie.isReady){if(!pe.body)return setTimeout(ie.ready);ie.isReady=!0,e!==!0&&--ie.readyWait>0||(we.resolveWith(pe,[ie]),ie.fn.triggerHandler&&(ie(pe).triggerHandler("ready"),ie(pe).off("ready")))}}}),ie.ready.promise=function(t){if(!we)if(we=ie.Deferred(),"complete"===pe.readyState)setTimeout(ie.ready);else if(pe.addEventListener)pe.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{pe.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&pe.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!ie.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}o(),ie.ready()}}()}return we.promise(t)};var Ie,Ae="undefined";for(Ie in ie(ne))break;ne.ownLast="0"!==Ie,ne.inlineBlockNeedsLayout=!1,ie(function(){var e,t,n,r;n=pe.getElementsByTagName("body")[0],n&&n.style&&(t=pe.createElement("div"),r=pe.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Ae&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=pe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(t){ne.deleteExpando=!1}}e=null}(),ie.acceptData=function(e){var t=ie.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_e=/([A-Z])/g;ie.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ie.cache[e[ie.expando]]:e[ie.expando],!!e&&!u(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),ie.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=ie.data(a),1===a.nodeType&&!ie._data(a,"parsedAttrs"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=ie.camelCase(r.slice(5)),l(a,r,i[r])));ie._data(a,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ie.data(this,e)}):arguments.length>1?this.each(function(){ie.data(this,e,t)}):a?l(a,e,ie.data(a,e)):void 0},removeData:function(e){return this.each(function(){ie.removeData(this,e)})}}),ie.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ie._data(e,t),n&&(!r||ie.isArray(n)?r=ie._data(e,t,ie.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,i=n.shift(),a=ie._queueHooks(e,t),o=function(){ie.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,o,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ie._data(e,n)||ie._data(e,n,{empty:ie.Callbacks("once memory").add(function(){ie._removeData(e,t+"queue"),ie._removeData(e,n)})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ie.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=ie._data(a[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Me=["Top","Right","Bottom","Left"],ze=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},Ne=ie.access=function(e,t,n,r,i,a,o){var s=0,l=e.length,u=null==n;if("object"===ie.type(n)){i=!0;for(s in n)ie.access(e,t,s,n[s],!0,a,o)}else if(void 0!==r&&(i=!0,ie.isFunction(r)||(o=!0),u&&(o?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ie(e),n)})),t))for(;l>s;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):a},Se=/^(?:checkbox|radio)$/i;!function(){var e=pe.createElement("input"),t=pe.createElement("div"),n=pe.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==pe.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(r){ne.deleteExpando=!1}}}(),function(){var t,n,r=pe.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),ne[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var je=/^(?:input|select|textarea)$/i,De=/^key/,Te=/^(?:mouse|pointer|contextmenu)|click/,Oe=/^(?:focusinfocus|focusoutblur)$/,Le=/^([^.]*)(?:\.(.+)|)$/;ie.event={global:{},add:function(e,t,n,r,i){var a,o,s,l,u,c,d,f,h,p,g,m=ie._data(e);if(m){for(n.handler&&(l=n,n=l.handler,i=l.selector),n.guid||(n.guid=ie.guid++),(o=m.events)||(o=m.events={}),(c=m.handle)||(c=m.handle=function(e){return typeof ie===Ae||e&&ie.event.triggered===e.type?void 0:ie.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(xe)||[""],s=t.length;s--;)a=Le.exec(t[s])||[],h=g=a[1],p=(a[2]||"").split(".").sort(),h&&(u=ie.event.special[h]||{},h=(i?u.delegateType:u.bindType)||h,u=ie.event.special[h]||{},d=ie.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:p.join(".")},l),(f=o[h])||(f=o[h]=[],f.delegateCount=0,u.setup&&u.setup.call(e,r,p,c)!==!1||(e.addEventListener?e.addEventListener(h,c,!1):e.attachEvent&&e.attachEvent("on"+h,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),ie.event.global[h]=!0);e=null}},remove:function(e,t,n,r,i){var a,o,s,l,u,c,d,f,h,p,g,m=ie.hasData(e)&&ie._data(e);if(m&&(c=m.events)){for(t=(t||"").match(xe)||[""],u=t.length;u--;)if(s=Le.exec(t[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(d=ie.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,f=c[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=f.length;a--;)o=f[a],!i&&g!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(f.splice(a,1),o.selector&&f.delegateCount--,d.remove&&d.remove.call(e,o));l&&!f.length&&(d.teardown&&d.teardown.call(e,p,m.handle)!==!1||ie.removeEvent(e,h,m.handle),delete c[h])}else for(h in c)ie.event.remove(e,h+t[u],n,r,!0);ie.isEmptyObject(c)&&(delete m.handle,ie._removeData(e,"events"))}},trigger:function(t,n,r,i){var a,o,s,l,u,c,d,f=[r||pe],h=te.call(t,"type")?t.type:t,p=te.call(t,"namespace")?t.namespace.split("."):[];if(s=c=r=r||pe,3!==r.nodeType&&8!==r.nodeType&&!Oe.test(h+ie.event.triggered)&&(h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),o=h.indexOf(":")<0&&"on"+h,t=t[ie.expando]?t:new ie.Event(h,"object"==typeof t&&t),t.isTrigger=i?2:3,
t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),u=ie.event.special[h]||{},i||!u.trigger||u.trigger.apply(r,n)!==!1)){if(!i&&!u.noBubble&&!ie.isWindow(r)){for(l=u.delegateType||h,Oe.test(l+h)||(s=s.parentNode);s;s=s.parentNode)f.push(s),c=s;c===(r.ownerDocument||pe)&&f.push(c.defaultView||c.parentWindow||e)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?l:u.bindType||h,a=(ie._data(s,"events")||{})[t.type]&&ie._data(s,"handle"),a&&a.apply(s,n),a=o&&s[o],a&&a.apply&&ie.acceptData(s)&&(t.result=a.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=h,!i&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(f.pop(),n)===!1)&&ie.acceptData(r)&&o&&r[h]&&!ie.isWindow(r)){c=r[o],c&&(r[o]=null),ie.event.triggered=h;try{r[h]()}catch(g){}ie.event.triggered=void 0,c&&(r[o]=c)}return t.result}},dispatch:function(e){e=ie.event.fix(e);var t,n,r,i,a,o=[],s=J.call(arguments),l=(ie._data(this,"events")||{})[e.type]||[],u=ie.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(o=ie.event.handlers.call(this,e,l),t=0;(i=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,a=0;(r=i.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((ie.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],a=0;s>a;a++)r=t[a],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?ie(n,this).index(l)>=0:ie.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&o.push({elem:l,handlers:i})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},fix:function(e){if(e[ie.expando])return e;var t,n,r,i=e.type,a=e,o=this.fixHooks[i];for(o||(this.fixHooks[i]=o=Te.test(i)?this.mouseHooks:De.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new ie.Event(a),t=r.length;t--;)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||pe),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,a=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||pe,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ie.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ie.extend(new ie.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ie.event.trigger(i,null,t):ie.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ie.removeEvent=pe.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Ae&&(e[r]=null),e.detachEvent(r,n))},ie.Event=function(e,t){return this instanceof ie.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:h):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),void(this[ie.expando]=!0)):new ie.Event(e,t)},ie.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return(!i||i!==r&&!ie.contains(r,i))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(ie.event.special.submit={setup:function(){return ie.nodeName(this,"form")?!1:void ie.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ie.nodeName(t,"input")||ie.nodeName(t,"button")?t.form:void 0;n&&!ie._data(n,"submitBubbles")&&(ie.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ie._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ie.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ie.nodeName(this,"form")?!1:void ie.event.remove(this,"._submit")}}),ne.changeBubbles||(ie.event.special.change={setup:function(){return je.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ie.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ie.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ie.event.simulate("change",this,e,!0)})),!1):void ie.event.add(this,"beforeactivate._change",function(e){var t=e.target;je.test(t.nodeName)&&!ie._data(t,"changeBubbles")&&(ie.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ie.event.simulate("change",this.parentNode,e,!0)}),ie._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ie.event.remove(this,"._change"),!je.test(this.nodeName)}}),ne.focusinBubbles||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e),!0)};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ie._data(r,t);i||r.addEventListener(e,n,!0),ie._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ie._data(r,t)-1;i?ie._data(r,t,i):(r.removeEventListener(e,n,!0),ie._removeData(r,t))}}}),ie.fn.extend({on:function(e,t,n,r,i){var a,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=h;else if(!r)return this;return 1===i&&(o=r,r=function(e){return ie().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=ie.guid++)),this.each(function(){ie.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=h),this.each(function(){ie.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ie.event.trigger(e,t,n,!0):void 0}});var Ee="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Be=/ jQuery\d+="(?:null|\d+)"/g,Fe=new RegExp("<(?:"+Ee+")[\\s/>]","i"),Pe=/^\s+/,Ge=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ze=/<([\w:]+)/,Re=/<tbody/i,Ye=/<|&#?\w+;/,We=/<(?:script|style|link)/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^$|\/(?:java|ecma)script/i,Xe=/^true\/(.*)/,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Je={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},qe=g(pe),Qe=qe.appendChild(pe.createElement("div"));Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td,ie.extend({clone:function(e,t,n){var r,i,a,o,s,l=ie.contains(e.ownerDocument,e);if(ne.html5Clone||ie.isXMLDoc(e)||!Fe.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Qe.innerHTML=e.outerHTML,Qe.removeChild(a=Qe.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(r=m(a),s=m(e),o=0;null!=(i=s[o]);++o)r[o]&&A(i,r[o]);if(t)if(n)for(s=s||m(e),r=r||m(a),o=0;null!=(i=s[o]);o++)I(i,r[o]);else I(e,a);return r=m(a,"script"),r.length>0&&w(r,!l&&m(e,"script")),r=s=i=null,a},buildFragment:function(e,t,n,r){for(var i,a,o,s,l,u,c,d=e.length,f=g(t),h=[],p=0;d>p;p++)if(a=e[p],a||0===a)if("object"===ie.type(a))ie.merge(h,a.nodeType?[a]:a);else if(Ye.test(a)){for(s=s||f.appendChild(t.createElement("div")),l=(Ze.exec(a)||["",""])[1].toLowerCase(),c=Je[l]||Je._default,s.innerHTML=c[1]+a.replace(Ge,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!ne.leadingWhitespace&&Pe.test(a)&&h.push(t.createTextNode(Pe.exec(a)[0])),!ne.tbody)for(a="table"!==l||Re.test(a)?"<table>"!==c[1]||Re.test(a)?0:s:s.firstChild,i=a&&a.childNodes.length;i--;)ie.nodeName(u=a.childNodes[i],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(ie.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(t.createTextNode(a));for(s&&f.removeChild(s),ne.appendChecked||ie.grep(m(h,"input"),v),p=0;a=h[p++];)if((!r||-1===ie.inArray(a,r))&&(o=ie.contains(a.ownerDocument,a),s=m(f.appendChild(a),"script"),o&&w(s),n))for(i=0;a=s[i++];)Ve.test(a.type||"")&&n.push(a);return s=null,f},cleanData:function(e,t){for(var n,r,i,a,o=0,s=ie.expando,l=ie.cache,u=ne.deleteExpando,c=ie.event.special;null!=(n=e[o]);o++)if((t||ie.acceptData(n))&&(i=n[s],a=i&&l[i])){if(a.events)for(r in a.events)c[r]?ie.event.remove(n,r):ie.removeEvent(n,r,a.handle);l[i]&&(delete l[i],u?delete n[s]:typeof n.removeAttribute!==Ae?n.removeAttribute(s):n[s]=null,H.push(i))}}}),ie.fn.extend({text:function(e){return Ne(this,function(e){return void 0===e?ie.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pe).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ie.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ie.cleanData(m(n)),n.parentNode&&(t&&ie.contains(n.ownerDocument,n)&&w(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ie.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ie.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return Ne(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Be,""):void 0;if("string"==typeof e&&!We.test(e)&&(ne.htmlSerialize||!Fe.test(e))&&(ne.leadingWhitespace||!Pe.test(e))&&!Je[(Ze.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ge,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(ie.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ie.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=q.apply([],e);var n,r,i,a,o,s,l=0,u=this.length,c=this,d=u-1,f=e[0],h=ie.isFunction(f);if(h||u>1&&"string"==typeof f&&!ne.checkClone&&Ue.test(f))return this.each(function(n){var r=c.eq(n);h&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(u&&(s=ie.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(a=ie.map(m(s,"script"),x),i=a.length;u>l;l++)r=s,l!==d&&(r=ie.clone(r,!0,!0),i&&ie.merge(a,m(r,"script"))),t.call(this[l],r,l);if(i)for(o=a[a.length-1].ownerDocument,ie.map(a,b),l=0;i>l;l++)r=a[l],Ve.test(r.type||"")&&!ie._data(r,"globalEval")&&ie.contains(o,r)&&(r.src?ie._evalUrl&&ie._evalUrl(r.src):ie.globalEval((r.text||r.textContent||r.innerHTML||"").replace(He,"")));s=n=null}return this}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n,r=0,i=[],a=ie(e),o=a.length-1;o>=r;r++)n=r===o?this:this.clone(!0),ie(a[r])[t](n),Q.apply(i,n.get());return this.pushStack(i)}});var Ke,$e={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=pe.getElementsByTagName("body")[0],n&&n.style?(t=pe.createElement("div"),r=pe.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Ae&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pe.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var et,tt,nt=/^margin/,rt=new RegExp("^("+ke+")(?!px)[a-z%]+$","i"),it=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tt=function(e,t,n){var r,i,a,o,s=e.style;return n=n||et(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||ie.contains(e.ownerDocument,e)||(o=ie.style(e,t)),rt.test(o)&&nt.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0===o?o:o+""}):pe.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var r,i,a,o,s=e.style;return n=n||et(e),o=n?n[t]:void 0,null==o&&s&&s[t]&&(o=s[t]),rt.test(o)&&!it.test(t)&&(r=s.left,i=e.runtimeStyle,a=i&&i.left,a&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o,o=s.pixelLeft+"px",s.left=r,a&&(i.left=a)),void 0===o?o:o+""||"auto"}),function(){function t(){var t,n,r,i;n=pe.getElementsByTagName("body")[0],n&&n.style&&(t=pe.createElement("div"),r=pe.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a=o=!1,l=!0,e.getComputedStyle&&(a="1%"!==(e.getComputedStyle(t,null)||{}).top,o="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,i=t.appendChild(pe.createElement("div")),i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=t.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===i[0].offsetHeight,s&&(i[0].style.display="",i[1].style.display="none",s=0===i[0].offsetHeight),n.removeChild(r))}var n,r,i,a,o,s,l;n=pe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=n.getElementsByTagName("a")[0],r=i&&i.style,r&&(r.cssText="float:left;opacity:.5",ne.opacity="0.5"===r.opacity,ne.cssFloat=!!r.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,ie.extend(ne,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==o&&t(),o},pixelPosition:function(){return null==a&&t(),a},reliableMarginRight:function(){return null==l&&t(),l}}))}(),ie.swap=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];i=n.apply(e,r||[]);for(a in t)e.style[a]=o[a];return i};var at=/alpha\([^)]*\)/i,ot=/opacity\s*=\s*([^)]*)/,st=/^(none|table(?!-c[ea]).+)/,lt=new RegExp("^("+ke+")(.*)$","i"),ut=new RegExp("^([+-])=("+ke+")","i"),ct={position:"absolute",visibility:"hidden",display:"block"},dt={letterSpacing:"0",fontWeight:"400"},ft=["Webkit","O","Moz","ms"];ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=ie.camelCase(t),l=e.style;if(t=ie.cssProps[s]||(ie.cssProps[s]=M(l,s)),o=ie.cssHooks[t]||ie.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:l[t];if(a=typeof n,"string"===a&&(i=ut.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ie.css(e,t)),a="number"),null!=n&&n===n&&("number"!==a||ie.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,r)))))try{l[t]=n}catch(u){}}},css:function(e,t,n,r){var i,a,o,s=ie.camelCase(t);return t=ie.cssProps[s]||(ie.cssProps[s]=M(e.style,s)),o=ie.cssHooks[t]||ie.cssHooks[s],o&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=tt(e,t,r)),"normal"===a&&t in dt&&(a=dt[t]),""===n||n?(i=parseFloat(a),n===!0||ie.isNumeric(i)?i||0:a):a}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){return n?st.test(ie.css(e,"display"))&&0===e.offsetWidth?ie.swap(e,ct,function(){return j(e,t,r)}):j(e,t,r):void 0},set:function(e,n,r){var i=r&&et(e);return N(e,n,r?S(e,t,r,ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,i),i):0)}}}),ne.opacity||(ie.cssHooks.opacity={get:function(e,t){return ot.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ie.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ie.trim(a.replace(at,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=at.test(a)?a.replace(at,i):a+" "+i)}}),ie.cssHooks.marginRight=k(ne.reliableMarginRight,function(e,t){return t?ie.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Me[r]+t]=a[r]||a[r-2]||a[0];return i}},nt.test(e)||(ie.cssHooks[e+t].set=N)}),ie.fn.extend({css:function(e,t){return Ne(this,function(e,t,n){var r,i,a={},o=0;if(ie.isArray(t)){for(r=et(e),i=t.length;i>o;o++)a[t[o]]=ie.css(e,t[o],!1,r);return a}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return z(this,!0)},hide:function(){return z(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ze(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(ie.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.options.duration?this.pos=t=ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ie.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ie.cssProps[e.prop]]||ie.cssHooks[e.prop])?ie.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ie.fx=D.prototype.init,ie.fx.step={};var ht,pt,gt=/^(?:toggle|show|hide)$/,mt=new RegExp("^(?:([+-])=|)("+ke+")([a-z%]*)$","i"),vt=/queueHooks$/,yt=[E],xt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=mt.exec(t),a=i&&i[3]||(ie.cssNumber[e]?"":"px"),o=(ie.cssNumber[e]||"px"!==a&&+r)&&mt.exec(ie.css(n.elem,e)),s=1,l=20;if(o&&o[3]!==a){a=a||o[3],i=i||[],o=+r||1;do s=s||".5",o/=s,ie.style(n.elem,e,o+a);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(o=n.start=+o||+r||0,n.unit=a,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};ie.Animation=ie.extend(F,{tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],xt[n]=xt[n]||[],xt[n].unshift(t)},prefilter:function(e,t){t?yt.unshift(e):yt.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return r.duration=ie.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ze).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ie.isEmptyObject(e),a=ie.speed(t,n,r),o=function(){var t=F(this,ie.extend({},e),a);(i||ie._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=ie.timers,o=ie._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&vt.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));(t||!n)&&ie.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ie._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=ie.timers,o=r?r.length:0;for(n.finish=!0,ie.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,r,i)}}),ie.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e,t=ie.timers,n=0;for(ht=ie.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||ie.fx.stop(),ht=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){pt||(pt=setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){clearInterval(pt),pt=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(e,t){return e=ie.fx?ie.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=pe.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=pe.createElement("select"),i=n.appendChild(pe.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(r.getAttribute("style")),ne.hrefNormalized="/a"===r.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=i.selected,ne.enctype=!!pe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!i.disabled,e=pe.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var bt=/\r/g;ie.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ie.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ie(this).val()):e,null==i?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(e){return null==e?"":e+""})),t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(bt,""):null==n?"":n)}}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,a="select-one"===e.type||0>i,o=a?null:[],s=a?i+1:r.length,l=0>i?s:a?i:0;s>l;l++)if(n=r[l],(n.selected||l===i)&&(ne.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ie.nodeName(n.parentNode,"optgroup"))){if(t=ie(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,a=ie.makeArray(t),o=i.length;o--;)if(r=i[o],ie.inArray(ie.valHooks.option.get(r),a)>=0)try{r.selected=n=!0}catch(s){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){return ie.isArray(t)?e.checked=ie.inArray(ie(e).val(),t)>=0:void 0}},ne.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wt,It,At=ie.expr.attrHandle,Ct=/^(?:checked|selected)$/i,_t=ne.getSetAttribute,kt=ne.input;ie.fn.extend({attr:function(e,t){return Ne(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Ae?ie.prop(e,t,n):(1===a&&ie.isXMLDoc(e)||(t=t.toLowerCase(),r=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?It:wt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ie.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void ie.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,a=t&&t.match(xe);if(a&&1===e.nodeType)for(;n=a[i++];)r=ie.propFix[n]||n,ie.expr.match.bool.test(n)?kt&&_t||!Ct.test(n)?e[r]=!1:e[ie.camelCase("default-"+n)]=e[r]=!1:ie.attr(e,n,""),e.removeAttribute(_t?n:r)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),It={set:function(e,t,n){return t===!1?ie.removeAttr(e,n):kt&&_t||!Ct.test(n)?e.setAttribute(!_t&&ie.propFix[n]||n,n):e[ie.camelCase("default-"+n)]=e[n]=!0,n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=At[t]||ie.find.attr;At[t]=kt&&_t||!Ct.test(t)?function(e,t,r){var i,a;return r||(a=At[t],At[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,At[t]=a),i}:function(e,t,n){return n?void 0:e[ie.camelCase("default-"+t)]?t.toLowerCase():null}}),kt&&_t||(ie.attrHooks.value={set:function(e,t,n){return ie.nodeName(e,"input")?void(e.defaultValue=t):wt&&wt.set(e,t,n)}}),_t||(wt={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},At.id=At.name=At.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ie.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:wt.set},ie.attrHooks.contenteditable={set:function(e,t,n){wt.set(e,""===t?!1:t,n)}},ie.each(["width","height"],function(e,t){ie.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(ie.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Mt=/^(?:input|select|textarea|button|object)$/i,zt=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return Ne(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ie.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ie.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!ie.isXMLDoc(e),a&&(t=ie.propFix[t]||t,i=ie.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):Mt.test(e.nodeName)||zt.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||ie.each(["href","src"],function(e,t){ie.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this}),ne.enctype||(ie.propFix.enctype="encoding");var Nt=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(e){var t,n,r,i,a,o,s=0,l=this.length,u="string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(xe)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Nt," "):" ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=ie.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,a,o,s=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(xe)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Nt," "):"")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");o=e?ie.trim(r):"",n.className!==o&&(n.className=o);
}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each(function(n){ie(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=ie(this),a=e.match(xe)||[];t=a[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Ae||"boolean"===n)&&(this.className&&ie._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ie._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Nt," ").indexOf(t)>=0)return!0;return!1}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var St=ie.now(),jt=/\?/,Dt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ie.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=ie.trim(t+"");return i&&!ie.trim(i.replace(Dt,function(e,t,i,a){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!a-!i,"")}))?Function("return "+i)():ie.error("Invalid JSON: "+t)},ie.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var Tt,Ot,Lt=/#.*$/,Et=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pt=/^(?:GET|HEAD)$/,Gt=/^\/\//,Zt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Rt={},Yt={},Wt="*/".concat("*");try{Ot=location.href}catch(Ut){Ot=pe.createElement("a"),Ot.href="",Ot=Ot.href}Tt=Zt.exec(Ot.toLowerCase())||[],ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ot,type:"GET",isLocal:Ft.test(Tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Z(Z(e,ie.ajaxSettings),t):Z(ie.ajaxSettings,e)},ajaxPrefilter:P(Rt),ajaxTransport:P(Yt),ajax:function(e,t){function n(e,t,n,r){var i,c,v,y,b,I=t;2!==x&&(x=2,s&&clearTimeout(s),u=void 0,o=r||"",w.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=R(d,w,n)),y=Y(d,y,w,i),i?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(ie.lastModified[a]=b),b=w.getResponseHeader("etag"),b&&(ie.etag[a]=b)),204===e||"HEAD"===d.type?I="nocontent":304===e?I="notmodified":(I=y.state,c=y.data,v=y.error,i=!v)):(v=I,(e||!I)&&(I="error",0>e&&(e=0))),w.status=e,w.statusText=(t||I)+"",i?p.resolveWith(f,[c,I,w]):p.rejectWith(f,[w,I,v]),w.statusCode(m),m=void 0,l&&h.trigger(i?"ajaxSuccess":"ajaxError",[w,d,i?c:v]),g.fireWith(f,[w,I]),l&&(h.trigger("ajaxComplete",[w,d]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,a,o,s,l,u,c,d=ie.ajaxSetup({},t),f=d.context||d,h=d.context&&(f.nodeType||f.jquery)?ie(f):ie.event,p=ie.Deferred(),g=ie.Callbacks("once memory"),m=d.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c)for(c={};t=Bt.exec(o);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return u&&u.abort(t),n(0,t),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Ot)+"").replace(Lt,"").replace(Gt,Tt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=ie.trim(d.dataType||"*").toLowerCase().match(xe)||[""],null==d.crossDomain&&(r=Zt.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===Tt[1]&&r[2]===Tt[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Tt[3]||("http:"===Tt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ie.param(d.data,d.traditional)),G(Rt,d,t,w),2===x)return w;l=d.global,l&&0===ie.active++&&ie.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(jt.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Et.test(a)?a.replace(Et,"$1_="+St++):a+(jt.test(a)?"&":"?")+"_="+St++)),d.ifModified&&(ie.lastModified[a]&&w.setRequestHeader("If-Modified-Since",ie.lastModified[a]),ie.etag[a]&&w.setRequestHeader("If-None-Match",ie.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Wt+"; q=0.01":""):d.accepts["*"]);for(i in d.headers)w.setRequestHeader(i,d.headers[i]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===x))return w.abort();b="abort";for(i in{success:1,error:1,complete:1})w[i](d[i]);if(u=G(Yt,d,t,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{x=1,u.send(v,n)}catch(I){if(!(2>x))throw I;n(-1,I)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,i){return ie.isFunction(n)&&(i=i||r,r=n,n=void 0),ie.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ie.fn.extend({wrapAll:function(e){if(ie.isFunction(e))return this.each(function(t){ie(this).wrapAll(e.call(this,t))});if(this[0]){var t=ie(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ie.isFunction(e)?this.each(function(t){ie(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ie.css(e,"display"))},ie.expr.filters.visible=function(e){return!ie.expr.filters.hidden(e)};var Vt=/%20/g,Xt=/\[\]$/,Ht=/\r?\n/g,Jt=/^(?:submit|button|image|reset|file)$/i,qt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],i=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){i(this.name,this.value)});else for(n in e)W(n,e[n],t,i);return r.join("&").replace(Vt,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&qt.test(this.nodeName)&&!Jt.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(e){return{name:t.name,value:e.replace(Ht,"\r\n")}}):{name:t.name,value:n.replace(Ht,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||V()}:U;var Qt=0,Kt={},$t=ie.ajaxSettings.xhr();e.ActiveXObject&&ie(e).on("unload",function(){for(var e in Kt)Kt[e](void 0,!0)}),ne.cors=!!$t&&"withCredentials"in $t,$t=ne.ajax=!!$t,$t&&ie.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,r){var i,a=e.xhr(),o=++Qt;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)a[i]=e.xhrFields[i];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&a.setRequestHeader(i,n[i]+"");a.send(e.hasContent&&e.data||null),t=function(n,i){var s,l,u;if(t&&(i||4===a.readyState))if(delete Kt[o],t=void 0,a.onreadystatechange=ie.noop,i)4!==a.readyState&&a.abort();else{u={},s=a.status,"string"==typeof a.responseText&&(u.text=a.responseText);try{l=a.statusText}catch(c){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&r(s,l,u,a.getAllResponseHeaders())},e.async?4===a.readyState?setTimeout(t):a.onreadystatechange=Kt[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=pe.head||ie("head")[0]||pe.documentElement;return{send:function(r,i){t=pe.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||ie.expando+"_"+St++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var i,a,o,s=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(tn,"$1"+i):t.jsonp!==!1&&(t.url+=(jt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||ie.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=a,t[i]&&(t.jsonpCallback=n.jsonpCallback,en.push(i)),o&&ie.isFunction(a)&&a(o[0]),o=a=void 0}),"script"):void 0}),ie.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||pe;var r=de.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ie.buildFragment([e],t,i),i&&i.length&&ie(i).remove(),ie.merge([],r.childNodes))};var nn=ie.fn.load;ie.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,i,a,o=this,s=e.indexOf(" ");return s>=0&&(r=ie.trim(e.slice(s,e.length)),e=e.slice(0,s)),ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&ie.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?ie("<div>").append(ie.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length};var rn=e.document.documentElement;ie.offset={setOffset:function(e,t,n){var r,i,a,o,s,l,u,c=ie.css(e,"position"),d=ie(e),f={};"static"===c&&(e.style.position="relative"),s=d.offset(),a=ie.css(e,"top"),l=ie.css(e,"left"),u=("absolute"===c||"fixed"===c)&&ie.inArray("auto",[a,l])>-1,u?(r=d.position(),o=r.top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),ie.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+o),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],a=i&&i.ownerDocument;if(a)return t=a.documentElement,ie.contains(t,i)?(typeof i.getBoundingClientRect!==Ae&&(r=i.getBoundingClientRect()),n=X(a),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ie.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(n=e.offset()),n.top+=ie.css(e[0],"borderTopWidth",!0),n.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ie.css(r,"marginTop",!0),left:t.left-n.left-ie.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||rn;e&&!ie.nodeName(e,"html")&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||rn})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ie.fn[e]=function(r){return Ne(this,function(e,r,i){var a=X(e);return void 0===i?a?t in a?a[t]:a.document.documentElement[r]:e[r]:void(a?a.scrollTo(n?ie(a).scrollLeft():i,n?i:ie(a).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=k(ne.pixelPosition,function(e,n){return n?(n=tt(e,t),rt.test(n)?ie(e).position()[t]+"px":n):void 0})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return Ne(this,function(t,n,r){var i;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ie.css(t,n,o):ie.style(t,n,r,o)},t,a?r:void 0,a,null)}})}),ie.fn.size=function(){return this.length},ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var an=e.jQuery,on=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=on),t&&e.jQuery===ie&&(e.jQuery=an),ie},typeof t===Ae&&(e.jQuery=e.$=ie),ie}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,r=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},handleRemote:function(r){var i,a,o,s,l,u;if(n.fire(r,"ajax:before")){if(s=r.data("with-credentials")||null,l=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,r.is("form")){i=r.attr("method"),a=r.attr("action"),o=r.serializeArray();var c=r.data("ujs:submit-button");c&&(o.push(c),r.data("ujs:submit-button",null))}else r.is(n.inputChangeSelector)?(i=r.data("method"),a=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):r.is(n.buttonClickSelector)?(i=r.data("method")||"get",a=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):(i=r.data("method"),a=n.href(r),o=r.data("params")||null);return u={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(r,"ajax:beforeSend",[e,i])?void r.trigger("ajax:send",e):!1},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(a)},s&&(u.xhrFields={withCredentials:s}),a&&(u.url=a),n.ajax(u)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(r){return!0}},handleMethod:function(r){var i=n.href(r),a=r.data("method"),o=r.attr("target"),s=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),u=e('<form method="post" action="'+i+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';l===t||s===t||n.isCrossDomain(i)||(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),o&&u.attr("target",o),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,r;n=e.is("button")?"html":"val",r=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),r!==t&&e[n](r),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,r=e.data("confirm"),i=!1;return r?(n.fire(e,"confirm")&&(i=n.confirm(r),t=n.fire(e,"confirm:complete",[i])),i&&t):!0},blankInputs:function(t,n,r){var i,a,o=e(),s=n||"input,textarea",l=t.find(s);return l.each(function(){if(i=e(this),a=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val(),!a==!r){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;o=o.add(i)}}),o.length?o:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var r=e.data("disable-with");e.data("ujs:enable-with",e.html()),r!==t&&e.html(r),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(r,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),r.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),r.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),r.delegate(n.linkClickSelector,"click.rails",function(r){var i=e(this),a=i.data("method"),o=i.data("params"),s=r.metaKey||r.ctrlKey;if(!n.allowAction(i))return n.stopEverything(r);if(!s&&i.is(n.linkDisableSelector)&&n.disableElement(i),i.data("remote")!==t){if(s&&(!a||"GET"===a)&&!o)return!0;var l=n.handleRemote(i);return l===!1?n.enableElement(i):l.error(function(){n.enableElement(i)}),!1}return i.data("method")?(n.handleMethod(i),!1):void 0}),r.delegate(n.buttonClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);r.is(n.buttonDisableSelector)&&n.disableFormElement(r);var i=n.handleRemote(r);return i===!1?n.enableFormElement(r):i.error(function(){n.enableFormElement(r)}),!1}),r.delegate(n.inputChangeSelector,"change.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),r.delegate(n.formSubmitSelector,"submit.rails",function(r){var i,a,o=e(this),s=o.data("remote")!==t;if(!n.allowAction(o))return n.stopEverything(r);if(o.attr("novalidate")==t&&(i=n.blankInputs(o,n.requiredInputSelector),i&&n.fire(o,"ajax:aborted:required",[i])))return n.stopEverything(r);if(s){if(a=n.nonBlankInputs(o,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),r.delegate(n.formInputClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),a=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",a)}),r.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),r.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.5",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),a=i.attr("data-target");a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var o=e(a);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),a="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,a)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",a=r.data();t+="Text",null==a.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==a[t]?this.options[t]:a[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),a=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:a.slide;i||r.data("bs.carousel",i=new n(this,a)),"number"==typeof t?i.to(t):o?i[o]():a.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,a=(n+i)%this.$items.length;return this.$items.eq(a)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),a=r||this.getItemForDirection(t,i),o=this.interval,s="next"==t?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var u=a[0],c=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(a)]);d&&d.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,i.addClass(s),a.addClass(s),i.one("bsTransitionEnd",function(){a.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(f)),o&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),a=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var o=e.extend({},a.data(),i.data()),s=i.attr("data-slide-to");s&&(o.interval=!1),t.call(a,o),s&&a.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),a=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&a.toggle&&/show|hide/.test(t)&&(a.toggle=!1),i||n.data("bs.collapse",i=new r(this,a)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.5",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][l]);
}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var a=t(i),o=a.data("bs.collapse"),s=o?"toggle":i.data();n.call(a,s)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(a).each(function(){var r=e(this),i=t(r),a={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",a))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",a='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.5",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var a=t(i),o=a.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(a.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),o=i.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&i.find(a).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",l=i.find(".dropdown-menu"+s);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),a=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);a||i.data("bs.modal",a=new n(this,o)),"string"==typeof t?a[t](r):o.show&&a.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),a=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),r.data());r.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(a,o,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),a="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.tooltip",i=new n(this,a)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),a=i.length;a--;){var o=i[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,a=this.tip(),o=this.getUID(this.type);this.setContent(),a.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=a[0].offsetWidth,f=a[0].offsetHeight;if(u){var h=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+f>p.bottom?"top":"top"==s&&c.top-f<p.top?"bottom":"right"==s&&c.right+d>p.width?"left":"left"==s&&c.left-d<p.left?"right":s,a.removeClass(h).addClass(s)}var g=this.getCalculatedOffset(s,c,d,f);this.applyPlacement(g,s);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,a=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top+=o,t.left+=s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=a&&(t.top=t.top+a-u);var c=this.getViewportAdjustedDelta(n,t,l,u);c.left?t.left+=c.left:t.top+=c.top;var d=/top|bottom/.test(n),f=d?2*c.left-i+l:2*c.top-a+u,h=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(f,r[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&a.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,a=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var a=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,s,a)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll,l=t.top+a-o.scroll+r;s<o.top?i.top=o.top-s:l>o.top+o.height&&(i.top=o.top+o.height-l)}else{var u=t.left-a,c=t.left+a+n;u<o.left?i.left=o.left-u:c>o.right&&(i.left=o.left+o.width-c)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),a="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.popover",i=new n(this,a)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),a="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,a)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),a=/^#./.test(i)&&e(i);return a&&a.length&&a.is(":visible")&&[[a[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,a=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=a[a.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=a[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(a[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(a),t.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=r.find("> .active"),s=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&s?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),a="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,a)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),a=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=a.top?!1:"bottom":e-r>=i+o?!1:"bottom";var s=null==this.affixed,l=s?i:a.top,u=s?o:t;return null!=n&&n>=i?"top":null!=r&&l+u>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,a=r.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(a=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var s=this.getState(o,t,i,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=e.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:o-t-a})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),function(){function e(e,t){if(e!==t){var n=null===e,r=e===b,i=e===e,a=null===t,o=t===b,s=t===t;if(e>t&&!a||!i||n&&!o&&s||r&&s)return 1;if(t>e&&!n||!s||a&&!r&&i||o&&i)return-1}return 0}function t(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function n(e,t,n){if(t!==t)return f(e,n);n-=1;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function r(e){return"function"==typeof e||!1}function i(e){return null==e?"":e+""}function a(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function o(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function s(t,n){return e(t.a,n.a)||t.b-n.b}function l(e){return Le[e]}function u(e){return Ee[e]}function c(e,t,n){return t?e=Pe[e]:n&&(e=Ge[e]),"\\"+e}function d(e){return"\\"+Ge[e]}function f(e,t,n){var r=e.length;for(t+=n?0:-1;n?t--:++t<r;){var i=e[t];if(i!==i)return t}return-1}function h(e){return!!e&&"object"==typeof e}function p(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function g(e,t){for(var n=-1,r=e.length,i=-1,a=[];++n<r;)e[n]===t&&(e[n]=P,a[++i]=n);return a}function m(e){for(var t=-1,n=e.length;++t<n&&p(e.charCodeAt(t)););return t}function v(e){for(var t=e.length;t--&&p(e.charCodeAt(t)););return t}function y(e){return Be[e]}function x(p){function Le(e){if(h(e)&&!(Ma(e)||e instanceof Fe)){if(e instanceof Be)return e;if(ei.call(e,"__chain__")&&ei.call(e,"__wrapped__"))return Rn(e)}return new Be(e)}function Ee(){}function Be(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Fe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Mi,this.__views__=[]}function Pe(){this.__data__={}}function Ge(e){var t=e?e.length:0;for(this.data={hash:mi(null),set:new ci};t--;)this.push(e[t])}function Ze(e,t){var n=e.data;return("string"==typeof t||mr(t)?n.set.has(t):n.hash[t])?0:-1}function Re(e,t){var n=-1,r=e.length;for(t||(t=Gr(r));++n<r;)t[n]=e[n];return t}function Ye(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function We(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ue(e,t){for(var n=-1,r=e.length,i=-1,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[++i]=o)}return a}function He(e,t){for(var n=-1,r=e.length,i=Gr(r);++n<r;)i[n]=t(e[n],n,e);return i}function Je(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function qe(e,t,n,r){var i=-1,a=e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Qe(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Ke(e,t,n,r){return e!==b&&ei.call(r,n)?e:t}function $e(e,t,n){for(var r=-1,i=Fa(t),a=i.length;++r<a;){var o=i[r],s=e[o],l=n(s,t[o],o,e,t);(l===l?l===s:s!==s)&&(s!==b||o in e)||(e[o]=l)}return e}function et(e,t){return null==t?e:nt(t,Fa(t),e)}function tt(e,t){for(var n=-1,r=null==e,i=!r&&Nn(e),a=i?e.length:0,o=t.length,s=Gr(o);++n<o;){var l=t[n];s[n]=i?Sn(l,a)?e[l]:b:r?b:e[l]}return s}function nt(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r];n[a]=e[a]}return n}function rt(e,t,n){var r=typeof e;return"function"==r?t===b?e:Pt(e,t,n):null==e?Lr:"object"==r?bt(e):t===b?Pr(e):wt(e,t)}function it(e,t,n,r,i,a,o){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==b)return s;if(!mr(e))return e;if(r=Ma(e)){if(s=_n(e),!t)return Re(e,s)}else{var l=ni.call(e),u=l==U;if(l!=X&&l!=G&&(!u||i))return Oe[l]?Mn(e,l,t):i?e:{};if(s=kn(u?{}:e),!t)return et(s,e)}for(a||(a=[]),o||(o=[]),i=a.length;i--;)if(a[i]==e)return o[i];return a.push(e),o.push(s),(r?Ye:ht)(e,function(r,i){s[i]=it(r,t,n,i,e,a,o)}),s}function at(e,t,n){if("function"!=typeof e)throw new Jr(F);return di(function(){e.apply(b,n)},t)}function ot(e,t){var r=e?e.length:0,i=[];if(!r)return i;var a=-1,o=In(),s=o===n,l=s&&t.length>=L&&mi&&ci?new Ge(t):null,u=t.length;l&&(o=Ze,s=!1,t=l);e:for(;++a<r;)if(l=e[a],s&&l===l){for(var c=u;c--;)if(t[c]===l)continue e;i.push(l)}else 0>o(t,l,0)&&i.push(l);return i}function st(e,t){var n=!0;return Oi(e,function(e,r,i){return n=!!t(e,r,i)}),n}function lt(e,t,n,r){var i=r,a=i;return Oi(e,function(e,o,s){o=+t(e,o,s),(n(o,i)||o===r&&o===a)&&(i=o,a=e)}),a}function ut(e,t){var n=[];return Oi(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function ct(e,t,n,r){var i;return n(e,function(e,n,a){return t(e,n,a)?(i=r?n:e,!1):void 0}),i}function dt(e,t,n,r){r||(r=[]);for(var i=-1,a=e.length;++i<a;){var o=e[i];h(o)&&Nn(o)&&(n||Ma(o)||fr(o))?t?dt(o,t,n,r):Je(r,o):n||(r[r.length]=o)}return r}function ft(e,t){Ei(e,t,Mr)}function ht(e,t){return Ei(e,t,Fa)}function pt(e,t){return Bi(e,t,Fa)}function gt(e,t){for(var n=-1,r=t.length,i=-1,a=[];++n<r;){var o=t[n];gr(e[o])&&(a[++i]=o)}return a}function mt(e,t,n){if(null!=e){n!==b&&n in Gn(e)&&(t=[n]),n=0;for(var r=t.length;null!=e&&r>n;)e=e[t[n++]];return n&&n==r?e:b}}function vt(e,t,n,r,i,a){if(e===t)e=!0;else if(null==e||null==t||!mr(e)&&!h(t))e=e!==e&&t!==t;else e:{var o=vt,s=Ma(e),l=Ma(t),u=Z,c=Z;s||(u=ni.call(e),u==G?u=X:u!=X&&(s=Ir(e))),l||(c=ni.call(t),c==G?c=X:c!=X&&Ir(t));var d=u==X,l=c==X,c=u==c;if(!c||s||d){if(!r&&(u=d&&ei.call(e,"__wrapped__"),l=l&&ei.call(t,"__wrapped__"),u||l)){e=o(u?e.value():e,l?t.value():t,n,r,i,a);break e}if(c){for(i||(i=[]),a||(a=[]),u=i.length;u--;)if(i[u]==e){e=a[u]==t;break e}i.push(e),a.push(t),e=(s?vn:xn)(e,t,o,n,r,i,a),i.pop(),a.pop()}else e=!1}else e=yn(e,t,u)}return e}function yt(e,t,n){var r=t.length,i=r,a=!n;if(null==e)return!i;for(e=Gn(e);r--;){var o=t[r];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<i;){var o=t[r],s=o[0],l=e[s],u=o[1];if(a&&o[2]){if(l===b&&!(s in e))return!1}else if(o=n?n(l,u,s):b,o===b?!vt(u,l,n,!0):!o)return!1}return!0}function xt(e,t){var n=-1,r=Nn(e)?Gr(e.length):[];return Oi(e,function(e,i,a){r[++n]=t(e,i,a);
}),r}function bt(e){var t=An(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(r!==b||n in Gn(e))}}return function(e){return yt(e,t)}}function wt(e,t){var n=Ma(e),r=Dn(e)&&t===t&&!mr(t),i=e+"";return e=Zn(e),function(a){if(null==a)return!1;var o=i;if(a=Gn(a),!(!n&&r||o in a)){if(a=1==e.length?a:mt(a,zt(e,0,-1)),null==a)return!1;o=Xn(e),a=Gn(a)}return a[o]===t?t!==b||o in a:vt(t,a[o],b,!0)}}function It(e,t,n,r,i){if(!mr(e))return e;var a=Nn(t)&&(Ma(t)||Ir(t)),o=a?b:Fa(t);return Ye(o||t,function(s,l){if(o&&(l=s,s=t[l]),h(s)){r||(r=[]),i||(i=[]);e:{for(var u=l,c=r,d=i,f=c.length,p=t[u];f--;)if(c[f]==p){e[u]=d[f];break e}var f=e[u],g=n?n(f,p,u,e,t):b,m=g===b;m&&(g=p,Nn(p)&&(Ma(p)||Ir(p))?g=Ma(f)?f:Nn(f)?Re(f):[]:xr(p)||fr(p)?g=fr(f)?_r(f):xr(f)?f:{}:m=!1),c.push(p),d.push(g),m?e[u]=It(g,p,n,c,d):(g===g?g!==f:f===f)&&(e[u]=g)}}else u=e[l],c=n?n(u,s,l,e,t):b,(d=c===b)&&(c=s),c===b&&(!a||l in e)||!d&&(c===c?c===u:u!==u)||(e[l]=c)}),e}function At(e){return function(t){return null==t?b:t[e]}}function Ct(e){var t=e+"";return e=Zn(e),function(n){return mt(n,e,t)}}function _t(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Sn(r)){var i=r;fi.call(e,r,1)}}}function kt(e,t){return e+vi(_i()*(t-e+1))}function Mt(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function zt(e,t,n){var r=-1,i=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===b||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0,n=Gr(i);++r<i;)n[r]=e[r+t];return n}function Nt(e,t){var n;return Oi(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function St(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function jt(t,n,r){var i=bn(),a=-1;return n=He(n,function(e){return i(e)}),t=xt(t,function(e){return{a:He(n,function(t){return t(e)}),b:++a,c:e}}),St(t,function(t,n){var i;e:{for(var a=-1,o=t.a,s=n.a,l=o.length,u=r.length;++a<l;)if(i=e(o[a],s[a])){if(a>=u)break e;a=r[a],i*="asc"===a||!0===a?1:-1;break e}i=t.b-n.b}return i})}function Dt(e,t){var n=0;return Oi(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function Tt(e,t){var r=-1,i=In(),a=e.length,o=i===n,s=o&&a>=L,l=s&&mi&&ci?new Ge(void 0):null,u=[];l?(i=Ze,o=!1):(s=!1,l=t?[]:u);e:for(;++r<a;){var c=e[r],d=t?t(c,r,e):c;if(o&&c===c){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),u.push(c)}else 0>i(l,d,0)&&((t||s)&&l.push(d),u.push(c))}return u}function Ot(e,t){for(var n=-1,r=t.length,i=Gr(r);++n<r;)i[n]=e[t[n]];return i}function Lt(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?zt(e,r?0:a,r?a+1:i):zt(e,r?a+1:0,r?i:a)}function Et(e,t){var n=e;n instanceof Fe&&(n=n.value());for(var r=-1,i=t.length;++r<i;)var a=t[r],n=a.func.apply(a.thisArg,Je([n],a.args));return n}function Bt(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&Ni>=i){for(;i>r;){var a=r+i>>>1,o=e[a];(n?t>=o:t>o)&&null!==o?r=a+1:i=a}return i}return Ft(e,t,Lr,n)}function Ft(e,t,n,r){t=n(t);for(var i=0,a=e?e.length:0,o=t!==t,s=null===t,l=t===b;a>i;){var u=vi((i+a)/2),c=n(e[u]),d=c!==b,f=c===c;(o?f||r:s?f&&d&&(r||null!=c):l?f&&(r||d):null==c?0:r?t>=c:t>c)?i=u+1:a=u}return Ii(a,zi)}function Pt(e,t,n){if("function"!=typeof e)return Lr;if(t===b)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)};case 5:return function(n,r,i,a,o){return e.call(t,n,r,i,a,o)}}return function(){return e.apply(t,arguments)}}function Gt(e){var t=new ai(e.byteLength);return new hi(t).set(new hi(e)),t}function Zt(e,t,n){for(var r=n.length,i=-1,a=wi(e.length-r,0),o=-1,s=t.length,l=Gr(s+a);++o<s;)l[o]=t[o];for(;++i<r;)l[n[i]]=e[i];for(;a--;)l[o++]=e[i++];return l}function Rt(e,t,n){for(var r=-1,i=n.length,a=-1,o=wi(e.length-i,0),s=-1,l=t.length,u=Gr(o+l);++a<o;)u[a]=e[a];for(o=a;++s<l;)u[o+s]=t[s];for(;++r<i;)u[o+n[r]]=e[a++];return u}function Yt(e,t){return function(n,r,i){var a=t?t():{};if(r=bn(r,i,3),Ma(n)){i=-1;for(var o=n.length;++i<o;){var s=n[i];e(a,s,r(s,i,n),n)}}else Oi(n,function(t,n,i){e(a,t,r(t,n,i),i)});return a}}function Wt(e){return cr(function(t,n){var r=-1,i=null==t?0:n.length,a=i>2?n[i-2]:b,o=i>2?n[2]:b,s=i>1?n[i-1]:b;for("function"==typeof a?(a=Pt(a,s,5),i-=2):(a="function"==typeof s?s:b,i-=a?1:0),o&&jn(n[0],n[1],o)&&(a=3>i?b:a,i=1);++r<i;)(o=n[r])&&e(t,o,a);return t})}function Ut(e,t){return function(n,r){var i=n?Gi(n):0;if(!On(i))return e(n,r);for(var a=t?i:-1,o=Gn(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Vt(e){return function(t,n,r){var i=Gn(t);r=r(t);for(var a=r.length,o=e?a:-1;e?o--:++o<a;){var s=r[o];if(!1===n(i[s],s,i))break}return t}}function Xt(e,t){function n(){return(this&&this!==Ve&&this instanceof n?r:e).apply(t,arguments)}var r=Jt(e);return n}function Ht(e){return function(t){var n=-1;t=Tr(Sr(t));for(var r=t.length,i="";++n<r;)i=e(i,t[n],n);return i}}function Jt(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ti(e.prototype),t=e.apply(n,t);return mr(t)?t:n}}function qt(e){function t(n,r,i){return i&&jn(n,r,i)&&(r=b),n=mn(n,e,b,b,b,b,b,r),n.placeholder=t.placeholder,n}return t}function Qt(e,t){return cr(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(b,n))})}function Kt(e,t){return function(n,r,i){if(i&&jn(n,r,i)&&(r=b),r=bn(r,i,3),1==r.length){i=n=Ma(n)?n:Pn(n);for(var a=r,o=-1,s=i.length,l=t,u=l;++o<s;){var c=i[o],d=+a(c);e(d,l)&&(l=d,u=c)}if(i=u,!n.length||i!==t)return i}return lt(n,r,e,t)}}function $t(e,n){return function(r,i,a){return i=bn(i,a,3),Ma(r)?(i=t(r,i,n),i>-1?r[i]:b):ct(r,i,e)}}function en(e){return function(n,r,i){return n&&n.length?(r=bn(r,i,3),t(n,r,e)):-1}}function tn(e){return function(t,n,r){return n=bn(n,r,3),ct(t,n,e,!0)}}function nn(e){return function(){for(var t,n=arguments.length,r=e?n:-1,i=0,a=Gr(n);e?r--:++r<n;){var o=a[i++]=arguments[r];if("function"!=typeof o)throw new Jr(F);!t&&Be.prototype.thru&&"wrapper"==wn(o)&&(t=new Be([],!0))}for(r=t?-1:n;++r<n;){var o=a[r],i=wn(o),s="wrapper"==i?Pi(o):b;t=s&&Tn(s[0])&&s[1]==(N|_|M|S)&&!s[4].length&&1==s[9]?t[wn(s[0])].apply(t,s[3]):1==o.length&&Tn(o)?t[i]():t.thru(o)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Ma(r)&&r.length>=L)return t.plant(r).value();for(var i=0,e=n?a[i].apply(this,e):r;++i<n;)e=a[i].call(this,e);return e}}}function rn(e,t){return function(n,r,i){return"function"==typeof r&&i===b&&Ma(n)?e(n,r):t(n,Pt(r,i,3))}}function an(e){return function(t,n,r){return("function"!=typeof n||r!==b)&&(n=Pt(n,r,3)),e(t,n,Mr)}}function on(e){return function(t,n,r){return("function"!=typeof n||r!==b)&&(n=Pt(n,r,3)),e(t,n)}}function sn(e){return function(t,n,r){var i={};return n=bn(n,r,3),ht(t,function(t,r,a){a=n(t,r,a),r=e?a:r,t=e?t:a,i[r]=t}),i}}function ln(e){return function(t,n,r){return t=i(t),(e?t:"")+fn(t,n,r)+(e?"":t)}}function un(e){var t=cr(function(n,r){var i=g(r,t.placeholder);return mn(n,e,b,r,i)});return t}function cn(e,t){return function(n,r,i,a){var o=3>arguments.length;return"function"==typeof r&&a===b&&Ma(n)?e(n,r,i,o):Mt(n,bn(r,a,4),i,o,t)}}function dn(e,t,n,r,i,a,o,s,l,u){function c(){for(var x=arguments.length,w=x,C=Gr(x);w--;)C[w]=arguments[w];if(r&&(C=Zt(C,r,i)),a&&(C=Rt(C,a,o)),p||v){var w=c.placeholder,_=g(C,w),x=x-_.length;if(u>x){var k=s?Re(s):b,x=wi(u-x,0),N=p?_:b,_=p?b:_,S=p?C:b,C=p?b:C;return t|=p?M:z,t&=~(p?z:M),m||(t&=~(I|A)),C=[e,t,n,S,N,C,_,k,l,x],k=dn.apply(b,C),Tn(e)&&Zi(k,C),k.placeholder=w,k}}if(w=f?n:this,k=h?w[e]:e,s)for(x=C.length,N=Ii(s.length,x),_=Re(C);N--;)S=s[N],C[N]=Sn(S,x)?_[S]:b;return d&&l<C.length&&(C.length=l),this&&this!==Ve&&this instanceof c&&(k=y||Jt(e)),k.apply(w,C)}var d=t&N,f=t&I,h=t&A,p=t&_,m=t&C,v=t&k,y=h?b:Jt(e);return c}function fn(e,t,n){return e=e.length,t=+t,t>e&&xi(t)?(t-=e,n=null==n?" ":n+"",jr(n,gi(t/n.length)).slice(0,t)):""}function hn(e,t,n,r){function i(){for(var t=-1,s=arguments.length,l=-1,u=r.length,c=Gr(u+s);++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++t];return(this&&this!==Ve&&this instanceof i?o:e).apply(a?n:this,c)}var a=t&I,o=Jt(e);return i}function pn(e){var t=Wr[e];return function(e,n){return(n=n===b?0:+n||0)?(n=li(10,n),t(e*n)/n):t(e)}}function gn(e){return function(t,n,r,i){var a=bn(r);return null==r&&a===rt?Bt(t,n,e):Ft(t,n,a(r,i,1),e)}}function mn(e,t,n,r,i,a,o,s){var l=t&A;if(!l&&"function"!=typeof e)throw new Jr(F);var u=r?r.length:0;if(u||(t&=~(M|z),r=i=b),u-=i?i.length:0,t&z){var c=r,d=i;r=i=b}var f=l?b:Pi(e);return n=[e,t,n,r,i,c,d,a,o,s],f&&(r=n[1],t=f[1],s=r|t,i=t==N&&r==_||t==N&&r==S&&n[7].length<=f[8]||t==(N|S)&&r==_,(N>s||i)&&(t&I&&(n[2]=f[2],s|=r&I?0:C),(r=f[3])&&(i=n[3],n[3]=i?Zt(i,r,f[4]):Re(r),n[4]=i?g(n[3],P):Re(f[4])),(r=f[5])&&(i=n[5],n[5]=i?Rt(i,r,f[6]):Re(r),n[6]=i?g(n[5],P):Re(f[6])),(r=f[7])&&(n[7]=Re(r)),t&N&&(n[8]=null==n[8]?f[8]:Ii(n[8],f[8])),null==n[9]&&(n[9]=f[9]),n[0]=f[0],n[1]=s),t=n[1],s=n[9]),n[9]=null==s?l?0:e.length:wi(s-u,0)||0,(f?Fi:Zi)(t==I?Xt(n[0],n[2]):t!=M&&t!=(I|M)||n[4].length?dn.apply(b,n):hn.apply(b,n),n)}function vn(e,t,n,r,i,a,o){var s=-1,l=e.length,u=t.length;if(l!=u&&(!i||l>=u))return!1;for(;++s<l;){var c=e[s],u=t[s],d=r?r(i?u:c,i?c:u,s):b;if(d!==b){if(d)continue;return!1}if(i){if(!Qe(t,function(e){return c===e||n(c,e,r,i,a,o)}))return!1}else if(c!==u&&!n(c,u,r,i,a,o))return!1}return!0}function yn(e,t,n){switch(n){case R:case Y:return+e==+t;case W:return e.name==t.name&&e.message==t.message;case V:return e!=+e?t!=+t:e==+t;case H:case J:return e==t+""}return!1}function xn(e,t,n,r,i,a,o){var s=Fa(e),l=s.length,u=Fa(t).length;if(l!=u&&!i)return!1;for(u=l;u--;){var c=s[u];if(!(i?c in t:ei.call(t,c)))return!1}for(var d=i;++u<l;){var c=s[u],f=e[c],h=t[c],p=r?r(i?h:f,i?f:h,c):b;if(p===b?!n(f,h,r,i,a,o):!p)return!1;d||(d="constructor"==c)}return d||(n=e.constructor,r=t.constructor,!(n!=r&&"constructor"in e&&"constructor"in t)||"function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)?!0:!1}function bn(e,t,n){var r=Le.callback||Or,r=r===Or?rt:r;return n?r(e,t,n):r}function wn(e){for(var t=e.name+"",n=Di[t],r=n?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function In(e,t,r){var i=Le.indexOf||Vn,i=i===Vn?n:i;return e?i(e,t,r):i}function An(e){e=zr(e);for(var t=e.length;t--;){var n=e[t][1];e[t][2]=n===n&&!mr(n)}return e}function Cn(e,t){var n=null==e?b:e[t];return vr(n)?n:b}function _n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ei.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function kn(e){return e=e.constructor,"function"==typeof e&&e instanceof e||(e=Vr),new e}function Mn(e,t,n){var r=e.constructor;switch(t){case q:return Gt(e);case R:case Y:return new r(+e);case Q:case K:case $:case ee:case te:case ne:case re:case ie:case ae:return t=e.buffer,new r(n?Gt(t):t,e.byteOffset,e.length);case V:case J:return new r(e);case H:var i=new r(e.source,Ce.exec(e));i.lastIndex=e.lastIndex}return i}function zn(e,t,n){return null==e||Dn(t,e)||(t=Zn(t),e=1==t.length?e:mt(e,zt(t,0,-1)),t=Xn(t)),t=null==e?e:e[t],null==t?b:t.apply(e,n)}function Nn(e){return null!=e&&On(Gi(e))}function Sn(e,t){return e="number"==typeof e||Me.test(e)?+e:-1,t=null==t?Si:t,e>-1&&0==e%1&&t>e}function jn(e,t,n){if(!mr(n))return!1;var r=typeof t;return("number"==r?Nn(n)&&Sn(t,n.length):"string"==r&&t in n)?(t=n[t],e===e?e===t:t!==t):!1}function Dn(e,t){var n=typeof e;return"string"==n&&ve.test(e)||"number"==n?!0:Ma(e)?!1:!me.test(e)||null!=t&&e in Gn(t)}function Tn(e){var t=wn(e),n=Le[t];return"function"==typeof n&&t in Fe.prototype?e===n?!0:(t=Pi(n),!!t&&e===t[0]):!1}function On(e){return"number"==typeof e&&e>-1&&0==e%1&&Si>=e}function Ln(e,t){return e===b?t:za(e,t,Ln)}function En(e,t){e=Gn(e);for(var n=-1,r=t.length,i={};++n<r;){var a=t[n];a in e&&(i[a]=e[a])}return i}function Bn(e,t){var n={};return ft(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function Fn(e){for(var t=Mr(e),n=t.length,r=n&&e.length,i=!!r&&On(r)&&(Ma(e)||fr(e)),a=-1,o=[];++a<n;){var s=t[a];(i&&Sn(s,r)||ei.call(e,s))&&o.push(s)}return o}function Pn(e){return null==e?[]:Nn(e)?mr(e)?e:Vr(e):Nr(e)}function Gn(e){return mr(e)?e:Vr(e)}function Zn(e){if(Ma(e))return e;var t=[];return i(e).replace(ye,function(e,n,r,i){t.push(r?i.replace(Ie,"$1"):n||e)}),t}function Rn(e){return e instanceof Fe?e.clone():new Be(e.__wrapped__,e.__chain__,Re(e.__actions__))}function Yn(e,t,n){return e&&e.length?((n?jn(e,t,n):null==t)&&(t=1),zt(e,0>t?0:t)):[]}function Wn(e,t,n){var r=e?e.length:0;return r?((n?jn(e,t,n):null==t)&&(t=1),t=r-(+t||0),zt(e,0,0>t?0:t)):[]}function Un(e){return e?e[0]:b}function Vn(e,t,r){var i=e?e.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?wi(i+r,0):r;else if(r)return r=Bt(e,t),i>r&&(t===t?t===e[r]:e[r]!==e[r])?r:-1;return n(e,t,r||0)}function Xn(e){var t=e?e.length:0;return t?e[t-1]:b}function Hn(e){return Yn(e,1)}function Jn(e,t,r,i){if(!e||!e.length)return[];null!=t&&"boolean"!=typeof t&&(i=r,r=jn(e,t,i)?b:t,t=!1);var a=bn();if((null!=r||a!==rt)&&(r=a(r,i,3)),t&&In()===n){t=r;var o;r=-1,i=e.length;for(var a=-1,s=[];++r<i;){var l=e[r],u=t?t(l,r,e):l;r&&o===u||(o=u,s[++a]=l)}e=s}else e=Tt(e,r);return e}function qn(e){if(!e||!e.length)return[];var t=-1,n=0;e=Ue(e,function(e){return Nn(e)?(n=wi(e.length,n),!0):void 0});for(var r=Gr(n);++t<n;)r[t]=He(e,At(t));return r}function Qn(e,t,n){return e&&e.length?(e=qn(e),null==t?e:(t=Pt(t,n,4),He(e,function(e){return qe(e,t,b,!0)}))):[]}function Kn(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Ma(e[0])||(t=[]);++n<r;){var a=e[n];t?i[a]=t[n]:a&&(i[a[0]]=a[1])}return i}function $n(e){return e=Le(e),e.__chain__=!0,e}function er(e,t,n){return t.call(n,e)}function tr(e,t,n){var r=Ma(e)?We:st;return n&&jn(e,t,n)&&(t=b),("function"!=typeof t||n!==b)&&(t=bn(t,n,3)),r(e,t)}function nr(e,t,n){var r=Ma(e)?Ue:ut;return t=bn(t,n,3),r(e,t)}function rr(e,t,n,r){var i=e?Gi(e):0;return On(i)||(e=Nr(e),i=e.length),n="number"!=typeof n||r&&jn(t,n,r)?0:0>n?wi(i+n,0):n||0,"string"==typeof e||!Ma(e)&&wr(e)?i>=n&&-1<e.indexOf(t,n):!!i&&-1<In(e,t,n)}function ir(e,t,n){var r=Ma(e)?He:xt;return t=bn(t,n,3),r(e,t)}function ar(e,t,n){if(n?jn(e,t,n):null==t){e=Pn(e);var r=e.length;return r>0?e[kt(0,r-1)]:b}n=-1,e=Cr(e);var r=e.length,i=r-1;for(t=Ii(0>t?0:+t||0,r);++n<t;){var r=kt(n,i),a=e[r];e[r]=e[n],e[n]=a}return e.length=t,e}function or(e,t,n){var r=Ma(e)?Qe:Nt;return n&&jn(e,t,n)&&(t=b),("function"!=typeof t||n!==b)&&(t=bn(t,n,3)),r(e,t)}function sr(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Jr(F);var r=e;e=t,t=r}return function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=b),n}}function lr(e,t,n){function r(t,n){n&&oi(n),l=f=h=b,t&&(p=ha(),u=e.apply(d,s),f||l||(s=d=b))}function i(){var e=t-(ha()-c);0>=e||e>t?r(h,l):f=di(i,e)}function a(){r(m,f)}function o(){if(s=arguments,c=ha(),d=this,h=m&&(f||!v),!1===g)var n=v&&!f;else{l||v||(p=c);var r=g-(c-p),o=0>=r||r>g;o?(l&&(l=oi(l)),p=c,u=e.apply(d,s)):l||(l=di(a,r))}return o&&f?f=oi(f):f||t===g||(f=di(i,t)),n&&(o=!0,u=e.apply(d,s)),!o||f||l||(s=d=b),u}var s,l,u,c,d,f,h,p=0,g=!1,m=!0;if("function"!=typeof e)throw new Jr(F);if(t=0>t?0:+t||0,!0===n)var v=!0,m=!1;else mr(n)&&(v=!!n.leading,g="maxWait"in n&&wi(+n.maxWait||0,t),m="trailing"in n?!!n.trailing:m);return o.cancel=function(){f&&oi(f),l&&oi(l),p=0,l=f=h=b},o}function ur(e,t){function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;return a.has(i)?a.get(i):(r=e.apply(this,r),n.cache=a.set(i,r),r)}if("function"!=typeof e||t&&"function"!=typeof t)throw new Jr(F);return n.cache=new ur.Cache,n}function cr(e,t){if("function"!=typeof e)throw new Jr(F);return t=wi(t===b?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=wi(n.length-t,0),a=Gr(i);++r<i;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}for(i=Gr(t+1),r=-1;++r<t;)i[r]=n[r];return i[t]=a,e.apply(this,i)}}function dr(e,t){return e>t}function fr(e){return h(e)&&Nn(e)&&ei.call(e,"callee")&&!ui.call(e,"callee")}function hr(e,t,n,r){return r=(n="function"==typeof n?Pt(n,r,3):b)?n(e,t):b,r===b?vt(e,t,n):!!r}function pr(e){return h(e)&&"string"==typeof e.message&&ni.call(e)==W}function gr(e){return mr(e)&&ni.call(e)==U}function mr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function vr(e){return null==e?!1:gr(e)?ii.test($r.call(e)):h(e)&&ke.test(e)}function yr(e){return"number"==typeof e||h(e)&&ni.call(e)==V}function xr(e){var t;if(!h(e)||ni.call(e)!=X||fr(e)||!(ei.call(e,"constructor")||(t=e.constructor,"function"!=typeof t||t instanceof t)))return!1;var n;return ft(e,function(e,t){n=t}),n===b||ei.call(e,n)}function br(e){return mr(e)&&ni.call(e)==H}function wr(e){return"string"==typeof e||h(e)&&ni.call(e)==J}function Ir(e){return h(e)&&On(e.length)&&!!Te[ni.call(e)]}function Ar(e,t){return t>e}function Cr(e){var t=e?Gi(e):0;return On(t)?t?Re(e):[]:Nr(e)}function _r(e){return nt(e,Mr(e))}function kr(e){return gt(e,Mr(e))}function Mr(e){if(null==e)return[];mr(e)||(e=Vr(e));for(var t=e.length,t=t&&On(t)&&(Ma(e)||fr(e))&&t||0,n=e.constructor,r=-1,n="function"==typeof n&&n.prototype===e,i=Gr(t),a=t>0;++r<t;)i[r]=r+"";for(var o in e)a&&Sn(o,t)||"constructor"==o&&(n||!ei.call(e,o))||i.push(o);return i}function zr(e){e=Gn(e);for(var t=-1,n=Fa(e),r=n.length,i=Gr(r);++t<r;){var a=n[t];i[t]=[a,e[a]]}return i}function Nr(e){return Ot(e,Fa(e))}function Sr(e){return(e=i(e))&&e.replace(ze,l).replace(we,"")}function jr(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!xi(t))return n;do t%2&&(n+=e),t=vi(t/2),e+=e;while(t);return n}function Dr(e,t,n){var r=e;return(e=i(e))?(n?jn(r,t,n):null==t)?e.slice(m(e),v(e)+1):(t+="",e.slice(a(e,t),o(e,t)+1)):e}function Tr(e,t,n){return n&&jn(e,t,n)&&(t=b),e=i(e),e.match(t||je)||[]}function Or(e,t,n){return n&&jn(e,t,n)&&(t=b),h(e)?Er(e):rt(e,t)}function Lr(e){return e}function Er(e){return bt(it(e,!0))}function Br(e,t,n){if(null==n){var r=mr(t),i=r?Fa(t):b;((i=i&&i.length?gt(t,i):b)?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=gt(t,Fa(t)));var a=!0,r=-1,o=gr(e),s=i.length;!1===n?a=!1:mr(n)&&"chain"in n&&(a=n.chain);for(;++r<s;){n=i[r];var l=t[n];e[n]=l,o&&(e.prototype[n]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__);return(r.__actions__=Re(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,Je([this.value()],arguments))}}(l))}return e}function Fr(){}function Pr(e){return Dn(e)?At(e):Ct(e)}p=p?Xe.defaults(Ve.Object(),p,Xe.pick(Ve,De)):Ve;var Gr=p.Array,Zr=p.Date,Rr=p.Error,Yr=p.Function,Wr=p.Math,Ur=p.Number,Vr=p.Object,Xr=p.RegExp,Hr=p.String,Jr=p.TypeError,qr=Gr.prototype,Qr=Vr.prototype,Kr=Hr.prototype,$r=Yr.prototype.toString,ei=Qr.hasOwnProperty,ti=0,ni=Qr.toString,ri=Ve._,ii=Xr("^"+$r.call(ei).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=p.ArrayBuffer,oi=p.clearTimeout,si=p.parseFloat,li=Wr.pow,ui=Qr.propertyIsEnumerable,ci=Cn(p,"Set"),di=p.setTimeout,fi=qr.splice,hi=p.Uint8Array,pi=Cn(p,"WeakMap"),gi=Wr.ceil,mi=Cn(Vr,"create"),vi=Wr.floor,yi=Cn(Gr,"isArray"),xi=p.isFinite,bi=Cn(Vr,"keys"),wi=Wr.max,Ii=Wr.min,Ai=Cn(Zr,"now"),Ci=p.parseInt,_i=Wr.random,ki=Ur.NEGATIVE_INFINITY,Mi=Ur.POSITIVE_INFINITY,zi=4294967294,Ni=2147483647,Si=9007199254740991,ji=pi&&new pi,Di={};Le.support={},Le.templateSettings={escape:he,evaluate:pe,interpolate:ge,variable:"",imports:{_:Le}};var Ti=function(){function e(){}return function(t){if(mr(t)){e.prototype=t;var n=new e;e.prototype=b}return n||{}}}(),Oi=Ut(ht),Li=Ut(pt,!0),Ei=Vt(),Bi=Vt(!0),Fi=ji?function(e,t){return ji.set(e,t),e}:Lr,Pi=ji?function(e){return ji.get(e)}:Fr,Gi=At("length"),Zi=function(){var e=0,t=0;return function(n,r){var i=ha(),a=O-(i-t);if(t=i,a>0){if(++e>=T)return n}else e=0;return Fi(n,r)}}(),Ri=cr(function(e,t){return h(e)&&Nn(e)?ot(e,dt(t,!1,!0)):[]}),Yi=en(),Wi=en(!0),Ui=cr(function(e){for(var t=e.length,r=t,i=Gr(c),a=In(),o=a===n,s=[];r--;){var l=e[r]=Nn(l=e[r])?l:[];i[r]=o&&120<=l.length&&mi&&ci?new Ge(r&&l):null}var o=e[0],u=-1,c=o?o.length:0,d=i[0];e:for(;++u<c;)if(l=o[u],0>(d?Ze(d,l):a(s,l,0))){for(r=t;--r;){var f=i[r];if(0>(f?Ze(f,l):a(e[r],l,0)))continue e}d&&d.push(l),s.push(l)}return s}),Vi=cr(function(t,n){n=dt(n);var r=tt(t,n);return _t(t,n.sort(e)),r}),Xi=gn(),Hi=gn(!0),Ji=cr(function(e){return Tt(dt(e,!1,!0))}),qi=cr(function(e,t){return Nn(e)?ot(e,t):[]}),Qi=cr(qn),Ki=cr(function(e){var t=e.length,n=t>2?e[t-2]:b,r=t>1?e[t-1]:b;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):b,r=b),e.length=t,Qn(e,n,r)}),$i=cr(function(e){return e=dt(e),this.thru(function(t){t=Ma(t)?t:[Gn(t)];for(var n=e,r=-1,i=t.length,a=-1,o=n.length,s=Gr(i+o);++r<i;)s[r]=t[r];for(;++a<o;)s[r++]=n[a];return s})}),ea=cr(function(e,t){return tt(e,dt(t))}),ta=Yt(function(e,t,n){ei.call(e,n)?++e[n]:e[n]=1}),na=$t(Oi),ra=$t(Li,!0),ia=rn(Ye,Oi),aa=rn(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},Li),oa=Yt(function(e,t,n){ei.call(e,n)?e[n].push(t):e[n]=[t]}),sa=Yt(function(e,t,n){e[n]=t}),la=cr(function(e,t,n){var r=-1,i="function"==typeof t,a=Dn(t),o=Nn(e)?Gr(e.length):[];return Oi(e,function(e){var s=i?t:a&&null!=e?e[t]:b;o[++r]=s?s.apply(e,n):zn(e,t,n)}),o}),ua=Yt(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ca=cn(qe,Oi),da=cn(function(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n},Li),fa=cr(function(e,t){if(null==e)return[];var n=t[2];return n&&jn(t[0],t[1],n)&&(t.length=1),jt(e,dt(t),[])}),ha=Ai||function(){return(new Zr).getTime()},pa=cr(function(e,t,n){var r=I;if(n.length)var i=g(n,pa.placeholder),r=r|M;return mn(e,r,t,n,i)}),ga=cr(function(e,t){t=t.length?dt(t):kr(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=mn(e[i],I,e)}return e}),ma=cr(function(e,t,n){var r=I|A;if(n.length)var i=g(n,ma.placeholder),r=r|M;return mn(t,r,e,n,i)}),va=qt(_),ya=qt(k),xa=cr(function(e,t){return at(e,1,t)}),ba=cr(function(e,t,n){return at(e,t,n)}),wa=nn(),Ia=nn(!0),Aa=cr(function(e,t){if(t=dt(t),"function"!=typeof e||!We(t,r))throw new Jr(F);var n=t.length;return cr(function(r){for(var i=Ii(r.length,n);i--;)r[i]=t[i](r[i]);return e.apply(this,r)})}),Ca=un(M),_a=un(z),ka=cr(function(e,t){return mn(e,S,b,b,b,dt(t))}),Ma=yi||function(e){return h(e)&&On(e.length)&&ni.call(e)==Z},za=Wt(It),Na=Wt(function(e,t,n){return n?$e(e,t,n):et(e,t)}),Sa=Qt(Na,function(e,t){return e===b?t:e}),ja=Qt(za,Ln),Da=tn(ht),Ta=tn(pt),Oa=an(Ei),La=an(Bi),Ea=on(ht),Ba=on(pt),Fa=bi?function(e){var t=null==e?b:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Nn(e)?Fn(e):mr(e)?bi(e):[]}:Fn,Pa=sn(!0),Ga=sn(),Za=cr(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=He(dt(t),Hr),En(e,ot(Mr(e),t));var n=Pt(t[0],t[1],3);return Bn(e,function(e,t,r){return!n(e,t,r)})}),Ra=cr(function(e,t){return null==e?{}:"function"==typeof t[0]?Bn(e,Pt(t[0],t[1],3)):En(e,dt(t))}),Ya=Ht(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Wa=Ht(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ua=ln(),Va=ln(!0),Xa=Ht(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ha=Ht(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ja=cr(function(e,t){try{return e.apply(b,t)}catch(n){return pr(n)?n:new Rr(n)}}),qa=cr(function(e,t){return function(n){return zn(n,e,t)}}),Qa=cr(function(e,t){return function(n){return zn(e,n,t)}}),Ka=pn("ceil"),$a=pn("floor"),eo=Kt(dr,ki),to=Kt(Ar,Mi),no=pn("round");return Le.prototype=Ee.prototype,Be.prototype=Ti(Ee.prototype),Be.prototype.constructor=Be,Fe.prototype=Ti(Ee.prototype),Fe.prototype.constructor=Fe,Pe.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},Pe.prototype.get=function(e){return"__proto__"==e?b:this.__data__[e]},Pe.prototype.has=function(e){return"__proto__"!=e&&ei.call(this.__data__,e)},Pe.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},Ge.prototype.push=function(e){var t=this.data;"string"==typeof e||mr(e)?t.set.add(e):t.hash[e]=!0},ur.Cache=Pe,Le.after=function(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Jr(F);var n=e;e=t,t=n}return e=xi(e=+e)?e:0,function(){return 1>--e?t.apply(this,arguments):void 0}},Le.ary=function(e,t,n){return n&&jn(e,t,n)&&(t=b),t=e&&null==t?e.length:wi(+t||0,0),mn(e,N,b,b,b,b,t)},Le.assign=Na,Le.at=ea,Le.before=sr,Le.bind=pa,Le.bindAll=ga,Le.bindKey=ma,Le.callback=Or,Le.chain=$n,Le.chunk=function(e,t,n){t=(n?jn(e,t,n):null==t)?1:wi(vi(t)||1,1),n=0;for(var r=e?e.length:0,i=-1,a=Gr(gi(r/t));r>n;)a[++i]=zt(e,n,n+=t);return a},Le.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var a=e[t];a&&(i[++r]=a)}return i},Le.constant=function(e){return function(){return e}},Le.countBy=ta,Le.create=function(e,t,n){var r=Ti(e);return n&&jn(e,t,n)&&(t=b),t?et(r,t):r},Le.curry=va,Le.curryRight=ya,Le.debounce=lr,Le.defaults=Sa,Le.defaultsDeep=ja,Le.defer=xa,Le.delay=ba,Le.difference=Ri,Le.drop=Yn,Le.dropRight=Wn,Le.dropRightWhile=function(e,t,n){return e&&e.length?Lt(e,bn(t,n,3),!0,!0):[]},Le.dropWhile=function(e,t,n){return e&&e.length?Lt(e,bn(t,n,3),!0):[]},Le.fill=function(e,t,n,r){var i=e?e.length:0;if(!i)return[];for(n&&"number"!=typeof n&&jn(e,t,n)&&(n=0,r=i),i=e.length,n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===b||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)e[n++]=t;return e},Le.filter=nr,Le.flatten=function(e,t,n){var r=e?e.length:0;return n&&jn(e,t,n)&&(t=!1),r?dt(e,t):[]},Le.flattenDeep=function(e){return e&&e.length?dt(e,!0):[]},Le.flow=wa,Le.flowRight=Ia,Le.forEach=ia,Le.forEachRight=aa,Le.forIn=Oa,Le.forInRight=La,Le.forOwn=Ea,Le.forOwnRight=Ba,Le.functions=kr,Le.groupBy=oa,Le.indexBy=sa,Le.initial=function(e){return Wn(e,1)},Le.intersection=Ui,Le.invert=function(e,t,n){n&&jn(e,t,n)&&(t=b),n=-1;for(var r=Fa(e),i=r.length,a={};++n<i;){var o=r[n],s=e[o];t?ei.call(a,s)?a[s].push(o):a[s]=[o]:a[s]=o}return a},Le.invoke=la,Le.keys=Fa,Le.keysIn=Mr,Le.map=ir,Le.mapKeys=Pa,Le.mapValues=Ga,Le.matches=Er,Le.matchesProperty=function(e,t){return wt(e,it(t,!0))},Le.memoize=ur,Le.merge=za,Le.method=qa,Le.methodOf=Qa,Le.mixin=Br,Le.modArgs=Aa,Le.negate=function(e){if("function"!=typeof e)throw new Jr(F);return function(){return!e.apply(this,arguments)}},Le.omit=Za,Le.once=function(e){return sr(2,e)},Le.pairs=zr,Le.partial=Ca,Le.partialRight=_a,Le.partition=ua,Le.pick=Ra,Le.pluck=function(e,t){return ir(e,Pr(t))},Le.property=Pr,Le.propertyOf=function(e){return function(t){return mt(e,Zn(t),t+"")}},Le.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=In(),i=e.length;++n<i;)for(var a=0,o=e[n];-1<(a=r(t,o,a));)fi.call(t,a,1);return t},Le.pullAt=Vi,Le.range=function(e,t,n){n&&jn(e,t,n)&&(t=n=b),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;var r=-1;t=wi(gi((t-e)/(n||1)),0);for(var i=Gr(t);++r<t;)i[r]=e,e+=n;return i},Le.rearg=ka,Le.reject=function(e,t,n){var r=Ma(e)?Ue:ut;return t=bn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},Le.remove=function(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,a=[],o=e.length;for(t=bn(t,n,3);++i<o;)n=e[i],t(n,i,e)&&(r.push(n),a.push(i));return _t(e,a),r},Le.rest=Hn,Le.restParam=cr,Le.set=function(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||Dn(t,e)?[r]:Zn(t);for(var r=-1,i=t.length,a=i-1,o=e;null!=o&&++r<i;){var s=t[r];mr(o)&&(r==a?o[s]=n:null==o[s]&&(o[s]=Sn(t[r+1])?[]:{})),o=o[s]}return e},Le.shuffle=function(e){return ar(e,Mi)},Le.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&jn(e,t,n)&&(t=0,n=r),zt(e,t,n)):[]},Le.sortBy=function(e,t,n){if(null==e)return[];n&&jn(e,t,n)&&(t=b);var r=-1;return t=bn(t,n,3),e=xt(e,function(e,n,i){return{a:t(e,n,i),b:++r,c:e}}),St(e,s)},Le.sortByAll=fa,Le.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&jn(t,n,r)&&(n=b),Ma(t)||(t=null==t?[]:[t]),Ma(n)||(n=null==n?[]:[n]),jt(e,t,n))},Le.spread=function(e){if("function"!=typeof e)throw new Jr(F);return function(t){return e.apply(this,t)}},Le.take=function(e,t,n){return e&&e.length?((n?jn(e,t,n):null==t)&&(t=1),zt(e,0,0>t?0:t)):[]},Le.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?jn(e,t,n):null==t)&&(t=1),t=r-(+t||0),zt(e,0>t?0:t)):[]},Le.takeRightWhile=function(e,t,n){return e&&e.length?Lt(e,bn(t,n,3),!1,!0):[]},Le.takeWhile=function(e,t,n){return e&&e.length?Lt(e,bn(t,n,3)):[]},Le.tap=function(e,t,n){return t.call(n,e),e},Le.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Jr(F);return!1===n?r=!1:mr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),lr(e,t,{leading:r,maxWait:+t,trailing:i})},Le.thru=er,Le.times=function(e,t,n){if(e=vi(e),1>e||!xi(e))return[];var r=-1,i=Gr(Ii(e,4294967295));for(t=Pt(t,n,1);++r<e;)4294967295>r?i[r]=t(r):t(r);return i},Le.toArray=Cr,Le.toPlainObject=_r,Le.transform=function(e,t,n,r){var i=Ma(e)||Ir(e);return t=bn(t,r,4),null==n&&(i||mr(e)?(r=e.constructor,n=i?Ma(e)?new r:[]:Ti(gr(r)?r.prototype:b)):n={}),(i?Ye:ht)(e,function(e,r,i){return t(n,e,r,i)}),n},Le.union=Ji,Le.uniq=Jn,Le.unzip=qn,Le.unzipWith=Qn,Le.values=Nr,Le.valuesIn=function(e){return Ot(e,Mr(e))},Le.where=function(e,t){return nr(e,bt(t))},Le.without=qi,Le.wrap=function(e,t){return t=null==t?Lr:t,mn(t,M,b,[e],[])},Le.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Nn(n))var r=r?Je(ot(r,n),ot(n,r)):n}return r?Tt(r):[]},Le.zip=Qi,Le.zipObject=Kn,Le.zipWith=Ki,Le.backflow=Ia,Le.collect=ir,Le.compose=Ia,Le.each=ia,Le.eachRight=aa,Le.extend=Na,Le.iteratee=Or,Le.methods=kr,Le.object=Kn,Le.select=nr,Le.tail=Hn,Le.unique=Jn,Br(Le,Le),Le.add=function(e,t){return(+e||0)+(+t||0)},Le.attempt=Ja,Le.camelCase=Ya,Le.capitalize=function(e){return(e=i(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Le.ceil=Ka,Le.clone=function(e,t,n,r){return t&&"boolean"!=typeof t&&jn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?it(e,t,Pt(n,r,3)):it(e,t)},Le.cloneDeep=function(e,t,n){return"function"==typeof t?it(e,!0,Pt(t,n,3)):it(e,!0)},Le.deburr=Sr,Le.endsWith=function(e,t,n){e=i(e),t+="";var r=e.length;return n=n===b?r:Ii(0>n?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n},Le.escape=function(e){return(e=i(e))&&fe.test(e)?e.replace(ce,u):e},Le.escapeRegExp=function(e){return(e=i(e))&&be.test(e)?e.replace(xe,c):e||"(?:)"},Le.every=tr,Le.find=na,Le.findIndex=Yi,Le.findKey=Da,Le.findLast=ra,Le.findLastIndex=Wi,Le.findLastKey=Ta,Le.findWhere=function(e,t){return na(e,bt(t))},Le.first=Un,Le.floor=$a,Le.get=function(e,t,n){return e=null==e?b:mt(e,Zn(t),t+""),e===b?n:e},Le.gt=dr,Le.gte=function(e,t){return e>=t},Le.has=function(e,t){if(null==e)return!1;var n=ei.call(e,t);if(!n&&!Dn(t)){if(t=Zn(t),e=1==t.length?e:mt(e,zt(t,0,-1)),null==e)return!1;t=Xn(t),n=ei.call(e,t)}return n||On(e.length)&&Sn(t,e.length)&&(Ma(e)||fr(e))},Le.identity=Lr,Le.includes=rr,Le.indexOf=Vn,Le.inRange=function(e,t,n){return t=+t||0,n===b?(n=t,t=0):n=+n||0,e>=Ii(t,n)&&e<wi(t,n)},Le.isArguments=fr,Le.isArray=Ma,Le.isBoolean=function(e){return!0===e||!1===e||h(e)&&ni.call(e)==R},Le.isDate=function(e){return h(e)&&ni.call(e)==Y},Le.isElement=function(e){return!!e&&1===e.nodeType&&h(e)&&!xr(e)},Le.isEmpty=function(e){return null==e?!0:Nn(e)&&(Ma(e)||wr(e)||fr(e)||h(e)&&gr(e.splice))?!e.length:!Fa(e).length},Le.isEqual=hr,Le.isError=pr,Le.isFinite=function(e){return"number"==typeof e&&xi(e)},Le.isFunction=gr,Le.isMatch=function(e,t,n,r){return n="function"==typeof n?Pt(n,r,3):b,yt(e,An(t),n)},Le.isNaN=function(e){return yr(e)&&e!=+e},Le.isNative=vr,Le.isNull=function(e){return null===e},Le.isNumber=yr,Le.isObject=mr,Le.isPlainObject=xr,Le.isRegExp=br,Le.isString=wr,Le.isTypedArray=Ir,Le.isUndefined=function(e){return e===b},Le.kebabCase=Wa,Le.last=Xn,Le.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?wi(r+n,0):Ii(n||0,r-1))+1;else if(n)return i=Bt(e,t,!0)-1,e=e[i],(t===t?t===e:e!==e)?i:-1;if(t!==t)return f(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},Le.lt=Ar,Le.lte=function(e,t){return t>=e},Le.max=eo,Le.min=to,Le.noConflict=function(){return Ve._=ri,this},Le.noop=Fr,Le.now=ha,Le.pad=function(e,t,n){e=i(e),t=+t;var r=e.length;return t>r&&xi(t)?(r=(t-r)/2,t=vi(r),r=gi(r),n=fn("",r,n),n.slice(0,t)+e+n):e},Le.padLeft=Ua,Le.padRight=Va,Le.parseInt=function(e,t,n){return(n?jn(e,t,n):null==t)?t=0:t&&(t=+t),e=Dr(e),Ci(e,t||(_e.test(e)?16:10))},Le.random=function(e,t,n){n&&jn(e,t,n)&&(t=n=b);var r=null==e,i=null==t;return null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=_i(),Ii(e+n*(t-e+si("1e-"+((n+"").length-1))),t)):kt(e,t)},Le.reduce=ca,
Le.reduceRight=da,Le.repeat=jr,Le.result=function(e,t,n){var r=null==e?b:e[t];return r===b&&(null==e||Dn(t,e)||(t=Zn(t),e=1==t.length?e:mt(e,zt(t,0,-1)),r=null==e?b:e[Xn(t)]),r=r===b?n:r),gr(r)?r.call(e):r},Le.round=no,Le.runInContext=x,Le.size=function(e){var t=e?Gi(e):0;return On(t)?t:Fa(e).length},Le.snakeCase=Xa,Le.some=or,Le.sortedIndex=Xi,Le.sortedLastIndex=Hi,Le.startCase=Ha,Le.startsWith=function(e,t,n){return e=i(e),n=null==n?0:Ii(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Le.sum=function(e,t,n){if(n&&jn(e,t,n)&&(t=b),t=bn(t,n,3),1==t.length){e=Ma(e)?e:Pn(e),n=e.length;for(var r=0;n--;)r+=+t(e[n])||0;e=r}else e=Dt(e,t);return e},Le.template=function(e,t,n){var r=Le.templateSettings;n&&jn(e,t,n)&&(t=n=b),e=i(e),t=$e(et({},n||t),r,Ke),n=$e(et({},t.imports),r.imports,Ke);var a,o,s=Fa(n),l=Ot(n,s),u=0;n=t.interpolate||Ne;var c="__p+='";n=Xr((t.escape||Ne).source+"|"+n.source+"|"+(n===ge?Ae:Ne).source+"|"+(t.evaluate||Ne).source+"|$","g");var f="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,i,s,l){return r||(r=i),c+=e.slice(u,l).replace(Se,d),n&&(a=!0,c+="'+__e("+n+")+'"),s&&(o=!0,c+="';"+s+";\n__p+='"),r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),u=l+t.length,t}),c+="';",(t=t.variable)||(c="with(obj){"+c+"}"),c=(o?c.replace(oe,""):c).replace(se,"$1").replace(le,"$1;"),c="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(a?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",t=Ja(function(){return Yr(s,f+"return "+c).apply(b,l)}),t.source=c,pr(t))throw t;return t},Le.trim=Dr,Le.trimLeft=function(e,t,n){var r=e;return(e=i(e))?e.slice((n?jn(r,t,n):null==t)?m(e):a(e,t+"")):e},Le.trimRight=function(e,t,n){var r=e;return(e=i(e))?(n?jn(r,t,n):null==t)?e.slice(0,v(e)+1):e.slice(0,o(e,t+"")+1):e},Le.trunc=function(e,t,n){n&&jn(e,t,n)&&(t=b);var r=j;if(n=D,null!=t)if(mr(t)){var a="separator"in t?t.separator:a,r="length"in t?+t.length||0:r;n="omission"in t?i(t.omission):n}else r=+t||0;if(e=i(e),r>=e.length)return e;if(r-=n.length,1>r)return n;if(t=e.slice(0,r),null==a)return t+n;if(br(a)){if(e.slice(r).search(a)){var o,s=e.slice(0,r);for(a.global||(a=Xr(a.source,(Ce.exec(a)||"")+"g")),a.lastIndex=0;e=a.exec(s);)o=e.index;t=t.slice(0,null==o?r:o)}}else e.indexOf(a,r)!=r&&(a=t.lastIndexOf(a),a>-1&&(t=t.slice(0,a)));return t+n},Le.unescape=function(e){return(e=i(e))&&de.test(e)?e.replace(ue,y):e},Le.uniqueId=function(e){var t=++ti;return i(e)+t},Le.words=Tr,Le.all=tr,Le.any=or,Le.contains=rr,Le.eq=hr,Le.detect=na,Le.foldl=ca,Le.foldr=da,Le.head=Un,Le.include=rr,Le.inject=ca,Br(Le,function(){var e={};return ht(Le,function(t,n){Le.prototype[n]||(e[n]=t)}),e}(),!1),Le.sample=ar,Le.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ar(t,e)}):ar(this.value())},Le.VERSION=w,Ye("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Le[e].placeholder=Le}),Ye(["drop","take"],function(e,t){Fe.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new Fe(this);n=null==n?1:wi(vi(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ii(i.__takeCount__,n):i.__views__.push({size:n,type:e+(0>i.__dir__?"Right":"")}),i},Fe.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ye(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=B;Fe.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:bn(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),Ye(["first","last"],function(e,t){var n="take"+(t?"Right":"");Fe.prototype[e]=function(){return this[n](1).value()[0]}}),Ye(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Fe.prototype[e]=function(){return this.__filtered__?new Fe(this):this[n](1)}}),Ye(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?bt:Pr;Fe.prototype[e]=function(e){return this[n](r(e))}}),Fe.prototype.compact=function(){return this.filter(Lr)},Fe.prototype.reject=function(e,t){return e=bn(e,t,1),this.filter(function(t){return!e(t)})},Fe.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new Fe(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==b&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},Fe.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},Fe.prototype.toArray=function(){return this.take(Mi)},ht(Fe.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),r=/^(?:first|last)$/.test(t),i=Le[r?"take"+("last"==t?"Right":""):t];i&&(Le.prototype[t]=function(){function t(e){return r&&o?i(e,1)[0]:i.apply(b,Je([e],a))}var a=r?[1]:arguments,o=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,u=s instanceof Fe,c=a[0],d=u||Ma(s);return d&&n&&"function"==typeof c&&1!=c.length&&(u=d=!1),c={func:er,args:[t],thisArg:b},l=u&&!l,r&&!o?l?(s=s.clone(),s.__actions__.push(c),e.call(s)):i.call(b,this.value())[0]:!r&&d?(s=l?s:new Fe(this),s=e.apply(s,a),s.__actions__.push(c),new Be(s,o)):this.thru(t)})}),Ye("join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?Kr:qr)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);Le.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),ht(Fe.prototype,function(e,t){var n=Le[t];if(n){var r=n.name+"";(Di[r]||(Di[r]=[])).push({name:t,func:n})}}),Di[dn(b,A).name]=[{name:"wrapper",func:b}],Fe.prototype.clone=function(){var e=new Fe(this.__wrapped__);return e.__actions__=Re(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Re(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Re(this.__views__),e},Fe.prototype.reverse=function(){if(this.__filtered__){var e=new Fe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Fe.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,r=Ma(t),i=0>n,a=r?t.length:0;e=a;for(var o=this.__views__,s=0,l=-1,u=o.length;++l<u;){var c=o[l],d=c.size;switch(c.type){case"drop":s+=d;break;case"dropRight":e-=d;break;case"take":e=Ii(e,s+d);break;case"takeRight":s=wi(s,e-d)}}if(e={start:s,end:e},o=e.start,s=e.end,e=s-o,i=i?s:o-1,o=this.__iteratees__,s=o.length,l=0,u=Ii(e,this.__takeCount__),!r||L>a||a==e&&u==e)return Et(t,this.__actions__);r=[];e:for(;e--&&u>l;){for(i+=n,a=-1,c=t[i];++a<s;){var f=o[a],d=f.type,f=f.iteratee(c);if(d==B)c=f;else if(!f){if(d==E)continue e;break e}}r[l++]=c}return r},Le.prototype.chain=function(){return $n(this)},Le.prototype.commit=function(){return new Be(this.value(),this.__chain__)},Le.prototype.concat=$i,Le.prototype.plant=function(e){for(var t,n=this;n instanceof Ee;){var r=Rn(n);t?i.__wrapped__=r:t=r;var i=r,n=n.__wrapped__}return i.__wrapped__=e,t},Le.prototype.reverse=function(){function e(e){return e.reverse()}var t=this.__wrapped__;return t instanceof Fe?(this.__actions__.length&&(t=new Fe(this)),t=t.reverse(),t.__actions__.push({func:er,args:[e],thisArg:b}),new Be(t,this.__chain__)):this.thru(e)},Le.prototype.toString=function(){return this.value()+""},Le.prototype.run=Le.prototype.toJSON=Le.prototype.valueOf=Le.prototype.value=function(){return Et(this.__wrapped__,this.__actions__)},Le.prototype.collect=Le.prototype.map,Le.prototype.head=Le.prototype.first,Le.prototype.select=Le.prototype.filter,Le.prototype.tail=Le.prototype.rest,Le}var b,w="3.10.1",I=1,A=2,C=4,_=8,k=16,M=32,z=64,N=128,S=256,j=30,D="...",T=150,O=16,L=200,E=1,B=2,F="Expected a function",P="__lodash_placeholder__",G="[object Arguments]",Z="[object Array]",R="[object Boolean]",Y="[object Date]",W="[object Error]",U="[object Function]",V="[object Number]",X="[object Object]",H="[object RegExp]",J="[object String]",q="[object ArrayBuffer]",Q="[object Float32Array]",K="[object Float64Array]",$="[object Int8Array]",ee="[object Int16Array]",te="[object Int32Array]",ne="[object Uint8Array]",re="[object Uint8ClampedArray]",ie="[object Uint16Array]",ae="[object Uint32Array]",oe=/\b__p\+='';/g,se=/\b(__p\+=)''\+/g,le=/(__e\(.*?\)|\b__t\))\+'';/g,ue=/&(?:amp|lt|gt|quot|#39|#96);/g,ce=/[&<>"'`]/g,de=RegExp(ue.source),fe=RegExp(ce.source),he=/<%-([\s\S]+?)%>/g,pe=/<%([\s\S]+?)%>/g,ge=/<%=([\s\S]+?)%>/g,me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ve=/^\w*$/,ye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,xe=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,be=RegExp(xe.source),we=/[\u0300-\u036f\ufe20-\ufe23]/g,Ie=/\\(\\)?/g,Ae=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ce=/\w*$/,_e=/^0[xX]/,ke=/^\[object .+?Constructor\]$/,Me=/^\d+$/,ze=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ne=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,je=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),De="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),Te={};Te[Q]=Te[K]=Te[$]=Te[ee]=Te[te]=Te[ne]=Te[re]=Te[ie]=Te[ae]=!0,Te[G]=Te[Z]=Te[q]=Te[R]=Te[Y]=Te[W]=Te[U]=Te["[object Map]"]=Te[V]=Te[X]=Te[H]=Te["[object Set]"]=Te[J]=Te["[object WeakMap]"]=!1;var Oe={};Oe[G]=Oe[Z]=Oe[q]=Oe[R]=Oe[Y]=Oe[Q]=Oe[K]=Oe[$]=Oe[ee]=Oe[te]=Oe[V]=Oe[X]=Oe[H]=Oe[J]=Oe[ne]=Oe[re]=Oe[ie]=Oe[ae]=!0,Oe[W]=Oe[U]=Oe["[object Map]"]=Oe["[object Set]"]=Oe["[object WeakMap]"]=!1;var Le={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},Ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Be={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Fe={"function":!0,object:!0},Pe={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ze=Fe[typeof exports]&&exports&&!exports.nodeType&&exports,Re=Fe[typeof module]&&module&&!module.nodeType&&module,Ye=Fe[typeof self]&&self&&self.Object&&self,We=Fe[typeof window]&&window&&window.Object&&window,Ue=Re&&Re.exports===Ze&&Ze,Ve=Ze&&Re&&"object"==typeof global&&global&&global.Object&&global||We!==(this&&this.window)&&We||Ye||this,Xe=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ve._=Xe,define(function(){return Xe})):Ze&&Re?Ue?(Re.exports=Xe)._=Xe:Ze._=Xe:Ve._=Xe}.call(this),function(e){var t="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if("undefined"!=typeof exports){var n,r=require("underscore");try{n=require("jquery")}catch(i){}e(t,exports,r,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,r){var i=e.Backbone,a=[].slice;t.VERSION="1.2.1",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],e,i)};case 4:return function(e,i,a){return n[t](this[r],e,i,a)};default:return function(){var e=a.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}},s=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=o(t,i,r))})},l=t.Events={},u=/\s+/,c=function(e,t,r,i,a){var o,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in a&&void 0===a.context&&(a.context=i);for(o=n.keys(r);s<o.length;s++)t=e(t,o[s],r[o[s]],a)}else if(r&&u.test(r))for(o=r.split(u);s<o.length;s++)t=e(t,o[s],i,a);else t=e(t,r,i,a);return t};l.on=function(e,t,n){return d(this,e,t,n)};var d=function(e,t,n,r,i){if(e._events=c(f,e._events||{},t,n,{context:r,ctx:e,listening:i}),i){var a=e._listeners||(e._listeners={});a[i.id]=i}return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),o=a[i];if(!o){var s=this._listenId||(this._listenId=n.uniqueId("l"));o=a[i]={obj:e,objId:i,id:s,listeningTo:a,count:0}}return d(e,t,r,this,o),this};var f=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),a=r.context,o=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:a,ctx:a||o,listening:s})}return e};l.off=function(e,t,n){return this._events?(this._events=c(h,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var a=e?[e._listenId]:n.keys(i),o=0;o<a.length;o++){var s=i[a[o]];if(!s)break;s.obj.off(t,r,this)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var h=function(e,t,r,i){if(e){var a,o=0,s=i.context,l=i.listeners;if(t||r||s){for(var u=t?[t]:n.keys(e);o<u.length;o++){t=u[o];var c=e[t];if(!c)break;for(var d=[],f=0;f<c.length;f++){var h=c[f];r&&r!==h.callback&&r!==h.callback._callback||s&&s!==h.context?d.push(h):(a=h.listening,a&&0===--a.count&&(delete l[a.id],delete a.listeningTo[a.objId]))}d.length?e[t]=d:delete e[t]}return n.size(e)?e:void 0}for(var p=n.keys(l);o<p.length;o++)a=l[p[o]],delete l[a.id],delete a.listeningTo[a.objId]}};l.once=function(e,t,r){var i=c(p,{},e,t,n.bind(this.off,this));return this.on(i,void 0,r)},l.listenToOnce=function(e,t,r){var i=c(p,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var p=function(e,t,r,i){if(r){var a=e[t]=n.once(function(){i(t,a),r.apply(this,arguments)});a._callback=r}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;t>r;r++)n[r]=arguments[r+1];return c(g,this._events,e,void 0,n),this};var g=function(e,t,n,r){if(e){var i=e[t],a=e.all;i&&a&&(a=a.slice()),i&&m(i,r),a&&m(a,[t].concat(r))}return e},m=function(e,t){var n,r=-1,i=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var v=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var a=r.unset,o=r.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,d=this._previousAttributes;this.idAttribute in i&&(this.id=i[this.idAttribute]);for(var f in i)t=i[f],n.isEqual(u[f],t)||s.push(f),n.isEqual(d[f],t)?delete c[f]:c[f]=t,a?delete u[f]:u[f]=t;if(!o){s.length&&(this._pending=r);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,u[s[h]],r)}if(l)return this;if(!o)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var a=e[i];n.isEqual(t[i],a)||(r[i]=a)}return n.size(r)?r:!1},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;return t.set(i,e)?(r&&r.call(e.context,t,n,e),void t.trigger("sync",t,n,e)):!1},P(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0,parse:!0},r);var a=r.wait;if(i&&!a){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var o=this,s=r.success,l=this.attributes;r.success=function(e){o.attributes=l;var t=r.parse?o.parse(e,r):e;return a&&(t=n.extend({},i,t)),t&&!o.set(t,r)?!1:(s&&s.call(r.context,o,e,r),void o.trigger("sync",o,e,r))},P(this,r),i&&a&&(this.attributes=n.extend({},l,i));var u=this.isNew()?"create":r.patch?"patch":"update";"patch"!==u||r.attrs||(r.attrs=i);var c=this.sync(u,this,r);return this.attributes=l,c},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,a=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&a(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(P(this,e),o=this.sync("delete",this,e)),i||a(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(v,y,"attributes");var x=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1};n.extend(x.prototype,l,{model:v,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,w))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:n.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),r?i[0]:i},set:function(e,t){t=n.defaults({},t,b),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:e.slice();var i,a,o,s,l,u=t.at;null!=u&&(u=+u),0>u&&(u+=this.length+1);for(var c=this.comparator&&null==u&&t.sort!==!1,d=n.isString(this.comparator)?this.comparator:null,f=[],h=[],p={},g=t.add,m=t.merge,v=t.remove,y=!c&&g&&v?[]:!1,x=!1,w=0;w<e.length;w++){if(o=e[w],s=this.get(o))v&&(p[s.cid]=!0),m&&o!==s&&(o=this._isModel(o)?o.attributes:o,t.parse&&(o=s.parse(o,t)),s.set(o,t),c&&!l&&s.hasChanged(d)&&(l=!0)),e[w]=s;else if(g){if(a=e[w]=this._prepareModel(o,t),!a)continue;f.push(a),this._addReference(a,t)}a=s||a,a&&(i=this.modelId(a.attributes),!y||!a.isNew()&&p[i]||(y.push(a),x=x||!this.models[w]||a.cid!==this.models[w].cid),p[i]=!0)}if(v){for(var w=0;w<this.length;w++)p[(a=this.models[w]).cid]||h.push(a);h.length&&this._removeModels(h,t)}if(f.length||x)if(c&&(l=!0),this.length+=f.length,null!=u)for(var w=0;w<f.length;w++)this.models.splice(u+w,0,f[w]);else{y&&(this.models.length=0);for(var I=y||f,w=0;w<I.length;w++)this.models.push(I[w])}if(l&&this.sort({silent:!0}),!t.silent){for(var A=null!=u?n.clone(t):t,w=0;w<f.length;w++)null!=u&&(A.index=u+w),(a=f[w]).trigger("add",a,this,A);(l||x)&&this.trigger("sort",this,t),(f.length||h.length)&&this.trigger("update",this,t)}return r?e[0]:e},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null==e)return void 0;var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){var r=n.matches(e);return this[t?"find":"filter"](function(e){return r(e.attributes)})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},P(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var r=t.wait;if(e=this._prepareModel(e,t),!e)return!1;r||this.add(e,t);var i=this,a=t.success;return t.success=function(e,t,n){r&&i.add(e,n),a&&a.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var a=this.indexOf(i);this.models.splice(a,1),this.length--,t.silent||(t.index=a,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n.length?n:!1},_isModel:function(e){return e instanceof v},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if("add"!==e&&"remove"!==e||n===this){if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),a=this.modelId(t.attributes);i!==a&&(null!=i&&delete this._byId[i],null!=a&&(this._byId[a]=t))}this.trigger.apply(this,arguments)}}});var I={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};s(x,I,"models");var A=["groupBy","countBy","sortBy","indexBy"];n.each(A,function(e){n[e]&&(x.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)})});var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,k)),this._ensureElement(),this.initialize.apply(this,arguments)},_=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(_);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var a=M[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:a,dataType:"json"};if(i.url||(o.url=n.result(r,"url")||F()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",i.emulateJSON&&(o.data._method=a);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",a),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1);var l=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,l&&l.call(i.context,e,t,n)};var u=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,u,i),u};var M={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var z=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,j=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(z.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var a=this;return t.history.route(e,function(n){var o=a._extractParameters(e,n);a.execute(i,o,r)!==!1&&(a.trigger.apply(a,["route:"+r].concat(o)),a.trigger("route",r,o),t.history.trigger("route",a,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(D,"\\$&").replace(N,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/?]+)"}).replace(j,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var T=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,E=/#.*$/;T.started=!1,n.extend(T.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(O,"")},start:function(e){if(T.started)throw new Error("Backbone.history has already been started");if(T.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var a=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),T.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})):!1},navigate:function(e,t){if(!T.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;(""===e||"?"===e.charAt(0))&&(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(E,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){
if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new T;var B=function(e,t){var r,i=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t);var a=function(){this.constructor=r};return a.prototype=i.prototype,r.prototype=new a,e&&n.extend(r.prototype,e),r.__super__=i.prototype,r};v.extend=x.extend=z.extend=C.extend=T.extend=B;var F=function(){throw new Error('A "url" property or function must be specified')},P=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
function(e,t){if("function"==typeof define&&define.amd)define(["backbone","lodash","jquery"],function(n,r,i){return n.$=i,t(e,n,r,i)});else if("undefined"!=typeof exports){var n=require("backbone"),r=require("lodash"),i=n.$=require("jquery");module.exports=t(e,n,r,i)}else{var n=e.Backbone,r=e._,i=n.$=e.jQuery||e.$;e.joint=t(e,n,r,i),e.g=e.joint.g,e.V=e.Vectorizer=e.joint.V}}(this,function(e,t,n,r){var i,a,o=function(){function e(t,n){if(!(this instanceof e))return new e(t,n);var r;void 0===n&&Object(t)!==t?(r=t.split(-1===t.indexOf("@")?" ":"@"),this.x=parseInt(r[0],10),this.y=parseInt(r[1],10)):Object(t)===t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=n)}function t(n,r){return this instanceof t?(this.start=e(n),void(this.end=e(r))):new t(n,r)}function n(e,t,r,i){return this instanceof n?(void 0===t&&(t=e.y,r=e.width,i=e.height,e=e.x),this.x=e,this.y=t,this.width=r,void(this.height=i)):new n(e,t,r,i)}function r(t,n,i){return this instanceof r?(t=e(t),this.x=t.x,this.y=t.y,this.a=n,void(this.b=i)):new r(t,n,i)}var i=Math,a=i.abs,s=i.cos,l=i.sin,u=i.sqrt,c=i.min,d=i.max,f=(i.atan,i.atan2),h=(i.acos,i.round),p=i.floor,g=i.PI,m=i.random,v=function(e){return 180*e/g%360},y=function(e,t){return t=t||!1,e=t?e:e%360,e*g/180},x=function(e,t){return t*Math.round(e/t)},b=function(e){return e%360+(0>e?360:0)};e.prototype={toString:function(){return this.x+"@"+this.y},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=c(d(this.x,e.x),e.x+e.width),this.y=c(d(this.y,e.y),e.y+e.height),this)},theta:function(t){t=e(t);var n=-(t.y-this.y),r=t.x-this.x,i=10,a=0==n.toFixed(i)&&0==r.toFixed(i)?0:f(n,r);return 0>a&&(a=2*g+a),180*a/g},distance:function(e){return t(this,e).length()},manhattanDistance:function(e){return a(e.x-this.x)+a(e.y-this.y)},offset:function(e,t){return this.x+=e||0,this.y+=t||0,this},magnitude:function(){return u(this.x*this.x+this.y*this.y)||.01},update:function(e,t){return this.x=e||0,this.y=t||0,this},round:function(e){return this.x=e?this.x.toFixed(e):h(this.x),this.y=e?this.y.toFixed(e):h(this.y),this},normalize:function(e){var t=(e||1)/this.magnitude();return this.x=t*this.x,this.y=t*this.y,this},difference:function(t){return e(this.x-t.x,this.y-t.y)},bearing:function(e){return t(this,e).bearing()},toPolar:function(t){t=t&&e(t)||e(0,0);var n=this.x,r=this.y;return this.x=u((n-t.x)*(n-t.x)+(r-t.y)*(r-t.y)),this.y=y(t.theta(e(n,r))),this},rotate:function(t,n){n=(n+360)%360,this.toPolar(t),this.y+=y(n);var r=e.fromPolar(this.x,this.y,t);return this.x=r.x,this.y=r.y,this},move:function(t,n){var r=y(e(t).theta(this));return this.offset(s(r)*n,-l(r)*n)},changeInAngle:function(t,n,r){return e(this).offset(-t,-n).theta(r)-this.theta(r)},equals:function(e){return this.x===e.x&&this.y===e.y},snapToGrid:function(e,t){return this.x=x(this.x,e),this.y=x(this.y,t||e),this},reflection:function(t){return e(t).move(this,this.distance(t))},clone:function(){return e(this)}},e.fromPolar=function(t,n,r){r=r&&e(r)||e(0,0);var i=a(t*s(n)),o=a(t*l(n)),u=b(v(n));return 90>u?o=-o:180>u?(i=-i,o=-o):270>u&&(i=-i),e(r.x+i,r.y+o)},e.random=function(t,n,r,i){return e(p(m()*(n-t+1)+t),p(m()*(i-r+1)+r))},t.prototype={toString:function(){return this.start.toString()+" "+this.end.toString()},length:function(){return u(this.squaredLength())},squaredLength:function(){var e=this.start.x,t=this.start.y,n=this.end.x,r=this.end.y;return(e-=n)*e+(t-=r)*t},midpoint:function(){return e((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},intersection:function(t){var n=e(this.end.x-this.start.x,this.end.y-this.start.y),r=e(t.end.x-t.start.x,t.end.y-t.start.y),i=n.x*r.y-n.y*r.x,a=e(t.start.x-this.start.x,t.start.y-this.start.y),o=a.x*r.y-a.y*r.x,s=a.x*n.y-a.y*n.x;if(0===i||0>o*i||0>s*i)return null;if(i>0){if(o>i||s>i)return null}else if(i>o||i>s)return null;return e(this.start.x+o*n.x/i,this.start.y+o*n.y/i)},bearing:function(){var e=y(this.start.y),t=y(this.end.y),n=this.start.x,r=this.end.x,i=y(r-n),a=l(i)*s(t),o=s(e)*l(t)-l(e)*s(t)*s(i),u=v(f(a,o)),c=["NE","E","SE","S","SW","W","NW","N"],d=u-22.5;return 0>d&&(d+=360),d=parseInt(d/45),c[d]},pointAt:function(t){var n=(1-t)*this.start.x+t*this.end.x,r=(1-t)*this.start.y+t*this.end.y;return e(n,r)},pointOffset:function(e){return((this.end.x-this.start.x)*(e.y-this.start.y)-(this.end.y-this.start.y)*(e.x-this.start.x))/2},clone:function(){return t(this)}},n.prototype={toString:function(){return this.origin().toString()+" "+this.corner().toString()},equals:function(e){var t=o.rect(this).normalize(),n=o.rect(e).normalize();return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height},origin:function(){return e(this.x,this.y)},corner:function(){return e(this.x+this.width,this.y+this.height)},topRight:function(){return e(this.x+this.width,this.y)},bottomLeft:function(){return e(this.x,this.y+this.height)},center:function(){return e(this.x+this.width/2,this.y+this.height/2)},intersect:function(e){var t=this.origin(),r=this.corner(),i=e.origin(),a=e.corner();if(a.x<=t.x||a.y<=t.y||i.x>=r.x||i.y>=r.y)return null;var o=Math.max(t.x,i.x),s=Math.max(t.y,i.y);return n(o,s,Math.min(r.x,a.x)-o,Math.min(r.y,a.y)-s)},union:function(e){var t=this.origin(),r=this.corner(),i=e.origin(),a=e.corner(),o=Math.min(t.x,i.x),s=Math.min(t.y,i.y),l=Math.max(r.x,a.x),u=Math.max(r.y,a.y);return n(o,s,l-o,u-s)},sideNearestToPoint:function(t){t=e(t);var n=t.x-this.x,r=this.x+this.width-t.x,i=t.y-this.y,a=this.y+this.height-t.y,o=n,s="left";return o>r&&(o=r,s="right"),o>i&&(o=i,s="top"),o>a&&(o=a,s="bottom"),s},containsPoint:function(t){return t=e(t),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height?!0:!1},containsRect:function(e){var t=n(e).normalize(),r=t.width,i=t.height,a=t.x,o=t.y,s=this.width,l=this.height;if(0>(s|l|r|i))return!1;var u=this.x,c=this.y;if(u>a||c>o)return!1;if(s+=u,r+=a,a>=r){if(s>=u||r>s)return!1}else if(s>=u&&r>s)return!1;if(l+=c,i+=o,o>=i){if(l>=c||i>l)return!1}else if(l>=c&&i>l)return!1;return!0},pointNearestToPoint:function(t){if(t=e(t),this.containsPoint(t)){var n=this.sideNearestToPoint(t);switch(n){case"right":return e(this.x+this.width,t.y);case"left":return e(this.x,t.y);case"bottom":return e(t.x,this.y+this.height);case"top":return e(t.x,this.y)}}return t.adhereToRect(this)},intersectionWithLineFromCenterToPoint:function(n,r){n=e(n);var i,a=e(this.x+this.width/2,this.y+this.height/2);r&&n.rotate(a,r);for(var o=[t(this.origin(),this.topRight()),t(this.topRight(),this.corner()),t(this.corner(),this.bottomLeft()),t(this.bottomLeft(),this.origin())],s=t(a,n),l=o.length-1;l>=0;--l){var u=o[l].intersection(s);if(null!==u){i=u;break}}return i&&r&&i.rotate(a,-r),i},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},round:function(e){return this.x=e?this.x.toFixed(e):h(this.x),this.y=e?this.y.toFixed(e):h(this.y),this.width=e?this.width.toFixed(e):h(this.width),this.height=e?this.height.toFixed(e):h(this.height),this},normalize:function(){var e=this.x,t=this.y,n=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,r=-this.height),this.x=e,this.y=t,this.width=n,this.height=r,this},bbox:function(e){var t=y(e||0),r=a(l(t)),i=a(s(t)),o=this.width*i+this.height*r,u=this.width*r+this.height*i;return n(this.x+(this.width-o)/2,this.y+(this.height-u)/2,o,u)},snapToGrid:function(e,t){var n=this.origin().snapToGrid(e,t),r=this.corner().snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},clone:function(){return n(this)}},r.prototype={toString:function(){return e(this.x,this.y).toString()+" "+this.a+" "+this.b},bbox:function(){return n(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},intersectionWithLineFromCenterToPoint:function(t,n){t=e(t),n&&t.rotate(e(this.x,this.y),n);var r,i=t.x-this.x,a=t.y-this.y;if(0===i)return r=this.bbox().pointNearestToPoint(t),n?r.rotate(e(this.x,this.y),-n):r;var o=a/i,s=o*o,l=this.a*this.a,c=this.b*this.b,d=u(1/(1/l+s/c));d=0>i?-d:d;var f=o*d;return r=e(this.x+d,this.y+f),n?r.rotate(e(this.x,this.y),-n):r},clone:function(){return r(this)}};var w={curveThroughPoints:function(e){for(var t=this.getCurveControlPoints(e),n=["M",e[0].x,e[0].y],r=0;r<t[0].length;r++)n.push("C",t[0][r].x,t[0][r].y,t[1][r].x,t[1][r].y,e[r+1].x,e[r+1].y);return n},getCurveControlPoints:function(t){var n,r=[],i=[],a=t.length-1;if(1==a)return r[0]=e((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),i[0]=e(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,i];var o=[];for(n=1;a-1>n;n++)o[n]=4*t[n].x+2*t[n+1].x;o[0]=t[0].x+2*t[1].x,o[a-1]=(8*t[a-1].x+t[a].x)/2;var s=this.getFirstControlPoints(o);for(n=1;a-1>n;++n)o[n]=4*t[n].y+2*t[n+1].y;o[0]=t[0].y+2*t[1].y,o[a-1]=(8*t[a-1].y+t[a].y)/2;var l=this.getFirstControlPoints(o);for(n=0;a>n;n++)r.push(e(s[n],l[n])),a-1>n?i.push(e(2*t[n+1].x-s[n+1],2*t[n+1].y-l[n+1])):i.push(e((t[a].x+s[a-1])/2,(t[a].y+l[a-1])/2));return[r,i]},getFirstControlPoints:function(e){var t=e.length,n=[],r=[],i=2;n[0]=e[0]/i;for(var a=1;t>a;a++)r[a]=1/i,i=(t-1>a?4:3.5)-r[a],n[a]=(e[a]-n[a-1])/i;for(a=1;t>a;a++)n[t-a-1]-=r[t-a]*n[t-a];return n},getInversionSolver:function(e,t,n,r){function i(e,t){var n=a[e],r=a[t];return function(i){var a=(e%3?3:1)*(t%3?3:1),o=i.x*(n.y-r.y)+i.y*(r.x-n.x)+n.x*r.y-n.y*r.x;return a*o}}var a=arguments;return function(n){var r=3*i(2,3)(t),a=i(1,3)(e)/r,o=-i(2,3)(e)/r,s=a*i(3,1)(n)+o*(i(3,0)(n)+i(2,1)(n))+i(2,0)(n),l=a*i(3,0)(n)+o*i(2,0)(n)+i(1,0)(n);return l/(l-s)}},getCurveDivider:function(e,n,r,i){return function(a){var o=t(e,n).pointAt(a),s=t(n,r).pointAt(a),l=t(r,i).pointAt(a),u=t(o,s).pointAt(a),c=t(s,l).pointAt(a),d=t(u,c).pointAt(a);return[{p0:e,p1:o,p2:u,p3:d},{p0:d,p1:c,p2:l,p3:i}]}}},I={linear:function(e,t,n){var r=e[1]-e[0],i=t[1]-t[0];return(n-e[0])/r*i+t[0]||0}};return{toDeg:v,toRad:y,snapToGrid:x,normalizeAngle:b,point:e,line:t,rect:n,ellipse:r,bezier:w,scale:I}}();i=a=function(){function e(){var e=++A+"";return"v-"+e}function t(e){return(e||"").replace(/ /g,"\xa0")}function n(e){return e===Object(e)}function r(e){return"[object Array]"==Object.prototype.toString.call(e)}function i(e){var t='<svg xmlns="'+w.xmlns+'" xmlns:xlink="'+w.xlink+'" version="'+I+'">'+(e||"")+"</svg>",n=a(t,{async:!1});return n.documentElement}function a(e,t){t=t||{};var n;try{var r=new DOMParser;"undefined"!=typeof t.async&&(r.async=t.async),n=r.parseFromString(e,"text/xml")}catch(i){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return n}function s(e,t,n){var r,a;if(!e)return void 0;if("object"==typeof e)return new f(e);if(t=t||{},"svg"===e.toLowerCase())return new f(i());if("<"===e[0]){var o=i(e);if(o.childNodes.length>1){var s=[];for(r=0,a=o.childNodes.length;a>r;r++){var u=o.childNodes[r];s.push(new f(document.importNode(u,!0)))}return s}return new f(document.importNode(o.firstChild,!0))}e=document.createElementNS(w.xmlns,e);for(var c in t)l(e,c,t[c]);for("[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]),r=0,a=n[0]&&n.length||0;a>r;r++){var d=n[r];e.appendChild(d instanceof f?d.node:d)}return new f(e)}function l(e,t,n){if(t.indexOf(":")>-1){var r=t.split(":");e.setAttributeNS(w[r[0]],r[1],n)}else"id"===t?e.id=n:e.setAttribute(t,n)}function u(e){var t,n,r;if(e){var i=/[ ,]+/,a=e.match(/translate\((.*)\)/);a&&(t=a[1].split(i));var o=e.match(/rotate\((.*)\)/);o&&(n=o[1].split(i));var s=e.match(/scale\((.*)\)/);s&&(r=s[1].split(i))}var l=r&&r[0]?parseFloat(r[0]):1;return{translate:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:l,sy:r&&r[1]?parseFloat(r[1]):l}}}function c(e,t){var n=t.x*e.a+t.y*e.c+0,r=t.x*e.b+t.y*e.d+0;return{x:n,y:r}}function d(e){var t=c(e,{x:0,y:1}),n=c(e,{x:1,y:0}),r=180/Math.PI*Math.atan2(t.y,t.x)-90,i=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:e.e,translateY:e.f,scaleX:Math.sqrt(e.a*e.a+e.b*e.b),scaleY:Math.sqrt(e.c*e.c+e.d*e.d),skewX:r,skewY:i,rotation:r}}function f(t){t instanceof f&&(t=t.node),this.node=t,this.node.id||(this.node.id=e())}function h(e){e=s(e);var t=["M",e.attr("x1"),e.attr("y1"),"L",e.attr("x2"),e.attr("y2")].join(" ");return t}function p(e){e=s(e);for(var t,n=e.node.points,r=[],i=0;i<n.length;i++)t=n[i],r.push(0===i?"M":"L",t.x,t.y);return r.push("Z"),r.join(" ")}function g(e){e=s(e);for(var t,n=e.node.points,r=[],i=0;i<n.length;i++)t=n[i],r.push(0===i?"M":"L",t.x,t.y);return r.join(" ")}function m(e){e=s(e);var t=parseFloat(e.attr("cx"))||0,n=parseFloat(e.attr("cy"))||0,r=parseFloat(e.attr("r")),i=r*C,a=["M",t,n-r,"C",t+i,n-r,t+r,n-i,t+r,n,"C",t+r,n+i,t+i,n+r,t,n+r,"C",t-i,n+r,t-r,n+i,t-r,n,"C",t-r,n-i,t-i,n-r,t,n-r,"Z"].join(" ");return a}function v(e){e=s(e);var t=parseFloat(e.attr("cx"))||0,n=parseFloat(e.attr("cy"))||0,r=parseFloat(e.attr("rx")),i=parseFloat(e.attr("ry"))||r,a=r*C,o=i*C,l=["M",t,n-i,"C",t+a,n-i,t+r,n-o,t+r,n,"C",t+r,n+o,t+a,n+i,t,n+i,"C",t-a,n+i,t-r,n+o,t-r,n,"C",t-r,n-o,t-a,n-i,t,n-i,"Z"].join(" ");return l}function y(e){e=s(e);var t,n=parseFloat(e.attr("x"))||0,r=parseFloat(e.attr("y"))||0,i=parseFloat(e.attr("width"))||0,a=parseFloat(e.attr("height"))||0,l=parseFloat(e.attr("rx"))||0,u=parseFloat(e.attr("ry"))||0,c=o.rect(n,r,i,a);if(l||u){var d=n+i,f=r+a;t=["M",n+l,r,"L",d-l,r,"Q",d,r,d,r+u,"L",d,r+a-u,"Q",d,f,d-l,f,"L",n+l,f,"Q",n,f,n,f-l,"L",n,r+u,"Q",n,r,n+l,r,"Z"].join(" ")}else t=["M",c.origin().x,c.origin().y,"H",c.corner().x,"V",c.corner().y,"H",c.origin().x,"V",c.origin().y,"Z"].join(" ");return t}function x(e){var t=e.rx||e["top-rx"]||0,n=e.rx||e["bottom-rx"]||0,r=e.ry||e["top-ry"]||0,i=e.ry||e["bottom-ry"]||0;return["M",e.x,e.y+r,"v",e.height-r-i,"a",n,i,0,0,0,n,i,"h",e.width-2*n,"a",n,i,0,0,0,n,-i,"v",-(e.height-i-r),"a",t,r,0,0,0,-t,-r,"h",-(e.width-2*t),"a",t,r,0,0,0,-t,r].join(" ")}var b="object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));if(!b)return function(){};var w={xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},I="1.1",A=0;f.prototype={getTransformToElement:function(e){return e.getScreenCTM().inverse().multiply(this.node.getScreenCTM())},translate:function(e,t,n){n=n||{},t=t||0;var r=this.attr("transform")||"",i=u(r);if("undefined"==typeof e)return i.translate;r=r.replace(/translate\([^\)]*\)/g,"").trim();var a=n.absolute?e:i.translate.tx+e,o=n.absolute?t:i.translate.ty+t,s="translate("+a+","+o+")";return this.attr("transform",(s+" "+r).trim()),this},rotate:function(e,t,n,r){r=r||{};var i=this.attr("transform")||"",a=u(i);if("undefined"==typeof e)return a.rotate;i=i.replace(/rotate\([^\)]*\)/g,"").trim(),e%=360;var o=r.absolute?e:a.rotate.angle+e,s=void 0!==t&&void 0!==n?","+t+","+n:"",l="rotate("+o+s+")";return this.attr("transform",(i+" "+l).trim()),this},scale:function(e,t){t="undefined"==typeof t?e:t;var n=this.attr("transform")||"",r=u(n);if("undefined"==typeof e)return r.scale;n=n.replace(/scale\([^\)]*\)/g,"").trim();var i="scale("+e+","+t+")";return this.attr("transform",(n+" "+i).trim()),this},bbox:function(e,t){if(!this.node.ownerSVGElement)return{x:0,y:0,width:0,height:0};var n;try{n=this.node.getBBox(),n={x:n.x,y:n.y,width:n.width,height:n.height}}catch(r){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}if(e)return n;var i=this.getTransformToElement(t||this.node.ownerSVGElement);return _.transformRect(n,i)},text:function(e,i){e=t(e),i=i||{};var a,o=e.split("\n"),l=0,u=this.attr("y");u||this.attr("y","0.8em"),this.attr("display",e?null:"none"),this.node.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.node.textContent="";var c=this.node;if(i.textPath){var d=this.find("defs");0===d.length&&(d=s("defs"),this.append(d));var f=Object(i.textPath)===i.textPath?i.textPath.d:i.textPath;if(f){var h=s("path",{d:f});d.append(h)}var p=s("textPath");!i.textPath["xlink:href"]&&h&&p.attr("xlink:href","#"+h.node.id),Object(i.textPath)===i.textPath&&p.attr(i.textPath),this.append(p),c=p.node}for(var g=0,l=0;l<o.length;l++){var m=o[l],v=i.lineHeight||"1em";"auto"===i.lineHeight&&(v="1.5em");var y=_("tspan",{dy:0==l?"0em":v,x:this.attr("x")||0});if(y.addClass("v-line"),m)if(i.annotations){for(var x=0,b=_.annotateString(o[l],r(i.annotations)?i.annotations:[i.annotations],{offset:-g,includeAnnotationIndices:i.includeAnnotationIndices}),w=0;w<b.length;w++){var I=b[w];if(n(I)){var A=parseInt(I.attrs["font-size"],10);A&&A>x&&(x=A),a=_("tspan",I.attrs),i.includeAnnotationIndices&&a.attr("annotations",I.annotations),I.attrs["class"]&&a.addClass(I.attrs["class"]),a.node.textContent=I.t}else a=document.createTextNode(I||" ");y.append(a)}"auto"===i.lineHeight&&x&&0!==l&&y.attr("dy",1.2*x+"px")}else y.node.textContent=m;else y.addClass("v-empty-line"),y.node.style.opacity=0,y.node.textContent="-";_(c).append(y),g+=m.length+1}return this},attr:function(e,t){if("undefined"==typeof e){for(var n=this.node.attributes,r={},i=0;i<n.length;i++)r[n[i].nodeName]=n[i].nodeValue;return r}if("string"==typeof e&&"undefined"==typeof t)return this.node.getAttribute(e);if("object"==typeof e)for(var a in e)e.hasOwnProperty(a)&&l(this.node,a,e[a]);else l(this.node,e,t);return this},remove:function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},append:function(e){var t=e;"[object Array]"!==Object.prototype.toString.call(e)&&(t=[e]);for(var n=0,r=t.length;r>n;n++)e=t[n],this.node.appendChild(e instanceof f?e.node:e);return this},prepend:function(e){this.node.insertBefore(e instanceof f?e.node:e,this.node.firstChild)},svg:function(){return this.node instanceof window.SVGSVGElement?this:_(this.node.ownerSVGElement)},defs:function(){var e=this.svg().node.getElementsByTagName("defs");return e&&e.length?_(e[0]):void 0},clone:function(){var t=_(this.node.cloneNode(!0));return t.node.id=e(),t},findOne:function(e){var t=this.node.querySelector(e);return t?_(t):void 0},find:function(e){var t=this.node.querySelectorAll(e);return Array.prototype.map.call(t,_)},index:function(){for(var e=0,t=this.node.previousSibling;t;)1===t.nodeType&&e++,t=t.previousSibling;return e},findParentByClass:function(e,t){t=t||this.node.ownerSVGElement;for(var n=this.node.parentNode;n&&n!==t;){if(_(n).hasClass(e))return _(n);n=n.parentNode}return null},toLocalPoint:function(e,t){var n=this.svg().node,r=n.createSVGPoint();r.x=e,r.y=t;try{var i=r.matrixTransform(n.getScreenCTM().inverse()),a=this.getTransformToElement(n).inverse()}catch(o){return r}return i.matrixTransform(a)},translateCenterToPoint:function(e){var t=this.bbox(),n=o.rect(t).center();this.translate(e.x-n.x,e.y-n.y)},translateAndAutoOrient:function(e,t,n){var r=this.scale();this.attr("transform",""),this.scale(r.sx,r.sy);var i=this.svg().node,a=this.bbox(!1,n),s=i.createSVGTransform();s.setTranslate(-a.x-a.width/2,-a.y-a.height/2);var l=i.createSVGTransform(),u=o.point(e).changeInAngle(e.x-t.x,e.y-t.y,t);l.setRotate(u,0,0);var c=i.createSVGTransform(),f=o.point(e).move(t,a.width/2);c.setTranslate(e.x+(e.x-f.x),e.y+(e.y-f.y));var h=this.getTransformToElement(n),p=i.createSVGTransform();p.setMatrix(c.matrix.multiply(l.matrix.multiply(s.matrix.multiply(h))));var g=d(p.matrix);return this.translate(g.translateX,g.translateY),this.rotate(g.rotation),this},animateAlongPath:function(e,t){var n=_("animateMotion",e),r=_("mpath",{"xlink:href":"#"+_(t).node.id});n.append(r),this.append(n);try{n.node.beginElement()}catch(i){if("fake"===document.documentElement.getAttribute("smiling")){var a=n.node;a.animators=[];var o=a.getAttribute("id");o&&(id2anim[o]=a);for(var s=getTargets(a),l=0,u=s.length;u>l;l++){var c=s[l],d=new Animator(a,c,l);animators.push(d),a.animators[l]=d,d.register()}}}},hasClass:function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(this.node.getAttribute("class"))},addClass:function(e){if(!this.hasClass(e)){var t=this.node.getAttribute("class")||"";this.node.setAttribute("class",(t+" "+e).trim())}return this},removeClass:function(e){if(this.hasClass(e)){var t=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+e+"(\\s|$)","g"),"$2");this.node.setAttribute("class",t)}return this},toggleClass:function(e,t){var n="undefined"==typeof t?this.hasClass(e):!t;return n?this.removeClass(e):this.addClass(e),this},sample:function(e){e=e||1;for(var t,n=this.node,r=n.getTotalLength(),i=[],a=0;r>a;)t=n.getPointAtLength(a),i.push({x:t.x,y:t.y,distance:a}),a+=e;return i},convertToPath:function(){var e=s("path");e.attr(this.attr());var t=this.convertToPathData();return t&&e.attr("d",t),e},convertToPathData:function(){var e=this.node.tagName.toUpperCase();switch(e){case"PATH":return this.attr("d");case"LINE":return h(this.node);case"POLYGON":return p(this.node);case"POLYLINE":return g(this.node);case"ELLIPSE":return v(this.node);case"CIRCLE":return m(this.node);case"RECT":return y(this.node)}throw new Error(e+" cannot be converted to PATH.")},findIntersection:function(e,t){var n=this.svg().node;t=t||n;var r=o.rect(this.bbox(!1,t)),i=r.center(),a=r.intersectionWithLineFromCenterToPoint(e);if(!a)return void 0;var s=this.node.localName.toUpperCase();if("RECT"===s){var l=o.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),u=this.getTransformToElement(t),c=_.decomposeMatrix(u),d=n.createSVGTransform();d.setRotate(-c.rotation,i.x,i.y);var f=_.transformRect(l,d.matrix.multiply(u));a=o.rect(f).intersectionWithLineFromCenterToPoint(e,c.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){for(var h="PATH"===s?this:this.convertToPath(),p=h.sample(),g=1/0,m=[],v=0,y=p.length;y>v;v++){var x=p[v],b=_.createSVGPoint(x.x,x.y);b=b.matrixTransform(this.getTransformToElement(t)),x=o.point(b);var w=x.distance(i),I=1.1*x.distance(e),A=w+I;g>A?(g=A,m=[{sample:x,refDistance:I}]):g+1>A&&m.push({sample:x,refDistance:I})}m.sort(function(e,t){return e.refDistance-t.refDistance}),a=m[0].sample}return a}};var C=.5522847498307935,_=s;_.isVElement=function(e){return e instanceof f},_.decomposeMatrix=d,_.rectToPath=x;var k=_("svg").node;return _.createSVGMatrix=function(e){var t=k.createSVGMatrix();for(var n in e)t[n]=e[n];return t},_.createSVGTransform=function(){return k.createSVGTransform()},_.createSVGPoint=function(e,t){var n=k.createSVGPoint();return n.x=e,n.y=t,n},_.transformRect=function(e,t){var n=k.createSVGPoint();n.x=e.x,n.y=e.y;var r=n.matrixTransform(t);n.x=e.x+e.width,n.y=e.y;var i=n.matrixTransform(t);n.x=e.x+e.width,n.y=e.y+e.height;var a=n.matrixTransform(t);n.x=e.x,n.y=e.y+e.height;var o=n.matrixTransform(t),s=Math.min(r.x,i.x,a.x,o.x),l=Math.max(r.x,i.x,a.x,o.x),u=Math.min(r.y,i.y,a.y,o.y),c=Math.max(r.y,i.y,a.y,o.y);return{x:s,y:u,width:l-s,height:c-u}},_.transformPoint=function(e,t){return _.createSVGPoint(e.x,e.y).matrixTransform(t)},_.styleToObject=function(e){for(var t={},n=e.split(";"),r=0;r<n.length;r++){var i=n[r],a=i.split("=");t[a[0].trim()]=a[1].trim()}return t},_.createSlicePathData=function(e,t,n,r){var i=2*Math.PI-1e-6,a=e,o=t,s=n,l=r,u=(s>l&&(u=s,s=l,l=u),l-s),c=u<Math.PI?"0":"1",d=Math.cos(s),f=Math.sin(s),h=Math.cos(l),p=Math.sin(l);return u>=i?a?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":a?"M"+o*d+","+o*f+"A"+o+","+o+" 0 "+c+",1 "+o*h+","+o*p+"L"+a*h+","+a*p+"A"+a+","+a+" 0 "+c+",0 "+a*d+","+a*f+"Z":"M"+o*d+","+o*f+"A"+o+","+o+" 0 "+c+",1 "+o*h+","+o*p+"L0,0Z"},_.mergeAttrs=function(e,t){for(var r in t)"class"===r?e[r]=e[r]?e[r]+" "+t[r]:t[r]:"style"===r?n(e[r])&&n(t[r])?e[r]=_.mergeAttrs(e[r],t[r]):n(e[r])?e[r]=_.mergeAttrs(e[r],_.styleToObject(t[r])):n(t[r])?e[r]=_.mergeAttrs(_.styleToObject(e[r]),t[r]):e[r]=_.mergeAttrs(_.styleToObject(e[r]),_.styleToObject(t[r])):e[r]=t[r];return e},_.annotateString=function(e,t,r){t=t||[],r=r||{},offset=r.offset||0;for(var i,a,o,s=[],l=[],u=0;u<e.length;u++){a=l[u]=e[u];for(var c=0;c<t.length;c++){var d=t[c],f=d.start+offset,h=d.end+offset;u>=f&&h>u&&(n(a)?a.attrs=_.mergeAttrs(_.mergeAttrs({},a.attrs),d.attrs):a=l[u]={t:e[u],attrs:d.attrs},r.includeAnnotationIndices&&(a.annotations||(a.annotations=[])).push(c))}o=l[u-1],o?n(a)&&n(o)?JSON.stringify(a.attrs)===JSON.stringify(o.attrs)?i.t+=a.t:(s.push(i),i=a):n(a)?(s.push(i),i=a):n(o)?(s.push(i),i=a):i=(i||"")+a:i=a}return i&&s.push(i),s},_.findAnnotationsAtIndex=function(e,t){if(!e)return[];var n=[];return e.forEach(function(e){e.start<t&&t<=e.end&&n.push(e)}),n},_.findAnnotationsBetweenIndexes=function(e,t,n){if(!e)return[];var r=[];return e.forEach(function(e){(t>=e.start&&t<e.end||n>e.start&&n<=e.end||e.start>=t&&e.end<n)&&r.push(e)}),r},_.shiftAnnotations=function(e,t,n){return e?(e.forEach(function(e){e.start>=t&&(e.start+=n,e.end+=n)}),e):e},_.sanitizeText=t,_}();var s={version:"0.9.6",dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},routers:{},mvc:{views:{}},setTheme:function(e,t){t=t||{},n.invoke(s.mvc.views,"setTheme",e,t),s.mvc.View.prototype.options.theme=e},util:{hashCode:function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t},getByPath:function(e,t,n){n=n||"/";for(var r,i=t.split(n);i.length;){if(r=i.shift(),!(Object(e)===e&&r in e))return void 0;e=e[r]}return e},setByPath:function(e,t,n,r){r=r||"/";var i=t.split(r),a=e,o=0;if(t.indexOf(r)>-1){for(var s=i.length;s-1>o;o++)a=a[i[o]]||(a[i[o]]={});a[i[s-1]]=n}else e[t]=n;return e},unsetByPath:function(e,t,n){n=n||"/";var r=t.lastIndexOf(n);if(r>-1){var i=s.util.getByPath(e,t.substr(0,r),n);i&&delete i[t.slice(r+1)]}else delete e[t];return e},flattenObject:function(e,t,n){t=t||"/";var r={};for(var i in e)if(e.hasOwnProperty(i)){var a="object"==typeof e[i];if(a&&n&&n(e[i])&&(a=!1),a){var o=this.flattenObject(e[i],t,n);for(var s in o)o.hasOwnProperty(s)&&(r[i+t+s]=o[s])}else r[i]=e[i]}return r},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},guid:function(e){return this.guid.id=this.guid.id||1,e.id=void 0===e.id?"j_"+this.guid.id++:e.id,e.id},mixin:function(){for(var e=arguments[0],t=1,r=arguments.length;r>t;t++){var i=arguments[t];(Object(i)===i||n.isFunction(i)||null!==i&&void 0!==i)&&n.each(i,function(t,r){return this.mixin.deep&&Object(t)===t?(e[r]||(e[r]=n.isArray(t)?[]:{}),void this.mixin(e[r],t)):void(e[r]!==t&&(this.mixin.supplement&&e.hasOwnProperty(r)||(e[r]=t)))},this)}return e},supplement:function(){this.mixin.supplement=!0;var e=this.mixin.apply(this,arguments);return this.mixin.supplement=!1,e},deepMixin:function(){this.mixin.deep=!0;var e=this.mixin.apply(this,arguments);return this.mixin.deep=!1,e},deepSupplement:function(){this.mixin.deep=this.mixin.supplement=!0;var e=this.mixin.apply(this,arguments);return this.mixin.deep=this.mixin.supplement=!1,e},normalizeEvent:function(e){var t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}return e},nextFrame:function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),i=setTimeout(function(){e(n+r)},r);return t=n+r,i}}return function(t,r){return e(r?n.bind(t,r):t)}}(),cancelFrame:function(){var e,t="undefined"!=typeof window;return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?n.bind(e,window):e}(),shapePerimeterConnectionPoint:function(e,t,n,r){var a,s;if(!n){var l=t.$(".scalable")[0],u=t.$(".rotatable")[0];l&&l.firstChild?n=l.firstChild:u&&u.firstChild&&(n=u.firstChild)}return n?(s=i(n).findIntersection(r,e.paper.viewport),s||(a=o.rect(i(n).bbox(!1,e.paper.viewport)))):(a=t.model.getBBox(),s=a.intersectionWithLineFromCenterToPoint(r)),s||a.center()},breakText:function(e,t,n,r){r=r||{};var a=t.width,o=t.height,s=r.svgDocument||i("svg").node,l=i("<text><tspan></tspan></text>").attr(n||{}).node,u=l.firstChild,c=document.createTextNode("");u.appendChild(c),s.appendChild(l),r.svgDocument||document.body.appendChild(s);for(var d,f=e.split(" "),h=[],p=[],g=0,m=0,v=f.length;v>g;g++){var y=f[g];if(c.data=p[m]?p[m]+" "+y:y,u.getComputedTextLength()<=a)p[m]=c.data,d&&(h[m++]=!0,d=0);else{if(!p[m]||d){var x=!!d;if(d=y.length-1,x||!d){if(!d){if(!p[m]){p=[];break}f.splice(g,2,y+f[g+1]),v--,h[m++]=!0,g--;continue}f[g]=y.substring(0,d),f[g+1]=y.substring(d)+f[g+1]}else f.splice(g,1,y.substring(0,d),y.substring(d)),v++,m&&!h[m-1]&&m--;g--;continue}m++,g--}if("undefined"!=typeof o){var b=b||1.25*l.getBBox().height;if(b*p.length>o){p.splice(Math.floor(o/b));break}}}return r.svgDocument?s.removeChild(l):document.body.removeChild(s),p.join("\n")},imageToDataUri:function(e,t){if(!e||"data:"===e.substr(0,"data:".length))return setTimeout(function(){t(null,e)},0);var n=document.createElement("canvas"),r=document.createElement("img");r.onload=function(){var i=n.getContext("2d");n.width=r.width,n.height=r.height,i.drawImage(r,0,0);try{var a=(e.split(".").pop()||"png","jpeg"),o=n.toDataURL(a)}catch(s){if(/\.svg$/.test(e)){var l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",e,!1),l.send(null);var u=l.responseText;return t(null,"data:image/svg+xml,"+encodeURIComponent(u))}console.error(r.src,"fails to convert",s)}t(null,o)},r.ononerror=function(){t(new Error("Failed to load image."))},r.src=e},getElementBBox:function(e){var t,n=r(e),a=n.offset();if(e.ownerSVGElement){t=i(e).bbox();var o=e.getBoundingClientRect(),s=(o.width-t.width)/2,l=(o.height-t.height)/2;t.x=a.left+s,t.y=a.top+l}else t={x:a.left,y:a.top,width:n.outerWidth(),height:n.outerHeight()};return t},sortElements:function(e,t){var n=r(e),i=n.map(function(){var e=this,t=e.parentNode,n=t.insertBefore(document.createTextNode(""),e.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,n),t.removeChild(n)}});return Array.prototype.sort.call(n,t).each(function(e){i[e].call(this)})},setAttributesBySelector:function(e,t){var i=r(e);n.each(t,function(e,t){var r=i.find(t).addBack().filter(t);n.has(e,"class")&&(r.addClass(e["class"]),e=n.omit(e,"class")),r.attr(e)})},normalizeSides:function(e){return Object(e)!==e?(e=e||0,{top:e,bottom:e,left:e,right:e}):{top:e.top||0,bottom:e.bottom||0,left:e.left||0,right:e.right||0}},timing:{linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var t=0,n=1;1;t+=n,n/=2)if(e>=(7-4*t)/11){var r=(11-6*t-11*e)/4;return-r*r+n*n}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}},clamp:function(e,t,n){return t=t||0,n=n||1,function(r){var i=e(r);return t>i?t:i>n?n:i}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},interpolate:{number:function(e,t){var n=t-e;return function(t){return e+n*t}},object:function(e,t){var r=n.keys(e);return function(n){var i,a,o={};for(i=r.length-1;-1!=i;i--)a=r[i],o[a]=e[a]+(t[a]-e[a])*n;return o}},hexColor:function(e,t){var n=parseInt(e.slice(1),16),r=parseInt(t.slice(1),16),i=255&n,a=(255&r)-i,o=65280&n,s=(65280&r)-o,l=16711680&n,u=(16711680&r)-l;return function(e){var t=i+a*e&255,n=o+s*e&65280,r=l+u*e&16711680;return"#"+(1<<24|t|n|r).toString(16).slice(1)}},unit:function(e,t){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(e),i=n.exec(t),a=i[1].indexOf("."),o=a>0?i[1].length-a-1:0;e=+r[1];var s=+i[1]-e,l=r[2];return function(t){return(e+s*t).toFixed(o)+l}}},filter:{outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=n.isFinite(e.margin)?e.margin:2,i=n.isFinite(e.width)?e.width:1;
return n.template(t)({color:e.color||"blue",opacity:n.isFinite(e.opacity)?e.opacity:1,outerRadius:r+i,innerRadius:r})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return n.template(t)({color:e.color||"red",width:n.isFinite(e.width)?e.width:1,blur:n.isFinite(e.blur)?e.blur:0,opacity:n.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=n.isFinite(e.x)?e.x:2;return n.template('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:n.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return n.template(t)({dx:e.dx||0,dy:e.dy||0,opacity:n.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:n.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=n.isFinite(e.amount)?e.amount:1;return n.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=n.isFinite(e.amount)?e.amount:1;return n.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=n.isFinite(e.amount)?e.amount:1;return n.template('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return n.template('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=n.isFinite(e.amount)?e.amount:1;return n.template('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return n.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:n.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=n.isFinite(e.amount)?e.amount:1;return n.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},format:{number:function(e,t,n){function r(e){for(var t=e.length,r=[],i=0,a=n.grouping[0];t>0&&a>0;)r.push(e.substring(t-=a,t+a)),a=n.grouping[i=(i+1)%n.grouping.length];return r.reverse().join(n.thousands)}n=n||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var i=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,a=i.exec(e),o=a[1]||" ",s=a[2]||">",l=a[3]||"",u=a[4]||"",c=a[5],d=+a[6],f=a[7],h=a[8],p=a[9],g=1,m="",v="",y=!1;switch(h&&(h=+h.substring(1)),(c||"0"===o&&"="===s)&&(c=o="0",s="=",f&&(d-=Math.floor((d-1)/4))),p){case"n":f=!0,p="g";break;case"%":g=100,v="%",p="f";break;case"p":g=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+p.toLowerCase());case"c":case"d":y=!0,h=0;break;case"s":g=-1,p="r"}"$"===u&&(m=n.currency[0],v=n.currency[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h))));var x=c&&f;if(y&&t%1)return"";var b=0>t||0===t&&0>1/t?(t=-t,"-"):l,w=v;if(0>g){var I=this.prefix(t,h);t=I.scale(t),w=I.symbol+v}else t*=g;t=this.convert(p,t,h);var A=t.lastIndexOf("."),C=0>A?t:t.substring(0,A),_=0>A?"":n.decimal+t.substring(A+1);!c&&f&&n.grouping&&(C=r(C));var k=m.length+C.length+_.length+(x?0:b.length),M=d>k?new Array(k=d-k+1).join(o):"";return x&&(C=r(M+C)),b+=m,t=C+_,("<"===s?b+t+M:">"===s?M+b+t:"^"===s?M.substring(0,k>>=1)+b+t+M.substring(k):b+(x?t:M+t))+w},string:function(e,t){for(var n,r="{",i=!1,a=[];-1!==(n=e.indexOf(r));){var o,s,l;if(o=e.slice(0,n),i){s=o.split(":"),l=s.shift().split("."),o=t;for(var u=0;u<l.length;u++)o=o[l[u]];s.length&&(o=this.number(s,o))}a.push(o),e=e.slice(n+1),r=(i=!i)?"}":"{"}return a.push(e),a.join("")},convert:function(e,t,n){switch(e){case"b":return t.toString(2);case"c":return String.fromCharCode(t);case"o":return t.toString(8);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"g":return t.toPrecision(n);case"e":return t.toExponential(n);case"f":return t.toFixed(n);case"r":return(t=this.round(t,this.precision(t,n))).toFixed(Math.max(0,Math.min(20,this.precision(t*(1+1e-15),n))));default:return t+""}},round:function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},precision:function(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)},prefix:function(e,t){var r=n.map(["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],function(e,t){var n=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}),i=0;return e&&(0>e&&(e*=-1),t&&(e=this.round(e,this.precision(e,t))),i=1+Math.floor(1e-12+Math.log(e)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((0>=i?i+1:i-1)/3)))),r[8+i/3]}}}};/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
if(s.mvc.View=t.View.extend({options:{theme:"default"},theme:null,themeClassNamePrefix:"joint-theme-",requireSetThemeOverride:!1,constructor:function(e){t.View.call(this,e)},initialize:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=n.extend({},s.mvc.View.prototype.options||{},this.options||{},e||{}),n.bindAll(this,"setTheme","onSetTheme","remove","onRemove"),s.mvc.views[this.cid]=this,this.setTheme(this.options.theme),this.init()},init:function(){},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?void 0:(this.onSetTheme(this.theme,e),this.theme&&this.$el.removeClass(this.themeClassNamePrefix+this.theme),this.$el.addClass(this.themeClassNamePrefix+e),this.theme=e,this)},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),s.mvc.views[this.cid]=null,t.View.prototype.remove.apply(this,arguments),this},onRemove:function(){}}),s.dia.GraphCells=t.Collection.extend({cellNamespace:s.shapes,initialize:function(e,t){this.on("change:z",this.sort,this),t.cellNamespace&&(this.cellNamespace=t.cellNamespace),this.graph=t.graph},model:function(e,t){var n=t.collection,r=n.cellNamespace,i="link"===e.type?s.dia.Link:s.util.getByPath(r,e.type,".")||s.dia.Element,a=new i(e,t);return a.graph=n.graph,a},comparator:function(e){return e.get("z")||0}}),s.dia.Graph=t.Model.extend({initialize:function(e,n){n=n||{};var r=new s.dia.GraphCells([],{model:n.cellModel,cellNamespace:n.cellNamespace,graph:this});t.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this._out={},this._in={},this._nodes={},this._edges={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var t=e.get("source"),n=e.get("target");t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var t=e.get("source"),n=e.get("target");t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],n.id&&this._in[n.id]&&this._in[n.id][e.id]&&delete this._in[n.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},n.each(e,this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var n=e.get("source");n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var n=e.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=t.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,r,i){var a;return"object"==typeof e?(a=e,i=r):(a={})[e]=r,a.hasOwnProperty("cells")&&(this.resetCells(a.cells,i),a=n.omit(a,"cells")),t.Model.prototype.set.call(this,a,i)},clear:function(e){e=n.extend({},e,{clear:!0});var t=this.get("cells");if(0===t.length)return this;this.trigger("batch:start",{batchName:"clear"});var r=t.sortBy(function(e){return e.isLink()?1:2});do r.shift().remove(e);while(r.length>0);return this.trigger("batch:stop",{batchName:"clear"}),this},_prepareCell:function(e){var r;if(e instanceof t.Model?(r=e.attributes,e.graph=this):r=e,n.isUndefined(r.z)&&(r.z=this.maxZIndex()+1),!n.isString(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},maxZIndex:function(){var e=this.get("cells").last();return e?e.get("z")||0:0},addCell:function(e,t){return n.isArray(e)?this.addCells(e,t):(this.get("cells").add(this._prepareCell(e),t||{}),this)},addCells:function(e,t){return t=t||{},t.position=e.length,n.each(e,function(e){t.position--,this.addCell(e,t)},this),this},resetCells:function(e,t){return this.get("cells").reset(n.map(e,this._prepareCell,this),t),this},_removeCell:function(e,t,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(e,n):this.removeLinks(e,n)),this.get("cells").remove(e,{silent:!0}),delete e.graph},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return n.map(this._nodes,function(e,t){return this.getCell(t)},this)},getLinks:function(){return n.map(this._edges,function(e,t){return this.getCell(t)},this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var r=t.inbound,i=t.outbound;n.isUndefined(r)&&n.isUndefined(i)&&(r=i=!0);var a=[],o={};if(i&&n.each(this.getOutboundEdges(e.id),function(e,t){o[t]||(a.push(this.getCell(t)),o[t]=!0)},this),r&&n.each(this.getInboundEdges(e.id),function(e,t){o[t]||(a.push(this.getCell(t)),o[t]=!0)},this),t.deep){var s=e.getEmbeddedCells({deep:!0}),l={};n.each(s,function(e){e.isLink()&&(l[e.id]=!0)}),n.each(s,function(e){e.isLink()||(i&&n.each(this.getOutboundEdges(e.id),function(e,t){o[t]||l[t]||(a.push(this.getCell(t)),o[t]=!0)},this),r&&n.each(this.getInboundEdges(e.id),function(e,t){o[t]||l[t]||(a.push(this.getCell(t)),o[t]=!0)},this))},this)}return a},getNeighbors:function(e,t){t=t||{};var r=t.inbound,i=t.outbound;n.isUndefined(r)&&n.isUndefined(i)&&(r=i=!0);var a=n.transform(this.getConnectedLinks(e,t),function(a,o){var s=o.get("source"),l=o.get("target"),u=o.hasLoop(t);if(r&&n.has(s,"id")&&!a[s.id]){var c=this.getCell(s.id);(u||c&&c!==e&&(!t.deep||!c.isEmbeddedIn(e)))&&(a[s.id]=c)}if(i&&n.has(l,"id")&&!a[l.id]){var d=this.getCell(l.id);(u||d&&d!==e&&(!t.deep||!d.isEmbeddedIn(e)))&&(a[l.id]=d)}},{},this);return n.values(a)},getCommonAncestor:function(){var e=n.map(arguments,function(e){for(var t=[],n=e.get("parent");n;)t.push(n),n=this.getCell(n).get("parent");return t},this);e=n.sortBy(e,"length");var t=n.find(e.shift(),function(t){return n.every(e,function(e){return n.contains(e,t)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var r=[];return this.search(e,function(t){t!==e&&r.push(t)},n.extend({},t,{outbound:!0})),r},cloneCells:function(e){var t={},r={};return n.each(e,function(e){if(!t[e.id]){var n=e.clone();t[e.id]=n,r[n.id]=e.get("embeds")}}),n.each(e,function(e){var i=t[e.id];if(i.isLink()){var a=i.get("source"),o=i.get("target");a.id&&t[a.id]&&i.prop("source/id",t[a.id].id),o.id&&t[o.id]&&i.prop("target/id",t[o.id].id)}var s=i.get("parent");if(s&&t[s]&&i.set("parent",t[s].id),r[i.id]){var l=[];n.each(r[i.id],function(e){t[e]?l.push(t[e].id):l.push(e)}),i.set("embeds",l)}}),t},cloneSubgraph:function(e,t){var n=this.getSubgraph(e,t);return this.cloneCells(n)},getSubgraph:function(e,t){t=t||{};var r=[],i={},a=[],o=[];return n.each(e,function(e){if(i[e.id]||(r.push(e),i[e.id]=e,e.isLink()?o.push(e):a.push(e)),t.deep){var s=e.getEmbeddedCells({deep:!0});n.each(s,function(e){i[e.id]||(r.push(e),i[e.id]=e,e.isLink()?o.push(e):a.push(e))})}}),n.each(o,function(e){var t=e.get("source"),n=e.get("target");if(t.id&&!i[t.id]){var o=this.getCell(t.id);r.push(o),i[o.id]=o,a.push(o)}if(n.id&&!i[n.id]){var s=this.getCell(n.id);r.push(this.getCell(n.id)),i[s.id]=s,a.push(s)}},this),n.each(a,function(e){var a=this.getConnectedLinks(e,t);n.each(a,function(e){var t=e.get("source"),n=e.get("target");!i[e.id]&&t.id&&i[t.id]&&n.id&&i[n.id]&&(r.push(e),i[e.id]=e)})},this),r},getPredecessors:function(e,t){t=t||{};var r=[];return this.search(e,function(t){t!==e&&r.push(t)},n.extend({},t,{inbound:!0})),r},search:function(e,t,n){n=n||{},n.breadthFirst?this.bfs(e,t,n):this.dfs(e,t,n)},bfs:function(e,t,r){r=r||{};var i={},a={},o=[];for(o.push(e),a[e.id]=0;o.length>0;){var s=o.shift();if(!i[s.id]){if(i[s.id]=!0,t(s,a[s.id])===!1)return;n.each(this.getNeighbors(s,r),function(e){a[e.id]=a[s.id]+1,o.push(e)})}}},dfs:function(e,t,r,i,a){r=r||{};var o=i||{},s=a||0;t(e,s)!==!1&&(o[e.id]=!0,n.each(this.getNeighbors(e,r),function(e){o[e.id]||this.dfs(e,t,r,o,s+1)},this))},getSources:function(){var e=[];return n.each(this._nodes,function(t,r){(!this._in[r]||n.isEmpty(this._in[r]))&&e.push(this.getCell(r))},this),e},getSinks:function(){var e=[];return n.each(this._nodes,function(t,r){(!this._out[r]||n.isEmpty(this._out[r]))&&e.push(this.getCell(r))},this),e},isSource:function(e){return!this._in[e.id]||n.isEmpty(this._in[e.id])},isSink:function(e){return!this._out[e.id]||n.isEmpty(this._out[e.id])},isSuccessor:function(e,t){var n=!1;return this.search(e,function(r){return r===t&&r!==e?(n=!0,!1):void 0},{outbound:!0}),n},isPredecessor:function(e,t){var n=!1;return this.search(e,function(r){return r===t&&r!==e?(n=!0,!1):void 0},{inbound:!0}),n},isNeighbor:function(e,t,r){r=r||{};var i=r.inbound,a=r.outbound;n.isUndefined(i)&&n.isUndefined(a)&&(i=a=!0);var o=!1;return n.each(this.getConnectedLinks(e,r),function(e){var s=e.get("source"),l=e.get("target");return e.hasLoop(r),i&&n.has(s,"id")&&s.id===t.id?(o=!0,!1):a&&n.has(l,"id")&&l.id===t.id?(o=!0,!1):void 0}),o},disconnectLinks:function(e,t){n.each(this.getConnectedLinks(e),function(n){n.set(n.get("source").id===e.id?"source":"target",o.point(0,0),t)})},removeLinks:function(e,t){n.invoke(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return n.filter(this.getElements(),function(t){return t.getBBox().containsPoint(e)})},findModelsInArea:function(e,t){t=n.defaults(t||{},{strict:!1});var r=t.strict?"containsRect":"intersect";return n.filter(this.getElements(),function(t){return e[r](t.getBBox())})},findModelsUnderElement:function(e,t){t=n.defaults(t||{},{searchBy:"bbox"});var r=e.getBBox(),i="bbox"==t.searchBy?this.findModelsInArea(r):this.findModelsFromPoint(r[t.searchBy]());return n.reject(i,function(t){return e.id==t.id||t.isEmbeddedIn(e)})},getBBox:function(e){return e=e||this.collection.models,n.reduce(e,function(e,t){return t.isLink()?e:e?e.union(t.getBBox()):t.getBBox()},void 0)},translate:function(e,t,r){var i=n.reject(this.getCells(),function(e){return e.isEmbedded()});n.invoke(i,"translate",e,t,r)}}),s.dia.Cell=t.Model.extend({constructor:function(e,t){var r,i=e||{};this.cid=n.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),(r=n.result(this,"defaults"))&&(i=n.merge({},r,i)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,n){throw new Error("Must define a translate() method.")},toJSON:function(){var e=this.constructor.prototype.defaults.attrs||{},t=this.attributes.attrs,r={};n.each(t,function(t,i){var a=e[i];n.each(t,function(e,t){n.isObject(e)&&!n.isArray(e)?n.each(e,function(e,o){a&&a[t]&&n.isEqual(a[t][o],e)||(r[i]=r[i]||{},(r[i][t]||(r[i][t]={}))[o]=e)}):a&&n.isEqual(a[t],e)||(r[i]=r[i]||{},r[i][t]=e)})});var i=n.cloneDeep(n.omit(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(e){e&&e.id||this.set("id",s.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},processPorts:function(){var e=this.ports,t={};n.each(this.get("attrs"),function(e,r){e&&e.port&&(n.isUndefined(e.port.id)?t[e.port]={id:e.port}:t[e.port.id]=e.port)});var r={};if(n.each(e,function(e,n){t[n]||(r[n]=!0)}),this.graph&&!n.isEmpty(r)){var i=this.graph.getConnectedLinks(this,{inbound:!0});n.each(i,function(e){r[e.get("target").port]&&e.remove()});var a=this.graph.getConnectedLinks(this,{outbound:!0});n.each(a,function(e){r[e.get("source").port]&&e.remove()})}this.ports=t},remove:function(e){e=e||{};var t=this.graph;t&&t.trigger("batch:start",{batchName:"remove"});var r=this.get("parent");if(r){var i=t&&t.getCell(r);i.unembed(this)}return n.invoke(this.getEmbeddedCells(),"remove",e),this.trigger("remove",this,this.collection,e),t&&t.trigger("batch:stop",{batchName:"remove"}),this},toFront:function(e){if(this.graph){e=e||{};var t=(this.graph.getLastCell().get("z")||0)+1;if(this.trigger("batch:start",{batchName:"to-front"}).set("z",t,e),e.deep){var r=this.getEmbeddedCells({deep:!0,breadthFirst:!0});n.each(r,function(n){n.set("z",++t,e)})}this.trigger("batch:stop",{batchName:"to-front"})}return this},toBack:function(e){if(this.graph){e=e||{};var t=(this.graph.getFirstCell().get("z")||0)-1;if(this.trigger("batch:start",{batchName:"to-back"}),e.deep){var r=this.getEmbeddedCells({deep:!0,breadthFirst:!0});n.eachRight(r,function(n){n.set("z",t--,e)})}this.set("z",t,e).trigger("batch:stop",{batchName:"to-back"})}return this},embed:function(e,t){if(this===e||this.isEmbeddedIn(e))throw new Error("Recursive embedding not allowed.");this.trigger("batch:start",{batchName:"embed"});var r=n.clone(this.get("embeds")||[]);return r[e.isLink()?"unshift":"push"](e.id),e.set("parent",this.id,t),this.set("embeds",n.uniq(r),t),this.trigger("batch:stop",{batchName:"embed"}),this},unembed:function(e,t){return this.trigger("batch:start",{batchName:"unembed"}),e.unset("parent",t),this.set("embeds",n.without(this.get("embeds"),e.id),t),this.trigger("batch:stop",{batchName:"unembed"}),this},getAncestors:function(){var e=[],t=this.get("parent");if(!this.graph)return e;for(;void 0!==t;){var n=this.graph.getCell(t);if(void 0===n)break;e.push(n),t=n.get("parent")}return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var t;if(e.deep)if(e.breadthFirst){t=[];for(var r=this.getEmbeddedCells();r.length>0;){var i=r.shift();t.push(i),r.push.apply(r,i.getEmbeddedCells())}}else t=this.getEmbeddedCells(),n.each(t,function(n){t.push.apply(t,n.getEmbeddedCells(e))});else t=n.map(this.get("embeds"),this.graph.getCell,this.graph);return t}return[]},isEmbeddedIn:function(e,t){var r=n.isString(e)?e:e.id,i=this.get("parent");if(t=n.defaults({deep:!0},t),this.graph&&t.deep){for(;i;){if(i===r)return!0;i=this.graph.getCell(i).get("parent")}return!1}return i===r},isEmbedded:function(){return!!this.get("parent")},clone:function(e){if(e=e||{},e.deep)return n.values(s.dia.Graph.prototype.cloneCells.call(null,[this].concat(this.getEmbeddedCells({deep:!0}))));var r=t.Model.prototype.clone.apply(this,arguments);return r.set("id",s.util.uuid()),r.set("embeds",""),r},prop:function(e,t,r){var i="/";if(n.isString(e)){if(arguments.length>1){var a=e,o=a.split("/"),l=o[0];if(o.shift(),r=r||{},r.propertyPath=a,r.propertyValue=t,0===o.length)return this.set(l,t,r);var u={},c=u,d=l;n.each(o,function(e){c=c[d]=n.isFinite(Number(e))?[]:{},d=e}),u=s.util.setByPath(u,a,t,"/");var f=n.merge({},this.attributes);r.rewrite&&s.util.unsetByPath(f,a,"/");var h=n.merge(f,u);return this.set(l,h[l],r)}return s.util.getByPath(this.attributes,e,i)}return this.set(n.merge({},this.attributes,e),t)},removeProp:function(e,t){t=t||{},t.dirty=!0;var r=e.split("/");if(1===r.length)return this.unset(e,t);var i=r[0],a=r.slice(1).join("/"),o=n.merge({},this.get(i));return s.util.unsetByPath(o,a,"/"),this.set(i,o,t)},attr:function(e,t,r){var i=Array.prototype.slice.call(arguments);return n.isString(e)?i[0]="attrs/"+e:i[0]={attrs:e},this.prop.apply(this,i)},removeAttr:function(e,t){return n.isArray(e)?(n.each(e,function(e){this.removeAttr(e,t)},this),this):this.removeProp("attrs/"+e,t)},transition:function(e,t,r,i){i=i||"/";var a={duration:100,delay:10,timingFunction:s.util.timing.linear,valueFunction:s.util.interpolate.number};r=n.extend(a,r);var o,l=0,u=n.bind(function(t){var n,i,a;l=l||t,t-=l,i=t/r.duration,1>i?this._transitionIds[e]=n=s.util.nextFrame(u):(i=1,delete this._transitionIds[e]),a=o(r.timingFunction(i)),r.transitionId=n,this.prop(e,a,r),n||this.trigger("transition:end",this,e)},this),c=n.bind(function(n){this.stopTransitions(e),o=r.valueFunction(s.util.getByPath(this.attributes,e,i),t),this._transitionIds[e]=s.util.nextFrame(n),this.trigger("transition:start",this,e)},this);return n.delay(c,r.delay,u)},getTransitions:function(){return n.keys(this._transitionIds)},stopTransitions:function(e,t){t=t||"/";var r=e&&e.split(t);return n(this._transitionIds).keys().filter(r&&function(e){return n.isEqual(r,e.split(t).slice(0,r.length))}).each(function(e){s.util.cancelFrame(this._transitionIds[e]),delete this._transitionIds[e],this.trigger("transition:end",this,e)},this),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isLink:function(){return!1}}),s.dia.CellView=s.mvc.View.extend({tagName:"g",attributes:function(){return{"model-id":this.model.id}},constructor:function(e){e.id=e.id||s.util.guid(this),s.mvc.View.call(this,e)},init:function(){n.bindAll(this,"remove","update"),this.$el.data("view",this),this.listenTo(this.model,"change:attrs",this.onChangeAttrs)},onChangeAttrs:function(e,t,n){return n.dirty?this.render():this.update(e,t,n)},_ensureElement:function(){var e;if(this.el)e=n.result(this,"el");else{var t=n.extend({id:this.id},n.result(this,"attributes"));this.className&&(t["class"]=n.result(this,"className")),e=i(n.result(this,"tagName"),t).node}this.setElement(e,!1)},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],this.vel=i(this.el)},findBySelector:function(e){var t="."===e?this.$el:this.$el.find(e);return t},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getStrokeBBox:function(e){var t=!!e;e=e||this.el;var n,r=i(e).bbox(!1,this.paper.viewport);return n=t?i(e).attr("stroke-width"):this.model.attr("rect/stroke-width")||this.model.attr("circle/stroke-width")||this.model.attr("ellipse/stroke-width")||this.model.attr("path/stroke-width"),n=parseFloat(n)||0,o.rect(r).moveAndExpand({x:-n/2,y:-n/2,width:n,height:n})},getBBox:function(){return o.rect(this.vel.bbox())},highlight:function(e,t){return e=e?this.$(e)[0]||this.el:this.el,t=t||{},t.partial=e!=this.el,this.notify("cell:highlight",e,t),this},unhighlight:function(e,t){return e=e?this.$(e)[0]||this.el:this.el,t=t||{},t.partial=e!=this.el,this.notify("cell:unhighlight",e,t),this},findMagnet:function(e){var t=this.$(e);if(0===t.length||t[0]===this.el){var n=this.model.get("attrs")||{};return n["."]&&n["."].magnet===!1?void 0:this.el}return t.attr("magnet")?t[0]:this.findMagnet(t.parent())},applyFilter:function(e,t){var a=n.isString(e)?this.findBySelector(e):r(e),o=t.name+this.paper.svg.id+s.util.hashCode(JSON.stringify(t));if(!this.paper.svg.getElementById(o)){var l=s.util.filter[t.name]&&s.util.filter[t.name](t.args||{});if(!l)throw new Error("Non-existing filter "+t.name);var u=i(l);u.attr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3}),t.attrs&&u.attr(t.attrs),u.node.id=o,i(this.paper.svg).defs().append(u)}a.each(function(){i(this).attr("filter","url(#"+o+")")})},applyGradient:function(e,t,a){var o=n.isString(e)?this.findBySelector(e):r(e),l=a.type+this.paper.svg.id+s.util.hashCode(JSON.stringify(a));if(!this.paper.svg.getElementById(l)){var u=["<"+a.type+">",n.map(a.stops,function(e){return'<stop offset="'+e.offset+'" stop-color="'+e.color+'" stop-opacity="'+(n.isFinite(e.opacity)?e.opacity:1)+'" />'}).join(""),"</"+a.type+">"].join(""),c=i(u);a.attrs&&c.attr(a.attrs),c.node.id=l,i(this.paper.svg).defs().append(c)}o.each(function(){i(this).attr(t,"url(#"+l+")")})},getSelector:function(e,t){if(e===this.el)return t;var n=i(e).index()+1,r=e.tagName+":nth-child("+n+")";return t&&(r+=" > "+t),this.getSelector(e.parentNode,r)},pointerdblclick:function(e,t,n){this.notify("cell:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){this.notify("cell:pointerclick",e,t,n)},pointerdown:function(e,t,n){this.model.collection&&(this.model.trigger("batch:start",{batchName:"pointer"}),this._collection=this.model.collection),this.notify("cell:pointerdown",e,t,n)},pointermove:function(e,t,n){this.notify("cell:pointermove",e,t,n)},pointerup:function(e,t,n){this.notify("cell:pointerup",e,t,n),this._collection&&(this._collection.trigger("batch:stop",{batchName:"pointer"}),delete this._collection)},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},contextmenu:function(e,t,n){this.notify("cell:contextmenu",e,t,n)},onSetTheme:function(e,t){e&&this.vel.removeClass(this.themeClassNamePrefix+e),this.vel.addClass(this.themeClassNamePrefix+t)}}),s.dia.Element=s.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},position:function(e,t,r){var i=n.isNumber(t);if(r=(i?r:e)||{},r.parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var a=this.graph.getCell(this.get("parent")),s=a&&!a.isLink()?a.get("position"):{x:0,y:0}}if(i)return r.parentRelative&&(e+=s.x,t+=s.y),this.set("position",{x:e,y:t},r);var l=o.point(this.get("position"));return r.parentRelative?l.difference(s):l},translate:function(e,t,r){if(e=e||0,t=t||0,0===e&&0===t)return this;r=r||{},r.translateBy=r.translateBy||this.id;var i=this.get("position")||{x:0,y:0};if(r.restrictedArea&&r.translateBy===this.id){var a=this.getBBox({deep:!0}),o=r.restrictedArea,l=i.x-a.x,u=i.y-a.y,c=Math.max(o.x+l,Math.min(o.x+o.width+l-a.width,i.x+e)),d=Math.max(o.y+u,Math.min(o.y+o.height+u-a.height,i.y+t));e=c-i.x,t=d-i.y}var f={x:i.x+e,y:i.y+t};return r.tx=e,r.ty=t,r.transition?(n.isObject(r.transition)||(r.transition={}),this.transition("position",f,n.extend({},r.transition,{valueFunction:s.util.interpolate.object}))):(this.set("position",f,r),n.invoke(this.getEmbeddedCells(),"translate",e,t,r)),this},resize:function(e,t,r){if(r=r||{},this.trigger("batch:start",n.extend({},r,{element:this,batchName:"resize"})),r.direction){var i=this.get("size");switch(r.direction){case"left":case"right":t=i.height;break;case"top":case"bottom":e=i.width}var a=o.normalizeAngle(this.get("angle")||0),s={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(s+=Math.floor((a+45)/90),s%=4);var l=this.getBBox(),u=l[["bottomLeft","corner","topRight","origin"][s]](),c=o.point(u).rotate(l.center(),-a),d=Math.sqrt(e*e+t*t)/2,f=s*Math.PI/2;f+=Math.atan(s%2==0?t/e:e/t),f-=o.toRad(a);var h=o.point.fromPolar(d,f,c),p=o.point(h).offset(e/-2,t/-2);this.set("size",{width:e,height:t},r),this.position(p.x,p.y,r)}else this.set("size",{width:e,height:t},r);return this.trigger("batch:stop",n.extend({},r,{element:this,batchName:"resize"})),this},fitEmbeds:function(e){if(e=e||{},!this.graph)throw new Error("Element must be part of a graph.");var t=this.getEmbeddedCells();if(t.length>0){this.trigger("batch:start",{batchName:"fit-embeds"}),e.deep&&n.invoke(t,"fitEmbeds",e);var r=this.graph.getBBox(t),i=s.util.normalizeSides(e.padding);r.moveAndExpand({x:-i.left,y:-i.top,width:i.right+i.left,height:i.bottom+i.top}),this.set({position:{x:r.x,y:r.y},size:{width:r.width,height:r.height}},e),this.trigger("batch:stop",{batchName:"fit-embeds"})}return this},rotate:function(e,t,n){if(n){var r=this.getBBox().center(),i=this.get("size"),a=this.get("position");r.rotate(n,this.get("angle")-e);var o=r.x-i.width/2-a.x,s=r.y-i.height/2-a.y;this.trigger("batch:start",{batchName:"rotate"}),this.translate(o,s),this.rotate(e,t),this.trigger("batch:stop",{batchName:"rotate"})}else this.set("angle",t?e:(this.get("angle")+e)%360);return this},getBBox:function(e){if(e=e||{},e.deep&&this.graph){var t=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return t.push(this),this.graph.getBBox(t)}var n=this.get("position"),r=this.get("size");return o.rect(n.x,n.y,r.width,r.height)}}),s.dia.ElementView=s.dia.CellView.extend({SPECIAL_ATTRIBUTES:["style","text","html","ref-x","ref-y","ref-dx","ref-dy","ref-width","ref-height","ref","x-alignment","y-alignment","port"],className:function(){return"element "+this.model.get("type").replace(/\./g," ")},initialize:function(){n.bindAll(this,"translate","resize","rotate"),s.dia.CellView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:position",this.translate),this.listenTo(this.model,"change:size",this.resize),this.listenTo(this.model,"change:angle",this.rotate)},update:function(e,t){var a=this.model.get("attrs"),o=this.rotatableNode;if(o){var s=o.attr("transform");o.attr("transform","")}var l=[],u={};n.each(t||a,function(e,t){var a=this.findBySelector(t);if(0!==a.length){u[t]=a;var o=this.SPECIAL_ATTRIBUTES.slice();n.isObject(e.filter)&&(o.push("filter"),this.applyFilter(a,e.filter)),n.isObject(e.fill)&&(o.push("fill"),this.applyGradient(a,"fill",e.fill)),n.isObject(e.stroke)&&(o.push("stroke"),this.applyGradient(a,"stroke",e.stroke)),n.isUndefined(e.text)||(a.each(function(){i(this).text(e.text+"",{lineHeight:e.lineHeight,textPath:e.textPath,annotations:e.annotations})}),o.push("lineHeight","textPath","annotations"));var s=n.omit(e,o);a.each(function(){i(this).attr(s)}),e.port&&a.attr("port",n.isUndefined(e.port.id)?e.port:e.port.id),e.style&&a.css(e.style),n.isUndefined(e.html)||a.each(function(){r(this).html(e.html+"")}),n.isUndefined(e["ref-x"])&&n.isUndefined(e["ref-y"])&&n.isUndefined(e["ref-dx"])&&n.isUndefined(e["ref-dy"])&&n.isUndefined(e["x-alignment"])&&n.isUndefined(e["y-alignment"])&&n.isUndefined(e["ref-width"])&&n.isUndefined(e["ref-height"])||n.each(a,function(e,t,n){var i=r(e);i.selector=n.selector,l.push(i)})}},this);var c=this.model.get("size"),d={x:0,y:0,width:c.width,height:c.height};t=t||{},n.each(l,function(e){var r=t[e.selector],o=r?n.merge({},a[e.selector],r):a[e.selector];this.positionRelative(i(e[0]),d,o,u)},this),o&&o.attr("transform",s||"")},positionRelative:function(e,t,r,a){var o=r.ref,s=parseFloat(r["ref-dx"]),l=parseFloat(r["ref-dy"]),u=r["y-alignment"],c=r["x-alignment"],d=r["ref-y"],f=n.isString(d)&&"%"===d.slice(-1);d=parseFloat(d),f&&(d/=100);var h=r["ref-x"],p=n.isString(h)&&"%"===h.slice(-1);h=parseFloat(h),p&&(h/=100);var g=r["ref-width"],m=n.isString(g)&&"%"===g.slice(-1);g=parseFloat(g),m&&(g/=100);var v=r["ref-height"],y=n.isString(v)&&"%"===v.slice(-1);v=parseFloat(v),y&&(v/=100);var x=e.findParentByClass("scalable",this.el);if(o){var b;if(b=a&&a[o]?i(a[o][0]):"."===o?this.vel:this.vel.findOne(o),!b)throw new Error("dia.ElementView: reference does not exists.");t=b.bbox(!1,this.el)}e.attr("transform")&&e.attr("transform",e.attr("transform").replace(/translate\([^)]*\)/g,"").trim()||""),isFinite(g)&&(m||g>=0&&1>=g?e.attr("width",g*t.width):e.attr("width",Math.max(g+t.width,0))),isFinite(v)&&(y||v>=0&&1>=v?e.attr("height",v*t.height):e.attr("height",Math.max(v+t.height,0)));var w,I=0,A=0;if(isFinite(s)&&(x?(w=w||x.scale(),I=t.x+t.width+s/w.sx):I=t.x+t.width+s),isFinite(l)&&(x?(w=w||x.scale(),A=t.y+t.height+l/w.sy):A=t.y+t.height+l),isFinite(h)&&(p||h>0&&1>h?I=t.x+t.width*h:x?(w=w||x.scale(),I=t.x+h/w.sx):I=t.x+h),isFinite(d)&&(p||d>0&&1>d?A=t.y+t.height*d:x?(w=w||x.scale(),A=t.y+d/w.sy):A=t.y+d),!n.isUndefined(u)||!n.isUndefined(c)){var C=e.bbox(!1,this.paper.viewport);"middle"===u?A-=C.height/2:isFinite(u)&&(A+=u>-1&&1>u?C.height*u:u),"middle"===c?I-=C.width/2:isFinite(c)&&(I+=c>-1&&1>c?C.width*c:c)}e.translate(I,A)},renderMarkup:function(){var e=this.model.get("markup")||this.model.markup;if(!e)throw new Error("properties.markup is missing while the default render() implementation is used.");var t=i(e);this.vel.append(t)},render:function(){return this.$el.empty(),this.renderMarkup(),this.rotatableNode=this.vel.findOne(".rotatable"),this.scalableNode=this.vel.findOne(".scalable"),this.update(),this.resize(),this.rotate(),this.translate(),this},scale:function(e,t){this.vel.scale(e,t)},resize:function(){var e=this.model.get("size")||{width:1,height:1},t=this.model.get("angle")||0,n=this.scalableNode;if(n){var r=n.bbox(!0);n.attr("transform","scale("+e.width/(r.width||1)+","+e.height/(r.height||1)+")");var i=this.rotatableNode,a=i&&i.attr("transform");if(a&&"null"!==a){i.attr("transform",a+" rotate("+-t+","+e.width/2+","+e.height/2+")");var o=n.bbox(!1,this.paper.viewport);this.model.set("position",{x:o.x,y:o.y}),this.rotate()}this.update()}},translate:function(e,t,n){var r=this.model.get("position")||{x:0,y:0};this.vel.attr("transform","translate("+r.x+","+r.y+")")},rotate:function(){var e=this.rotatableNode;if(e){var t=this.model.get("angle")||0,n=this.model.get("size")||{width:1,height:1},r=n.width/2,i=n.height/2;e.attr("transform","rotate("+t+","+r+","+i+")")}},getBBox:function(e){if(e&&e.useModelGeometry){var t=this.model.getBBox().bbox(this.model.get("angle")),n=this.paper.viewport.getCTM();return o.rect(i.transformRect(t,n))}return s.dia.CellView.prototype.getBBox.apply(this,arguments)},prepareEmbedding:function(e){e=e||{};var t=e.model||this.model,r=e.paper||this.paper;t.toFront({deep:!0,ui:!0}),n.invoke(r.model.getConnectedLinks(t,{deep:!0}),"toFront",{ui:!0});var i=t.get("parent");i&&r.model.getCell(i).unembed(t,{ui:!0})},processEmbedding:function(e){e=e||{};var t=e.model||this.model,n=e.paper||this.paper,r=n.options,i=n.model.findModelsUnderElement(t,{searchBy:r.findParentBy});r.frontParentOnly&&(i=i.slice(-1));for(var a=null,o=this._candidateEmbedView,s=i.length-1;s>=0;s--){var l=i[s];if(o&&o.model.id==l.id){a=o;break}var u=l.findView(n);if(r.validateEmbedding.call(n,this,u)){a=u;break}}a&&a!=o&&(o&&o.unhighlight(null,{embedding:!0}),this._candidateEmbedView=a.highlight(null,{embedding:!0})),!a&&o&&(o.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView)},finalizeEmbedding:function(e){e=e||{};var t=this._candidateEmbedView,r=e.model||this.model,i=e.paper||this.paper;t&&(t.model.embed(r,{ui:!0}),t.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView),n.invoke(i.model.getConnectedLinks(r,{deep:!0}),"reparent",{ui:!0})},pointerdown:function(e,t,n){var r=this.paper;if(e.target.getAttribute("magnet")&&r.options.validateMagnet.call(r,this,e.target)){this.model.trigger("batch:start",{batchName:"add-link"});var i=r.getDefaultLink(this,e.target);i.set({source:{id:this.model.id,selector:this.getSelector(e.target),port:e.target.getAttribute("port")},target:{x:t,y:n}}),r.model.addCell(i);var a=this._linkView=r.findViewByModel(i);a.pointerdown(e,t,n),a.startArrowheadMove("target",{whenNotAllowed:"remove"})}else this._dx=t,this._dy=n,this.restrictedArea=r.getRestrictedArea(this),s.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("element:pointerdown",e,t,n)},pointermove:function(e,t,r){if(this._linkView)this._linkView.pointermove(e,t,r);else{var i=this.paper.options.gridSize,a=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointermove"):this.options.interactive;if(a!==!1){var l=this.model.get("position"),u=o.snapToGrid(l.x,i)-l.x+o.snapToGrid(t-this._dx,i),c=o.snapToGrid(l.y,i)-l.y+o.snapToGrid(r-this._dy,i);this.model.translate(u,c,{restrictedArea:this.restrictedArea,ui:!0}),this.paper.options.embeddingMode&&(this._inProcessOfEmbedding||(this.prepareEmbedding(),this._inProcessOfEmbedding=!0),this.processEmbedding())}this._dx=o.snapToGrid(t,i),this._dy=o.snapToGrid(r,i),s.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("element:pointermove",e,t,r)}},pointerup:function(e,t,n){this._linkView?(this._linkView.pointerup(e,t,n),this._linkView=null,this.model.trigger("batch:stop",{batchName:"add-link"})):(this._inProcessOfEmbedding&&(this.finalizeEmbedding(),this._inProcessOfEmbedding=!1),this.notify("element:pointerup",e,t,n),s.dia.CellView.prototype.pointerup.apply(this,arguments))}}),s.dia.Link=s.dia.Cell.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),labelMarkup:['<g class="label">',"<rect />","<text />","</g>"].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),
vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaults:{type:"link",source:{},target:{}},disconnect:function(){return this.set({source:o.point(0,0),target:o.point(0,0)})},label:function(e,t){e=e||0;var r=this.get("labels")||[];if(0===arguments.length||1===arguments.length)return r[e];var i=n.merge({},r[e],t),a=r.slice();return a[e]=i,this.set({labels:a})},translate:function(e,t,r){var i={},a=this.get("source"),o=this.get("target"),s=this.get("vertices");return a.id||(i.source={x:(a.x||0)+e,y:(a.y||0)+t}),o.id||(i.target={x:(o.x||0)+e,y:(o.y||0)+t}),s&&s.length&&(i.vertices=n.map(s,function(n){return{x:n.x+e,y:n.y+t}})),r=r||{},r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.set(i,r)},reparent:function(e){var t;if(this.graph){var n=this.graph.getCell(this.get("source").id),r=this.graph.getCell(this.get("target").id),i=this.graph.getCell(this.get("parent"));n&&r&&(t=this.graph.getCommonAncestor(n,r)),!i||t&&t.id===i.id||i.unembed(this,e),t&&t.embed(this,e)}return t},isLink:function(){return!0},hasLoop:function(e){e=e||{};var t=this.get("source").id,n=this.get("target").id;if(!t||!n)return!1;var r=t===n;if(!r&&e.deep&&this.graph){var i=this.graph.getCell(t),a=this.graph.getCell(n);r=i.isEmbeddedIn(a)||a.isEmbeddedIn(i)}return r},getSourceElement:function(){var e=this.get("source");return e&&e.id&&this.graph&&this.graph.getCell(e.id)||null},getTargetElement:function(){var e=this.get("target");return e&&e.id&&this.graph&&this.graph.getCell(e.id)||null},getRelationshipAncestor:function(){var e;if(this.graph){var t=n.compact([this,this.getSourceElement(),this.getTargetElement()]);e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=n.isString(e)?e:e.id,r=this.getRelationshipAncestor();return!!r&&(r.id===t||r.isEmbeddedIn(t))}}),s.dia.LinkView=s.dia.CellView.extend({className:function(){return n.unique(this.model.get("type").split(".").concat("link")).join(" ")},options:{shortLinkLength:100,doubleLinkTools:!1,longLinkLength:160,linkToolsOffset:40,doubleLinkToolsOffset:60,sampleInterval:50},_z:null,initialize:function(e){s.dia.CellView.prototype.initialize.apply(this,arguments),"function"!=typeof this.constructor.prototype.watchSource&&(this.constructor.prototype.watchSource=this.createWatcher("source"),this.constructor.prototype.watchTarget=this.createWatcher("target")),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){var e=this.model;this.listenTo(e,"change:markup",this.render),this.listenTo(e,"change:smooth change:manhattan change:router change:connector",this.update),this.listenTo(e,"change:toolMarkup",this.onToolsChange),this.listenTo(e,"change:labels change:labelMarkup",this.onLabelsChange),this.listenTo(e,"change:vertices change:vertexMarkup",this.onVerticesChange),this.listenTo(e,"change:source",this.onSourceChange),this.listenTo(e,"change:target",this.onTargetChange)},onSourceChange:function(e,t,n){this.watchSource(e,t),n.translateBy&&this.model.get("target").id||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onTargetChange:function(e,t,n){this.watchTarget(e,t),n.translateBy||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onVerticesChange:function(e,t,n){this.renderVertexMarkers(),n.translateBy&&n.translateBy!==this.model.id||(n.updateConnectionOnly=!0,this.update(e,null,n))},onToolsChange:function(){this.renderTools().updateToolsPosition()},onLabelsChange:function(){this.renderLabels().updateLabelPositions()},render:function(){this.$el.empty();var e=this.model,t=i(e.get("markup")||e.markup);if(n.isArray(t)||(t=[t]),this._V={},n.each(t,function(e){var t=e.attr("class");t&&(this._V[r.camelCase(t)]=e)},this),!this._V.connection)throw new Error("link: no connection path in the markup");return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t),this.renderLabels(),this.watchSource(e,e.get("source")).watchTarget(e,e.get("target")).update(),this},renderLabels:function(){if(!this._V.labels)return this;this._labelCache={};var e=r(this._V.labels.node).empty(),t=this.model.get("labels")||[];if(!t.length)return this;var a=n.template(this.model.get("labelMarkup")||this.model.labelMarkup),o=i(a()),l=this.can("labelMove");return n.each(t,function(t,a){var u=o.clone().node;i(u).attr("label-idx",a),l&&i(u).attr("cursor","move"),this._labelCache[a]=i(u);var c=r(u).find("text"),d=r(u).find("rect"),f=n.extend({"text-anchor":"middle","font-size":14},s.util.getByPath(t,"attrs/text","/"));c.attr(n.omit(f,"text")),n.isUndefined(f.text)||i(c[0]).text(f.text+""),e.append(u);var h=i(c[0]).bbox(!0,e[0]);i(c[0]).translate(0,-h.height/2);var p=n.extend({fill:"white",rx:3,ry:3},s.util.getByPath(t,"attrs/rect","/"));d.attr(n.extend(p,{x:h.x,y:h.y-h.height/2,width:h.width,height:h.height}))},this),this},renderTools:function(){if(!this._V.linkTools)return this;var e=r(this._V.linkTools.node).empty(),t=n.template(this.model.get("toolMarkup")||this.model.toolMarkup),a=i(t());if(e.append(a.node),this._toolCache=a,this.options.doubleLinkTools){var o;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=n.template(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),o=i(t())):o=a.clone(),e.append(o.node),this._tool2Cache=o}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=r(this._V.markerVertices.node).empty(),t=n.template(this.model.get("vertexMarkup")||this.model.vertexMarkup);return n.each(this.model.get("vertices"),function(r,a){e.append(i(t(n.extend({idx:a},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=r(this._V.markerArrowheads.node);e.empty();var t=n.template(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=i(t({end:"source"})),this._V.targetArrowhead=i(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(e,t,n){return n=n||{},n.updateConnectionOnly||this.updateAttributes(),this.updateConnection(n),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this.updatePostponed=!1,this},updateConnection:function(e){e=e||{};var t,r=this.model;if(e.translateBy&&r.isRelationshipEmbeddedIn(e.translateBy)){var i=e.tx||0,a=e.ty||0;t=this.route=n.map(this.route,function(e){return o.point(e).offset(i,a)}),this._translateConnectionPoints(i,a)}else t=this.route=this.findRoute(r.get("vertices")||[],e),this._findConnectionPoints(t);var s=this.getPathData(t);this._V.connection.attr("d",s),this._V.connectionWrap&&this._V.connectionWrap.attr("d",s),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget)},updateAttributes:function(){n.each(this.model.get("attrs"),function(e,t){var r=[];n.isObject(e.fill)&&(this.applyGradient(t,"fill",e.fill),r.push("fill")),n.isObject(e.stroke)&&(this.applyGradient(t,"stroke",e.stroke),r.push("stroke")),n.isObject(e.filter)&&(this.applyFilter(t,e.filter),r.push("filter")),r.length>0&&(r.unshift(e),e=n.omit.apply(n,r)),this.findBySelector(t).attr(e)},this)},_findConnectionPoints:function(e){var t,r,i,a,s=n.first(e);t=this.getConnectionPoint("source",this.model.get("source"),s||this.model.get("target")).round();var l=n.last(e);r=this.getConnectionPoint("target",this.model.get("target"),l||t).round();var u=this._markerCache;this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.bbox(!0),i=o.point(t).move(s||r,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.bbox(!0),a=o.point(r).move(l||t,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=i||t,u.targetPoint=a||r,this.sourcePoint=t,this.targetPoint=r},_translateConnectionPoints:function(e,t){var n=this._markerCache;n.sourcePoint.offset(e,t),n.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.model.get("labels")||[];if(!e.length)return this;var t=this._V.connection.node,r=t.getTotalLength();if(!n.isNaN(r)){var i;n.each(e,function(e,a){var s=e.position,l=n.isObject(s)?s.distance:s,u=n.isObject(s)?s.offset:{x:0,y:0};l=l>r?r:l,l=0>l?r+l:l,l=l>1?l:r*l;var c=t.getPointAtLength(l);if(n.isObject(u))c=o.point(c).offset(u.x,u.y);else if(n.isNumber(u)){i||(i=this._samples||this._V.connection.sample(this.options.sampleInterval));for(var d,f,h,p,g=1/0,m=0,v=i.length;v>m;m++)h=i[m],p=o.line(h,c).squaredLength(),g>p&&(g=p,d=h,f=m);var y=i[f-1],x=i[f+1],b=0;x?b=o.point(c).theta(x):y&&(b=o.point(y).theta(c)),c=o.point(c).offset(u).rotate(c,b-90)}this._labelCache[a].attr("transform","translate("+c.x+", "+c.y+")")},this)}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,r=this.getConnectionLength();if(!n.isNaN(r)){r<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var i=this.getPointAtLength(t);if(this._toolCache.attr("transform","translate("+i.x+", "+i.y+") "+e),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var a=this.options.doubleLinkToolsOffset||t;i=this.getPointAtLength(r-a),this._tool2Cache.attr("transform","translate("+i.x+", "+i.y+") "+e),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===r.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},createWatcher:function(e){function t(t,n){n=n||{};var i=null,a=t.previous(e)||{};return a.id&&this.stopListening(this.paper.getModelById(a.id),"change",r),n.id&&(i=this.paper.getModelById(n.id),this.listenTo(i,"change",r)),r.call(this,i,{cacheOnly:!0}),this}var r=n.partial(this.onEndModelChange,e);return t},onEndModelChange:function(e,t,r){var i=!r.cacheOnly,a=this.model,s=a.get(e)||{};if(t){var l=this.constructor.makeSelector(s),u="source"==e?"target":"source",c=a.get(u)||{},d=c.id&&this.constructor.makeSelector(c);if(r.handleBy===this.cid&&l==d)this[e+"BBox"]=this[u+"BBox"],this[e+"View"]=this[u+"View"],this[e+"Magnet"]=this[u+"Magnet"];else if(r.translateBy){var f=this[e+"BBox"];f.x+=r.tx,f.y+=r.ty}else{var h=this.paper.findViewByModel(s.id),p=h.el.querySelector(l);this[e+"BBox"]=h.getStrokeBBox(p),this[e+"View"]=h,this[e+"Magnet"]=p}if(r.handleBy===this.cid&&r.translateBy&&a.isEmbeddedIn(t)&&!n.isEmpty(a.get("vertices"))&&(i=!1),!this.updatePostponed&&c.id){var g=this.paper.getModelById(c.id);s.id===c.id&&(r.handleBy=this.cid),(r.handleBy===this.cid||r.translateBy&&g.isEmbeddedIn(r.translateBy))&&(this.updatePostponed=!0,i=!1)}}else this[e+"BBox"]=o.rect(s.x||0,s.y||0,1,1),this[e+"View"]=this[e+"Magnet"]=null;i&&(r.updateConnectionOnly=!0,this.update(a,null,r))},_translateAndAutoOrientArrows:function(e,t){e&&e.translateAndAutoOrient(this.sourcePoint,n.first(this.route)||this.targetPoint,this.paper.viewport),t&&t.translateAndAutoOrient(this.targetPoint,n.last(this.route)||this.sourcePoint,this.paper.viewport)},removeVertex:function(e){var t=n.clone(this.model.get("vertices"));return t&&t.length&&(t.splice(e,1),this.model.set("vertices",t,{ui:!0})),this},addVertex:function(e){for(var t,n=(this.model.get("vertices")||[]).slice(),r=n.slice(),a=this._V.connection.node.cloneNode(!1),o=a.getTotalLength(),s=20,l=n.length+1;l--&&(n.splice(l,0,e),i(a).attr("d",this.getPathData(this.findRoute(n))),t=a.getTotalLength(),t-o>s);)n=r.slice();return-1===l&&(l=0,n.splice(l,0,e)),this.model.set("vertices",n,{ui:!0}),l},sendToken:function(e,t,r){t=t||1e3,i(this.paper.viewport).append(e),i(e).animateAlongPath({dur:t+"ms",repeatCount:1},this._V.connection.node),n.delay(function(){i(e).remove(),r&&r()},t)},findRoute:function(e){var t=s.routers,r=this.model.get("router"),i=this.paper.options.defaultRouter;if(!r)if(this.model.get("manhattan"))r={name:"orthogonal"};else{if(!i)return e;r=i}var a=r.args||{},o=n.isFunction(r)?r:t[r.name];if(!n.isFunction(o))throw new Error('unknown router: "'+r.name+'"');var l=o.call(this,e||[],a,this);return l},getPathData:function(e){var t=s.connectors,r=this.model.get("connector"),i=this.paper.options.defaultConnector;r||(r=this.model.get("smooth")?{name:"smooth"}:i||{});var a=n.isFunction(r)?r:t[r.name],o=r.args||{};if(!n.isFunction(a))throw new Error('unknown connector: "'+r.name+'"');var l=a.call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,e||this.model.get("vertices")||{},o,this);return l},getConnectionPoint:function(e,t,r){var i;if(n.isEmpty(t)&&(t={x:0,y:0}),n.isEmpty(r)&&(r={x:0,y:0}),t.id){var a,s="source"===e?this.sourceBBox:this.targetBBox;if(r.id){var l="source"===e?this.targetBBox:this.sourceBBox;a=o.rect(l).intersectionWithLineFromCenterToPoint(o.rect(s).center()),a=a||o.rect(l).center()}else a=o.point(r);if(this.paper.options.perpendicularLinks||this.options.perpendicular){var u,c=o.rect(0,a.y,this.paper.options.width,1),d=o.rect(a.x,0,1,this.paper.options.height);if(c.intersect(o.rect(s)))switch(u=o.rect(s).sideNearestToPoint(a)){case"left":i=o.point(s.x,a.y);break;case"right":i=o.point(s.x+s.width,a.y);break;default:i=o.rect(s).center()}else if(d.intersect(o.rect(s)))switch(u=o.rect(s).sideNearestToPoint(a)){case"top":i=o.point(a.x,s.y);break;case"bottom":i=o.point(a.x,s.y+s.height);break;default:i=o.rect(s).center()}else i=o.rect(s).intersectionWithLineFromCenterToPoint(a),i=i||o.rect(s).center()}else if(this.paper.options.linkConnectionPoint){var f="target"===e?this.targetView:this.sourceView,h="target"===e?this.targetMagnet:this.sourceMagnet;i=this.paper.options.linkConnectionPoint(this,f,h,a)}else i=o.rect(s).intersectionWithLineFromCenterToPoint(a),i=i||o.rect(s).center()}else i=o.point(t);return i},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(e){return this._V.connection.node.getPointAtLength(e)},_beforeArrowheadMove:function(){this._z=this.model.get("z"),this.model.toFront(),this.el.style.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets()},_afterArrowheadMove:function(){n.isNull(this._z)||(this.model.set("z",this._z,{ui:!0}),this._z=null),this.el.style.pointerEvents="visiblePainted",this.paper.options.markAvailable&&this._unmarkAvailableMagnets()},_createValidateConnectionArgs:function(e){function t(e,t){return n[a]=e,n[a+1]=e.el===t?void 0:t,n}var n=[];n[4]=e,n[5]=this;var r,i=0,a=0;"source"===e?(i=2,r="target"):(a=2,r="source");var o=this.model.get(r);return o.id&&(n[i]=this.paper.findViewByModel(o.id),n[i+1]=o.selector&&n[i].el.querySelector(o.selector)),t},_markAvailableMagnets:function(){var e=this.paper.model.getElements(),t=this.paper.options.validateConnection;n.chain(e).map(this.paper.findViewByModel,this.paper).each(function(e){var r="false"!==e.el.getAttribute("magnet")&&t.apply(this.paper,this._validateConnectionArgs(e,null)),a=n.filter(e.el.querySelectorAll("[magnet]"),function(n){return t.apply(this.paper,this._validateConnectionArgs(e,n))},this);r&&i(e.el).addClass("available-magnet"),n.each(a,function(e){i(e).addClass("available-magnet")}),(r||a.length)&&i(e.el).addClass("available-cell")},this).value()},_unmarkAvailableMagnets:function(){n.each(this.paper.el.querySelectorAll(".available-cell, .available-magnet"),function(e){i(e).removeClass("available-magnet").removeClass("available-cell")})},startArrowheadMove:function(e,t){t=n.defaults(t||{},{whenNotAllowed:"revert"}),this._action="arrowhead-move",this._whenNotAllowed=t.whenNotAllowed,this._arrowhead=e,this._initialEnd=n.clone(this.model.get(e))||{x:0,y:0},this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead),this._beforeArrowheadMove()},can:function(e){var t=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointerdown"):this.options.interactive;return t===!1?!1:n.isObject(t)&&t[e]===!1?!1:!0},pointerdown:function(e,t,r){if(s.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("link:pointerdown",e,t,r),this._dx=t,this._dy=r,null==e.target.getAttribute("magnet")){var a=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointerdown"):this.options.interactive;if(a!==!1){var o,l=e.target.getAttribute("class"),u=e.target.parentNode.getAttribute("class");switch("label"===u?(l=u,o=e.target.parentNode):o=e.target,l){case"marker-vertex":this.can("vertexMove")&&(this._action="vertex-move",this._vertexIdx=e.target.getAttribute("idx"));break;case"marker-vertex-remove":case"marker-vertex-remove-area":this.can("vertexRemove")&&this.removeVertex(e.target.getAttribute("idx"));break;case"marker-arrowhead":this.can("arrowheadMove")&&this.startArrowheadMove(e.target.getAttribute("end"));break;case"label":this.can("labelMove")&&(this._action="label-move",this._labelIdx=parseInt(i(o).attr("label-idx"),10),this._samples=this._V.connection.sample(1),this._linkLength=this._V.connection.node.getTotalLength());break;default:var c=e.target.parentNode.getAttribute("event");c?"remove"===c?this.model.remove():this.paper.trigger(c,e,this,t,r):this.can("vertexAdd")&&(this._vertexIdx=this.addVertex({x:t,y:r}),this._action="vertex-move")}}}},pointermove:function(e,t,r){switch(this._action){case"vertex-move":var a=n.clone(this.model.get("vertices"));a[this._vertexIdx]={x:t,y:r},this.model.set("vertices",a,{ui:!0});break;case"label-move":for(var l,u,c,d,f={x:t,y:r},h=(this.model.get("labels")[this._labelIdx],this._samples),p=1/0,g=0,m=h.length;m>g;g++)c=h[g],d=o.line(c,f).squaredLength(),p>d&&(p=d,l=c,u=g);var v=h[u-1],y=h[u+1],x=(o.point(l).distance(f),0);v&&y?x=o.line(v,y).pointOffset(f):v?x=o.line(v,l).pointOffset(f):y&&(x=o.line(l,y).pointOffset(f)),this.model.label(this._labelIdx,{position:{distance:l.distance/this._linkLength,offset:x}});break;case"arrowhead-move":if(this.paper.options.snapLinks){var b=this.paper.options.snapLinks.radius||50,w=this.paper.findViewsInArea({x:t-b,y:r-b,width:2*b,height:2*b});this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;var I,A=Number.MAX_VALUE,C=o.point(t,r);n.each(w,function(e){"false"!==e.el.getAttribute("magnet")&&(I=e.model.getBBox().center().distance(C),b>I&&A>I&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(e,null))&&(A=I,this._closestView=e,this._closestEnd={id:e.model.id})),e.$("[magnet]").each(n.bind(function(t,n){var r=i(n).bbox(!1,this.paper.viewport);I=C.distance({x:r.x+r.width/2,y:r.y+r.height/2}),b>I&&A>I&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(e,n))&&(A=I,this._closestView=e,this._closestEnd={id:e.model.id,selector:e.getSelector(n),port:n.getAttribute("port")})},this))},this),this._closestView&&this._closestView.highlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this.model.set(this._arrowhead,this._closestEnd||{x:t,y:r},{ui:!0})}else{var _="mousemove"===e.type?e.target:document.elementFromPoint(e.clientX,e.clientY);this._targetEvent!==_&&(this._magnetUnderPointer&&this._viewUnderPointer.unhighlight(this._magnetUnderPointer,{connecting:!0}),this._viewUnderPointer=this.paper.findView(_),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(_),this._magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&&this._viewUnderPointer.highlight(this._magnetUnderPointer,{connecting:!0}):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._targetEvent=_,this.model.set(this._arrowhead,{x:t,y:r},{ui:!0})}}this._dx=t,this._dy=r,s.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("link:pointermove",e,t,r)},pointerup:function(e,t,n){if("label-move"===this._action)this._samples=null;else if("arrowhead-move"===this._action){var r=this.paper.options,i=this._arrowhead;if(r.snapLinks)this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;else{var a=this._viewUnderPointer,o=this._magnetUnderPointer;if(this._viewUnderPointer=null,this._magnetUnderPointer=null,o){a.unhighlight(o,{connecting:!0});var l=a.getSelector(o),u=o.getAttribute("port"),c={id:a.model.id};null!=l&&(c.port=u),null!=u&&(c.selector=l),this.model.set(i,c,{ui:!0})}}if(!this.paper.linkAllowed(this))switch(this._whenNotAllowed){case"remove":this.model.remove();break;case"revert":default:this.model.set(i,this._initialEnd,{ui:!0})}r.embeddingMode&&this.model.reparent()&&(this._z=null),this._afterArrowheadMove()}this._action=null,this._whenNotAllowed=null,this.notify("link:pointerup",e,t,n),s.dia.CellView.prototype.pointerup.apply(this,arguments)}},{makeSelector:function(e){var t='[model-id="'+e.id+'"]';return e.port?t+=' [port="'+e.port+'"]':e.selector&&(t+=" "+e.selector),t}}),s.dia.Paper=s.mvc.View.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,perpendicularLinks:!1,elementView:s.dia.ElementView,linkView:s.dia.LinkView,snapLinks:!1,multiLinks:!0,guard:function(e,t){return!1},restrictTranslate:!1,markAvailable:!1,defaultLink:new s.dia.Link,defaultConnector:{name:"normal"},defaultRouter:null,validateMagnet:function(e,t){return"passive"!==t.getAttribute("magnet")},validateConnection:function(e,t,n,r,i,a){return("target"===i?n:e)instanceof s.dia.ElementView},embeddingMode:!1,validateEmbedding:function(e,t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,clickThreshold:0,cellViewNamespace:s.shapes},events:{mousedown:"pointerdown",dblclick:"mousedblclick",click:"mouseclick",touchstart:"pointerdown",mousemove:"pointermove",touchmove:"pointermove","mouseover .element":"cellMouseover","mouseover .link":"cellMouseover","mouseout .element":"cellMouseout","mouseout .link":"cellMouseout",contextmenu:"contextmenu"},init:function(){n.bindAll(this,"pointerup"),this.options.origin=n.clone(this.options.origin),this.options.defaultConnector=n.clone(this.options.defaultConnector),this.svg=i("svg").node,this.viewport=i("g").addClass("viewport").node,this.defs=i("defs").node,i(this.svg).append([this.viewport,this.defs]),this.$el.append(this.svg),this.setOrigin(),this.setDimensions(),this.listenTo(this.model,"add",this.onCellAdded),this.listenTo(this.model,"remove",this.removeView),this.listenTo(this.model,"reset",this.resetViews),this.listenTo(this.model,"sort",this.sortViews),r(document).on("mouseup touchend",this.pointerup),this._mousemoved=0,this._views={},this.on({"cell:highlight":this.onCellHighlight,"cell:unhighlight":this.onCellUnhighlight})},onRemove:function(){this.removeViews(),r(document).off("mouseup touchend",this.pointerup)},setDimensions:function(e,t){e=this.options.width=e||this.options.width,t=this.options.height=t||this.options.height,i(this.svg).attr({width:e,height:t}),this.trigger("resize",e,t)},setOrigin:function(e,t){this.options.origin.x=e||0,this.options.origin.y=t||0,i(this.viewport).translate(e,t,{absolute:!0}),this.trigger("translate",e,t)},fitToContent:function(e,t,r,a){n.isObject(e)?(a=e,e=a.gridWidth||1,t=a.gridHeight||1,r=a.padding||0):(a=a||{},e=e||1,t=t||1,r=r||0),r=s.util.normalizeSides(r);var o=i(this.viewport).bbox(!0,this.svg),l=i(this.viewport).scale();o.x*=l.sx,o.y*=l.sy,o.width*=l.sx,o.height*=l.sy;var u=Math.max(Math.ceil((o.width+o.x)/e),1)*e,c=Math.max(Math.ceil((o.height+o.y)/t),1)*t,d=0,f=0;("negative"==a.allowNewOrigin&&o.x<0||"positive"==a.allowNewOrigin&&o.x>=0||"any"==a.allowNewOrigin)&&(d=Math.ceil(-o.x/e)*e,d+=r.left,u+=d),("negative"==a.allowNewOrigin&&o.y<0||"positive"==a.allowNewOrigin&&o.y>=0||"any"==a.allowNewOrigin)&&(f=Math.ceil(-o.y/t)*t,f+=r.top,c+=f),u+=r.right,c+=r.bottom,u=Math.max(u,a.minWidth||0),c=Math.max(c,a.minHeight||0),u=Math.min(u,a.maxWidth||Number.MAX_VALUE),c=Math.min(c,a.maxHeight||Number.MAX_VALUE);var h=u!=this.options.width||c!=this.options.height,p=d!=this.options.origin.x||f!=this.options.origin.y;p&&this.setOrigin(d,f),h&&this.setDimensions(u,c)},scaleContentToFit:function(e){var t=this.getContentBBox();if(t.width&&t.height){e=e||{},n.defaults(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var r=e.padding,a=e.minScaleX||e.minScale,s=e.maxScaleX||e.maxScale,l=e.minScaleY||e.minScale,u=e.maxScaleY||e.maxScale,c=e.fittingBBox||{x:this.options.origin.x,y:this.options.origin.y,width:this.options.width,height:this.options.height};c=o.rect(c).moveAndExpand({x:r,y:r,width:-2*r,height:-2*r});var d=i(this.viewport).scale(),f=c.width/t.width*d.sx,h=c.height/t.height*d.sy;if(e.preserveAspectRatio&&(f=h=Math.min(f,h)),e.scaleGrid){var p=e.scaleGrid;f=p*Math.floor(f/p),h=p*Math.floor(h/p)}f=Math.min(s,Math.max(a,f)),h=Math.min(u,Math.max(l,h)),this.scale(f,h);var g=this.getContentBBox(),m=c.x-g.x,v=c.y-g.y;this.setOrigin(m,v)}},getContentBBox:function(){var e=this.viewport.getBoundingClientRect(),t=this.viewport.getScreenCTM(),n=this.viewport.getCTM(),r=o.rect({x:e.left-t.e+n.e,y:e.top-t.f+n.f,width:e.width,height:e.height});return r},getArea:function(){var e=this.viewport.getCTM().inverse(),t={x:0,y:0,width:this.options.width,height:this.options.height};return o.rect(i.transformRect(t,e))},getRestrictedArea:function(){var e;return e=n.isFunction(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):this.options.restrictTranslate===!0?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(e){var n,r,i=this.options.cellViewNamespace,a=e.get("type")+"View",o=s.util.getByPath(i,a,".");e.isLink()?(n=this.options.linkView,r=s.dia.LinkView):(n=this.options.elementView,r=s.dia.ElementView);var l=n.prototype instanceof t.View?o||n:n.call(this,e)||o||r;return new l({model:e,interactive:this.options.interactive})},onCellAdded:function(e,t,r){if(this.options.async&&r.async!==!1&&n.isNumber(r.position)){if(this._asyncCells=this._asyncCells||[],this._asyncCells.push(e),0==r.position){if(this._frameId)throw new Error("another asynchronous rendering in progress");this.asyncRenderViews(this._asyncCells,r),delete this._asyncCells}}else this.renderView(e)},removeView:function(e){var t=this._views[e.id];return t&&(t.remove(),delete this._views[e.id]),t},renderView:function(e){var t=this._views[e.id]=this.createViewForModel(e);return i(this.viewport).append(t.el),t.paper=this,t.render(),r(t.el).find("image").on("dragstart",function(){return!1}),t},beforeRenderViews:function(e){return e.sort(function(e,t){return e instanceof s.dia.Link?1:-1}),e},afterRenderViews:function(){this.sortViews()},resetViews:function(e,t){r(this.viewport).empty(),this.removeViews();var i=e.models.slice();i=this.beforeRenderViews(i,t)||i,this._frameId&&(s.util.cancelFrame(this._frameId),delete this._frameId),this.options.async?this.asyncRenderViews(i,t):(n.each(i,this.renderView,this),this.sortViews())},removeViews:function(){n.invoke(this._views,"remove"),this._views={}},asyncBatchAdded:n.noop,asyncRenderViews:function(e,t){if(this._frameId){var r=this.options.async&&this.options.async.batchSize||50,i=e.splice(0,r),a=this.model.get("cells");n.each(i,function(e){e.collection===a&&this.renderView(e)},this),this.asyncBatchAdded()}e.length?this._frameId=s.util.nextFrame(function(){this.asyncRenderViews(e,t)},this):(delete this._frameId,this.afterRenderViews(t),this.trigger("render:done",t))},sortViews:function(){var e=r(this.viewport).children("[model-id]"),t=this.model.get("cells");s.util.sortElements(e,function(e,n){var i=t.get(r(e).attr("model-id")),a=t.get(r(n).attr("model-id"));return(i.get("z")||0)>(a.get("z")||0)?1:-1})},scale:function(e,t,r,a){t=t||e,n.isUndefined(r)&&(r=0,a=0),i(this.viewport).attr("transform","");var o=this.options.origin.x,s=this.options.origin.y;if(r||a||o||s){var l=o-r*(e-1),u=s-a*(t-1);this.setOrigin(l,u)}return i(this.viewport).scale(e,t),this.trigger("scale",e,t,r,a),this},rotate:function(e,t,r){if(n.isUndefined(t)){var a=this.viewport.getBBox();t=a.width/2,r=a.height/2}i(this.viewport).rotate(e,t,r)},findView:function(e){for(var t=n.isString(e)?this.viewport.querySelector(e):e instanceof r?e[0]:e;t&&t!==this.el&&t!==document;){var i=t.getAttribute("model-id");if(i)return this._views[i];t=t.parentNode}return void 0},findViewByModel:function(e){var t=n.isString(e)?e:e.id;return this._views[t]},findViewsFromPoint:function(e){e=o.point(e);var t=n.map(this.model.getElements(),this.findViewByModel,this);return n.filter(t,function(t){return t&&o.rect(t.vel.bbox(!1,this.viewport)).containsPoint(e)},this)},findViewsInArea:function(e,t){t=n.defaults(t||{},{strict:!1}),e=o.rect(e);var r=n.map(this.model.getElements(),this.findViewByModel,this),i=t.strict?"containsRect":"intersect";return n.filter(r,function(t){return t&&e[i](o.rect(t.vel.bbox(!1,this.viewport)))},this)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e){var t=i(this.viewport).toLocalPoint(e.x,e.y);return{x:o.snapToGrid(t.x,this.options.gridSize),y:o.snapToGrid(t.y,this.options.gridSize)}},clientToLocalPoint:function(e){e=o.point(e);var t=i("rect",{width:this.options.width,height:this.options.height,x:0,y:0,opacity:0});i(this.svg).prepend(t);var n=r(this.svg).offset();t.remove();var a=document.body.scrollTop||document.documentElement.scrollTop,s=document.body.scrollLeft||document.documentElement.scrollLeft;return e.offset(s-n.left,a-n.top),i.transformPoint(e,this.viewport.getCTM().inverse())},linkAllowed:function(e){var t;if(e instanceof s.dia.Link)t=e;else{if(!(e instanceof s.dia.LinkView))throw new Error("Must provide link model or view.");t=e.model}if(!this.options.multiLinks){var r=t.get("source"),i=t.get("target");if(r.id&&i.id){var a=t.getSourceElement();if(a){var o=this.model.getConnectedLinks(a,{outbound:!0,inbound:!1}),l=n.filter(o,function(e){var t=e.get("source"),n=e.get("target");return t&&t.id===r.id&&(!t.port||t.port===r.port)&&n&&n.id===i.id&&(!n.port||n.port===i.port)}).length;if(l>1)return!1}}}return this.options.linkPinning||n.has(t.get("source"),"id")&&n.has(t.get("target"),"id")?!0:!1},getDefaultLink:function(e,t){return n.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},onCellHighlight:function(e,t){i(t).addClass("highlighted")},onCellUnhighlight:function(e,t){i(t).removeClass("highlighted")},mousedblclick:function(e){e.preventDefault(),e=s.util.normalizeEvent(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid({x:e.clientX,y:e.clientY});t?t.pointerdblclick(e,n.x,n.y):this.trigger("blank:pointerdblclick",e,n.x,n.y)}},mouseclick:function(e){if(this._mousemoved<=this.options.clickThreshold){e=s.util.normalizeEvent(e);var t=this.findView(e.target);if(this.guard(e,t))return;var n=this.snapToGrid({x:e.clientX,y:e.clientY});t?t.pointerclick(e,n.x,n.y):this.trigger("blank:pointerclick",e,n.x,n.y)}},guard:function(e,t){return this.options.guard&&this.options.guard(e,t)?!0:t&&t.model&&t.model instanceof s.dia.Cell?!1:this.svg===e.target||this.el===e.target||r.contains(this.svg,e.target)?!1:!0},contextmenu:function(e){e=s.util.normalizeEvent(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid({x:e.clientX,y:e.clientY});t?t.contextmenu(e,n.x,n.y):this.trigger("blank:contextmenu",e,n.x,n.y)}},pointerdown:function(e){e=s.util.normalizeEvent(e);var t=this.findView(e.target);if(!this.guard(e,t)){e.preventDefault(),this._mousemoved=0;var n=this.snapToGrid({x:e.clientX,y:e.clientY});t?(this.sourceView=t,
t.pointerdown(e,n.x,n.y)):this.trigger("blank:pointerdown",e,n.x,n.y)}},pointermove:function(e){if(e.preventDefault(),e=s.util.normalizeEvent(e),this.sourceView){this._mousemoved++;var t=this.snapToGrid({x:e.clientX,y:e.clientY});this.sourceView.pointermove(e,t.x,t.y)}},pointerup:function(e){e=s.util.normalizeEvent(e);var t=this.snapToGrid({x:e.clientX,y:e.clientY});this.sourceView?(this.sourceView.pointerup(e,t.x,t.y),this.sourceView=null):this.trigger("blank:pointerup",e,t.x,t.y)},cellMouseover:function(e){e=s.util.normalizeEvent(e);var t=this.findView(e.target);if(t){if(this.guard(e,t))return;t.mouseover(e)}},cellMouseout:function(e){e=s.util.normalizeEvent(e);var t=this.findView(e.target);if(t){if(this.guard(e,t))return;t.mouseout(e)}}}),s.shapes.basic={},s.shapes.basic.Generic=s.dia.Element.extend({defaults:s.util.deepSupplement({type:"basic.Generic",attrs:{".":{fill:"#ffffff",stroke:"none"}}},s.dia.Element.prototype.defaults)}),s.shapes.basic.Rect=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Rect",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.TextView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:attrs",this.resize)}}),s.shapes.basic.Text=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><text/></g></g>',defaults:s.util.deepSupplement({type:"basic.Text",attrs:{text:{"font-size":18,fill:"#000000"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Circle=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Circle",size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Ellipse=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Ellipse",size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Polygon=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Polygon",size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Polyline=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Polyline",size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Image=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Image",attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Path=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Path",size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Rhombus=s.shapes.basic.Path.extend({defaults:s.util.deepSupplement({type:"basic.Rhombus",attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"y-alignment":"middle"}}},s.shapes.basic.Path.prototype.defaults)}),s.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on("change:inPorts change:outPorts",this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(e){var t=this.get("attrs");n.each(this._portSelectors,function(e){t[e]&&delete t[e]}),this._portSelectors=[];var r={};n.each(this.get("inPorts"),function(e,t,i){var a=this.getPortAttrs(e,t,i.length,".inPorts","in");this._portSelectors=this._portSelectors.concat(n.keys(a)),n.extend(r,a)},this),n.each(this.get("outPorts"),function(e,t,i){var a=this.getPortAttrs(e,t,i.length,".outPorts","out");this._portSelectors=this._portSelectors.concat(n.keys(a)),n.extend(r,a)},this),this.attr(r,{silent:!0}),this.processPorts(),this.trigger("process:ports")},getPortSelector:function(e){var t=".inPorts",n=this.get("inPorts").indexOf(e);if(0>n&&(t=".outPorts",n=this.get("outPorts").indexOf(e),0>n))throw new Error("getPortSelector(): Port doesn't exist.");return t+">g:nth-child("+(n+1)+")>.port-body"}},s.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,"process:ports",this.update),s.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),s.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var e=this.$(".inPorts").empty(),t=this.$(".outPorts").empty(),r=n.template(this.model.portMarkup);n.each(n.filter(this.model.ports,function(e){return"in"===e.type}),function(t,n){e.append(i(r({id:n,port:t})).node)}),n.each(n.filter(this.model.ports,function(e){return"out"===e.type}),function(e,n){t.append(i(r({id:n,port:e})).node)})}},s.shapes.basic.TextBlock=s.shapes.basic.Generic.extend({markup:['<g class="rotatable"><g class="scalable"><rect/></g><switch>','<foreignObject requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" class="fobj">','<body xmlns="http://www.w3.org/1999/xhtml"><div/></body>',"</foreignObject>",'<text class="content"/>',"</switch></g>"].join(""),defaults:s.util.deepSupplement({type:"basic.TextBlock",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"",ref:"rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},s.shapes.basic.Generic.prototype.defaults),initialize:function(){"undefined"!=typeof SVGForeignObjectElement&&(this.setForeignObjectSize(this,this.get("size")),this.setDivContent(this,this.get("content")),this.listenTo(this,"change:size",this.setForeignObjectSize),this.listenTo(this,"change:content",this.setDivContent)),s.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},setForeignObjectSize:function(e,t){e.attr({".fobj":n.clone(t),div:{style:n.clone(t)}})},setDivContent:function(e,t){e.attr({div:{html:t}})}}),s.shapes.basic.TextBlockView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),"undefined"==typeof SVGForeignObjectElement&&(this.noSVGForeignObjectElement=!0,this.listenTo(this.model,"change:content",function(e){this.updateContent(e)}))},update:function(e,t){if(this.noSVGForeignObjectElement){var r=this.model,i=n.omit(t||r.get("attrs"),".content");s.dia.ElementView.prototype.update.call(this,r,i),(!t||n.has(t,".content"))&&this.updateContent(r,t)}else s.dia.ElementView.prototype.update.call(this,r,t)},updateContent:function(e,t){var r=n.merge({},(t||e.get("attrs"))[".content"]);delete r.text;var i=s.util.breakText(e.get("content"),e.get("size"),r,{svgDocument:this.paper.svg}),a=s.util.setByPath({},".content",r,"/");a[".content"].text=i,s.dia.ElementView.prototype.update.call(this,e,a)}}),s.routers.orthogonal=function(){function e(e,t){return e.x==t.x?e.y>t.y?"N":"S":e.y==t.y?e.x>t.x?"W":"E":null}function t(e,t){return e["W"==t||"E"==t?"width":"height"]}function r(e,t){return o.rect(e).moveAndExpand({x:-t,y:-t,width:2*t,height:2*t})}function i(e){return o.rect(e.x,e.y,0,0)}function a(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),i=Math.max(e.x+e.width,t.x+t.width),a=Math.max(e.y+e.height,t.y+t.height);return o.rect(n,r,i-n,a-r)}function s(e,t,n){var r=o.point(e.x,t.y);return n.containsPoint(r)&&(r=o.point(t.x,e.y)),r}function l(t,n,r){var i=o.point(t.x,n.y),a=o.point(n.x,t.y),s=e(t,i),l=e(t,a),u=p[r],c=s==r||s!=u&&(l==u||l!=r)?i:a;return{points:[c],direction:e(c,n)}}function u(t,n,r){var i=s(t,n,r);return{points:[i],direction:e(i,n)}}function c(r,i,a,l){var u,c={},d=[o.point(r.x,i.y),o.point(i.x,r.y)],f=n.filter(d,function(e){return!a.containsPoint(e)}),h=n.filter(f,function(t){return e(t,r)!=l});if(h.length>0)u=n.filter(h,function(t){return e(r,t)==l}).pop(),u=u||h[0],c.points=[u],c.direction=e(u,i);else{u=n.difference(d,f)[0];var p=o.point(i).move(u,-t(a,l)/2),g=s(p,r,a);c.points=[g,p],c.direction=e(p,i)}return c}function d(n,r,i,a){var s=u(r,n,a),c=s.points[0];if(i.containsPoint(c)){s=u(n,r,i);var d=s.points[0];if(a.containsPoint(d)){var f=o.point(n).move(d,-t(i,e(n,d))/2),h=o.point(r).move(c,-t(a,e(r,c))/2),p=o.line(f,h).midpoint(),g=u(n,p,i),m=l(p,r,g.direction);s.points=[g.points[0],m.points[0]],s.direction=m.direction}}return s}function f(t,n,i,l,u){var c,d,f,h={},p=r(a(i,l),1),m=p.center().distance(n)>p.center().distance(t),v=m?n:t,y=m?t:n;return u?(c=o.point.fromPolar(p.width+p.height,g[u],v),c=p.pointNearestToPoint(c).move(c,-1)):c=p.pointNearestToPoint(v).move(v,1),d=s(c,y,p),c.round().equals(d.round())?(d=o.point.fromPolar(p.width+p.height,o.toRad(c.theta(v))+Math.PI/2,y),d=p.pointNearestToPoint(d).move(y,1).round(),f=s(c,d,p),h.points=m?[d,f,c]:[c,f,d]):h.points=m?[d,c]:[c,d],h.direction=m?e(c,n):e(d,n),h}function h(t,a,s){var h=a.elementPadding||20,p=[],g=r(s.sourceBBox,h),m=r(s.targetBBox,h);t=n.map(t,o.point),t.unshift(g.center()),t.push(m.center());for(var v,y=0,x=t.length-1;x>y;y++){var b=null,w=t[y],I=t[y+1],A=!!e(w,I);if(0==y)y+1==x?g.intersect(r(m,1))?b=f(w,I,g,m):A||(b=d(w,I,g,m)):g.containsPoint(I)?b=f(w,I,g,r(i(I),h)):A||(b=u(w,I,g));else if(y+1==x){var C=A&&e(I,w)==v;m.containsPoint(w)||C?b=f(w,I,r(i(w),h),m,v):A||(b=c(w,I,m,v))}else A||(b=l(w,I,v));b?(Array.prototype.push.apply(p,b.points),v=b.direction):v=e(w,I),x>y+1&&p.push(I)}return p}var p={N:"S",S:"N",E:"W",W:"E"},g={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};return h}(),s.routers.manhattan=function(e,t){"use strict";function n(e){this.map={},this.options=e,this.mapGridSize=100}function r(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function i(e,t){for(var n,r=[],i={x:0,y:0},a=t;n=e[a];){var o=n.difference(a);o.equals(i)||(r.unshift(a),i=o),a=n}return r.unshift(a),r}function a(e,n,r){var i=r.step,a=e.center(),o=t.chain(r.directionMap).pick(n).map(function(t){var n=t.x*e.width/2,r=t.y*e.height/2,o=a.clone().offset(n,r);return e.containsPoint(o)&&o.offset(t.x*i,t.y*i),o.snapToGrid(i)}).value();return o}function o(t,n,r){var i=360/r;return Math.floor(e.normalizeAngle(t.theta(n)+i/2)/i)*i}function s(e,t){var n=Math.abs(e-t);return n>180?360-n:n}function l(e,t){for(var n=1/0,r=0,i=t.length;i>r;r++){var a=e.manhattanDistance(t[r]);n>a&&(n=a)}return n}function u(n,u,c,d){var f,h,p,g,m=d.step;if(n instanceof e.rect?(f=a(n,d.startDirections,d),p=n.center()):(p=n.clone().snapToGrid(m),f=[n]),u instanceof e.rect?(h=a(u,d.endDirections,d),g=u.center()):(g=u.clone().snapToGrid(m),h=[u]),f=t.filter(f,c.isPointAccessible,c),h=t.filter(h,c.isPointAccessible,c),f.length>0&&h.length>0){var v=new r,y={},x={};t.each(f,function(e){var t=e.toString();v.add(t,l(e,h)),x[t]=0});for(var b,w,I=d.directions,A=I.length,C=d.maximumLoops,_=t.invoke(h,"toString");!v.isEmpty()&&C>0;){var k=v.pop(),M=e.point(k),z=x[k],N=y[k]?o(y[k],M,A):null!=d.previousDirAngle?d.previousDirAngle:o(p,M,A);if(_.indexOf(k)>=0&&(w=s(N,o(M,g,A)),M.equals(g)||180>w))return d.previousDirAngle=N,i(y,M);for(var S=0;A>S;S++)if(b=I[S],w=s(N,b.angle),!(w>d.maxAllowedDirectionChange)){var j=M.clone().offset(b.offsetX,b.offsetY),D=j.toString();if(!v.isClose(D)&&c.isPointAccessible(j)){var T=z+b.cost+d.penalties[w];(!v.isOpen(D)||T<x[D])&&(y[D]=M,x[D]=T,v.add(D,T+l(j,h)))}}C--}}return d.fallbackRoute(p,g,d)}function c(n){n.directions=t.result(n,"directions"),n.penalties=t.result(n,"penalties"),n.paddingBox=t.result(n,"paddingBox"),t.each(n.directions,function(t){var n=new e.point(0,0),r=new e.point(t.offsetX,t.offsetY),i=e.normalizeAngle(n.theta(r));t.angle=i})}function d(r,i){c(i),this.options.perpendicular=!!i.perpendicular;for(var a=e.rect(this.sourceBBox).moveAndExpand(i.paddingBox),o=e.rect(this.targetBBox).moveAndExpand(i.paddingBox),s=new n(i).build(this.paper.model,this.model),l=t.map(r,e.point),d=[],f=a.center().snapToGrid(i.step),h=0,p=l.length;p>=h;h++){var g=null,m=v||a,v=l[h];if(!v){v=o;var y=!this.model.get("source").id||!this.model.get("target").id;if(y&&t.isFunction(i.draggingRoute)){var x=m instanceof e.rect?m.center():m;g=i.draggingRoute(x,v.origin(),i)}}g=g||u(m,v,s,i);var b=t.first(g);b&&b.equals(f)&&g.shift(),f=t.last(g)||f,Array.prototype.push.apply(d,g)}return d}var f={step:10,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],maximumLoops:2e3,startDirections:["left","right","top","bottom"],endDirections:["left","right","top","bottom"],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:90,paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},directions:function(){var e=this.step;return[{offsetX:e,offsetY:0,cost:e},{offsetX:0,offsetY:e,cost:e},{offsetX:-e,offsetY:0,cost:e},{offsetX:0,offsetY:-e,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},fallbackRoute:function(t,n,r){var i=(r.previousDirAngle||0)%180===0?e.point(t.x,n.y):e.point(n.x,t.y);return[i,n]},draggingRoute:null};return n.prototype.build=function(e,n){var r=this.options,i=t.chain(r.excludeEnds).map(n.get,n).pluck("id").map(e.getCell,e).value(),a=[],o=e.getCell(n.get("source").id);o&&(a=t.union(a,t.map(o.getAncestors(),"id")));var s=e.getCell(n.get("target").id);s&&(a=t.union(a,t.map(s.getAncestors(),"id")));var l=this.mapGridSize;return t.chain(e.getElements()).difference(i).reject(function(e){return t.contains(r.excludeTypes,e.get("type"))||t.contains(a,e.id)}).invoke("getBBox").invoke("moveAndExpand",r.paddingBox).foldl(function(e,t){for(var n=t.origin().snapToGrid(l),r=t.corner().snapToGrid(l),i=n.x;i<=r.x;i+=l)for(var a=n.y;a<=r.y;a+=l){var o=i+"@"+a;e[o]=e[o]||[],e[o].push(t)}return e},this.map).value(),this},n.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return t.every(this.map[n],function(t){return!t.containsPoint(e)})},r.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var r=t.sortedIndex(this.items,e,function(e){return this.values[e]},this);this.items.splice(r,0,e)},r.prototype.remove=function(e){this.hash[e]=this.CLOSE},r.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},r.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},r.prototype.isEmpty=function(){return 0===this.items.length},r.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e},function(e,n,r){return d.call(r,e,t.extend({},f,n))}}(o,n),s.routers.metro=function(){if(!n.isFunction(s.routers.manhattan))throw"Metro requires the manhattan router.";var e={diagonalCost:null,directions:function(){var e=this.step,t=this.diagonalCost||Math.ceil(Math.sqrt(e*e<<1));return[{offsetX:e,offsetY:0,cost:e},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:e},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:e},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:e},{offsetX:e,offsetY:-e,cost:t}]},maxAllowedDirectionChange:45,fallbackRoute:function(e,t,n){var r=e.theta(t),i={x:t.x,y:e.y},a={x:e.x,y:t.y};if(r%180>90){var s=i;i=a,a=s}var l=45>r%90?i:a,u=o.line(e,l),c=90*Math.ceil(r/90),d=o.point.fromPolar(u.squaredLength(),o.toRad(c+135),l),f=o.line(t,d),h=u.intersection(f);return h?[h.round(),t]:[t]}};return function(t,r,i){return s.routers.manhattan(t,n.extend({},e,r),i)}}(),s.routers.oneSide=function(e,t,n){var r,i,a,o=t.side||"bottom",s=t.padding||40,l=n.sourceBBox,u=n.targetBBox,c=l.center(),d=u.center();switch(o){case"bottom":a=1,r="y",i="height";break;case"top":a=-1,r="y",i="height";break;case"left":a=-1,r="x",i="width";break;case"right":a=1,r="x",i="width";break;default:throw new Error("Router: invalid side")}return c[r]+=a*(l[i]/2+s),d[r]+=a*(u[i]/2+s),a*(c[r]-d[r])>0?d[r]=c[r]:c[r]=d[r],[c].concat(e,d)},s.connectors.normal=function(e,t,r){var i=["M",e.x,e.y];return n.each(r,function(e){i.push(e.x,e.y)}),i.push(t.x,t.y),i.join(" ")},s.connectors.rounded=function(e,t,r,i){i=i||{};var a,s,l,u,c,d,f=i.radius||10,h=["M",e.x,e.y];return n.each(r,function(n,i){c=r[i-1]||e,d=r[i+1]||t,l=u||o.point(n).distance(c)/2,u=o.point(n).distance(d)/2,a=o.point(n).move(c,-Math.min(f,l)).round(),s=o.point(n).move(d,-Math.min(f,u)).round(),h.push(a.x,a.y,"S",n.x,n.y,s.x,s.y,"L")}),h.push(t.x,t.y),h.join(" ")},s.connectors.smooth=function(e,t,n){var r;if(n.length)r=o.bezier.curveThroughPoints([e].concat(n).concat([t]));else{var i=e.x<t.x?t.x-(t.x-e.x)/2:e.x-(e.x-t.x)/2;r=["M",e.x,e.y,"C",i,e.y,i,t.y,t.x,t.y]}return r.join(" ")},s.connectors.jumpover=function(e,t){function n(e,n,r){var i=[].concat(e,r,n);return i.reduce(function(e,n,r){var a=i[r+1];return null!=a&&(e[r]=t.line(n,a)),e},[])}function r(e){var t=e.paper._jumpOverUpdateList;null==t&&(t=e.paper._jumpOverUpdateList=[],e.paper.on("cell:pointerup",i),e.paper.model.on("reset",function(){t=[]})),t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}function i(){for(var e=this._jumpOverUpdateList,t=0;t<e.length;t++)e[t].update()}function a(t,n){return e(n).map(function(e){return t.intersection(e)}).compact().value()}function o(e,n){return t.line(e,n).squaredLength()}function s(e,n,r){return n.reduce(function(i,a,o){if(a.skip===!0)return i;var s=i.pop()||e,l=t.point(a).move(s.start,-r),u=t.point(a).move(s.start,+r),c=n[o+1];if(null!=c){var f=u.distance(c);r>=f&&(u=c.move(s.start,f),c.skip=!0)}else{var h=l.distance(s.end);if(2*r+d>h)return i.push(s),i}var p=u.distance(s.start);if(2*r+d>p)return i.push(s),i;var g=t.line(l,u);return g.isJump=!0,i.push(t.line(s.start,l),g,t.line(u,s.end)),i},[])}function l(n,r,i){var a=["M",n[0].start.x,n[0].start.y],o=e(n).map(function(e){if(e.isJump){var n;if("arc"===i){n=e.start.difference(e.end);var a=Number(n.x<0&&n.y<0);return["A",r,r,0,0,a,e.end.x,e.end.y]}if("gap"===i)return["M",e.end.x,e.end.y];if("cubic"===i){n=e.start.difference(e.end);var o=e.start.theta(e.end),s=.6*r,l=1.35*r;n.x<0&&n.y<0&&(l*=-1);var u=t.point(e.start.x+s,e.start.y+l).rotate(e.start,o),c=t.point(e.end.x-s,e.end.y+l).rotate(e.end,o);return["C",u.x,u.y,c.x,c.y,e.end.x,e.end.y]}}return["L",e.end.x,e.end.y]}).flatten().value();return[].concat(a,o).join(" ")}var u=5,c=["arc","gap","cubic"],d=1,f=["smooth"];return function(t,i,d,h){r(this);var p=h.size||u,g=h.jump&&(""+h.jump).toLowerCase(),m=h.ignoreConnectors||f;-1===c.indexOf(g)&&(g=c[0]);var v=this.paper,y=v.model,x=y.getLinks();if(1===x.length)return l(n(t,i,d),p,g);var b=this.model,w=x.indexOf(b),I=v.options.defaultConnector||{},A=x.filter(function(t,n){var r=t.get("connector")||I;return e.contains(m,r.name)?!1:n>w?"jumpover"!==r.name:!0}),C=A.map(function(e){return v.findViewByModel(e)}),_=n(t,i,d),k=C.map(function(e){return null==e?[]:e===this?_:n(e.sourcePoint,e.targetPoint,e.route)},this),M=_.reduce(function(t,n){var r=e(A).map(function(e,t){return e===b?null:a(n,k[t])}).flatten().compact().sortBy(e.partial(o,n.start)).value();return r.length>0?t.push.apply(t,s(n,r,p)):t.push(n),t},[]);return l(M,p,g)}}(n,o),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.erd={},s.shapes.erd.Entity=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.Entity",size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,ref:".outer","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.WeakEntity=s.shapes.erd.Entity.extend({defaults:s.util.deepSupplement({type:"erd.WeakEntity",attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}},s.shapes.erd.Entity.prototype.defaults)}),s.shapes.erd.Relationship=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.Relationship",size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.IdentifyingRelationship=s.shapes.erd.Relationship.extend({defaults:s.util.deepSupplement({type:"erd.IdentifyingRelationship",attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}},s.shapes.erd.Relationship.prototype.defaults)}),s.shapes.erd.Attribute=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.Attribute",size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.Multivalued=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Multivalued",attrs:{".inner":{display:"block"},text:{text:"multivalued"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.Derived=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Derived",attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.Key=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Key",attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.Normal=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Normal",attrs:{text:{text:"Normal"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.ISA=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,ref:"polygon","ref-x":.5,"ref-y":.3,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.Line=s.dia.Link.extend({defaults:{type:"erd.Line"},cardinality:function(e){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:e}}}])}}),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.fsa={},s.shapes.fsa.State=s.shapes.basic.Circle.extend({defaults:s.util.deepSupplement({type:"fsa.State",attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}},s.shapes.basic.Circle.prototype.defaults)}),s.shapes.fsa.StartState=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>',defaults:s.util.deepSupplement({type:"fsa.StartState",size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},s.dia.Element.prototype.defaults)}),s.shapes.fsa.EndState=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:s.util.deepSupplement({type:"fsa.EndState",size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},s.dia.Element.prototype.defaults)}),s.shapes.fsa.Arrow=s.dia.Link.extend({defaults:s.util.deepSupplement({type:"fsa.Arrow",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0},s.dia.Link.prototype.defaults)}),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.org={},s.shapes.org.Member=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>',defaults:s.util.deepSupplement({type:"org.Member",size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},s.dia.Element.prototype.defaults)}),s.shapes.org.Arrow=s.dia.Link.extend({defaults:{type:"org.Arrow",source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}}),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.chess={},s.shapes.chess.KingWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KingWhite",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.KingBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KingBlack",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.QueenWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.QueenWhite",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.QueenBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.QueenBlack",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.RookWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.RookWhite",size:{width:32,height:34}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.RookBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.RookBlack",size:{width:32,height:34}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.BishopWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.BishopWhite",size:{width:38,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.BishopBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.BishopBlack",size:{width:38,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.KnightWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KnightWhite",size:{width:38,height:37}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.KnightBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KnightBlack",size:{width:38,height:37}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.PawnWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:s.util.deepSupplement({type:"chess.PawnWhite",size:{width:28,height:33}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.PawnBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:s.util.deepSupplement({type:"chess.PawnBlack",size:{width:28,height:33}},s.shapes.basic.Generic.prototype.defaults)}),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.pn={},s.shapes.pn.Place=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>',defaults:s.util.deepSupplement({type:"pn.Place",size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.pn.PlaceView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),this.model.on("change:tokens",function(){this.renderTokens(),this.update()},this)},render:function(){s.dia.ElementView.prototype.render.apply(this,arguments),this.renderTokens(),this.update()},renderTokens:function(){var e=this.$(".tokens").empty();e[0].className.baseVal="tokens";var t=this.model.get("tokens");if(t)switch(t){case 1:e[0].className.baseVal+=" one",e.append(i("<circle/>").node);break;case 2:e[0].className.baseVal+=" two",e.append(i("<circle/>").node,i("<circle/>").node);break;case 3:e[0].className.baseVal+=" three",e.append(i("<circle/>").node,i("<circle/>").node,i("<circle/>").node);break;default:e[0].className.baseVal+=" alot",e.append(i("<text/>").text(t+"").node)}}}),s.shapes.pn.Transition=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>',defaults:s.util.deepSupplement({type:"pn.Transition",size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.pn.Link=s.dia.Link.extend({defaults:s.util.deepSupplement({type:"pn.Link",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}},s.dia.Link.prototype.defaults)}),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.devs={},s.shapes.devs.Model=s.shapes.basic.Generic.extend(n.extend({},s.shapes.basic.PortsModelInterface,{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><text class="label"/><g class="inPorts"/><g class="outPorts"/></g>',portMarkup:'<g class="port port<%= id %>"><circle class="port-body"/><text class="port-label"/></g>',defaults:s.util.deepSupplement({type:"devs.Model",size:{width:1,height:1},inPorts:[],outPorts:[],attrs:{".":{magnet:!1},".body":{width:150,height:250,stroke:"#000000"},".port-body":{r:10,magnet:!0,stroke:"#000000"},text:{"pointer-events":"none"},".label":{text:"Model","ref-x":.5,"ref-y":10,ref:".body","text-anchor":"middle",fill:"#000000"},".inPorts .port-label":{x:-15,dy:4,"text-anchor":"end",fill:"#000000"},".outPorts .port-label":{x:15,dy:4,fill:"#000000"}}},s.shapes.basic.Generic.prototype.defaults),getPortAttrs:function(e,t,r,i,a){var o={},s="port"+t,l=i+">."+s,u=l+">.port-label",c=l+">.port-body";return o[u]={text:e},o[c]={port:{id:e||n.uniqueId(a),type:a}},o[l]={ref:".body","ref-y":(t+.5)*(1/r)},".outPorts"===i&&(o[l]["ref-dx"]=0),o}})),s.shapes.devs.Atomic=s.shapes.devs.Model.extend({defaults:s.util.deepSupplement({type:"devs.Atomic",size:{width:80,height:80},attrs:{".body":{fill:"salmon"},".label":{text:"Atomic"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},s.shapes.devs.Model.prototype.defaults)}),s.shapes.devs.Coupled=s.shapes.devs.Model.extend({defaults:s.util.deepSupplement({type:"devs.Coupled",size:{width:200,height:300},attrs:{".body":{fill:"seaGreen"},".label":{text:"Coupled"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},s.shapes.devs.Model.prototype.defaults)}),s.shapes.devs.Link=s.dia.Link.extend({defaults:{type:"devs.Link",attrs:{".connection":{"stroke-width":2}}}}),s.shapes.devs.ModelView=s.dia.ElementView.extend(s.shapes.basic.PortsViewInterface),s.shapes.devs.AtomicView=s.shapes.devs.ModelView,s.shapes.devs.CoupledView=s.shapes.devs.ModelView,/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.uml={},s.shapes.uml.Class=s.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),defaults:s.util.deepSupplement({type:"uml.Class",attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},s.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),s.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var e=this.get("attrs"),t=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],r=0;n.each(t,function(t){var i=n.isArray(t.text)?t.text:[t.text],a=20*i.length+20;e[".uml-class-"+t.type+"-text"].text=i.join("\n"),e[".uml-class-"+t.type+"-rect"].height=a,e[".uml-class-"+t.type+"-rect"].transform="translate(0,"+r+")",r+=a})}}),s.shapes.uml.ClassView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),s.shapes.uml.Abstract=s.shapes.uml.Class.extend({defaults:s.util.deepSupplement({type:"uml.Abstract",attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},s.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Abstract>>",this.get("name")]}}),s.shapes.uml.AbstractView=s.shapes.uml.ClassView,s.shapes.uml.Interface=s.shapes.uml.Class.extend({defaults:s.util.deepSupplement({type:"uml.Interface",attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},s.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Interface>>",this.get("name")]}}),s.shapes.uml.InterfaceView=s.shapes.uml.ClassView,s.shapes.uml.Generalization=s.dia.Link.extend({defaults:{type:"uml.Generalization",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}}),s.shapes.uml.Implementation=s.dia.Link.extend({defaults:{type:"uml.Implementation",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}}),s.shapes.uml.Aggregation=s.dia.Link.extend({defaults:{type:"uml.Aggregation",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}}),s.shapes.uml.Composition=s.dia.Link.extend({defaults:{type:"uml.Composition",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}}),s.shapes.uml.Association=s.dia.Link.extend({defaults:{type:"uml.Association"}}),s.shapes.uml.State=s.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),defaults:s.util.deepSupplement({type:"uml.State",attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},s.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),s.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var e="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",e,{silent:!0})}}),s.shapes.uml.StartState=s.shapes.basic.Circle.extend({defaults:s.util.deepSupplement({type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}},s.shapes.basic.Circle.prototype.defaults)}),s.shapes.uml.EndState=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:s.util.deepSupplement({type:"uml.EndState",size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.uml.Transition=s.dia.Link.extend({defaults:{type:"uml.Transition",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}}),/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
s.shapes.logic={},s.shapes.logic.Gate=s.shapes.basic.Generic.extend({defaults:s.util.deepSupplement({type:"logic.Gate",size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},s.shapes.basic.Generic.prototype.defaults),operation:function(){return!0}}),s.shapes.logic.IO=s.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>',defaults:s.util.deepSupplement({type:"logic.IO",size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},s.shapes.logic.Gate.prototype.defaults)}),s.shapes.logic.Input=s.shapes.logic.IO.extend({defaults:s.util.deepSupplement({type:"logic.Input",attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,"class":"output",port:"out"},text:{text:"input"}}},s.shapes.logic.IO.prototype.defaults)}),s.shapes.logic.Output=s.shapes.logic.IO.extend({defaults:s.util.deepSupplement({type:"logic.Output",attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive","class":"input",port:"in"},text:{text:"output"}}},s.shapes.logic.IO.prototype.defaults)}),s.shapes.logic.Gate11=s.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>',defaults:s.util.deepSupplement({type:"logic.Gate11",attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},s.shapes.logic.Gate.prototype.defaults)}),s.shapes.logic.Gate21=s.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>',defaults:s.util.deepSupplement({type:"logic.Gate21",attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},s.shapes.logic.Gate.prototype.defaults)}),s.shapes.logic.Repeater=s.shapes.logic.Gate11.extend({defaults:s.util.deepSupplement({type:"logic.Repeater",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},s.shapes.logic.Gate11.prototype.defaults),operation:function(e){return e}}),s.shapes.logic.Not=s.shapes.logic.Gate11.extend({defaults:s.util.deepSupplement({type:"logic.Not",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},s.shapes.logic.Gate11.prototype.defaults),operation:function(e){return!e}}),s.shapes.logic.Or=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Or",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(e,t){return e||t}}),s.shapes.logic.And=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.And",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(e,t){return e&&t}}),s.shapes.logic.Nor=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Nor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"
}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(e,t){return!(e||t)}}),s.shapes.logic.Nand=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Nand",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(e,t){return!(e&&t)}}),s.shapes.logic.Xor=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Xor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(e,t){return(!e||t)&&(e||!t)}}),s.shapes.logic.Xnor=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Xnor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(e,t){return(!e||!t)&&(e||t)}}),s.shapes.logic.Wire=s.dia.Link.extend({arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join(""),defaults:s.util.deepSupplement({type:"logic.Wire",attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},s.dia.Link.prototype.defaults)}),"object"==typeof exports)var l=require("graphlib"),u=require("dagre");return l=l||"undefined"!=typeof window&&window.graphlib,u=u||"undefined"!=typeof window&&window.dagre,s.dia.Graph.prototype.toGraphLib=function(e){e=e||{};var t=n.pick(e,"directed","compound","multigraph"),r=new l.Graph(t),i=e.setNodeLabel||n.noop,a=e.setEdgeLabel||n.noop,o=e.setEdgeName||n.noop;return this.get("cells").each(function(e){if(e.isLink()){var t=e.get("source"),n=e.get("target");if(!t.id||!n.id)return;r.setEdge(t.id,n.id,a(e),o(e))}else r.setNode(e.id,i(e)),r.isCompound()&&e.has("parent")&&r.setParent(e.id,e.get("parent"))}),r},s.dia.Graph.prototype.fromGraphLib=function(e,t){t=t||{};var r=t.importNode||n.noop,i=t.importEdge||n.noop;e.nodes().forEach(function(n){r.call(this,n,e,this,t)},this),e.edges().forEach(function(n){i.call(this,n,e,this,t)},this)},s.layout.DirectedGraph={layout:function(e,t){t=n.defaults(t||{},{resizeClusters:!0,clusterPadding:10});var r=e.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:function(e){return{width:e.get("size").width,height:e.get("size").height,rank:e.get("rank")}},setEdgeLabel:function(e){return{minLen:e.get("minLen")||1}},setEdgeName:function(e){return e.id}}),i={};return t.rankDir&&(i.rankdir=t.rankDir),t.nodeSep&&(i.nodesep=t.nodeSep),t.edgeSep&&(i.edgesep=t.edgeSep),t.rankSep&&(i.ranksep=t.rankSep),t.marginX&&(i.marginx=t.marginX),t.marginY&&(i.marginy=t.marginY),r.setGraph(i),u.layout(r,{debugTiming:!!t.debugTiming}),e.fromGraphLib(r,{importNode:function(e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importEdge:function(e,n){var r=this.getCell(e.name),i=n.edge(e);t.setLinkVertices&&(t.setVertices?t.setVertices(r,i.points):r.set("vertices",i.points))}}),t.resizeClusters&&n.chain(r.nodes()).filter(function(e){return r.children(e).length>0}).map(e.getCell,e).sortBy(function(e){return-e.getAncestors().length}).invoke("fitEmbeds",{padding:t.clusterPadding}).value(),r.graph()}},s.g=o,s.V=s.Vectorizer=i,s}),/*!
 DataTables 1.10.11
 ©2008-2015 SpryMedia Ltd - datatables.net/license
*/
function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){return t||(t=window),n||(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n,t,t.document)}:e(jQuery,window,document)}(function(e,t,n,r){function i(t){var n,r,a={};e.each(t,function(e){(n=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(n[1]+" ")&&(r=e.replace(n[0],n[2].toLowerCase()),a[r]=e,"o"===n[1]&&i(t[e]))}),t._hungarianMap=a}function a(t,n,o){t._hungarianMap||i(t);var s;e.each(n,function(i){s=t._hungarianMap[i],s===r||!o&&n[s]!==r||("o"===s.charAt(0)?(n[s]||(n[s]={}),e.extend(!0,n[s],n[i]),a(t[s],n[s],o)):n[s]=n[i])})}function o(e){var t=We.defaults.oLanguage,n=e.sZeroRecords;!e.sEmptyTable&&n&&"No data available in table"===t.sEmptyTable&&Te(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&n&&"Loading..."===t.sLoadingRecords&&Te(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands),(e=e.sDecimal)&&Re(e)}function s(e){if(ft(e,"ordering","bSort"),ft(e,"orderMulti","bSortMulti"),ft(e,"orderClasses","bSortClasses"),ft(e,"orderCellsTop","bSortCellsTop"),ft(e,"order","aaSorting"),ft(e,"orderFixed","aaSortingFixed"),ft(e,"paging","bPaginate"),ft(e,"pagingType","sPaginationType"),ft(e,"pageLength","iDisplayLength"),ft(e,"searching","bFilter"),"boolean"==typeof e.sScrollX&&(e.sScrollX=e.sScrollX?"100%":""),"boolean"==typeof e.scrollX&&(e.scrollX=e.scrollX?"100%":""),e=e.aoSearchCols)for(var t=0,n=e.length;n>t;t++)e[t]&&a(We.models.oSearch,e[t])}function l(t){ft(t,"orderable","bSortable"),ft(t,"orderData","aDataSort"),ft(t,"orderSequence","asSorting"),ft(t,"orderDataType","sortDataType");var n=t.aDataSort;n&&!e.isArray(n)&&(t.aDataSort=[n])}function u(t){if(!We.__browser){var n={};We.__browser=n;var r=e("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(e("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(e("<div/>").css({width:"100%",height:10}))).appendTo("body"),i=r.children(),a=i.children();n.barWidth=i[0].offsetWidth-i[0].clientWidth,n.bScrollOversize=100===a[0].offsetWidth&&100!==i[0].clientWidth,n.bScrollbarLeft=1!==Math.round(a.offset().left),n.bBounding=r[0].getBoundingClientRect().width?!0:!1,r.remove()}e.extend(t.oBrowser,We.__browser),t.oScroll.iBarWidth=We.__browser.barWidth}function c(e,t,n,i,a,o){var s,l=!1;for(n!==r&&(s=n,l=!0);i!==a;)e.hasOwnProperty(i)&&(s=l?t(s,e[i],i,e):e[i],l=!0,i+=o);return s}function d(t,r){var i=We.defaults.column,a=t.aoColumns.length,i=e.extend({},We.models.oColumn,i,{nTh:r?r:n.createElement("th"),sTitle:i.sTitle?i.sTitle:r?r.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[a],mData:i.mData?i.mData:a,idx:a});t.aoColumns.push(i),i=t.aoPreSearchCols,i[a]=e.extend({},We.models.oSearch,i[a]),f(t,a,e(r).data())}function f(t,n,i){var n=t.aoColumns[n],o=t.oClasses,s=e(n.nTh);if(!n.sWidthOrig){n.sWidthOrig=s.attr("width")||null;var u=(s.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);u&&(n.sWidthOrig=u[1])}i!==r&&null!==i&&(l(i),a(We.defaults.column,i),i.mDataProp!==r&&!i.mData&&(i.mData=i.mDataProp),i.sType&&(n._sManualType=i.sType),i.className&&!i.sClass&&(i.sClass=i.className),e.extend(n,i),Te(n,i,"sWidth","sWidthOrig"),i.iDataSort!==r&&(n.aDataSort=[i.iDataSort]),Te(n,i,"aDataSort"));var c=n.mData,d=_(c),f=n.mRender?_(n.mRender):null,i=function(e){return"string"==typeof e&&-1!==e.indexOf("@")};n._bAttrSrc=e.isPlainObject(c)&&(i(c.sort)||i(c.type)||i(c.filter)),n._setter=null,n.fnGetData=function(e,t,n){var i=d(e,t,r,n);return f&&t?f(i,t,e,n):i},n.fnSetData=function(e,t,n){return k(c)(e,t,n)},"number"!=typeof c&&(t._rowReadObject=!0),t.oFeatures.bSort||(n.bSortable=!1,s.addClass(o.sSortableNone)),t=-1!==e.inArray("asc",n.asSorting),i=-1!==e.inArray("desc",n.asSorting),n.bSortable&&(t||i)?t&&!i?(n.sSortingClass=o.sSortableAsc,n.sSortingClassJUI=o.sSortJUIAscAllowed):!t&&i?(n.sSortingClass=o.sSortableDesc,n.sSortingClassJUI=o.sSortJUIDescAllowed):(n.sSortingClass=o.sSortable,n.sSortingClassJUI=o.sSortJUI):(n.sSortingClass=o.sSortableNone,n.sSortingClassJUI="")}function h(e){if(!1!==e.oFeatures.bAutoWidth){var t=e.aoColumns;me(e);for(var n=0,r=t.length;r>n;n++)t[n].nTh.style.width=t[n].sWidth}t=e.oScroll,(""!==t.sY||""!==t.sX)&&pe(e),Be(e,null,"column-sizing",[e])}function p(e,t){var n=v(e,"bVisible");return"number"==typeof n[t]?n[t]:null}function g(t,n){var r=v(t,"bVisible"),r=e.inArray(n,r);return-1!==r?r:null}function m(t){return e(st(t.aoColumns,"nTh")).filter(":visible").length}function v(t,n){var r=[];return e.map(t.aoColumns,function(e,t){e[n]&&r.push(t)}),r}function y(e){var t,n,i,a,o,s,l,u,c,d=e.aoColumns,f=e.aoData,h=We.ext.type.detect;for(t=0,n=d.length;n>t;t++)if(l=d[t],c=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(i=0,a=h.length;a>i;i++){for(o=0,s=f.length;s>o&&(c[o]===r&&(c[o]=I(e,o,t,"type")),u=h[i](c[o],e),u||i===h.length-1)&&"html"!==u;o++);if(u){l.sType=u;break}}l.sType||(l.sType="string")}}function x(t,n,i,a){var o,s,l,u,c,f,h=t.aoColumns;if(n)for(o=n.length-1;o>=0;o--){f=n[o];var p=f.targets!==r?f.targets:f.aTargets;for(e.isArray(p)||(p=[p]),s=0,l=p.length;l>s;s++)if("number"==typeof p[s]&&0<=p[s]){for(;h.length<=p[s];)d(t);a(p[s],f)}else if("number"==typeof p[s]&&0>p[s])a(h.length+p[s],f);else if("string"==typeof p[s])for(u=0,c=h.length;c>u;u++)("_all"==p[s]||e(h[u].nTh).hasClass(p[s]))&&a(u,f)}if(i)for(o=0,t=i.length;t>o;o++)a(o,i[o])}function b(t,n,i,a){var o=t.aoData.length,s=e.extend(!0,{},We.models.oRow,{src:i?"dom":"data",idx:o});s._aData=n,t.aoData.push(s);for(var l=t.aoColumns,u=0,c=l.length;c>u;u++)l[u].sType=null;return t.aiDisplayMaster.push(o),n=t.rowIdFn(n),n!==r&&(t.aIds[n]=s),(i||!t.oFeatures.bDeferRender)&&D(t,o,i,a),o}function w(t,n){var r;return n instanceof e||(n=e(n)),n.map(function(e,n){return r=j(t,n),b(t,r.data,n,r.cells)})}function I(e,t,n,i){var a=e.iDraw,o=e.aoColumns[n],s=e.aoData[t]._aData,l=o.sDefaultContent,u=o.fnGetData(s,i,{settings:e,row:t,col:n});if(u===r)return e.iDrawError!=a&&null===l&&(De(e,0,"Requested unknown parameter "+("function"==typeof o.mData?"{function}":"'"+o.mData+"'")+" for row "+t+", column "+n,4),e.iDrawError=a),l;if(u!==s&&null!==u||null===l||i===r){if("function"==typeof u)return u.call(s)}else u=l;return null===u&&"display"==i?"":u}function A(e,t,n,r){e.aoColumns[n].fnSetData(e.aoData[t]._aData,r,{settings:e,row:t,col:n})}function C(t){return e.map(t.match(/(\\.|[^\.])+/g)||[""],function(e){return e.replace(/\\./g,".")})}function _(t){if(e.isPlainObject(t)){var n={};return e.each(t,function(e,t){t&&(n[e]=_(t))}),function(e,t,i,a){var o=n[t]||n._;return o!==r?o(e,t,i,a):e}}if(null===t)return function(e){return e};if("function"==typeof t)return function(e,n,r,i){return t(e,n,r,i)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")||-1!==t.indexOf("("))){var i=function(t,n,a){var o,s;if(""!==a){s=C(a);for(var l=0,u=s.length;u>l;l++){if(a=s[l].match(ht),o=s[l].match(pt),a){if(s[l]=s[l].replace(ht,""),""!==s[l]&&(t=t[s[l]]),o=[],s.splice(0,l+1),s=s.join("."),e.isArray(t))for(l=0,u=t.length;u>l;l++)o.push(i(t[l],n,s));t=a[0].substring(1,a[0].length-1),t=""===t?o:o.join(t);break}if(o)s[l]=s[l].replace(pt,""),t=t[s[l]]();else{if(null===t||t[s[l]]===r)return r;t=t[s[l]]}}}return t};return function(e,n){return i(e,n,t)}}return function(e){return e[t]}}function k(t){if(e.isPlainObject(t))return k(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,n,r){t(e,"set",n,r)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")||-1!==t.indexOf("("))){var n=function(t,i,a){var o,a=C(a);o=a[a.length-1];for(var s,l,u=0,c=a.length-1;c>u;u++){if(s=a[u].match(ht),l=a[u].match(pt),s){if(a[u]=a[u].replace(ht,""),t[a[u]]=[],o=a.slice(),o.splice(0,u+1),s=o.join("."),e.isArray(i))for(l=0,c=i.length;c>l;l++)o={},n(o,i[l],s),t[a[u]].push(o);else t[a[u]]=i;return}l&&(a[u]=a[u].replace(pt,""),t=t[a[u]](i)),(null===t[a[u]]||t[a[u]]===r)&&(t[a[u]]={}),t=t[a[u]]}o.match(pt)?t[o.replace(pt,"")](i):t[o.replace(ht,"")]=i};return function(e,r){return n(e,r,t)}}return function(e,n){e[t]=n}}function M(e){return st(e.aoData,"_aData")}function z(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0,e.aIds={}}function N(e,t,n){for(var i=-1,a=0,o=e.length;o>a;a++)e[a]==t?i=a:e[a]>t&&e[a]--;-1!=i&&n===r&&e.splice(i,1)}function S(e,t,n,i){var a,o=e.aoData[t],s=function(n,r){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=I(e,t,r,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==o.src)){var l=o.anCells;if(l)if(i!==r)s(l[i],i);else for(n=0,a=l.length;a>n;n++)s(l[n],n)}else o._aData=j(e,o,i,i===r?r:o._aData).data;if(o._aSortData=null,o._aFilterData=null,s=e.aoColumns,i!==r)s[i].sType=null;else{for(n=0,a=s.length;a>n;n++)s[n].sType=null;T(e,o)}}function j(t,n,i,a){var o,s,l,u=[],c=n.firstChild,d=0,f=t.aoColumns,h=t._rowReadObject,a=a!==r?a:h?{}:[],p=function(e,t){if("string"==typeof e){var n=e.indexOf("@");-1!==n&&(n=e.substring(n+1),k(e)(a,t.getAttribute(n)))}},g=function(t){(i===r||i===d)&&(s=f[d],l=e.trim(t.innerHTML),s&&s._bAttrSrc?(k(s.mData._)(a,l),p(s.mData.sort,t),p(s.mData.type,t),p(s.mData.filter,t)):h?(s._setter||(s._setter=k(s.mData)),s._setter(a,l)):a[d]=l),d++};if(c)for(;c;)o=c.nodeName.toUpperCase(),("TD"==o||"TH"==o)&&(g(c),u.push(c)),c=c.nextSibling;else for(u=n.anCells,c=0,o=u.length;o>c;c++)g(u[c]);return(n=n.firstChild?n:n.nTr)&&(n=n.getAttribute("id"))&&k(t.rowId)(a,n),{data:a,cells:u}}function D(t,r,i,a){var o,s,l,u,c,d=t.aoData[r],f=d._aData,h=[];if(null===d.nTr){for(o=i||n.createElement("tr"),d.nTr=o,d.anCells=h,o._DT_RowIndex=r,T(t,d),u=0,c=t.aoColumns.length;c>u;u++)l=t.aoColumns[u],s=i?a[u]:n.createElement(l.sCellType),s._DT_CellIndex={row:r,column:u},h.push(s),i&&!l.mRender&&l.mData===u||e.isPlainObject(l.mData)&&l.mData._===u+".display"||(s.innerHTML=I(t,r,u,"display")),l.sClass&&(s.className+=" "+l.sClass),l.bVisible&&!i?o.appendChild(s):!l.bVisible&&i&&s.parentNode.removeChild(s),l.fnCreatedCell&&l.fnCreatedCell.call(t.oInstance,s,I(t,r,u),f,r,u);Be(t,"aoRowCreatedCallback",null,[o,f,r])}d.nTr.setAttribute("role","row")}function T(t,n){var r=n.nTr,i=n._aData;if(r){var a=t.rowIdFn(i);a&&(r.id=a),i.DT_RowClass&&(a=i.DT_RowClass.split(" "),n.__rowc=n.__rowc?dt(n.__rowc.concat(a)):a,e(r).removeClass(n.__rowc.join(" ")).addClass(i.DT_RowClass)),i.DT_RowAttr&&e(r).attr(i.DT_RowAttr),i.DT_RowData&&e(r).data(i.DT_RowData)}}function O(t){var n,r,i,a,o,s=t.nTHead,l=t.nTFoot,u=0===e("th, td",s).length,c=t.oClasses,d=t.aoColumns;for(u&&(a=e("<tr/>").appendTo(s)),n=0,r=d.length;r>n;n++)o=d[n],i=e(o.nTh).addClass(o.sClass),u&&i.appendTo(a),t.oFeatures.bSort&&(i.addClass(o.sSortingClass),!1!==o.bSortable&&(i.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),ke(t,o.nTh,n))),o.sTitle!=i[0].innerHTML&&i.html(o.sTitle),Pe(t,"header")(t,i,o,c);if(u&&P(t.aoHeader,s),e(s).find(">tr").attr("role","row"),e(s).find(">tr>th, >tr>td").addClass(c.sHeaderTH),e(l).find(">tr>th, >tr>td").addClass(c.sFooterTH),null!==l)for(t=t.aoFooter[0],n=0,r=t.length;r>n;n++)o=d[n],o.nTf=t[n].cell,o.sClass&&e(o.nTf).addClass(o.sClass)}function L(t,n,i){var a,o,s,l,u=[],c=[],d=t.aoColumns.length;if(n){for(i===r&&(i=!1),a=0,o=n.length;o>a;a++){for(u[a]=n[a].slice(),u[a].nTr=n[a].nTr,s=d-1;s>=0;s--)!t.aoColumns[s].bVisible&&!i&&u[a].splice(s,1);c.push([])}for(a=0,o=u.length;o>a;a++){if(t=u[a].nTr)for(;s=t.firstChild;)t.removeChild(s);for(s=0,n=u[a].length;n>s;s++)if(l=d=1,c[a][s]===r){for(t.appendChild(u[a][s].cell),c[a][s]=1;u[a+d]!==r&&u[a][s].cell==u[a+d][s].cell;)c[a+d][s]=1,d++;for(;u[a][s+l]!==r&&u[a][s].cell==u[a][s+l].cell;){for(i=0;d>i;i++)c[a+i][s+l]=1;l++}e(u[a][s].cell).attr("rowspan",d).attr("colspan",l)}}}}function E(t){var n=Be(t,"aoPreDrawCallback","preDraw",[t]);if(-1!==e.inArray(!1,n))fe(t,!1);else{var n=[],i=0,a=t.asStripeClasses,o=a.length,s=t.oLanguage,l=t.iInitDisplayStart,u="ssp"==Ge(t),c=t.aiDisplay;t.bDrawing=!0,l!==r&&-1!==l&&(t._iDisplayStart=u?l:l>=t.fnRecordsDisplay()?0:l,t.iInitDisplayStart=-1);var l=t._iDisplayStart,d=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,fe(t,!1);else if(u){if(!t.bDestroying&&!R(t))return}else t.iDraw++;if(0!==c.length)for(s=u?t.aoData.length:d,u=u?0:l;s>u;u++){var f=c[u],h=t.aoData[f];if(null===h.nTr&&D(t,f),f=h.nTr,0!==o){var p=a[i%o];h._sRowStripe!=p&&(e(f).removeClass(h._sRowStripe).addClass(p),h._sRowStripe=p)}Be(t,"aoRowCallback",null,[f,h._aData,i,u]),n.push(f),i++}else i=s.sZeroRecords,1==t.iDraw&&"ajax"==Ge(t)?i=s.sLoadingRecords:s.sEmptyTable&&0===t.fnRecordsTotal()&&(i=s.sEmptyTable),n[0]=e("<tr/>",{"class":o?a[0]:""}).append(e("<td />",{valign:"top",colSpan:m(t),"class":t.oClasses.sRowEmpty}).html(i))[0];Be(t,"aoHeaderCallback","header",[e(t.nTHead).children("tr")[0],M(t),l,d,c]),Be(t,"aoFooterCallback","footer",[e(t.nTFoot).children("tr")[0],M(t),l,d,c]),a=e(t.nTBody),a.children().detach(),a.append(e(n)),Be(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}}function B(e,t){var n=e.oFeatures,r=n.bFilter;n.bSort&&Ae(e),r?X(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),!0!==t&&(e._iDisplayStart=0),e._drawHold=t,E(e),e._drawHold=!1}function F(t){var n=t.oClasses,r=e(t.nTable),r=e("<div/>").insertBefore(r),i=t.oFeatures,a=e("<div/>",{id:t.sTableId+"_wrapper","class":n.sWrapper+(t.nTFoot?"":" "+n.sNoFooter)});t.nHolding=r[0],t.nTableWrapper=a[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var o,s,l,u,c,d,f=t.sDom.split(""),h=0;h<f.length;h++){if(o=null,s=f[h],"<"==s){if(l=e("<div/>")[0],u=f[h+1],"'"==u||'"'==u){for(c="",d=2;f[h+d]!=u;)c+=f[h+d],d++;"H"==c?c=n.sJUIHeader:"F"==c&&(c=n.sJUIFooter),-1!=c.indexOf(".")?(u=c.split("."),l.id=u[0].substr(1,u[0].length-1),l.className=u[1]):"#"==c.charAt(0)?l.id=c.substr(1,c.length-1):l.className=c,h+=d}a.append(l),a=e(l)}else if(">"==s)a=a.parent();else if("l"==s&&i.bPaginate&&i.bLengthChange)o=le(t);else if("f"==s&&i.bFilter)o=V(t);else if("r"==s&&i.bProcessing)o=de(t);else if("t"==s)o=he(t);else if("i"==s&&i.bInfo)o=ne(t);else if("p"==s&&i.bPaginate)o=ue(t);else if(0!==We.ext.feature.length)for(l=We.ext.feature,d=0,u=l.length;u>d;d++)if(s==l[d].cFeature){o=l[d].fnInit(t);break}o&&(l=t.aanFeatures,l[s]||(l[s]=[]),l[s].push(o),a.append(o))}r.replaceWith(a),t.nHolding=null}function P(t,n){var r,i,a,o,s,l,u,c,d,f,h=e(n).children("tr");for(t.splice(0,t.length),a=0,l=h.length;l>a;a++)t.push([]);for(a=0,l=h.length;l>a;a++)for(r=h[a],i=r.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){for(c=1*i.getAttribute("colspan"),d=1*i.getAttribute("rowspan"),c=c&&0!==c&&1!==c?c:1,d=d&&0!==d&&1!==d?d:1,o=0,s=t[a];s[o];)o++;for(u=o,f=1===c?!0:!1,s=0;c>s;s++)for(o=0;d>o;o++)t[a+o][u+s]={cell:i,unique:f},t[a+o].nTr=r}i=i.nextSibling}}function G(e,t,n){var r=[];n||(n=e.aoHeader,t&&(n=[],P(n,t)));for(var t=0,i=n.length;i>t;t++)for(var a=0,o=n[t].length;o>a;a++)!n[t][a].unique||r[a]&&e.bSortCellsTop||(r[a]=n[t][a].cell);return r}function Z(t,n,r){if(Be(t,"aoServerParams","serverParams",[n]),n&&e.isArray(n)){var i={},a=/(.*?)\[\]$/;e.each(n,function(e,t){var n=t.name.match(a);n?(n=n[0],i[n]||(i[n]=[]),i[n].push(t.value)):i[t.name]=t.value}),n=i}var o,s=t.ajax,l=t.oInstance,u=function(e){Be(t,null,"xhr",[t,e,t.jqXHR]),r(e)};if(e.isPlainObject(s)&&s.data){o=s.data;var c=e.isFunction(o)?o(n,t):o,n=e.isFunction(o)&&c?c:e.extend(!0,n,c);delete s.data}c={data:n,success:function(e){var n=e.error||e.sError;n&&De(t,0,n),t.json=e,u(e)},dataType:"json",cache:!1,type:t.sServerMethod,error:function(n,r){var i=Be(t,null,"xhr",[t,null,t.jqXHR]);-1===e.inArray(!0,i)&&("parsererror"==r?De(t,0,"Invalid JSON response",1):4===n.readyState&&De(t,0,"Ajax error",7)),fe(t,!1)}},t.oAjaxData=n,Be(t,null,"preXhr",[t,n]),t.fnServerData?t.fnServerData.call(l,t.sAjaxSource,e.map(n,function(e,t){return{name:t,value:e}}),u,t):t.sAjaxSource||"string"==typeof s?t.jqXHR=e.ajax(e.extend(c,{url:s||t.sAjaxSource})):e.isFunction(s)?t.jqXHR=s.call(l,n,u,t):(t.jqXHR=e.ajax(e.extend(c,s)),s.data=o)}function R(e){return e.bAjaxDataGet?(e.iDraw++,fe(e,!0),Z(e,Y(e),function(t){W(e,t)}),!1):!0}function Y(t){var n,r,i,a,o=t.aoColumns,s=o.length,l=t.oFeatures,u=t.oPreviousSearch,c=t.aoPreSearchCols,d=[],f=Ie(t);n=t._iDisplayStart,r=!1!==l.bPaginate?t._iDisplayLength:-1;var h=function(e,t){d.push({name:e,value:t})};h("sEcho",t.iDraw),h("iColumns",s),h("sColumns",st(o,"sName").join(",")),h("iDisplayStart",n),h("iDisplayLength",r);var p={draw:t.iDraw,columns:[],order:[],start:n,length:r,search:{value:u.sSearch,regex:u.bRegex}};for(n=0;s>n;n++)i=o[n],a=c[n],r="function"==typeof i.mData?"function":i.mData,p.columns.push({data:r,name:i.sName,searchable:i.bSearchable,orderable:i.bSortable,search:{value:a.sSearch,regex:a.bRegex}}),h("mDataProp_"+n,r),l.bFilter&&(h("sSearch_"+n,a.sSearch),h("bRegex_"+n,a.bRegex),h("bSearchable_"+n,i.bSearchable)),l.bSort&&h("bSortable_"+n,i.bSortable);return l.bFilter&&(h("sSearch",u.sSearch),h("bRegex",u.bRegex)),l.bSort&&(e.each(f,function(e,t){p.order.push({column:t.col,dir:t.dir}),h("iSortCol_"+e,t.col),h("sSortDir_"+e,t.dir)}),h("iSortingCols",f.length)),o=We.ext.legacy.ajax,null===o?t.sAjaxSource?d:p:o?d:p}function W(e,t){var n=U(e,t),i=t.sEcho!==r?t.sEcho:t.draw,a=t.iTotalRecords!==r?t.iTotalRecords:t.recordsTotal,o=t.iTotalDisplayRecords!==r?t.iTotalDisplayRecords:t.recordsFiltered;if(i){if(1*i<e.iDraw)return;e.iDraw=1*i}for(z(e),e._iRecordsTotal=parseInt(a,10),e._iRecordsDisplay=parseInt(o,10),i=0,a=n.length;a>i;i++)b(e,n[i]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,E(e),e._bInitComplete||oe(e,t),e.bAjaxDataGet=!0,fe(e,!1)}function U(t,n){var i=e.isPlainObject(t.ajax)&&t.ajax.dataSrc!==r?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===i?n.aaData||n[i]:""!==i?_(i)(n):n}function V(t){var r=t.oClasses,i=t.sTableId,a=t.oLanguage,o=t.oPreviousSearch,s=t.aanFeatures,l='<input type="search" class="'+r.sFilterInput+'"/>',u=a.sSearch,u=u.match(/_INPUT_/)?u.replace("_INPUT_",l):u+l,r=e("<div/>",{id:s.f?null:i+"_filter","class":r.sFilter}).append(e("<label/>").append(u)),s=function(){var e=this.value?this.value:"";e!=o.sSearch&&(X(t,{sSearch:e,bRegex:o.bRegex,bSmart:o.bSmart,bCaseInsensitive:o.bCaseInsensitive}),t._iDisplayStart=0,E(t))},l=null!==t.searchDelay?t.searchDelay:"ssp"===Ge(t)?400:0,c=e("input",r).val(o.sSearch).attr("placeholder",a.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",l?ve(s,l):s).bind("keypress.DT",function(e){return 13==e.keyCode?!1:void 0}).attr("aria-controls",i);return e(t.nTable).on("search.dt.DT",function(e,r){if(t===r)try{c[0]!==n.activeElement&&c.val(o.sSearch)}catch(i){}}),r[0]}function X(e,t,n){var i=e.oPreviousSearch,a=e.aoPreSearchCols,o=function(e){i.sSearch=e.sSearch,i.bRegex=e.bRegex,i.bSmart=e.bSmart,i.bCaseInsensitive=e.bCaseInsensitive};if(y(e),"ssp"!=Ge(e)){for(q(e,t.sSearch,n,t.bEscapeRegex!==r?!t.bEscapeRegex:t.bRegex,t.bSmart,t.bCaseInsensitive),o(t),t=0;t<a.length;t++)J(e,a[t].sSearch,t,a[t].bEscapeRegex!==r?!a[t].bEscapeRegex:a[t].bRegex,a[t].bSmart,a[t].bCaseInsensitive);H(e)}else o(t);e.bFiltered=!0,Be(e,null,"search",[e])}function H(t){for(var n,r,i=We.ext.search,a=t.aiDisplay,o=0,s=i.length;s>o;o++){for(var l=[],u=0,c=a.length;c>u;u++)r=a[u],n=t.aoData[r],i[o](t,n._aFilterData,r,n._aData,u)&&l.push(r);a.length=0,e.merge(a,l)}}function J(e,t,n,r,i,a){if(""!==t)for(var o=e.aiDisplay,r=Q(t,r,i,a),i=o.length-1;i>=0;i--)t=e.aoData[o[i]]._aFilterData[n],r.test(t)||o.splice(i,1)}function q(e,t,n,r,i,a){var o,r=Q(t,r,i,a),i=e.oPreviousSearch.sSearch,a=e.aiDisplayMaster;if(0!==We.ext.search.length&&(n=!0),o=$(e),0>=t.length)e.aiDisplay=a.slice();else for((o||n||i.length>t.length||0!==t.indexOf(i)||e.bSorted)&&(e.aiDisplay=a.slice()),t=e.aiDisplay,n=t.length-1;n>=0;n--)r.test(e.aoData[t[n]]._sFilterRow)||t.splice(n,1)}function Q(t,n,r,i){return t=n?t:K(t),r&&(t="^(?=.*?"+e.map(t.match(/"[^"]+"|[^ ]+/g)||[""],function(e){if('"'===e.charAt(0))var t=e.match(/^"(.*)"$/),e=t?t[1]:e;return e.replace('"',"")}).join(")(?=.*?")+").*$"),RegExp(t,i?"i":"")}function K(e){return e.replace(et,"\\$1")}function $(e){var t,n,r,i,a,o,s,l,u=e.aoColumns,c=We.ext.type.search;for(t=!1,n=0,i=e.aoData.length;i>n;n++)if(l=e.aoData[n],!l._aFilterData){for(o=[],r=0,a=u.length;a>r;r++)t=u[r],t.bSearchable?(s=I(e,n,r,"filter"),c[t.sType]&&(s=c[t.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(gt.innerHTML=s,s=mt?gt.textContent:gt.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),o.push(s);l._aFilterData=o,l._sFilterRow=o.join("  "),t=!0}return t}function ee(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function te(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function ne(t){var n=t.sTableId,r=t.aanFeatures.i,i=e("<div/>",{"class":t.oClasses.sInfo,id:r?null:n+"_info"});return r||(t.aoDrawCallback.push({fn:re,sName:"information"}),i.attr("role","status").attr("aria-live","polite"),e(t.nTable).attr("aria-describedby",n+"_info")),i[0]}function re(t){var n=t.aanFeatures.i;if(0!==n.length){var r=t.oLanguage,i=t._iDisplayStart+1,a=t.fnDisplayEnd(),o=t.fnRecordsTotal(),s=t.fnRecordsDisplay(),l=s?r.sInfo:r.sInfoEmpty;s!==o&&(l+=" "+r.sInfoFiltered),l+=r.sInfoPostFix,l=ie(t,l),r=r.fnInfoCallback,null!==r&&(l=r.call(t.oInstance,t,i,a,o,s,l)),e(n).html(l)}}function ie(e,t){var n=e.fnFormatNumber,r=e._iDisplayStart+1,i=e._iDisplayLength,a=e.fnRecordsDisplay(),o=-1===i;return t.replace(/_START_/g,n.call(e,r)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,a)).replace(/_PAGE_/g,n.call(e,o?1:Math.ceil(r/i))).replace(/_PAGES_/g,n.call(e,o?1:Math.ceil(a/i)))}function ae(e){var t,n,r,i=e.iInitDisplayStart,a=e.aoColumns;n=e.oFeatures;var o=e.bDeferLoading;if(e.bInitialised){for(F(e),O(e),L(e,e.aoHeader),L(e,e.aoFooter),fe(e,!0),n.bAutoWidth&&me(e),t=0,n=a.length;n>t;t++)r=a[t],r.sWidth&&(r.nTh.style.width=we(r.sWidth));Be(e,null,"preInit",[e]),B(e),a=Ge(e),("ssp"!=a||o)&&("ajax"==a?Z(e,[],function(n){var r=U(e,n);for(t=0;t<r.length;t++)b(e,r[t]);e.iInitDisplayStart=i,B(e),fe(e,!1),oe(e,n)},e):(fe(e,!1),oe(e)))}else setTimeout(function(){ae(e)},200)}function oe(e,t){e._bInitComplete=!0,(t||e.oInit.aaData)&&h(e),Be(e,null,"plugin-init",[e,t]),Be(e,"aoInitComplete","init",[e,t])}function se(e,t){var n=parseInt(t,10);e._iDisplayLength=n,Fe(e),Be(e,null,"length",[e,n])}function le(t){for(var n=t.oClasses,r=t.sTableId,i=t.aLengthMenu,a=e.isArray(i[0]),o=a?i[0]:i,i=a?i[1]:i,a=e("<select/>",{name:r+"_length","aria-controls":r,"class":n.sLengthSelect}),s=0,l=o.length;l>s;s++)a[0][s]=new Option(i[s],o[s]);var u=e("<div><label/></div>").addClass(n.sLength);return t.aanFeatures.l||(u[0].id=r+"_length"),u.children().append(t.oLanguage.sLengthMenu.replace("_MENU_",a[0].outerHTML)),e("select",u).val(t._iDisplayLength).bind("change.DT",function(){se(t,e(this).val()),E(t)}),e(t.nTable).bind("length.dt.DT",function(n,r,i){t===r&&e("select",u).val(i)}),u[0]}function ue(t){var n=t.sPaginationType,r=We.ext.pager[n],i="function"==typeof r,a=function(e){E(e)},n=e("<div/>").addClass(t.oClasses.sPaging+n)[0],o=t.aanFeatures;return i||r.fnInit(t,n,a),o.p||(n.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(e){if(i){var t,n=e._iDisplayStart,s=e._iDisplayLength,l=e.fnRecordsDisplay(),u=-1===s,n=u?0:Math.ceil(n/s),s=u?1:Math.ceil(l/s),l=r(n,s),u=0;for(t=o.p.length;t>u;u++)Pe(e,"pageButton")(e,o.p[u],u,l,n,s)}else r.fnUpdate(e,a)},sName:"pagination"})),n}function ce(e,t,n){var r=e._iDisplayStart,i=e._iDisplayLength,a=e.fnRecordsDisplay();return 0===a||-1===i?r=0:"number"==typeof t?(r=t*i,r>a&&(r=0)):"first"==t?r=0:"previous"==t?(r=i>=0?r-i:0,0>r&&(r=0)):"next"==t?a>r+i&&(r+=i):"last"==t?r=Math.floor((a-1)/i)*i:De(e,0,"Unknown paging action: "+t,5),t=e._iDisplayStart!==r,e._iDisplayStart=r,t&&(Be(e,null,"page",[e]),n&&E(e)),t}function de(t){return e("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing","class":t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function fe(t,n){t.oFeatures.bProcessing&&e(t.aanFeatures.r).css("display",n?"block":"none"),Be(t,null,"processing",[t,n])}function he(t){var n=e(t.nTable);n.attr("role","grid");var r=t.oScroll;if(""===r.sX&&""===r.sY)return t.nTable;var i=r.sX,a=r.sY,o=t.oClasses,s=n.children("caption"),l=s.length?s[0]._captionSide:null,u=e(n[0].cloneNode(!1)),c=e(n[0].cloneNode(!1)),d=n.children("tfoot");d.length||(d=null),u=e("<div/>",{"class":o.sScrollWrapper}).append(e("<div/>",{"class":o.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?i?we(i):null:"100%"}).append(e("<div/>",{"class":o.sScrollHeadInner}).css({"box-sizing":"content-box",width:r.sXInner||"100%"}).append(u.removeAttr("id").css("margin-left",0).append("top"===l?s:null).append(n.children("thead"))))).append(e("<div/>",{"class":o.sScrollBody}).css({position:"relative",overflow:"auto",width:i?we(i):null}).append(n)),d&&u.append(e("<div/>",{"class":o.sScrollFoot}).css({overflow:"hidden",border:0,width:i?i?we(i):null:"100%"}).append(e("<div/>",{"class":o.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===l?s:null).append(n.children("tfoot")))));var n=u.children(),f=n[0],o=n[1],h=d?n[2]:null;return i&&e(o).on("scroll.DT",function(){var e=this.scrollLeft;f.scrollLeft=e,d&&(h.scrollLeft=e)}),e(o).css(a&&r.bCollapse?"max-height":"height",a),t.nScrollHead=f,t.nScrollBody=o,t.nScrollFoot=h,t.aoDrawCallback.push({fn:pe,sName:"scrolling"}),u[0]}function pe(t){var n,i,a,o,s,l=t.oScroll,u=l.sX,c=l.sXInner,d=l.sY,l=l.iBarWidth,f=e(t.nScrollHead),g=f[0].style,m=f.children("div"),v=m[0].style,y=m.children("table"),m=t.nScrollBody,x=e(m),b=m.style,w=e(t.nScrollFoot).children("div"),I=w.children("table"),A=e(t.nTHead),C=e(t.nTable),_=C[0],k=_.style,M=t.nTFoot?e(t.nTFoot):null,z=t.oBrowser,N=z.bScrollOversize,S=st(t.aoColumns,"nTh"),j=[],D=[],T=[],O=[],L=function(e){e=e.style,e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0};i=m.scrollHeight>m.clientHeight,t.scrollBarVis!==i&&t.scrollBarVis!==r?(t.scrollBarVis=i,h(t)):(t.scrollBarVis=i,C.children("thead, tfoot").remove(),M&&(a=M.clone().prependTo(C),n=M.find("tr"),a=a.find("tr")),o=A.clone().prependTo(C),A=A.find("tr"),i=o.find("tr"),o.find("th, td").removeAttr("tabindex"),u||(b.width="100%",f[0].style.width="100%"),e.each(G(t,o),function(e,n){s=p(t,e),n.style.width=t.aoColumns[s].sWidth}),M&&ge(function(e){e.style.width=""},a),f=C.outerWidth(),""===u?(k.width="100%",N&&(C.find("tbody").height()>m.offsetHeight||"scroll"==x.css("overflow-y"))&&(k.width=we(C.outerWidth()-l)),f=C.outerWidth()):""!==c&&(k.width=we(c),f=C.outerWidth()),ge(L,i),ge(function(t){T.push(t.innerHTML),j.push(we(e(t).css("width")))},i),ge(function(t,n){-1!==e.inArray(t,S)&&(t.style.width=j[n])},A),e(i).height(0),M&&(ge(L,a),ge(function(t){O.push(t.innerHTML),D.push(we(e(t).css("width")))},a),ge(function(e,t){e.style.width=D[t]},n),e(a).height(0)),ge(function(e,t){e.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+T[t]+"</div>",e.style.width=j[t]},i),M&&ge(function(e,t){e.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+O[t]+"</div>",e.style.width=D[t]},a),C.outerWidth()<f?(n=m.scrollHeight>m.offsetHeight||"scroll"==x.css("overflow-y")?f+l:f,N&&(m.scrollHeight>m.offsetHeight||"scroll"==x.css("overflow-y"))&&(k.width=we(n-l)),(""===u||""!==c)&&De(t,1,"Possible column misalignment",6)):n="100%",b.width=we(n),g.width=we(n),M&&(t.nScrollFoot.style.width=we(n)),!d&&N&&(b.height=we(_.offsetHeight+l)),u=C.outerWidth(),y[0].style.width=we(u),v.width=we(u),c=C.height()>m.clientHeight||"scroll"==x.css("overflow-y"),d="padding"+(z.bScrollbarLeft?"Left":"Right"),v[d]=c?l+"px":"0px",M&&(I[0].style.width=we(u),w[0].style.width=we(u),w[0].style[d]=c?l+"px":"0px"),C.children("colgroup").insertBefore(C.children("thead")),x.scroll(),!t.bSorted&&!t.bFiltered||t._drawHold||(m.scrollTop=0))}function ge(e,t,n){for(var r,i,a=0,o=0,s=t.length;s>o;){for(r=t[o].firstChild,i=n?n[o].firstChild:null;r;)1===r.nodeType&&(n?e(r,i,a):e(r,a),a++),r=r.nextSibling,i=n?i.nextSibling:null;o++}}function me(n){var r,i,a=n.nTable,o=n.aoColumns,s=n.oScroll,l=s.sY,u=s.sX,c=s.sXInner,d=o.length,f=v(n,"bVisible"),g=e("th",n.nTHead),y=a.getAttribute("width"),x=a.parentNode,b=!1,w=n.oBrowser,s=w.bScrollOversize;for((r=a.style.width)&&-1!==r.indexOf("%")&&(y=r),r=0;r<f.length;r++)i=o[f[r]],null!==i.sWidth&&(i.sWidth=ye(i.sWidthOrig,x),b=!0);if(s||!b&&!u&&!l&&d==m(n)&&d==g.length)for(r=0;d>r;r++)f=p(n,r),null!==f&&(o[f].sWidth=we(g.eq(r).width()));else{d=e(a).clone().css("visibility","hidden").removeAttr("id"),d.find("tbody tr").remove();var I=e("<tr/>").appendTo(d.find("tbody"));for(d.find("thead, tfoot").remove(),d.append(e(n.nTHead).clone()).append(e(n.nTFoot).clone()),d.find("tfoot th, tfoot td").css("width",""),g=G(n,d.find("thead")[0]),r=0;r<f.length;r++)i=o[f[r]],g[r].style.width=null!==i.sWidthOrig&&""!==i.sWidthOrig?we(i.sWidthOrig):"",i.sWidthOrig&&u&&e(g[r]).append(e("<div/>").css({width:i.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(r=0;r<f.length;r++)b=f[r],i=o[b],e(xe(n,b)).clone(!1).append(i.sContentPadding).appendTo(I);for(e("[name]",d).removeAttr("name"),i=e("<div/>").css(u||l?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(d).appendTo(x),u&&c?d.width(c):u?(d.css("width","auto"),d.removeAttr("width"),d.width()<x.clientWidth&&y&&d.width(x.clientWidth)):l?d.width(x.clientWidth):y&&d.width(y),r=l=0;r<f.length;r++)x=e(g[r]),c=x.outerWidth()-x.width(),x=w.bBounding?Math.ceil(g[r].getBoundingClientRect().width):x.outerWidth(),l+=x,o[f[r]].sWidth=we(x-c);a.style.width=we(l),i.remove()}y&&(a.style.width=we(y)),!y&&!u||n._reszEvt||(a=function(){e(t).bind("resize.DT-"+n.sInstance,ve(function(){h(n)}))},s?setTimeout(a,1e3):a(),n._reszEvt=!0)}function ve(e,t){var n,i,a=t!==r?t:200;return function(){var t=this,o=+new Date,s=arguments;n&&n+a>o?(clearTimeout(i),i=setTimeout(function(){n=r,e.apply(t,s)},a)):(n=o,e.apply(t,s))}}function ye(t,r){if(!t)return 0;var i=e("<div/>").css("width",we(t)).appendTo(r||n.body),a=i[0].offsetWidth;return i.remove(),a}function xe(t,n){var r=be(t,n);if(0>r)return null;var i=t.aoData[r];return i.nTr?i.anCells[n]:e("<td/>").html(I(t,r,n,"display"))[0]}function be(e,t){for(var n,r=-1,i=-1,a=0,o=e.aoData.length;o>a;a++)n=I(e,a,t,"display")+"",n=n.replace(vt,""),n=n.replace(/&nbsp;/g," "),n.length>r&&(r=n.length,i=a);return i}function we(e){return null===e?"0px":"number"==typeof e?0>e?"0px":e+"px":e.match(/\d$/)?e+"px":e}function Ie(t){var n,i,a,o,s,l,u=[],c=t.aoColumns;n=t.aaSortingFixed,i=e.isPlainObject(n);var d=[];for(a=function(t){t.length&&!e.isArray(t[0])?d.push(t):e.merge(d,t)},e.isArray(n)&&a(n),i&&n.pre&&a(n.pre),a(t.aaSorting),i&&n.post&&a(n.post),t=0;t<d.length;t++)for(l=d[t][0],a=c[l].aDataSort,n=0,i=a.length;i>n;n++)o=a[n],s=c[o].sType||"string",d[t]._idx===r&&(d[t]._idx=e.inArray(d[t][1],c[o].asSorting)),u.push({src:l,col:o,dir:d[t][1],index:d[t]._idx,type:s,formatter:We.ext.type.order[s+"-pre"]});return u}function Ae(e){var t,n,r,i,a=[],o=We.ext.type.order,s=e.aoData,l=0,u=e.aiDisplayMaster;for(y(e),i=Ie(e),t=0,n=i.length;n>t;t++)r=i[t],r.formatter&&l++,ze(e,r.col);if("ssp"!=Ge(e)&&0!==i.length){for(t=0,n=u.length;n>t;t++)a[u[t]]=t;l===i.length?u.sort(function(e,t){var n,r,o,l,u=i.length,c=s[e]._aSortData,d=s[t]._aSortData;for(o=0;u>o;o++)if(l=i[o],n=c[l.col],r=d[l.col],n=r>n?-1:n>r?1:0,0!==n)return"asc"===l.dir?n:-n;return n=a[e],r=a[t],r>n?-1:n>r?1:0}):u.sort(function(e,t){var n,r,l,u,c=i.length,d=s[e]._aSortData,f=s[t]._aSortData;for(l=0;c>l;l++)if(u=i[l],n=d[u.col],r=f[u.col],u=o[u.type+"-"+u.dir]||o["string-"+u.dir],n=u(n,r),0!==n)return n;return n=a[e],r=a[t],r>n?-1:n>r?1:0})}e.bSorted=!0}function Ce(e){for(var t,n,r=e.aoColumns,i=Ie(e),e=e.oLanguage.oAria,a=0,o=r.length;o>a;a++){n=r[a];var s=n.asSorting;t=n.sTitle.replace(/<.*?>/g,"");var l=n.nTh;l.removeAttribute("aria-sort"),n.bSortable&&(0<i.length&&i[0].col==a?(l.setAttribute("aria-sort","asc"==i[0].dir?"ascending":"descending"),n=s[i[0].index+1]||s[0]):n=s[0],t+="asc"===n?e.sSortAscending:e.sSortDescending),l.setAttribute("aria-label",t)}}function _e(t,n,i,a){var o=t.aaSorting,s=t.aoColumns[n].asSorting,l=function(t,n){var i=t._idx;return i===r&&(i=e.inArray(t[1],s)),i+1<s.length?i+1:n?null:0};"number"==typeof o[0]&&(o=t.aaSorting=[o]),i&&t.oFeatures.bSortMulti?(i=e.inArray(n,st(o,"0")),-1!==i?(n=l(o[i],!0),null===n&&1===o.length&&(n=0),null===n?o.splice(i,1):(o[i][1]=s[n],
o[i]._idx=n)):(o.push([n,s[0],0]),o[o.length-1]._idx=0)):o.length&&o[0][0]==n?(n=l(o[0]),o.length=1,o[0][1]=s[n],o[0]._idx=n):(o.length=0,o.push([n,s[0]]),o[0]._idx=0),B(t),"function"==typeof a&&a(t)}function ke(e,t,n,r){var i=e.aoColumns[n];Le(t,{},function(t){!1!==i.bSortable&&(e.oFeatures.bProcessing?(fe(e,!0),setTimeout(function(){_e(e,n,t.shiftKey,r),"ssp"!==Ge(e)&&fe(e,!1)},0)):_e(e,n,t.shiftKey,r))})}function Me(t){var n,r,i=t.aLastSort,a=t.oClasses.sSortColumn,o=Ie(t),s=t.oFeatures;if(s.bSort&&s.bSortClasses){for(s=0,n=i.length;n>s;s++)r=i[s].src,e(st(t.aoData,"anCells",r)).removeClass(a+(2>s?s+1:3));for(s=0,n=o.length;n>s;s++)r=o[s].src,e(st(t.aoData,"anCells",r)).addClass(a+(2>s?s+1:3))}t.aLastSort=o}function ze(e,t){var n,r=e.aoColumns[t],i=We.ext.order[r.sSortDataType];i&&(n=i.call(e.oInstance,e,t,g(e,t)));for(var a,o=We.ext.type.order[r.sType+"-pre"],s=0,l=e.aoData.length;l>s;s++)r=e.aoData[s],r._aSortData||(r._aSortData=[]),(!r._aSortData[t]||i)&&(a=i?n[s]:I(e,s,t,"sort"),r._aSortData[t]=o?o(a):a)}function Ne(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var n={time:+new Date,start:t._iDisplayStart,length:t._iDisplayLength,order:e.extend(!0,[],t.aaSorting),search:ee(t.oPreviousSearch),columns:e.map(t.aoColumns,function(e,n){return{visible:e.bVisible,search:ee(t.aoPreSearchCols[n])}})};Be(t,"aoStateSaveParams","stateSaveParams",[t,n]),t.oSavedState=n,t.fnStateSaveCallback.call(t.oInstance,t,n)}}function Se(t){var n,i,a=t.aoColumns;if(t.oFeatures.bStateSave){var o=t.fnStateLoadCallback.call(t.oInstance,t);if(o&&o.time&&(n=Be(t,"aoStateLoadParams","stateLoadParams",[t,o]),-1===e.inArray(!1,n)&&(n=t.iStateDuration,!(n>0&&o.time<+new Date-1e3*n)&&a.length===o.columns.length))){for(t.oLoadedState=e.extend(!0,{},o),o.start!==r&&(t._iDisplayStart=o.start,t.iInitDisplayStart=o.start),o.length!==r&&(t._iDisplayLength=o.length),o.order!==r&&(t.aaSorting=[],e.each(o.order,function(e,n){t.aaSorting.push(n[0]>=a.length?[0,n[1]]:n)})),o.search!==r&&e.extend(t.oPreviousSearch,te(o.search)),n=0,i=o.columns.length;i>n;n++){var s=o.columns[n];s.visible!==r&&(a[n].bVisible=s.visible),s.search!==r&&e.extend(t.aoPreSearchCols[n],te(s.search))}Be(t,"aoStateLoaded","stateLoaded",[t,o])}}}function je(t){var n=We.settings,t=e.inArray(t,st(n,"nTable"));return-1!==t?n[t]:null}function De(e,n,r,i){if(r="DataTables warning: "+(e?"table id="+e.sTableId+" - ":"")+r,i&&(r+=". For more information about this error, please see http://datatables.net/tn/"+i),n)t.console&&console.log&&console.log(r);else if(n=We.ext,n=n.sErrMode||n.errMode,e&&Be(e,null,"error",[e,i,r]),"alert"==n)alert(r);else{if("throw"==n)throw Error(r);"function"==typeof n&&n(e,i,r)}}function Te(t,n,i,a){e.isArray(i)?e.each(i,function(r,i){e.isArray(i)?Te(t,n,i[0],i[1]):Te(t,n,i)}):(a===r&&(a=i),n[i]!==r&&(t[a]=n[i]))}function Oe(t,n,r){var i,a;for(a in n)n.hasOwnProperty(a)&&(i=n[a],e.isPlainObject(i)?(e.isPlainObject(t[a])||(t[a]={}),e.extend(!0,t[a],i)):t[a]=r&&"data"!==a&&"aaData"!==a&&e.isArray(i)?i.slice():i);return t}function Le(t,n,r){e(t).bind("click.DT",n,function(e){t.blur(),r(e)}).bind("keypress.DT",n,function(e){13===e.which&&(e.preventDefault(),r(e))}).bind("selectstart.DT",function(){return!1})}function Ee(e,t,n,r){n&&e[t].push({fn:n,sName:r})}function Be(t,n,r,i){var a=[];return n&&(a=e.map(t[n].slice().reverse(),function(e){return e.fn.apply(t.oInstance,i)})),null!==r&&(n=e.Event(r+".dt"),e(t.nTable).trigger(n,i),a.push(n.result)),a}function Fe(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),r=e._iDisplayLength;t>=n&&(t=n-r),t-=t%r,(-1===r||0>t)&&(t=0),e._iDisplayStart=t}function Pe(t,n){var r=t.renderer,i=We.ext.renderer[n];return e.isPlainObject(r)&&r[n]?i[r[n]]||i._:"string"==typeof r?i[r]||i._:i._}function Ge(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function Ze(e,t){var n=[],n=Ot.numbers_length,r=Math.floor(n/2);return n>=t?n=ut(0,t):r>=e?(n=ut(0,n-2),n.push("ellipsis"),n.push(t-1)):(e>=t-1-r?n=ut(t-(n-2),t):(n=ut(e-r+2,e+r-1),n.push("ellipsis"),n.push(t-1)),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Re(t){e.each({num:function(e){return Lt(e,t)},"num-fmt":function(e){return Lt(e,t,tt)},"html-num":function(e){return Lt(e,t,Qe)},"html-num-fmt":function(e){return Lt(e,t,Qe,tt)}},function(e,n){Ue.type.order[e+t+"-pre"]=n,e.match(/^html\-/)&&(Ue.type.search[e+t]=Ue.type.search.html)})}function Ye(e){return function(){var t=[je(this[We.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return We.ext.internal[e].apply(this,t)}}var We,Ue,Ve,Xe,He,Je={},qe=/[\r\n]/g,Qe=/<.*?>/g,Ke=/^[\w\+\-]/,$e=/[\w\+\-]$/,et=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),tt=/[',$\xa3\u20ac\xa5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,nt=function(e){return e&&!0!==e&&"-"!==e?!1:!0},rt=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},it=function(e,t){return Je[t]||(Je[t]=RegExp(K(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(Je[t],"."):e},at=function(e,t,n){var r="string"==typeof e;return nt(e)?!0:(t&&r&&(e=it(e,t)),n&&r&&(e=e.replace(tt,"")),!isNaN(parseFloat(e))&&isFinite(e))},ot=function(e,t,n){return nt(e)?!0:(nt(e)||"string"==typeof e)&&at(e.replace(Qe,""),t,n)?!0:null},st=function(e,t,n){var i=[],a=0,o=e.length;if(n!==r)for(;o>a;a++)e[a]&&e[a][t]&&i.push(e[a][t][n]);else for(;o>a;a++)e[a]&&i.push(e[a][t]);return i},lt=function(e,t,n,i){var a=[],o=0,s=t.length;if(i!==r)for(;s>o;o++)e[t[o]][n]&&a.push(e[t[o]][n][i]);else for(;s>o;o++)a.push(e[t[o]][n]);return a},ut=function(e,t){var n,i=[];t===r?(t=0,n=e):(n=t,t=e);for(var a=t;n>a;a++)i.push(a);return i},ct=function(e){for(var t=[],n=0,r=e.length;r>n;n++)e[n]&&t.push(e[n]);return t},dt=function(e){var t,n,r,i=[],a=e.length,o=0;n=0;e:for(;a>n;n++){for(t=e[n],r=0;o>r;r++)if(i[r]===t)continue e;i.push(t),o++}return i},ft=function(e,t,n){e[t]!==r&&(e[n]=e[t])},ht=/\[.*?\]$/,pt=/\(\)$/,gt=e("<div>")[0],mt=gt.textContent!==r,vt=/<.*?>/g;We=function(t){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new Ve(e?je(this[Ue.iApiIndex]):this)},this.fnAddData=function(t,n){var i=this.api(!0),a=e.isArray(t)&&(e.isArray(t[0])||e.isPlainObject(t[0]))?i.rows.add(t):i.row.add(t);return(n===r||n)&&i.draw(),a.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),n=t.settings()[0],i=n.oScroll;e===r||e?t.draw(!1):(""!==i.sX||""!==i.sY)&&pe(n)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===r||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,n){var i=this.api(!0),e=i.rows(e),a=e.settings()[0],o=a.aoData[e[0][0]];return e.remove(),t&&t.call(this,a,o),(n===r||n)&&i.draw(),o},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,n,i,a,o){a=this.api(!0),null===t||t===r?a.search(e,n,i,o):a.column(t).search(e,n,i,o),a.draw()},this.fnGetData=function(e,t){var n=this.api(!0);if(e!==r){var i=e.nodeName?e.nodeName.toLowerCase():"";return t!==r||"td"==i||"th"==i?n.cell(e,t).data():n.row(e).data()||null}return n.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==r?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();return"TR"==n?t.row(e).index():"TD"==n||"TH"==n?(e=t.cell(e).index(),[e.row,e.columnVisible,e.column]):null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){var n=this.api(!0).page(e);(t===r||t)&&n.draw(!1)},this.fnSetColumnVis=function(e,t,n){e=this.api(!0).column(e).visible(t),(n===r||n)&&e.columns.adjust().draw()},this.fnSettings=function(){return je(this[Ue.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,n,i,a){var o=this.api(!0);return n===r||null===n?o.row(t).data(e):o.cell(t,n).data(e),(a===r||a)&&o.columns.adjust(),(i===r||i)&&o.draw(),0},this.fnVersionCheck=Ue.fnVersionCheck;var n=this,i=t===r,c=this.length;i&&(t={}),this.oApi=this.internal=Ue.internal;for(var h in We.ext.internal)h&&(this[h]=Ye(h));return this.each(function(){var h,p={},p=c>1?Oe(p,t,!0):t,g=0,m=this.getAttribute("id"),v=!1,y=We.defaults,I=e(this);if("table"!=this.nodeName.toLowerCase())De(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{s(y),l(y.column),a(y,y,!0),a(y.column,y.column,!0),a(y,e.extend(p,I.data()));var A=We.settings,g=0;for(h=A.length;h>g;g++){var C=A[g];if(C.nTable==this||C.nTHead.parentNode==this||C.nTFoot&&C.nTFoot.parentNode==this){if(g=p.bRetrieve!==r?p.bRetrieve:y.bRetrieve,i||g)return C.oInstance;if(p.bDestroy!==r?p.bDestroy:y.bDestroy){C.oInstance.fnDestroy();break}return void De(C,0,"Cannot reinitialise DataTable",3)}if(C.sTableId==this.id){A.splice(g,1);break}}(null===m||""===m)&&(this.id=m="DataTables_Table_"+We.ext._unique++);var k=e.extend(!0,{},We.models.oSettings,{sDestroyWidth:I[0].style.width,sInstance:m,sTableId:m});k.nTable=this,k.oApi=n.internal,k.oInit=p,A.push(k),k.oInstance=1===n.length?n:I.dataTable(),s(p),p.oLanguage&&o(p.oLanguage),p.aLengthMenu&&!p.iDisplayLength&&(p.iDisplayLength=e.isArray(p.aLengthMenu[0])?p.aLengthMenu[0][0]:p.aLengthMenu[0]),p=Oe(e.extend(!0,{},y),p),Te(k.oFeatures,p,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),Te(k,p,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Te(k.oScroll,p,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Te(k.oLanguage,p,"fnInfoCallback"),Ee(k,"aoDrawCallback",p.fnDrawCallback,"user"),Ee(k,"aoServerParams",p.fnServerParams,"user"),Ee(k,"aoStateSaveParams",p.fnStateSaveParams,"user"),Ee(k,"aoStateLoadParams",p.fnStateLoadParams,"user"),Ee(k,"aoStateLoaded",p.fnStateLoaded,"user"),Ee(k,"aoRowCallback",p.fnRowCallback,"user"),Ee(k,"aoRowCreatedCallback",p.fnCreatedRow,"user"),Ee(k,"aoHeaderCallback",p.fnHeaderCallback,"user"),Ee(k,"aoFooterCallback",p.fnFooterCallback,"user"),Ee(k,"aoInitComplete",p.fnInitComplete,"user"),Ee(k,"aoPreDrawCallback",p.fnPreDrawCallback,"user"),k.rowIdFn=_(p.rowId),u(k),m=k.oClasses,p.bJQueryUI?(e.extend(m,We.ext.oJUIClasses,p.oClasses),p.sDom===y.sDom&&"lfrtip"===y.sDom&&(k.sDom='<"H"lfr>t<"F"ip>'),k.renderer?e.isPlainObject(k.renderer)&&!k.renderer.header&&(k.renderer.header="jqueryui"):k.renderer="jqueryui"):e.extend(m,We.ext.classes,p.oClasses),I.addClass(m.sTable),k.iInitDisplayStart===r&&(k.iInitDisplayStart=p.iDisplayStart,k._iDisplayStart=p.iDisplayStart),null!==p.iDeferLoading&&(k.bDeferLoading=!0,g=e.isArray(p.iDeferLoading),k._iRecordsDisplay=g?p.iDeferLoading[0]:p.iDeferLoading,k._iRecordsTotal=g?p.iDeferLoading[1]:p.iDeferLoading);var M=k.oLanguage;e.extend(!0,M,p.oLanguage),""!==M.sUrl&&(e.ajax({dataType:"json",url:M.sUrl,success:function(t){o(t),a(y.oLanguage,t),e.extend(!0,M,t),ae(k)},error:function(){ae(k)}}),v=!0),null===p.asStripeClasses&&(k.asStripeClasses=[m.sStripeOdd,m.sStripeEven]);var g=k.asStripeClasses,z=I.children("tbody").find("tr").eq(0);if(-1!==e.inArray(!0,e.map(g,function(e){return z.hasClass(e)}))&&(e("tbody tr",this).removeClass(g.join(" ")),k.asDestroyStripes=g.slice()),A=[],g=this.getElementsByTagName("thead"),0!==g.length&&(P(k.aoHeader,g[0]),A=G(k)),null===p.aoColumns)for(C=[],g=0,h=A.length;h>g;g++)C.push(null);else C=p.aoColumns;for(g=0,h=C.length;h>g;g++)d(k,A?A[g]:null);if(x(k,p.aoColumnDefs,C,function(e,t){f(k,e,t)}),z.length){var N=function(e,t){return null!==e.getAttribute("data-"+t)?t:null};e(z[0]).children("th, td").each(function(e,t){var n=k.aoColumns[e];if(n.mData===e){var i=N(t,"sort")||N(t,"order"),a=N(t,"filter")||N(t,"search");(null!==i||null!==a)&&(n.mData={_:e+".display",sort:null!==i?e+".@data-"+i:r,type:null!==i?e+".@data-"+i:r,filter:null!==a?e+".@data-"+a:r},f(k,e))}})}var S=k.oFeatures;if(p.bStateSave&&(S.bStateSave=!0,Se(k,p),Ee(k,"aoDrawCallback",Ne,"state_save")),p.aaSorting===r)for(A=k.aaSorting,g=0,h=A.length;h>g;g++)A[g][1]=k.aoColumns[g].asSorting[0];if(Me(k),S.bSort&&Ee(k,"aoDrawCallback",function(){if(k.bSorted){var t=Ie(k),n={};e.each(t,function(e,t){n[t.src]=t.dir}),Be(k,null,"order",[k,t,n]),Ce(k)}}),Ee(k,"aoDrawCallback",function(){(k.bSorted||"ssp"===Ge(k)||S.bDeferRender)&&Me(k)},"sc"),g=I.children("caption").each(function(){this._captionSide=I.css("caption-side")}),h=I.children("thead"),0===h.length&&(h=e("<thead/>").appendTo(this)),k.nTHead=h[0],h=I.children("tbody"),0===h.length&&(h=e("<tbody/>").appendTo(this)),k.nTBody=h[0],h=I.children("tfoot"),0===h.length&&0<g.length&&(""!==k.oScroll.sX||""!==k.oScroll.sY)&&(h=e("<tfoot/>").appendTo(this)),0===h.length||0===h.children().length?I.addClass(m.sNoFooter):0<h.length&&(k.nTFoot=h[0],P(k.aoFooter,k.nTFoot)),p.aaData)for(g=0;g<p.aaData.length;g++)b(k,p.aaData[g]);else(k.bDeferLoading||"dom"==Ge(k))&&w(k,e(k.nTBody).children("tr"));k.aiDisplay=k.aiDisplayMaster.slice(),k.bInitialised=!0,!1===v&&ae(k)}}),n=null,this};var yt=[],xt=Array.prototype,bt=function(t){var n,r,i=We.settings,a=e.map(i,function(e){return e.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?(n=e.inArray(t,a),-1!==n?[i[n]]:null):t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?r=e(t):t instanceof e&&(r=t),r?r.map(function(){return n=e.inArray(this,a),-1!==n?i[n]:null}).toArray():void 0):[]};Ve=function(t,n){if(!(this instanceof Ve))return new Ve(t,n);var r=[],i=function(e){(e=bt(e))&&(r=r.concat(e))};if(e.isArray(t))for(var a=0,o=t.length;o>a;a++)i(t[a]);else i(t);this.context=dt(r),n&&e.merge(this,n),this.selector={rows:null,cols:null,opts:null},Ve.extend(this,this,yt)},We.Api=Ve,e.extend(Ve.prototype,{any:function(){return 0!==this.count()},concat:xt.concat,context:[],count:function(){return this.flatten().length},each:function(e){for(var t=0,n=this.length;n>t;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new Ve(t[e],this[e]):null},filter:function(e){var t=[];if(xt.filter)t=xt.filter.call(this,e,this);else for(var n=0,r=this.length;r>n;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new Ve(this.context,t)},flatten:function(){var e=[];return new Ve(this.context,e.concat.apply(e,this.toArray()))},join:xt.join,indexOf:xt.indexOf||function(e,t){for(var n=t||0,r=this.length;r>n;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,n,i){var a,o,s,l,u,c,d,f=[],h=this.context,p=this.selector;for("string"==typeof e&&(i=n,n=t,t=e,e=!1),o=0,s=h.length;s>o;o++){var g=new Ve(h[o]);if("table"===t)a=n.call(g,h[o],o),a!==r&&f.push(a);else if("columns"===t||"rows"===t)a=n.call(g,h[o],this[o],o),a!==r&&f.push(a);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(d=this[o],"column-rows"===t&&(c=_t(h[o],p.opts)),l=0,u=d.length;u>l;l++)a=d[l],a="cell"===t?n.call(g,h[o],a.row,a.column,o,l):n.call(g,h[o],a,o,l,c),a!==r&&f.push(a)}return f.length||i?(e=new Ve(h,e?f.concat.apply([],f):f),t=e.selector,t.rows=p.rows,t.cols=p.cols,t.opts=p.opts,e):this},lastIndexOf:xt.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(xt.map)t=xt.map.call(this,e,this);else for(var n=0,r=this.length;r>n;n++)t.push(e.call(this,this[n],n));return new Ve(this.context,t)},pluck:function(e){return this.map(function(t){return t[e]})},pop:xt.pop,push:xt.push,reduce:xt.reduce||function(e,t){return c(this,e,t,0,this.length,1)},reduceRight:xt.reduceRight||function(e,t){return c(this,e,t,this.length-1,-1,-1)},reverse:xt.reverse,selector:null,shift:xt.shift,sort:xt.sort,splice:xt.splice,toArray:function(){return xt.slice.call(this)},to$:function(){return e(this)},toJQuery:function(){return e(this)},unique:function(){return new Ve(this.context,dt(this))},unshift:xt.unshift}),Ve.extend=function(t,n,r){if(r.length&&n&&(n instanceof Ve||n.__dt_wrapper)){var i,a,o,s=function(e,t,n){return function(){var r=t.apply(e,arguments);return Ve.extend(r,r,n.methodExt),r}};for(i=0,a=r.length;a>i;i++)o=r[i],n[o.name]="function"==typeof o.val?s(t,o.val,o):e.isPlainObject(o.val)?{}:o.val,n[o.name].__dt_wrapper=!0,Ve.extend(t,n[o.name],o.propExt)}},Ve.register=Xe=function(t,n){if(e.isArray(t))for(var r=0,i=t.length;i>r;r++)Ve.register(t[r],n);else for(var a,o,s=t.split("."),l=yt,r=0,i=s.length;i>r;r++){a=(o=-1!==s[r].indexOf("()"))?s[r].replace("()",""):s[r];var u;e:{u=0;for(var c=l.length;c>u;u++)if(l[u].name===a){u=l[u];break e}u=null}u||(u={name:a,val:{},methodExt:[],propExt:[]},l.push(u)),r===i-1?u.val=n:l=o?u.methodExt:u.propExt}},Ve.registerPlural=He=function(t,n,i){Ve.register(t,i),Ve.register(n,function(){var t=i.apply(this,arguments);return t===this?this:t instanceof Ve?t.length?e.isArray(t[0])?new Ve(t.context,t[0]):t[0]:r:t})},Xe("tables()",function(t){var n;if(t){n=Ve;var r=this.context;if("number"==typeof t)t=[r[t]];else var i=e.map(r,function(e){return e.nTable}),t=e(i).filter(t).map(function(){var t=e.inArray(this,i);return r[t]}).toArray();n=new n(t)}else n=this;return n}),Xe("table()",function(e){var e=this.tables(e),t=e.context;return t.length?new Ve(t[0]):e}),He("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),He("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),He("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),He("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),He("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),Xe("draw()",function(e){return this.iterator("table",function(t){"page"===e?E(t):("string"==typeof e&&(e="full-hold"===e?!1:!0),B(t,!1===e))})}),Xe("page()",function(e){return e===r?this.page.info().page:this.iterator("table",function(t){ce(t,e)})}),Xe("page.info()",function(){if(0===this.context.length)return r;var e=this.context[0],t=e._iDisplayStart,n=e.oFeatures.bPaginate?e._iDisplayLength:-1,i=e.fnRecordsDisplay(),a=-1===n;return{page:a?0:Math.floor(t/n),pages:a?1:Math.ceil(i/n),start:t,end:e.fnDisplayEnd(),length:n,recordsTotal:e.fnRecordsTotal(),recordsDisplay:i,serverSide:"ssp"===Ge(e)}}),Xe("page.len()",function(e){return e===r?0!==this.context.length?this.context[0]._iDisplayLength:r:this.iterator("table",function(t){se(t,e)})});var wt=function(e,t,n){if(n){var r=new Ve(e);r.one("draw",function(){n(r.ajax.json())})}if("ssp"==Ge(e))B(e,t);else{fe(e,!0);var i=e.jqXHR;i&&4!==i.readyState&&i.abort(),Z(e,[],function(n){z(e);for(var n=U(e,n),r=0,i=n.length;i>r;r++)b(e,n[r]);B(e,t),fe(e,!1)})}};Xe("ajax.json()",function(){var e=this.context;return 0<e.length?e[0].json:void 0}),Xe("ajax.params()",function(){var e=this.context;return 0<e.length?e[0].oAjaxData:void 0}),Xe("ajax.reload()",function(e,t){return this.iterator("table",function(n){wt(n,!1===t,e)})}),Xe("ajax.url()",function(t){var n=this.context;return t===r?0===n.length?r:(n=n[0],n.ajax?e.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource):this.iterator("table",function(n){e.isPlainObject(n.ajax)?n.ajax.url=t:n.ajax=t})}),Xe("ajax.url().load()",function(e,t){return this.iterator("table",function(n){wt(n,!1===t,e)})});var It=function(t,n,i,a,o){var s,l,u,c,d,f,h=[];for(u=typeof n,n&&"string"!==u&&"function"!==u&&n.length!==r||(n=[n]),u=0,c=n.length;c>u;u++)for(l=n[u]&&n[u].split?n[u].split(","):[n[u]],d=0,f=l.length;f>d;d++)(s=i("string"==typeof l[d]?e.trim(l[d]):l[d]))&&s.length&&(h=h.concat(s));if(t=Ue.selector[t],t.length)for(u=0,c=t.length;c>u;u++)h=t[u](a,o,h);return dt(h)},At=function(t){return t||(t={}),t.filter&&t.search===r&&(t.search=t.filter),e.extend({search:"none",order:"current",page:"all"},t)},Ct=function(e){for(var t=0,n=e.length;n>t;t++)if(0<e[t].length)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e},_t=function(t,n){var r,i,a,o=[],s=t.aiDisplay;r=t.aiDisplayMaster;var l=n.search;if(i=n.order,a=n.page,"ssp"==Ge(t))return"removed"===l?[]:ut(0,r.length);if("current"==a)for(r=t._iDisplayStart,i=t.fnDisplayEnd();i>r;r++)o.push(s[r]);else if("current"==i||"applied"==i)o="none"==l?r.slice():"applied"==l?s.slice():e.map(r,function(t){return-1===e.inArray(t,s)?t:null});else if("index"==i||"original"==i)for(r=0,i=t.aoData.length;i>r;r++)"none"==l?o.push(r):(a=e.inArray(r,s),(-1===a&&"removed"==l||a>=0&&"applied"==l)&&o.push(r));return o};Xe("rows()",function(t,n){t===r?t="":e.isPlainObject(t)&&(n=t,t="");var n=At(n),i=this.iterator("table",function(i){var a=n;return It("row",t,function(t){var n=rt(t);if(null!==n&&!a)return[n];var o=_t(i,a);return null!==n&&-1!==e.inArray(n,o)?[n]:t?"function"==typeof t?e.map(o,function(e){var n=i.aoData[e];return t(e,n._aData,n.nTr)?e:null}):(n=ct(lt(i.aoData,o,"nTr")),t.nodeName?t._DT_RowIndex!==r?[t._DT_RowIndex]:t._DT_CellIndex?[t._DT_CellIndex.row]:(n=e(t).closest("*[data-dt-row]"),n.length?[n.data("dt-row")]:[]):"string"==typeof t&&"#"===t.charAt(0)&&(o=i.aIds[t.replace(/^#/,"")],o!==r)?[o.idx]:e(n).filter(t).map(function(){return this._DT_RowIndex}).toArray()):o},i,a)},1);return i.selector.rows=t,i.selector.opts=n,i}),Xe("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||r},1)}),Xe("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return lt(e.aoData,t,"_aData")},1)}),He("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){var r=t.aoData[n];return"search"===e?r._aFilterData:r._aSortData},1)}),He("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){S(t,n,e)})}),He("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),He("rows().ids()","row().id()",function(e){for(var t=[],n=this.context,r=0,i=n.length;i>r;r++)for(var a=0,o=this[r].length;o>a;a++){var s=n[r].rowIdFn(n[r].aoData[this[r][a]]._aData);t.push((!0===e?"#":"")+s)}return new Ve(n,t)}),He("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,i){var a,o,s,l,u,c=t.aoData,d=c[n];for(c.splice(n,1),a=0,o=c.length;o>a;a++)if(s=c[a],u=s.anCells,null!==s.nTr&&(s.nTr._DT_RowIndex=a),null!==u)for(s=0,l=u.length;l>s;s++)u[s]._DT_CellIndex.row=a;N(t.aiDisplayMaster,n),N(t.aiDisplay,n),N(e[i],n,!1),Fe(t),n=t.rowIdFn(d._aData),n!==r&&delete t.aIds[n]}),this.iterator("table",function(e){for(var t=0,n=e.aoData.length;n>t;t++)e.aoData[t].idx=t}),this}),Xe("rows.add()",function(t){var n=this.iterator("table",function(e){var n,r,i,a=[];for(r=0,i=t.length;i>r;r++)n=t[r],n.nodeName&&"TR"===n.nodeName.toUpperCase()?a.push(w(e,n)[0]):a.push(b(e,n));return a},1),r=this.rows(-1);return r.pop(),e.merge(r,n),r}),Xe("row()",function(e,t){return Ct(this.rows(e,t))}),Xe("row().data()",function(e){var t=this.context;return e===r?t.length&&this.length?t[0].aoData[this[0]]._aData:r:(t[0].aoData[this[0]]._aData=e,S(t[0],this[0],"data"),this)}),Xe("row().node()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]].nTr||null:null}),Xe("row.add()",function(t){t instanceof e&&t.length&&(t=t[0]);var n=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?w(e,t)[0]:b(e,t)});return this.row(n[0])});var kt=function(e,t){var n=e.context;n.length&&(n=n[0].aoData[t!==r?t:e[0]])&&n._details&&(n._details.remove(),n._detailsShow=r,n._details=r)},Mt=function(e,t){var n=e.context;if(n.length&&e.length){var r=n[0].aoData[e[0]];if(r._details){(r._detailsShow=t)?r._details.insertAfter(r.nTr):r._details.detach();var i=n[0],a=new Ve(i),o=i.aoData;a.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<st(o,"_details").length&&(a.on("draw.dt.DT_details",function(e,t){i===t&&a.rows({page:"current"}).eq(0).each(function(e){e=o[e],e._detailsShow&&e._details.insertAfter(e.nTr)})}),a.on("column-visibility.dt.DT_details",function(e,t){if(i===t)for(var n,r=m(t),a=0,s=o.length;s>a;a++)n=o[a],n._details&&n._details.children("td[colspan]").attr("colspan",r)}),a.on("destroy.dt.DT_details",function(e,t){if(i===t)for(var n=0,r=o.length;r>n;n++)o[n]._details&&kt(a,n)}))}}};Xe("row().child()",function(t,n){var i=this.context;if(t===r)return i.length&&this.length?i[0].aoData[this[0]]._details:r;if(!0===t)this.child.show();else if(!1===t)kt(this);else if(i.length&&this.length){var a=i[0],i=i[0].aoData[this[0]],o=[],s=function(t,n){if(e.isArray(t)||t instanceof e)for(var r=0,i=t.length;i>r;r++)s(t[r],n);else t.nodeName&&"tr"===t.nodeName.toLowerCase()?o.push(t):(r=e("<tr><td/></tr>").addClass(n),e("td",r).addClass(n).html(t)[0].colSpan=m(a),o.push(r[0]))};s(t,n),i._details&&i._details.remove(),i._details=e(o),i._detailsShow&&i._details.insertAfter(i.nTr)}return this}),Xe(["row().child.show()","row().child().show()"],function(){return Mt(this,!0),this}),Xe(["row().child.hide()","row().child().hide()"],function(){return Mt(this,!1),this}),Xe(["row().child.remove()","row().child().remove()"],function(){return kt(this),this}),Xe("row().child.isShown()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]]._detailsShow||!1:!1});var zt=/^(.+):(name|visIdx|visible)$/,Nt=function(e,t,n,r,i){for(var n=[],r=0,a=i.length;a>r;r++)n.push(I(e,i[r],t));return n};Xe("columns()",function(t,n){t===r?t="":e.isPlainObject(t)&&(n=t,t="");var n=At(n),i=this.iterator("table",function(r){var i=t,a=n,o=r.aoColumns,s=st(o,"sName"),l=st(o,"nTh");return It("column",i,function(t){var n=rt(t);if(""===t)return ut(o.length);if(null!==n)return[n>=0?n:o.length+n];if("function"==typeof t){var i=_t(r,a);return e.map(o,function(e,n){return t(n,Nt(r,n,0,0,i),l[n])?n:null})}var u="string"==typeof t?t.match(zt):"";if(u)switch(u[2]){case"visIdx":case"visible":if(n=parseInt(u[1],10),0>n){var c=e.map(o,function(e,t){return e.bVisible?t:null});return[c[c.length+n]]}return[p(r,n)];case"name":return e.map(s,function(e,t){return e===u[1]?t:null});default:return[]}return t.nodeName&&t._DT_CellIndex?[t._DT_CellIndex.column]:(n=e(l).filter(t).map(function(){return e.inArray(this,l)}).toArray(),n.length||!t.nodeName?n:(n=e(t).closest("*[data-dt-column]"),n.length?[n.data("dt-column")]:[]))},r,a)},1);return i.selector.cols=t,i.selector.opts=n,i}),He("columns().header()","column().header()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),He("columns().footer()","column().footer()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),He("columns().data()","column().data()",function(){return this.iterator("column-rows",Nt,1)}),He("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),He("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,r,i,a){return lt(t.aoData,a,"search"===e?"_aFilterData":"_aSortData",n)},1)}),He("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,r,i){return lt(e.aoData,i,"anCells",t)},1)}),He("columns().visible()","column().visible()",function(t,n){return this.iterator("column",function(i,a){if(t===r)return i.aoColumns[a].bVisible;var o,s,l,u=i.aoColumns,c=u[a],d=i.aoData;if(t!==r&&c.bVisible!==t){if(t){var f=e.inArray(!0,st(u,"bVisible"),a+1);for(o=0,s=d.length;s>o;o++)l=d[o].nTr,u=d[o].anCells,l&&l.insertBefore(u[a],u[f]||null)}else e(st(i.aoData,"anCells",a)).detach();c.bVisible=t,L(i,i.aoHeader),L(i,i.aoFooter),(n===r||n)&&h(i),Be(i,null,"column-visibility",[i,a,t,n]),Ne(i)}})}),He("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return"visible"===e?g(t,n):n},1)}),Xe("columns.adjust()",function(){return this.iterator("table",function(e){h(e)},1)}),Xe("column.index()",function(e,t){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===e||"toData"===e)return p(n,t);if("fromData"===e||"toVisible"===e)return g(n,t)}}),Xe("column()",function(e,t){return Ct(this.columns(e,t))}),Xe("cells()",function(t,n,i){if(e.isPlainObject(t)&&(t.row===r?(i=t,t=null):(i=n,n=null)),e.isPlainObject(n)&&(i=n,n=null),null===n||n===r)return this.iterator("table",function(n){var a,o,s,l,u,c,d,f=t,h=At(i),p=n.aoData,g=_t(n,h),m=ct(lt(p,g,"anCells")),v=e([].concat.apply([],m)),y=n.aoColumns.length;return It("cell",f,function(t){var i="function"==typeof t;if(null===t||t===r||i){for(o=[],s=0,l=g.length;l>s;s++)for(a=g[s],u=0;y>u;u++)c={row:a,column:u},i?(d=p[a],t(c,I(n,a,u),d.anCells?d.anCells[u]:null)&&o.push(c)):o.push(c);return o}return e.isPlainObject(t)?[t]:(i=v.filter(t).map(function(e,t){return{row:t._DT_CellIndex.row,column:t._DT_CellIndex.column}}).toArray(),i.length||!t.nodeName?i:(d=e(t).closest("*[data-dt-row]"),d.length?[{row:d.data("dt-row"),column:d.data("dt-column")}]:[]))},n,h)});var a,o,s,l,u,c=this.columns(n,i),d=this.rows(t,i),f=this.iterator("table",function(e,t){for(a=[],o=0,s=d[t].length;s>o;o++)for(l=0,u=c[t].length;u>l;l++)a.push({row:d[t][o],column:c[t][l]});return a},1);return e.extend(f.selector,{cols:n,rows:t,opts:i}),f}),He("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,n){return(e=e.aoData[t])&&e.anCells?e.anCells[n]:r},1)}),Xe("cells().data()",function(){return this.iterator("cell",function(e,t,n){return I(e,t,n)},1)}),He("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,r){return t.aoData[n][e][r]},1)}),He("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,n,r){return I(t,n,r,e)},1)}),He("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:g(e,n)}},1)}),He("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,n,r){S(t,n,e,r)})}),Xe("cell()",function(e,t,n){return Ct(this.cells(e,t,n))}),Xe("cell().data()",function(e){var t=this.context,n=this[0];return e===r?t.length&&n.length?I(t[0],n[0].row,n[0].column):r:(A(t[0],n[0].row,n[0].column,e),S(t[0],n[0].row,"data",n[0].column),this)}),Xe("order()",function(t,n){var i=this.context;return t===r?0!==i.length?i[0].aaSorting:r:("number"==typeof t?t=[[t,n]]:e.isArray(t[0])||(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),Xe("order.listener()",function(e,t,n){return this.iterator("table",function(r){ke(r,e,t,n)})}),Xe("order.fixed()",function(t){if(!t){var n=this.context,n=n.length?n[0].aaSortingFixed:r;return e.isArray(n)?{pre:n}:n}return this.iterator("table",function(n){n.aaSortingFixed=e.extend(!0,{},t)})}),Xe(["columns().order()","column().order()"],function(t){var n=this;return this.iterator("table",function(r,i){var a=[];e.each(n[i],function(e,n){a.push([n,t])}),r.aaSorting=a})}),Xe("search()",function(t,n,i,a){var o=this.context;return t===r?0!==o.length?o[0].oPreviousSearch.sSearch:r:this.iterator("table",function(r){r.oFeatures.bFilter&&X(r,e.extend({},r.oPreviousSearch,{sSearch:t+"",bRegex:null===n?!1:n,bSmart:null===i?!0:i,bCaseInsensitive:null===a?!0:a}),1)})}),He("columns().search()","column().search()",function(t,n,i,a){return this.iterator("column",function(o,s){var l=o.aoPreSearchCols;return t===r?l[s].sSearch:void(o.oFeatures.bFilter&&(e.extend(l[s],{sSearch:t+"",bRegex:null===n?!1:n,bSmart:null===i?!0:i,bCaseInsensitive:null===a?!0:a}),X(o,o.oPreviousSearch,1)))})}),Xe("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Xe("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),Xe("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Xe("state.save()",function(){return this.iterator("table",function(e){Ne(e)})}),We.versionCheck=We.fnVersionCheck=function(e){for(var t,n,r=We.version.split("."),e=e.split("."),i=0,a=e.length;a>i;i++)if(t=parseInt(r[i],10)||0,
n=parseInt(e[i],10)||0,t!==n)return t>n;return!0},We.isDataTable=We.fnIsDataTable=function(t){var n=e(t).get(0),r=!1;return e.each(We.settings,function(t,i){var a=i.nScrollHead?e("table",i.nScrollHead)[0]:null,o=i.nScrollFoot?e("table",i.nScrollFoot)[0]:null;(i.nTable===n||a===n||o===n)&&(r=!0)}),r},We.tables=We.fnTables=function(t){var n=!1;e.isPlainObject(t)&&(n=t.api,t=t.visible);var r=e.map(We.settings,function(n){return!t||t&&e(n.nTable).is(":visible")?n.nTable:void 0});return n?new Ve(r):r},We.util={throttle:ve,escapeRegex:K},We.camelToHungarian=a,Xe("$()",function(t,n){var r=this.rows(n).nodes(),r=e(r);return e([].concat(r.filter(t).toArray(),r.find(t).toArray()))}),e.each(["on","one","off"],function(t,n){Xe(n+"()",function(){var t=Array.prototype.slice.call(arguments);t[0].match(/\.dt\b/)||(t[0]+=".dt");var r=e(this.tables().nodes());return r[n].apply(r,t),this})}),Xe("clear()",function(){return this.iterator("table",function(e){z(e)})}),Xe("settings()",function(){return new Ve(this.context,this.context)}),Xe("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),Xe("data()",function(){return this.iterator("table",function(e){return st(e.aoData,"_aData")}).flatten()}),Xe("destroy()",function(n){return n=n||!1,this.iterator("table",function(r){var i,a=r.nTableWrapper.parentNode,o=r.oClasses,s=r.nTable,l=r.nTBody,u=r.nTHead,c=r.nTFoot,d=e(s),l=e(l),f=e(r.nTableWrapper),h=e.map(r.aoData,function(e){return e.nTr});r.bDestroying=!0,Be(r,"aoDestroyCallback","destroy",[r]),n||new Ve(r).columns().visible(!0),f.unbind(".DT").find(":not(tbody *)").unbind(".DT"),e(t).unbind(".DT-"+r.sInstance),s!=u.parentNode&&(d.children("thead").detach(),d.append(u)),c&&s!=c.parentNode&&(d.children("tfoot").detach(),d.append(c)),r.aaSorting=[],r.aaSortingFixed=[],Me(r),e(h).removeClass(r.asStripeClasses.join(" ")),e("th, td",u).removeClass(o.sSortable+" "+o.sSortableAsc+" "+o.sSortableDesc+" "+o.sSortableNone),r.bJUI&&(e("th span."+o.sSortIcon+", td span."+o.sSortIcon,u).detach(),e("th, td",u).each(function(){var t=e("div."+o.sSortJUIWrapper,this);e(this).append(t.contents()),t.detach()})),l.children().detach(),l.append(h),u=n?"remove":"detach",d[u](),f[u](),!n&&a&&(a.insertBefore(s,r.nTableReinsertBefore),d.css("width",r.sDestroyWidth).removeClass(o.sTable),(i=r.asDestroyStripes.length)&&l.children().each(function(t){e(this).addClass(r.asDestroyStripes[t%i])})),a=e.inArray(r,We.settings),-1!==a&&We.settings.splice(a,1)})}),e.each(["column","row","cell"],function(e,t){Xe(t+"s().every()",function(e){var n=this.selector.opts,i=this;return this.iterator(t,function(a,o,s,l,u){e.call(i[t](o,"cell"===t?s:n,"cell"===t?n:r),o,s,l,u)})})}),Xe("i18n()",function(t,n,i){var a=this.context[0],t=_(t)(a.oLanguage);return t===r&&(t=n),i!==r&&e.isPlainObject(t)&&(t=t[i]!==r?t[i]:t._),t.replace("%d",i)}),We.version="1.10.11",We.settings=[],We.models={},We.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},We.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},We.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},We.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:e.extend({},We.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},i(We.defaults),We.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},i(We.defaults.column),We.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:r,oAjaxData:r,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==Ge(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==Ge(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,r=this.aiDisplay.length,i=this.oFeatures,a=i.bPaginate;return i.bServerSide?!1===a||-1===e?t+r:Math.min(t+e,this._iRecordsDisplay):!a||n>r||-1===e?r:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},We.ext=Ue={buttons:{},classes:{},build:"dt/dt-1.10.11",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:We.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:We.version},e.extend(Ue,{afnFiltering:Ue.search,aTypes:Ue.type.detect,ofnSearch:Ue.type.search,oSort:Ue.type.order,afnSortData:Ue.order,aoFeatures:Ue.feature,oApi:Ue.internal,oStdClasses:Ue.classes,oPagination:Ue.pager}),e.extend(We.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var St="",St="",jt=St+"ui-state-default",Dt=St+"css_right ui-icon ui-icon-",Tt=St+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";e.extend(We.ext.oJUIClasses,We.ext.classes,{sPageButton:"fg-button ui-button "+jt,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:jt+" sorting_asc",sSortDesc:jt+" sorting_desc",sSortable:jt+" sorting",sSortableAsc:jt+" sorting_asc_disabled",sSortableDesc:jt+" sorting_desc_disabled",sSortableNone:jt+" sorting_disabled",sSortJUIAsc:Dt+"triangle-1-n",sSortJUIDesc:Dt+"triangle-1-s",sSortJUI:Dt+"carat-2-n-s",sSortJUIAscAllowed:Dt+"carat-1-n",sSortJUIDescAllowed:Dt+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+jt,sScrollFoot:"dataTables_scrollFoot "+jt,sHeaderTH:jt,sFooterTH:jt,sJUIHeader:Tt+" ui-corner-tl ui-corner-tr",sJUIFooter:Tt+" ui-corner-bl ui-corner-br"});var Ot=We.ext.pager;e.extend(Ot,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(e,t){return[Ze(e,t)]},simple_numbers:function(e,t){return["previous",Ze(e,t),"next"]},full_numbers:function(e,t){return["first","previous",Ze(e,t),"next","last"]},_numbers:Ze,numbers_length:7}),e.extend(!0,We.ext.renderer,{pageButton:{_:function(t,r,i,a,o,s){var l,u,c,d=t.oClasses,f=t.oLanguage.oPaginate,h=t.oLanguage.oAria.paginate||{},p=0,g=function(n,r){var a,c,m,v,y=function(e){ce(t,e.data.action,!0)};for(a=0,c=r.length;c>a;a++)if(v=r[a],e.isArray(v))m=e("<"+(v.DT_el||"div")+"/>").appendTo(n),g(m,v);else{switch(l=null,u="",v){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=f.sFirst,u=v+(o>0?"":" "+d.sPageButtonDisabled);break;case"previous":l=f.sPrevious,u=v+(o>0?"":" "+d.sPageButtonDisabled);break;case"next":l=f.sNext,u=v+(s-1>o?"":" "+d.sPageButtonDisabled);break;case"last":l=f.sLast,u=v+(s-1>o?"":" "+d.sPageButtonDisabled);break;default:l=v+1,u=o===v?d.sPageButtonActive:""}null!==l&&(m=e("<a>",{"class":d.sPageButton+" "+u,"aria-controls":t.sTableId,"aria-label":h[v],"data-dt-idx":p,tabindex:t.iTabIndex,id:0===i&&"string"==typeof v?t.sTableId+"_"+v:null}).html(l).appendTo(n),Le(m,{action:v},y),p++)}};try{c=e(r).find(n.activeElement).data("dt-idx")}catch(m){}g(e(r).empty(),a),c&&e(r).find("[data-dt-idx="+c+"]").focus()}}}),e.extend(We.ext.type.detect,[function(e,t){var n=t.oLanguage.sDecimal;return at(e,n)?"num"+n:null},function(e){if(e&&!(e instanceof Date)&&(!Ke.test(e)||!$e.test(e)))return null;var t=Date.parse(e);return null!==t&&!isNaN(t)||nt(e)?"date":null},function(e,t){var n=t.oLanguage.sDecimal;return at(e,n,!0)?"num-fmt"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return ot(e,n)?"html-num"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return ot(e,n,!0)?"html-num-fmt"+n:null},function(e){return nt(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),e.extend(We.ext.type.search,{html:function(e){return nt(e)?e:"string"==typeof e?e.replace(qe," ").replace(Qe,""):""},string:function(e){return nt(e)?e:"string"==typeof e?e.replace(qe," "):e}});var Lt=function(e,t,n,r){return 0===e||e&&"-"!==e?(t&&(e=it(e,t)),e.replace&&(n&&(e=e.replace(n,"")),r&&(e=e.replace(r,""))),1*e):-(1/0)};e.extend(Ue.type.order,{"date-pre":function(e){return Date.parse(e)||0},"html-pre":function(e){return nt(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return nt(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return t>e?-1:e>t?1:0},"string-desc":function(e,t){return t>e?1:e>t?-1:0}}),Re(""),e.extend(!0,We.ext.renderer,{header:{_:function(t,n,r,i){e(t.nTable).on("order.dt.DT",function(e,a,o,s){t===a&&(e=r.idx,n.removeClass(r.sSortingClass+" "+i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[e]?i.sSortAsc:"desc"==s[e]?i.sSortDesc:r.sSortingClass))})},jqueryui:function(t,n,r,i){e("<div/>").addClass(i.sSortJUIWrapper).append(n.contents()).append(e("<span/>").addClass(i.sSortIcon+" "+r.sSortingClassJUI)).appendTo(n),e(t.nTable).on("order.dt.DT",function(e,a,o,s){t===a&&(e=r.idx,n.removeClass(i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[e]?i.sSortAsc:"desc"==s[e]?i.sSortDesc:r.sSortingClass),n.find("span."+i.sSortIcon).removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed).addClass("asc"==s[e]?i.sSortJUIAsc:"desc"==s[e]?i.sSortJUIDesc:r.sSortingClassJUI))})}}});var Et=function(e){return"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e};return We.render={number:function(e,t,n,r,i){return{display:function(a){if("number"!=typeof a&&"string"!=typeof a)return a;var o=0>a?"-":"",s=parseFloat(a);return isNaN(s)?Et(a):(a=Math.abs(s),s=parseInt(a,10),a=n?t+(a-s).toFixed(n).substring(2):"",o+(r||"")+s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+a+(i||""))}}},text:function(){return{display:Et}}},e.extend(We.ext.internal,{_fnExternApiFunc:Ye,_fnBuildAjax:Z,_fnAjaxUpdate:R,_fnAjaxParameters:Y,_fnAjaxUpdateDraw:W,_fnAjaxDataSrc:U,_fnAddColumn:d,_fnColumnOptions:f,_fnAdjustColumnSizing:h,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:g,_fnVisbleColumns:m,_fnGetColumns:v,_fnColumnTypes:y,_fnApplyColumnDefs:x,_fnHungarianMap:i,_fnCamelToHungarian:a,_fnLanguageCompat:o,_fnBrowserDetect:u,_fnAddData:b,_fnAddTr:w,_fnNodeToDataIndex:function(e,t){return t._DT_RowIndex!==r?t._DT_RowIndex:null},_fnNodeToColumnIndex:function(t,n,r){return e.inArray(r,t.aoData[n].anCells)},_fnGetCellData:I,_fnSetCellData:A,_fnSplitObjNotation:C,_fnGetObjectDataFn:_,_fnSetObjectDataFn:k,_fnGetDataMaster:M,_fnClearTable:z,_fnDeleteIndex:N,_fnInvalidate:S,_fnGetRowElements:j,_fnCreateTr:D,_fnBuildHead:O,_fnDrawHead:L,_fnDraw:E,_fnReDraw:B,_fnAddOptionsHtml:F,_fnDetectHeader:P,_fnGetUniqueThs:G,_fnFeatureHtmlFilter:V,_fnFilterComplete:X,_fnFilterCustom:H,_fnFilterColumn:J,_fnFilter:q,_fnFilterCreateSearch:Q,_fnEscapeRegex:K,_fnFilterData:$,_fnFeatureHtmlInfo:ne,_fnUpdateInfo:re,_fnInfoMacros:ie,_fnInitialise:ae,_fnInitComplete:oe,_fnLengthChange:se,_fnFeatureHtmlLength:le,_fnFeatureHtmlPaginate:ue,_fnPageChange:ce,_fnFeatureHtmlProcessing:de,_fnProcessingDisplay:fe,_fnFeatureHtmlTable:he,_fnScrollDraw:pe,_fnApplyToChildren:ge,_fnCalculateColumnWidths:me,_fnThrottle:ve,_fnConvertToWidth:ye,_fnGetWidestNode:xe,_fnGetMaxLenString:be,_fnStringToCss:we,_fnSortFlatten:Ie,_fnSort:Ae,_fnSortAria:Ce,_fnSortListener:_e,_fnSortAttachListener:ke,_fnSortingClasses:Me,_fnSortData:ze,_fnSaveState:Ne,_fnLoadState:Se,_fnSettingsFromNode:je,_fnLog:De,_fnMap:Te,_fnBindAction:Le,_fnCallbackReg:Ee,_fnCallbackFire:Be,_fnLengthOverflow:Fe,_fnRenderer:Pe,_fnDataSource:Ge,_fnRowAttributes:T,_fnCalculateEnd:function(){}}),e.fn.dataTable=We,We.$=e,e.fn.dataTableSettings=We.settings,e.fn.dataTableExt=We.ext,e.fn.DataTable=function(t){return e(this).dataTable(t).api()},e.each(We,function(t,n){e.fn.DataTable[t]=n}),e.fn.dataTable}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function r(e){return null===e?NaN:+e}function i(e){return!isNaN(e)}function a(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function o(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(e){return(e+="")===wo||e[0]===Io?Io+e:e}function d(e){return(e+="")[0]===Io?e.slice(1):e}function f(e){return c(e)in this._}function h(e){return(e=c(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(d(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function m(){for(var e in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(e){return e}function x(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function b(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=Ao.length;r>n;++n){var i=Ao[n]+t;if(i in e)return i}}function w(){}function I(){}function A(e){function t(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new u;return t.on=function(t,i){var a,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function C(){so.event.preventDefault()}function _(){for(var e,t=so.event;e=t.sourceEvent;)t=e;return t}function k(e){for(var t=new I,n=0,r=arguments.length;++n<r;)t[arguments[n]]=A(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=so.event;i.target=e,so.event=i,t[i.type].apply(n,r)}finally{so.event=a}}},t}function M(e){return _o(e,No),e}function z(e){return"function"==typeof e?e:function(){return ko(e,this)}}function N(e){return"function"==typeof e?e:function(){return Mo(e,this)}}function S(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=so.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:o:e.local?a:i}function j(e){return e.trim().replace(/\s+/g," ")}function D(e){return new RegExp("(?:^|\\s+)"+so.requote(e)+"(?:\\s+|$)","g")}function T(e){return(e+"").trim().split(/^|\s+/)}function O(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=T(e).map(L);var i=e.length;return"function"==typeof t?r:n}function L(e){var t=D(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",j(i+" "+e))):n.setAttribute("class",j(i.replace(t," ")))}}function E(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?a:i}function B(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function F(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===So&&t.documentElement.namespaceURI===So?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=so.ns.qualify(e)).local?n:t}function P(){var e=this.parentNode;e&&e.removeChild(this)}function G(e){return{__data__:e}}function Z(e){return function(){return zo(this,e)}}function R(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function Y(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,a=e[n],o=0,s=a.length;s>o;o++)(i=a[o])&&t(i,o,n);return e}function W(e){return _o(e,Do),e}function U(e){var t,n;return function(r,i,a){var o,s=e[a].update,l=s.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(o=s[t])&&++t<l;);return o}}function V(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=l(t,uo(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+so.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,s=e.indexOf("."),l=X;s>0&&(e=e.slice(0,s));var u=To.get(e);return u&&(e=u,l=H),s?t?i:r:t?w:a}function X(e,t){return function(n){var r=so.event;so.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{so.event=r}}}function H(e,t){var n=X(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function J(n){var r=".dragsuppress-"+ ++Lo,i="click"+r,a=so.select(t(n)).on("touchmove"+r,C).on("dragstart"+r,C).on("selectstart"+r,C);if(null==Oo&&(Oo="onselectstart"in n?!1:b(n.style,"userSelect")),Oo){var o=e(n).style,s=o[Oo];o[Oo]="none"}return function(e){if(a.on(r,null),Oo&&(o[Oo]=s),e){var t=function(){a.on(i,null)};a.on(i,function(){C(),t()},!0),setTimeout(t,0)}}}function q(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Eo){var a=t(e);if(a.scrollX||a.scrollY){r=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Eo=!(o.f||o.e),r.remove()}}return Eo?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function Q(){return so.event.changedTouches[0].identifier}function K(e){return e>0?1:0>e?-1:0}function $(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:-1>e?Po:Math.acos(e)}function te(e){return e>1?Ro:-1>e?-Ro:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function oe(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):we(""+e,Ie,se):new se(e,t,n)}function le(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(o-a)*e/60:180>e?o:240>e?a+(o-a)*(240-e)/60:a}function i(e){return Math.round(255*r(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,a=2*n-o,new ve(i(e+120),i(e),i(e-120))}function ue(e,t,n){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof de?he(e.l,e.a,e.b):he((e=Ae((e=so.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new de(n,Math.cos(e*=Yo)*t,Math.sin(e)*t)}function de(e,t,n){return this instanceof de?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof de?new de(e.l,e.a,e.b):e instanceof ue?ce(e.h,e.c,e.l):Ae((e=ve(e)).r,e.g,e.b):new de(e,t,n)}function fe(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return i=pe(i)*es,r=pe(r)*ts,a=pe(a)*ns,new ve(me(3.2404542*i-1.5371385*r-.4985314*a),me(-.969266*i+1.8760108*r+.041556*a),me(.0556434*i-.2040259*r+1.0572252*a))}function he(e,t,n){return e>0?new ue(Math.atan2(n,t)*Wo,Math.sqrt(t*t+n*n),e):new ue(NaN,NaN,e)}function pe(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function me(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ve(e,t,n){return this instanceof ve?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ve?new ve(e.r,e.g,e.b):we(""+e,ve,le):new ve(e,t,n)}function ye(e){return new ve(e>>16,e>>8&255,255&e)}function xe(e){return ye(e)+""}function be(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(_e(i[0]),_e(i[1]),_e(i[2]))}return(a=as.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,l=15&a,l=l<<4|l):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function Ie(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(i=.5>l?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(n>t?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new se(r,i,l)}function Ae(e,t,n){e=Ce(e),t=Ce(t),n=Ce(n);var r=ge((.4124564*e+.3575761*t+.1804375*n)/es),i=ge((.2126729*e+.7151522*t+.072175*n)/ts),a=ge((.0193339*e+.119192*t+.9503041*n)/ns);return de(116*i-16,500*(r-i),200*(i-a))}function Ce(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _e(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function ke(e){return"function"==typeof e?e:function(){return e}}function Me(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),ze(t,n,e,r)}}function ze(e,t,n,r){function i(){var e,t=l.status;if(!t&&Se(l)||t>=200&&300>t||304===t){try{e=n.call(a,l)}catch(r){return void o.error.call(a,r)}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=so.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(e){var t=so.event;so.event=e;try{o.progress.call(a,l)}finally{so.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(u=e,a):u},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(uo(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(a,l),l.send(null==r?null:r),a},a.abort=function(){return l.abort(),a},so.rebind(a,o,"on"),null==r?a:a.get(Ne(r))}function Ne(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Se(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function je(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,a={c:e,t:i,n:null};return ss?ss.n=a:os=a,ss=a,ls||(us=clearTimeout(us),ls=1,cs(De)),a}function De(){var e=Te(),t=Oe()-e;t>24?(isFinite(t)&&(clearTimeout(us),us=setTimeout(De,t)),ls=0):(ls=1,cs(De))}function Te(){for(var e=Date.now(),t=os;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Oe(){for(var e,t=os,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:os=t.n;return ss=e,n}function Le(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Ee(e,t){var n=Math.pow(10,3*bo(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Be(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,a=[],o=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>t));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:y;return function(e){var n=fs.exec(e),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],d=n[7],f=n[8],h=n[9],p=1,g="",m="",v=!1,y=!0;switch(f&&(f=+f.substring(1)),(u||"0"===r&&"="===o)&&(u=r="0",o="="),h){case"n":d=!0,h="g";break;case"%":p=100,m="%",h="f";break;case"p":p=100,m="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":v=!0,f=0;break;case"s":p=-1,h="r"}"$"===l&&(g=i[0],m=i[1]),"r"!=h||f||(h="g"),null!=f&&("g"==h?f=Math.max(1,Math.min(21,f)):("e"==h||"f"==h)&&(f=Math.max(0,Math.min(20,f)))),h=hs.get(h)||Fe;var x=u&&d;return function(e){var n=m;if(v&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>p){var l=so.formatPrefix(e,f);e=l.scale(e),n=l.symbol+m}else e*=p;e=h(e,f);var b,w,I=e.lastIndexOf(".");if(0>I){var A=y?e.lastIndexOf("e"):-1;0>A?(b=e,w=""):(b=e.substring(0,A),w=e.substring(A))}else b=e.substring(0,I),w=t+e.substring(I+1);!u&&d&&(b=a(b,1/0));var C=g.length+b.length+w.length+(x?0:i.length),_=c>C?new Array(C=c-C+1).join(r):"";return x&&(b=a(_+b,_.length?c-w.length:1/0)),i+=g,e=b+w,("<"===o?i+e+_:">"===o?_+i+e:"^"===o?_.substring(0,C>>=1)+i+e+_.substring(C):i+(x?e:_+e))+n}}}function Fe(e){return e+""}function Pe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ge(e,t,n){function r(t){var n=e(t),r=a(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new gs(n-1)),1),n}function a(e,n){return t(e=new gs(+e),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;r>o;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;r>o;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,n){try{gs=Pe;var r=new Pe;return r._=e,o(r,t,n)}finally{gs=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var l=e.utc=Ze(e);return l.floor=l,l.round=Ze(r),l.ceil=Ze(i),l.offset=Ze(a),l.range=s,e}function Ze(e){return function(t,n){try{gs=Pe;var r=new Pe;return r._=t,e(r,n)._}finally{gs=Date}}}function Re(e){function t(e){function t(t){for(var n,i,a,o=[],s=-1,l=0;++s<r;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=vs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=z[n])&&(n=a(t,null==i?"e"===n?" ":"0":i)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&gs!==Pe,o=new(a?Pe:gs);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,a,o,s=0,l=t.length,u=n.length;l>s;){if(r>=u)return-1;if(i=t.charCodeAt(s++),37===i){if(o=t.charAt(s++),a=N[o in vs?t.charAt(s++):o],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){I.lastIndex=0;var r=I.exec(t.slice(n));return r?(e.w=A.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){k.lastIndex=0;var r=k.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){C.lastIndex=0;var r=C.exec(t.slice(n));return r?(e.m=_.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,z.c.toString(),t,r)}function l(e,t,r){return n(e,z.x.toString(),t,r)}function u(e,t,r){return n(e,z.X.toString(),t,r)}function c(e,t,n){var r=x.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var d=e.dateTime,f=e.date,h=e.time,p=e.periods,g=e.days,m=e.shortDays,v=e.months,y=e.shortMonths;
t.utc=function(e){function n(e){try{gs=Pe;var t=new gs;return t._=e,r(t)}finally{gs=Date}}var r=t(e);return n.parse=function(e){try{gs=Pe;var t=r.parse(e);return t&&t._}finally{gs=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=lt;var x=so.map(),b=We(g),w=Ue(g),I=We(m),A=Ue(m),C=We(v),_=Ue(v),k=We(y),M=Ue(y);p.forEach(function(e,t){x.set(e.toLowerCase(),t)});var z={a:function(e){return m[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(d),d:function(e,t){return Ye(e.getDate(),t,2)},e:function(e,t){return Ye(e.getDate(),t,2)},H:function(e,t){return Ye(e.getHours(),t,2)},I:function(e,t){return Ye(e.getHours()%12||12,t,2)},j:function(e,t){return Ye(1+ps.dayOfYear(e),t,3)},L:function(e,t){return Ye(e.getMilliseconds(),t,3)},m:function(e,t){return Ye(e.getMonth()+1,t,2)},M:function(e,t){return Ye(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return Ye(e.getSeconds(),t,2)},U:function(e,t){return Ye(ps.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ye(ps.mondayOfYear(e),t,2)},x:t(f),X:t(h),y:function(e,t){return Ye(e.getFullYear()%100,t,2)},Y:function(e,t){return Ye(e.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},N={a:r,A:i,b:a,B:o,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:at,m:$e,M:rt,p:c,S:it,U:Xe,w:Ve,W:He,x:l,X:u,y:qe,Y:Je,Z:Qe,"%":st};return t}function Ye(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function We(e){return new RegExp("^(?:"+e.map(so.requote).join("|")+")","i")}function Ue(e){for(var t=new u,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ve(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Xe(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function He(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Je(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function qe(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.y=Ke(+r[0]),n+r[0].length):-1}function Qe(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Ke(e){return e+(e>68?1900:2e3)}function $e(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function et(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function nt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function it(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function at(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ot(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=bo(t)/60|0,i=bo(t)%60;return n+Ye(r,"0",2)+Ye(i,"0",2)}function st(e,t,n){xs.lastIndex=0;var r=xs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ut(){}function ct(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function dt(e,t){e&&As.hasOwnProperty(e.type)&&As[e.type](e,t)}function ft(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function ht(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ft(e[n],t,1);t.polygonEnd()}function pt(){function e(e,t){e*=Yo,t=t*Yo/2+Po/4;var n=e-r,o=n>=0?1:-1,s=o*n,l=Math.cos(t),u=Math.sin(t),c=a*u,d=i*l+c*Math.cos(s),f=c*o*Math.sin(s);_s.add(Math.atan2(f,d)),r=e,i=l,a=u}var t,n,r,i,a;ks.point=function(o,s){ks.point=e,r=(t=o)*Yo,i=Math.cos(s=(n=s)*Yo/2+Po/4),a=Math.sin(s)},ks.lineEnd=function(){e(t,n)}}function gt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function mt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function xt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function wt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function It(e,t){return bo(e[0]-t[0])<Bo&&bo(e[1]-t[1])<Bo}function At(e,t){e*=Yo;var n=Math.cos(t*=Yo);Ct(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Ct(e,t,n){++Ms,Ns+=(e-Ns)/Ms,Ss+=(t-Ss)/Ms,js+=(n-js)/Ms}function _t(){function e(e,i){e*=Yo;var a=Math.cos(i*=Yo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*o-t*l)*u+(u=t*s-n*o)*u),t*o+n*s+r*l);zs+=u,Ds+=u*(t+(t=o)),Ts+=u*(n+(n=s)),Os+=u*(r+(r=l)),Ct(t,n,r)}var t,n,r;Fs.point=function(i,a){i*=Yo;var o=Math.cos(a*=Yo);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),Fs.point=e,Ct(t,n,r)}}function kt(){Fs.point=At}function Mt(){function e(e,t){e*=Yo;var n=Math.cos(t*=Yo),o=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=i*l-a*s,c=a*o-r*l,d=r*s-i*o,f=Math.sqrt(u*u+c*c+d*d),h=r*o+i*s+a*l,p=f&&-ee(h)/f,g=Math.atan2(f,h);Ls+=p*u,Es+=p*c,Bs+=p*d,zs+=g,Ds+=g*(r+(r=o)),Ts+=g*(i+(i=s)),Os+=g*(a+(a=l)),Ct(r,i,a)}var t,n,r,i,a;Fs.point=function(o,s){t=o,n=s,Fs.point=e,o*=Yo;var l=Math.cos(s*=Yo);r=l*Math.cos(o),i=l*Math.sin(o),a=Math.sin(s),Ct(r,i,a)},Fs.lineEnd=function(){e(t,n),Fs.lineEnd=kt,Fs.point=At}}function zt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Nt(){return!0}function St(e,t,n,r,i){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(It(n,r)){i.lineStart();for(var s=0;t>s;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var l=new Dt(n,e,null,!0),u=new Dt(n,null,l,!1);l.o=u,a.push(l),o.push(u),l=new Dt(r,e,null,!1),u=new Dt(r,null,l,!0),l.o=u,a.push(l),o.push(u)}}),o.sort(t),jt(a),jt(o),a.length){for(var s=0,l=n,u=o.length;u>s;++s)o[s].e=l=!l;for(var c,d,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,u=c.length;u>s;++s)i.point((d=c[s])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)i.point((d=c[s])[0],d[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function jt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Dt(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Tt(e,t,n,r){return function(i,a){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function s(e,t){var n=i(e,t);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=o,m.lineEnd()}function c(e,t){g.push([e,t]);var n=i(e,t);b.point(n[0],n[1])}function d(){b.lineStart(),g=[]}function f(){c(g[0][0],g[0][1]),b.lineEnd();var e,t=b.clean(),n=x.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(w||(a.polygonStart(),w=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Ot))}var h,p,g,m=t(a),v=i.invert(r[0],r[1]),y={point:o,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=d,y.lineEnd=f,h=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=l,y.lineEnd=u,h=so.merge(h);var e=Gt(v,p);h.length?(w||(a.polygonStart(),w=!0),St(h,Et,e,n,a)):e&&(w||(a.polygonStart(),w=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),w&&(a.polygonEnd(),w=!1),h=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},x=Lt(),b=t(x),w=!1;return y}}function Ot(e){return e.length>1}function Lt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Et(e,t){return((e=e.x)[0]<0?e[1]-Ro-Bo:Ro-e[1])-((t=t.x)[0]<0?t[1]-Ro-Bo:Ro-t[1])}function Bt(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Po:-Po,l=bo(a-n);bo(l-Po)<Bo?(e.point(n,r=(r+o)/2>0?Ro:-Ro),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&l>=Po&&(bo(n-i)<Bo&&(n-=i*Bo),bo(a-s)<Bo&&(a-=s*Bo),r=Ft(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Ft(e,t,n,r){var i,a,o=Math.sin(e-n);return bo(o)>Bo?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function Pt(e,t,n,r){var i;if(null==e)i=n*Ro,r.point(-Po,i),r.point(0,i),r.point(Po,i),r.point(Po,0),r.point(Po,-i),r.point(0,-i),r.point(-Po,-i),r.point(-Po,0),r.point(-Po,i);else if(bo(e[0]-t[0])>Bo){var a=e[0]<t[0]?Po:-Po;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Gt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;_s.reset();for(var s=0,l=t.length;l>s;++s){var u=t[s],c=u.length;if(c)for(var d=u[0],f=d[0],h=d[1]/2+Po/4,p=Math.sin(h),g=Math.cos(h),m=1;;){m===c&&(m=0),e=u[m];var v=e[0],y=e[1]/2+Po/4,x=Math.sin(y),b=Math.cos(y),w=v-f,I=w>=0?1:-1,A=I*w,C=A>Po,_=p*x;if(_s.add(Math.atan2(_*I*Math.sin(A),g*b+_*Math.cos(A))),a+=C?w+I*Go:w,C^f>=n^v>=n){var k=vt(gt(d),gt(e));bt(k);var M=vt(i,k);bt(M);var z=(C^w>=0?-1:1)*te(M[2]);(r>z||r===z&&(k[0]||k[1]))&&(o+=C^w>=0?1:-1)}if(!m++)break;f=v,p=x,g=b,d=e}}return(-Bo>a||Bo>a&&0>_s)^1&o}function Zt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,f){var h,p=[d,f],g=t(d,f),m=o?g?0:i(d,f):g?i(d+(0>d?Po:-Po),f):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(h=r(n,p),(It(n,h)||It(p,h))&&(p[0]+=Bo,p[1]+=Bo,g=t(p[0],p[1]))),g!==l)c=0,g?(e.lineStart(),h=r(p,n),e.point(h[0],h[1])):(h=r(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&o^g){var v;m&a||!(v=r(p,n,!0))||(c=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&It(n,p)||e.point(p[0],p[1]),n=p,l=g,a=m},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=gt(e),i=gt(t),o=[1,0,0],s=vt(r,i),l=mt(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var d=a*l/c,f=-a*u/c,h=vt(o,s),p=xt(o,d),g=xt(s,f);yt(p,g);var m=h,v=mt(p,m),y=mt(m,m),x=v*v-y*(mt(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=xt(m,(-v-b)/y);if(yt(w,p),w=wt(w),!n)return w;var I,A=e[0],C=t[0],_=e[1],k=t[1];A>C&&(I=A,A=C,C=I);var M=C-A,z=bo(M-Po)<Bo,N=z||Bo>M;if(!z&&_>k&&(I=_,_=k,k=I),N?z?_+k>0^w[1]<(bo(w[0]-A)<Bo?_:k):_<=w[1]&&w[1]<=k:M>Po^(A<=w[0]&&w[0]<=C)){var S=xt(m,(-v+b)/y);return yt(S,p),[w,wt(S)]}}}function i(t,n){var r=o?e:Po-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var a=Math.cos(e),o=a>0,s=bo(a)>Bo,l=gn(e,6*Yo);return Tt(t,n,l,o?[0,-e]:[-Po,e-Po])}function Rt(e,t,n,r){return function(i){var a,o=i.a,s=i.b,l=o.x,u=o.y,c=s.x,d=s.y,f=0,h=1,p=c-l,g=d-u;if(a=e-l,p||!(a>0)){if(a/=p,0>p){if(f>a)return;h>a&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=n-l,p||!(0>a)){if(a/=p,0>p){if(a>h)return;a>f&&(f=a)}else if(p>0){if(f>a)return;h>a&&(h=a)}if(a=t-u,g||!(a>0)){if(a/=g,0>g){if(f>a)return;h>a&&(h=a)}else if(g>0){if(a>h)return;a>f&&(f=a)}if(a=r-u,g||!(0>a)){if(a/=g,0>g){if(a>h)return;a>f&&(f=a)}else if(g>0){if(f>a)return;h>a&&(h=a)}return f>0&&(i.a={x:l+f*p,y:u+f*g}),1>h&&(i.b={x:l+h*p,y:u+h*g}),i}}}}}}function Yt(e,t,n,r){function i(r,i){return bo(r[0]-e)<Bo?i>0?0:3:bo(r[0]-n)<Bo?i>0?2:1:bo(r[1]-t)<Bo?i>0?1:0:i>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var a,o=1,s=m[i],l=s.length,u=s[0];l>o;++o)a=s[o],u[1]<=r?a[1]>r&&$(u,a,e)>0&&++t:a[1]<=r&&$(u,a,e)<0&&--t,u=a;return 0!==t}function u(a,s,l,u){var c=0,d=0;if(null==a||(c=i(a,l))!==(d=i(s,l))||o(a,s)<0^l>0){do u.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+l+4)%4)!==d)}else u.point(s[0],s[1])}function c(i,a){return i>=e&&n>=i&&a>=t&&r>=a}function d(e,t){c(e,t)&&s.point(e,t)}function f(){N.point=p,m&&m.push(v=[]),C=!0,A=!1,w=I=NaN}function h(){g&&(p(y,x),b&&A&&M.rejoin(),g.push(M.buffer())),N.point=d,A&&s.lineEnd()}function p(e,t){e=Math.max(-Gs,Math.min(Gs,e)),t=Math.max(-Gs,Math.min(Gs,t));var n=c(e,t);if(m&&v.push([e,t]),C)y=e,x=t,b=n,C=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&A)s.point(e,t);else{var r={a:{x:w,y:I},b:{x:e,y:t}};z(r)?(A||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),_=!1):n&&(s.lineStart(),s.point(e,t),_=!1)}w=e,I=t,A=n}var g,m,v,y,x,b,w,I,A,C,_,k=s,M=Lt(),z=Rt(e,t,n,r),N={point:d,lineStart:f,lineEnd:h,polygonStart:function(){s=M,g=[],m=[],_=!0},polygonEnd:function(){s=k,g=so.merge(g);var t=l([e,r]),n=_&&t,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&St(g,a,t,u,s),s.polygonEnd()),g=m=v=null}};return N}}function Wt(e){var t=0,n=Po/3,r=sn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Po/180,n=e[1]*Po/180):[t/Po*180,n/Po*180]},i}function Ut(e,t){function n(e,t){var n=Math.sqrt(a-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,te((a-(e*e+n*n)*i*i)/(2*i))]},n}function Vt(){function e(e,t){Rs+=i*e-r*t,r=e,i=t}var t,n,r,i;Xs.point=function(a,o){Xs.point=e,t=r=a,n=i=o},Xs.lineEnd=function(){e(t,n)}}function Xt(e,t){Ys>e&&(Ys=e),e>Us&&(Us=e),Ws>t&&(Ws=t),t>Vs&&(Vs=t)}function Ht(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function r(){s.point=e}function i(){o.push("Z")}var a=Jt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return a=Jt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Jt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function qt(e,t){Ns+=e,Ss+=t,++js}function Qt(){function e(e,r){var i=e-t,a=r-n,o=Math.sqrt(i*i+a*a);Ds+=o*(t+e)/2,Ts+=o*(n+r)/2,Os+=o,qt(t=e,n=r)}var t,n;Js.point=function(r,i){Js.point=e,qt(t=r,n=i)}}function Kt(){Js.point=qt}function $t(){function e(e,t){var n=e-r,a=t-i,o=Math.sqrt(n*n+a*a);Ds+=o*(r+e)/2,Ts+=o*(i+t)/2,Os+=o,o=i*e-r*t,Ls+=o*(r+e),Es+=o*(i+t),Bs+=3*o,qt(r=e,i=t)}var t,n,r,i;Js.point=function(a,o){Js.point=e,qt(t=r=a,n=i=o)},Js.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Go)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return o=e,s},result:w};return s}function tn(e){function t(e){return(s?r:n)(e)}function n(t){return an(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){x=NaN,C.point=a,t.lineStart()}function a(n,r){var a=gt([n,r]),o=e(n,r);i(x,b,y,w,I,A,x=o[0],b=o[1],y=n,w=a[0],I=a[1],A=a[2],s,t),t.point(x,b)}function o(){C.point=n,t.lineEnd()}function l(){r(),C.point=u,C.lineEnd=c}function u(e,t){a(d=e,f=t),h=x,p=b,g=w,m=I,v=A,C.point=a}function c(){i(x,b,y,w,I,A,h,p,d,g,m,v,s,t),C.lineEnd=o,o()}var d,f,h,p,g,m,v,y,x,b,w,I,A,C={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),C.lineStart=l},polygonEnd:function(){t.polygonEnd(),C.lineStart=r}};return C}function i(t,n,r,s,l,u,c,d,f,h,p,g,m,v){var y=c-t,x=d-n,b=y*y+x*x;if(b>4*a&&m--){var w=s+h,I=l+p,A=u+g,C=Math.sqrt(w*w+I*I+A*A),_=Math.asin(A/=C),k=bo(bo(A)-1)<Bo||bo(r-f)<Bo?(r+f)/2:Math.atan2(I,w),M=e(k,_),z=M[0],N=M[1],S=z-t,j=N-n,D=x*S-y*j;(D*D/b>a||bo((y*S+x*j)/b-.5)>.3||o>s*h+l*p+u*g)&&(i(t,n,r,s,l,u,z,N,k,w/=C,I/=C,A,m,v),v.point(z,N),i(z,N,k,w,I,A,c,d,f,h,p,g,m,v))}}var a=.5,o=Math.cos(30*Yo),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function nn(e){var t=tn(function(t,n){return e([t*Wo,n*Wo])});return function(e){return ln(t(e))}}function rn(e){this.stream=e}function an(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function on(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*Yo,e[1]*Yo),[e[0]*f+l,u-e[1]*f]}function n(e){return e=s.invert((e[0]-l)/f,(u-e[1])/f),e&&[e[0]*Wo,e[1]*Wo]}function r(){s=zt(o=dn(v,x,b),a);var e=a(g,m);return l=h-e[0]*f,u=p+e[1]*f,i()}function i(){return c&&(c.valid=!1,c=null),t}var a,o,s,l,u,c,d=tn(function(e,t){return e=a(e,t),[e[0]*f+l,u-e[1]*f]}),f=150,h=480,p=250,g=0,m=0,v=0,x=0,b=0,w=Ps,I=y,A=null,C=null;return t.stream=function(e){return c&&(c.valid=!1),c=ln(w(o,d(I(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(A=e,Ps):Zt((A=+e)*Yo),i()):A},t.clipExtent=function(e){return arguments.length?(C=e,I=e?Yt(e[0][0],e[0][1],e[1][0],e[1][1]):y,i()):C},t.scale=function(e){return arguments.length?(f=+e,r()):f},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(g=e[0]%360*Yo,m=e[1]%360*Yo,r()):[g*Wo,m*Wo]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Yo,x=e[1]%360*Yo,b=e.length>2?e[2]%360*Yo:0,r()):[v*Wo,x*Wo,b*Wo]},so.rebind(t,d,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function ln(e){return an(e,function(t,n){e.point(t*Yo,n*Yo)})}function un(e,t){return[e,t]}function cn(e,t){return[e>Po?e-Go:-Po>e?e+Go:e,t]}function dn(e,t,n){return e?t||n?zt(hn(e),pn(t,n)):hn(e):t||n?pn(t,n):cn}function fn(e){return function(t,n){return t+=e,[t>Po?t-Go:-Po>t?t+Go:t,n]}}function hn(e){var t=fn(e);return t.invert=fn(-e),t}function pn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*i;return[Math.atan2(l*a-c*o,s*r-u*i),te(c*a+l*o)]}var r=Math.cos(e),i=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*a-l*o;return[Math.atan2(l*a+u*o,s*r+c*i),te(c*r-s*i)]},n}function gn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var l=o*t;null!=i?(i=mn(n,i),a=mn(n,a),(o>0?a>i:i>a)&&(i+=o*Go)):(i=e+o*Go,a=e-.5*l);for(var u,c=i;o>0?c>a:a>c;c-=l)s.point((u=wt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function mn(e,t){var n=gt(t);n[0]-=e,bt(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Bo)%(2*Math.PI)}function vn(e,t,n){var r=so.range(e,t-Bo,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function yn(e,t,n){var r=so.range(e,t-Bo,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function xn(e){return e.source}function bn(e){return e.target}function wn(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),l=i*Math.cos(e),u=i*Math.sin(e),c=o*Math.cos(n),d=o*Math.sin(n),f=2*Math.asin(Math.sqrt(ae(r-t)+i*o*ae(n-e))),h=1/Math.sin(f),p=f?function(e){var t=Math.sin(e*=f)*h,n=Math.sin(f-e)*h,r=n*l+t*c,i=n*u+t*d,o=n*a+t*s;return[Math.atan2(i,r)*Wo,Math.atan2(o,Math.sqrt(r*r+i*i))*Wo]}:function(){return[e*Wo,t*Wo]};return p.distance=f,p}function In(){function e(e,i){var a=Math.sin(i*=Yo),o=Math.cos(i),s=bo((e*=Yo)-t),l=Math.cos(s);qs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*l)*s),n*a+r*o*l),t=e,n=a,r=o}var t,n,r;Qs.point=function(i,a){t=i*Yo,n=Math.sin(a*=Yo),r=Math.cos(a),Qs.point=e},Qs.lineEnd=function(){Qs.point=Qs.lineEnd=w}}function An(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}function Cn(e,t){function n(e,t){o>0?-Ro+Bo>t&&(t=-Ro+Bo):t>Ro-Bo&&(t=Ro-Bo);var n=o/Math.pow(i(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Po/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,r=K(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Ro]},n):kn}function _n(e,t){function n(e,t){var n=a-t;return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/i+e;return bo(i)<Bo?un:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,a-K(i)*Math.sqrt(e*e+n*n)]},n)}function kn(e,t){return[e,Math.log(Math.tan(Po/4+t/2))]}function Mn(e){var t,n=on(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Po*r(),l=i();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function zn(e,t){return[Math.log(Math.tan(Po/4+t/2)),-e]}function Nn(e){return e[0]}function Sn(e){return e[1]}function jn(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&$(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Dn(e,t){return e[0]-t[0]||e[1]-t[1]}function Tn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function On(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,l=e[1],u=n[1],c=t[1]-l,d=r[1]-u,f=(s*(l-u)-d*(i-a))/(d*o-s*c);return[i+f*o,l+f*c]}function Ln(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function En(){rr(this),this.edge=this.site=this.circle=null}function Bn(e){var t=ul.pop()||new En;return t.site=e,t}function Fn(e){Hn(e),ol.remove(e),ul.push(e),rr(e)}function Pn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Fn(e);for(var l=a;l.circle&&bo(n-l.circle.x)<Bo&&bo(r-l.circle.cy)<Bo;)a=l.P,s.unshift(l),Fn(l),l=a;s.unshift(l),Hn(l);for(var u=o;u.circle&&bo(n-u.circle.x)<Bo&&bo(r-u.circle.cy)<Bo;)o=u.N,s.push(u),Fn(u),u=o;s.push(u),Hn(u);var c,d=s.length;for(c=1;d>c;++c)u=s[c],l=s[c-1],er(u.edge,l.site,u.site,i);l=s[0],u=s[d-1],u.edge=Kn(l.site,u.site,null,i),Xn(l),Xn(u)}function Gn(e){for(var t,n,r,i,a=e.x,o=e.y,s=ol._;s;)if(r=Zn(s,o)-a,r>Bo)s=s.L;else{if(i=a-Rn(s,o),!(i>Bo)){r>-Bo?(t=s.P,n=s):i>-Bo?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Bn(e);if(ol.insert(t,l),t||n){if(t===n)return Hn(t),n=Bn(t.site),ol.insert(l,n),l.edge=n.edge=Kn(t.site,l.site),Xn(t),void Xn(n);if(!n)return void(l.edge=Kn(t.site,l.site));Hn(t),Hn(n);var u=t.site,c=u.x,d=u.y,f=e.x-c,h=e.y-d,p=n.site,g=p.x-c,m=p.y-d,v=2*(f*m-h*g),y=f*f+h*h,x=g*g+m*m,b={x:(m*y-h*x)/v+c,y:(f*x-g*y)/v+d};er(n.edge,u,p,b),l.edge=Kn(u,e,null,b),n.edge=Kn(e,p,null,b),Xn(t),Xn(n)}}function Zn(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var s=n.x,l=n.y,u=l-t;if(!u)return s;var c=s-r,d=1/a-1/u,f=c/u;return d?(-f+Math.sqrt(f*f-2*d*(c*c/(-2*u)-l+u/2+i-a/2)))/d+r:(r+s)/2}function Rn(e,t){var n=e.N;if(n)return Zn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Yn(e){this.site=e,this.edges=[]}function Wn(e){for(var t,n,r,i,a,o,s,l,u,c,d=e[0][0],f=e[1][0],h=e[0][1],p=e[1][1],g=al,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,l=s.length,o=0;l>o;)c=s[o].end(),r=c.x,i=c.y,u=s[++o%l].start(),t=u.x,n=u.y,(bo(r-t)>Bo||bo(i-n)>Bo)&&(s.splice(o,0,new tr($n(a.site,c,bo(r-d)<Bo&&p-i>Bo?{x:d,y:bo(t-d)<Bo?n:p}:bo(i-p)<Bo&&f-r>Bo?{x:bo(n-p)<Bo?t:f,y:p}:bo(r-f)<Bo&&i-h>Bo?{x:f,y:bo(t-f)<Bo?n:h}:bo(i-h)<Bo&&r-d>Bo?{x:bo(n-h)<Bo?t:d,y:h}:null),a.site,null)),++l)}function Un(e,t){return t.angle-e.angle}function Vn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,u=r.y-s,c=a.x-o,d=a.y-s,f=2*(l*d-u*c);if(!(f>=-Fo)){var h=l*l+u*u,p=c*c+d*d,g=(d*h-u*p)/f,m=(l*p-c*h)/f,d=m+s,v=cl.pop()||new Vn;v.arc=e,v.site=i,v.x=g+o,v.y=d+Math.sqrt(g*g+m*m),v.cy=d,e.circle=v;for(var y=null,x=ll._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}ll.insert(y,v),y||(sl=v)}}}}function Hn(e){var t=e.circle;t&&(t.P||(sl=t.N),ll.remove(t),cl.push(t),rr(t),e.circle=null)}function Jn(e){for(var t,n=il,r=Rt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!qn(t,e)||!r(t)||bo(t.a.x-t.b.x)<Bo&&bo(t.a.y-t.b.y)<Bo)&&(t.a=t.b=null,n.splice(i,1))}function qn(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,d=e.r,f=c.x,h=c.y,p=d.x,g=d.y,m=(f+p)/2,v=(h+g)/2;if(g===h){if(o>m||m>=s)return;if(f>p){if(a){if(a.y>=u)return}else a={x:m,y:l};n={x:m,y:u}}else{if(a){if(a.y<l)return}else a={x:m,y:u};n={x:m,y:l}}}else if(r=(f-p)/(g-h),i=v-r*m,-1>r||r>1)if(f>p){if(a){if(a.y>=u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(g>h){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function Qn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Kn(e,t,n,r){var i=new Qn(e,t);return il.push(i),n&&er(i,e,t,n),r&&er(i,t,e,r),al[e.i].edges.push(new tr(i,e,t)),al[t.i].edges.push(new tr(i,t,e)),i}function $n(e,t,n){var r=new Qn(e,null);return r.a=t,r.b=n,il.push(r),r}function er(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function tr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ir(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ar(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function or(e){for(;e.L;)e=e.L;return e}function sr(e,t){var n,r,i,a=e.sort(lr).pop();for(il=[],al=new Array(e.length),ol=new nr,ll=new nr;;)if(i=sl,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==n||a.y!==r)&&(al[a.i]=new Yn(a),Gn(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;Pn(i.arc)}t&&(Jn(t),Wn(t));var o={cells:al,edges:il};return ol=ll=il=al=null,o}function lr(e,t){return t.y-e.y||t.x-e.x}function ur(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function cr(e){return e.x}function dr(e){return e.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hr(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=t.nodes;l[0]&&hr(e,l[0],n,r,o,s),l[1]&&hr(e,l[1],o,r,i,s),l[2]&&hr(e,l[2],n,s,o,a),l[3]&&hr(e,l[3],o,s,i,a)}}function pr(e,t,n,r,i,a,o){var s,l=1/0;return function u(e,c,d,f,h){if(!(c>a||d>o||r>f||i>h)){if(p=e.point){var p,g=t-e.x,m=n-e.y,v=g*g+m*m;if(l>v){var y=Math.sqrt(l=v);r=t-y,i=n-y,a=t+y,o=n+y,s=p}}for(var x=e.nodes,b=.5*(c+f),w=.5*(d+h),I=t>=b,A=n>=w,C=A<<1|I,_=C+4;_>C;++C)if(e=x[3&C])switch(3&C){case 0:u(e,c,d,b,w);break;case 1:u(e,b,d,f,w);break;case 2:u(e,c,w,b,h);break;case 3:u(e,b,w,f,h)}}}(e,r,i,a,o),s}function gr(e,t){e=so.rgb(e),t=so.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,s=t.b-i;return function(e){return"#"+be(Math.round(n+a*e))+be(Math.round(r+o*e))+be(Math.round(i+s*e))}}function mr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=xr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function vr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yr(e,t){var n,r,i,a=fl.lastIndex=hl.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=fl.exec(e))&&(r=hl.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:vr(n,r)})),a=hl.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;t>r;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function xr(e,t){for(var n,r=so.interpolators.length;--r>=0&&!(n=so.interpolators[r](e,t)););return n}function br(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(xr(e[n],t[n]));for(;a>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;s>n;++n)i[n]=r[n](e);return i}}function wr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Ir(e){return function(t){return 1-e(1-t)}}function Ar(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Cr(e){return e*e}function _r(e){return e*e*e}function kr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Mr(e){return function(t){return Math.pow(t,e)}}function zr(e){return 1-Math.cos(e*Ro)}function Nr(e){return Math.pow(2,10*(e-1))}function Sr(e){return 1-Math.sqrt(1-e*e)}function jr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Go*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Go/t)}}function Dr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Tr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Or(e,t){e=so.hcl(e),t=so.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return ce(n+a*e,r+o*e,i+s*e)+""}}function Lr(e,t){e=so.hsl(e),t=so.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return le(n+a*e,r+o*e,i+s*e)+""}}function Er(e,t){e=so.lab(e),t=so.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(e){return fe(n+a*e,r+o*e,i+s*e)+""}}function Br(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Fr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Gr(t),i=Pr(t,n),a=Gr(Zr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Wo,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Wo:0}function Pr(e,t){return e[0]*t[0]+e[1]*t[1]}function Gr(e){var t=Math.sqrt(Pr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Zr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Rr(e){return e.length?e.pop()+",":""}function Yr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:vr(e[0],t[0])},{i:i-2,x:vr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Wr(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Rr(n)+"rotate(",null,")")-2,x:vr(e,t)})):t&&n.push(Rr(n)+"rotate("+t+")")}function Ur(e,t,n,r){e!==t?r.push({i:n.push(Rr(n)+"skewX(",null,")")-2,x:vr(e,t)}):t&&n.push(Rr(n)+"skewX("+t+")")}function Vr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Rr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:vr(e[0],t[0])},{i:i-2,x:vr(e[1],t[1])})}else(1!==t[0]||1!==t[1])&&n.push(Rr(n)+"scale("+t+")")}function Xr(e,t){var n=[],r=[];return e=so.transform(e),t=so.transform(t),Yr(e.translate,t.translate,n,r),Wr(e.rotate,t.rotate,n,r),Ur(e.skew,t.skew,n,r),Vr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Hr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Jr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function qr(e){for(var t=e.source,n=e.target,r=Kr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Qr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Kr(e,t){if(e===t)return e;for(var n=Qr(e),r=Qr(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function $r(e){e.fixed|=2}function ei(e){e.fixed&=-7}function ti(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ni(e){e.fixed&=-5}function ri(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(ri(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);
var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,i+=u*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ii(e,t){return so.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ci,e}function ai(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function oi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function si(e){return e.children}function li(e){return e.value}function ui(e,t){return t.value-e.value}function ci(e){return so.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function di(e){return e.x}function fi(e){return e.y}function hi(e,t,n){e.y0=t,e.y=n}function pi(e){return so.range(e.length)}function gi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function mi(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function vi(e){return e.reduce(yi,0)}function yi(e,t){return e+t[1]}function xi(e,t){return bi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function bi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function wi(e){return[so.min(e),so.max(e)]}function Ii(e,t){return e.value-t.value}function Ai(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ci(e,t){e._pack_next=t,t._pack_prev=e}function _i(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function ki(e){function t(e){c=Math.min(e.x-e.r,c),d=Math.max(e.x+e.r,d),f=Math.min(e.y-e.r,f),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(u=n.length)){var n,r,i,a,o,s,l,u,c=1/0,d=-(1/0),f=1/0,h=-(1/0);if(n.forEach(Mi),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(i=n[1],i.x=i.r,i.y=0,t(i),u>2))for(a=n[2],Si(r,i,a),t(a),Ai(r,a),r._pack_prev=a,Ai(a,i),i=r._pack_next,o=3;u>o;o++){Si(r,i,a=n[o]);var p=0,g=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(_i(s,a)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!_i(l,a);l=l._pack_prev,m++);p?(m>g||g==m&&i.r<r.r?Ci(r,i=s):Ci(r=l,i),o--):(Ai(r,a),i=a,t(a))}var v=(c+d)/2,y=(f+h)/2,x=0;for(o=0;u>o;o++)a=n[o],a.x-=v,a.y-=y,x=Math.max(x,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=x,n.forEach(zi)}}function Mi(e){e._pack_next=e._pack_prev=e}function zi(e){delete e._pack_next,delete e._pack_prev}function Ni(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,o=i.length;++a<o;)Ni(i[a],t,n,r)}function Si(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o,r*=r;var l=.5+(r-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+l*i+u*a,n.y=e.y+l*a-u*i}else n.x=e.x+r,n.y=e.y}function ji(e,t){return e.parent==t.parent?1:2}function Di(e){var t=e.children;return t.length?t[0]:e.t}function Ti(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Oi(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Li(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ei(e,t,n){return e.a.parent===t.parent?e.a:n}function Bi(e){return 1+so.max(e,function(e){return e.y})}function Fi(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Pi(e){var t=e.children;return t&&t.length?Pi(t[0]):e}function Gi(e){var t,n=e.children;return n&&(t=n.length)?Gi(n[t-1]):e}function Zi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ri(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Yi(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Wi(e){return e.rangeExtent?e.rangeExtent():Yi(e.range())}function Ui(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function Vi(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return a>o&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Xi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Cl}function Hi(e,t,n,r){var i=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)i.push(n(e[o-1],e[o])),a.push(r(t[o-1],t[o]));return function(t){var n=so.bisect(e,t,1,s)-1;return a[n](i[n](t))}}function Ji(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Hi:Ui,l=r?Jr:Hr;return o=i(e,t,l,n),s=i(t,e,l,xr),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},a.range=function(e){return arguments.length?(t=e,i()):t},a.rangeRound=function(e){return a.range(e).interpolate(Br)},a.clamp=function(e){return arguments.length?(r=e,i()):r},a.interpolate=function(e){return arguments.length?(n=e,i()):n},a.ticks=function(t){return $i(e,t)},a.tickFormat=function(t,n){return ea(e,t,n)},a.nice=function(t){return Qi(e,t),i()},a.copy=function(){return Ji(e,t,n,r)},i()}function qi(e,t){return so.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Qi(e,t){return Vi(e,Xi(Ki(e,t)[2])),Vi(e,Xi(Ki(e,t)[2])),e}function Ki(e,t){null==t&&(t=10);var n=Yi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function $i(e,t){return so.range.apply(so,Ki(e,t))}function ea(e,t,n){var r=Ki(e,t);if(n){var i=fs.exec(n);if(i.shift(),"s"===i[8]){var a=so.formatPrefix(Math.max(bo(r[0]),bo(r[1])));return i[7]||(i[7]="."+ta(a.scale(r[2]))),i[8]="f",n=so.format(i.join("")),function(e){return n(a.scale(e))+a.symbol}}i[7]||(i[7]="."+na(i[8],r)),n=i.join("")}else n=",."+ta(r[2])+"f";return so.format(n)}function ta(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function na(e,t){var n=ta(t[2]);return e in _l?Math.abs(n-ta(Math.max(bo(t[0]),bo(t[1]))))+ +("e"!==e):n-2*("%"===e)}function ra(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Vi(r.map(i),n?Math:Ml);return e.domain(t),r=t.map(a),o},o.ticks=function(){var e=Yi(r),o=[],s=e[0],l=e[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),d=t%1?2:t;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var f=1;d>f;f++)o.push(a(u)*f);o.push(a(u))}else for(o.push(a(u));u++<c;)for(var f=d-1;f>0;f--)o.push(a(u)*f);for(u=0;o[u]<s;u++);for(c=o.length;o[c-1]>l;c--);o=o.slice(u,c)}return o},o.tickFormat=function(e,n){if(!arguments.length)return kl;arguments.length<2?n=kl:"function"!=typeof n&&(n=so.format(n));var r=Math.max(1,t*e/o.ticks().length);return function(e){var o=e/a(Math.round(i(e)));return t-.5>o*t&&(o*=t),r>=o?n(e):""}},o.copy=function(){return ra(e.copy(),t,n,r)},qi(o,e)}function ia(e,t,n){function r(t){return e(i(t))}var i=aa(t),a=aa(1/t);return r.invert=function(t){return a(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return $i(n,e)},r.tickFormat=function(e,t){return ea(n,e,t)},r.nice=function(e){return r.domain(Qi(n,e))},r.exponent=function(o){return arguments.length?(i=aa(t=o),a=aa(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return ia(e.copy(),t,n)},qi(r,e)}function aa(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function oa(e,t){function n(n){return a[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%a.length]}function r(t,n){return so.range(e.length).map(function(e){return t+n*e})}var i,a,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new u;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return a=r(l+c*s/2,c),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return a=r(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=i[1-u],f=(d-c)/(e.length-s+2*l);return a=r(c+f*l,f),u&&a.reverse(),o=f*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=i[1-u],f=Math.floor((d-c)/(e.length-s+2*l));return a=r(c+Math.round((d-c-(e.length-s)*f)/2),f),u&&a.reverse(),o=Math.round(f*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Yi(t.a[0])},n.copy=function(){return oa(e,t)},n.domain(e)}function sa(e,t){function a(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=so.quantile(e,n/r);return o}function o(e){return isNaN(e=+e)?void 0:t[so.bisect(s,e)]}var s;return o.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),a()):e},o.range=function(e){return arguments.length?(t=e,a()):t},o.quantiles=function(){return s},o.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},o.copy=function(){return sa(e,t)},a()}function la(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function i(){return a=n.length/(t-e),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/a+e,[t,t+1/a]},r.copy=function(){return la(e,t,n)},i()}function ua(e,t){function n(n){return n>=n?t[so.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ua(e,t)},n}function ca(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return $i(e,t)},t.tickFormat=function(t,n){return ea(e,t,n)},t.copy=function(){return ca(e)},t}function da(){return 0}function fa(e){return e.innerRadius}function ha(e){return e.outerRadius}function pa(e){return e.startAngle}function ga(e){return e.endAngle}function ma(e){return e&&e.padAngle}function va(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function ya(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=e[0]+l,d=e[1]+u,f=t[0]+l,h=t[1]+u,p=(c+f)/2,g=(d+h)/2,m=f-c,v=h-d,y=m*m+v*v,x=n-r,b=c*h-f*d,w=(0>v?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),I=(b*v-m*w)/y,A=(-b*m-v*w)/y,C=(b*v+m*w)/y,_=(-b*m+v*w)/y,k=I-p,M=A-g,z=C-p,N=_-g;return k*k+M*M>z*z+N*N&&(I=C,A=_),[[I-l,A-u],[I*n/x,A*n/x]]}function xa(e){function t(t){function o(){u.push("M",a(e(c),s))}for(var l,u=[],c=[],d=-1,f=t.length,h=ke(n),p=ke(r);++d<f;)i.call(this,l=t[d],d)?c.push([+h.call(this,l,d),+p.call(this,l,d)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=Nn,r=Sn,i=Nt,a=ba,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Tl.get(e)||ba).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function ba(e){return e.length>1?e.join("L"):e+"Z"}function wa(e){return e.join("L")+"Z"}function Ia(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Aa(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ca(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function _a(e,t){return e.length<4?ba(e):e[1]+za(e.slice(1,-1),Na(e,t))}function ka(e,t){return e.length<3?wa(e):e[0]+za((e.push(e[0]),e),Na([e[e.length-2]].concat(e,[e[1]]),t))}function Ma(e,t){return e.length<3?ba(e):e[0]+za(e,Na(e,t))}function za(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ba(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++)a=e[l],s=t[u],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Na(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Sa(e){if(e.length<3)return ba(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",Oa(El,o),",",Oa(El,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),La(l,o,s);return e.pop(),l.push("L",r),l.join("")}function ja(e){if(e.length<4)return ba(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(Oa(El,a)+","+Oa(El,o)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),La(n,a,o);return n.join("")}function Da(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);for(t=[Oa(El,o),",",Oa(El,s)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),La(t,o,s);return t.join("")}function Ta(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,u=-1;++u<=n;)r=e[u],i=u/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*l);return Sa(e)}function Oa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function La(e,t,n){e.push("C",Oa(Ol,t),",",Oa(Ol,n),",",Oa(Ll,t),",",Oa(Ll,n),",",Oa(El,t),",",Oa(El,n))}function Ea(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ba(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=Ea(i,a);++t<n;)r[t]=(o+(o=Ea(i=a,a=e[t+1])))/2;return r[t]=o,r}function Fa(e){for(var t,n,r,i,a=[],o=Ba(e),s=-1,l=e.length-1;++s<l;)t=Ea(e[s],e[s+1]),bo(t)<Bo?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function Pa(e){return e.length<3?ba(e):e[0]+za(e,Fa(e))}function Ga(e){for(var t,n,r,i=-1,a=e.length;++i<a;)t=e[i],n=t[0],r=t[1]-Ro,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Za(e){function t(t){function l(){g.push("M",s(e(v),d),c,u(e(m.reverse()),d),"Z")}for(var f,h,p,g=[],m=[],v=[],y=-1,x=t.length,b=ke(n),w=ke(i),I=n===r?function(){return h}:ke(r),A=i===a?function(){return p}:ke(a);++y<x;)o.call(this,f=t[y],y)?(m.push([h=+b.call(this,f,y),p=+w.call(this,f,y)]),v.push([+I.call(this,f,y),+A.call(this,f,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=Nn,r=Nn,i=0,a=Sn,o=Nt,s=ba,l=s.key,u=s,c="L",d=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=a=e,t):a},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Tl.get(e)||ba).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function Ra(e){return e.radius}function Ya(e){return[e.x,e.y]}function Wa(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Ro;return[n*Math.cos(r),n*Math.sin(r)]}}function Ua(){return 64}function Va(){return"circle"}function Xa(e){var t=Math.sqrt(e/Po);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Ha(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ja(e,t,n){return _o(e,Yl),e.namespace=t,e.id=n,e}function qa(e,t,n,r){var i=e.id,a=e.namespace;return Y(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function Qa(e){return null==e&&(e=""),function(){this.textContent=e}}function Ka(e){return null==e?"__transition__":"__transition_"+e+"__"}function $a(e,t,n,r,i){function a(e){var t=g.delay;return c.t=t+l,e>=t?o(e-t):void(c.c=o)}function o(n){var i=p.active,a=p[i];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[i],a.event&&a.event.interrupt.call(e,e.__data__,a.index));for(var o in p)if(r>+o){var u=p[o];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[o]}c.c=s,je(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=r,g.event&&g.event.start.call(e,e.__data__,t),h=[],g.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&h.push(r)}),f=g.ease,d=g.duration}function s(i){for(var a=i/d,o=f(a),s=h.length;s>0;)h[--s].call(e,o);return a>=1?(g.event&&g.event.end.call(e,e.__data__,t),--p.count?delete p[r]:delete e[n],1):void 0}var l,c,d,f,h,p=e[n]||(e[n]={active:0,count:0}),g=p[r];g||(l=i.time,c=je(a,0,l),g=p[r]={tween:new u,time:l,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++p.count)}function eo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function to(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function no(e){return e.toISOString()}function ro(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,a=so.bisect(Kl,i);return a==Kl.length?[t.year,Ki(e.map(function(e){return e/31536e6}),n)[2]]:a?t[i/Kl[a-1]<Kl[a]/i?a-1:a]:[tu,Ki(e,n)[2]]}return r.invert=function(t){return io(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(io)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,io(+n+1),t).length}var a=r.domain(),o=Yi(a),s=null==e?i(o,10):"number"==typeof e&&i(o,e);return s&&(e=s[0],t=s[1]),r.domain(Vi(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=io(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=io(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Yi(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],io(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ro(e.copy(),t,n)},qi(r,e)}function io(e){return new Date(e)}function ao(e){return JSON.parse(e.responseText)}function oo(e){var t=co.createRange();return t.selectNode(co.body),t.createContextualFragment(e.responseText)}var so={version:"3.5.16"},lo=[].slice,uo=function(e){return lo.call(e)},co=this.document;if(co)try{uo(co.documentElement.childNodes)[0].nodeType}catch(fo){uo=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),co)try{co.createElement("DIV").style.setProperty("opacity",0,"")}catch(ho){var po=this.Element.prototype,go=po.setAttribute,mo=po.setAttributeNS,vo=this.CSSStyleDeclaration.prototype,yo=vo.setProperty;po.setAttribute=function(e,t){go.call(this,e,t+"")},po.setAttributeNS=function(e,t,n){mo.call(this,e,t,n+"")},vo.setProperty=function(e,t,n){yo.call(this,e,t+"",n)}}so.ascending=n,so.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},so.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},so.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},so.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},so.sum=function(e,t){var n,r=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)i(n=+e[o])&&(r+=n);else for(;++o<a;)i(n=+t.call(e,e[o],o))&&(r+=n);return r},so.mean=function(e,t){var n,a=0,o=e.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)i(n=r(e[s]))?a+=n:--l;else for(;++s<o;)i(n=r(t.call(e,e[s],s)))?a+=n:--l;return l?a/l:void 0},so.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},so.median=function(e,t){var a,o=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)i(a=r(e[l]))&&o.push(a);else for(;++l<s;)i(a=r(t.call(e,e[l],l)))&&o.push(a);return o.length?so.quantile(o.sort(n),.5):void 0},so.variance=function(e,t){var n,a,o=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<o;)i(n=r(e[u]))&&(a=n-s,s+=a/++c,l+=a*(n-s));else for(;++u<o;)i(n=r(t.call(e,e[u],u)))&&(a=n-s,s+=a/++c,l+=a*(n-s));return c>1?l/(c-1):void 0},so.deviation=function(){var e=so.variance.apply(this,arguments);return e?Math.sqrt(e):e};var xo=a(n);so.bisectLeft=xo.left,so.bisect=so.bisectRight=xo.right,so.bisector=function(e){return a(1===e.length?function(t,r){return n(e(t),r)}:e)},so.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},so.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},so.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],a=new Array(0>r?0:r);r>n;)a[n]=[t=i,i=e[++n]];return a},so.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=so.min(e,o),r=new Array(n);++t<n;)for(var i,a=-1,s=r[t]=new Array(i);++a<i;)s[a]=e[a][t];return r},so.zip=function(){return so.transpose(arguments)},so.keys=function(e){var t=[];for(var n in e)t.push(n);return t},so.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},so.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},so.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var bo=Math.abs;so.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],a=s(bo(n)),o=-1;if(e*=a,t*=a,n*=a,0>n)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},so.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var wo="__proto__",Io="\x00";l(u,{has:f,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:h,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:d(t),value:this._[t]});return e},size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,d(t),this._[t])}}),so.nest=function(){function e(t,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var l,c,d,f,h=-1,p=o.length,g=a[s++],m=new u;++h<p;)(f=m.get(l=g(c=o[h])))?f.push(c):m.set(l,[c]);return t?(c=t(),d=function(n,r){c.set(n,e(t,r,s))}):(c={},d=function(n,r){c[n]=e(t,r,s)}),m.forEach(d),c}function t(e,n){if(n>=a.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(so.map,n,0),0)},i.key=function(e){return a.push(e),i},i.sortKeys=function(e){return o[a.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},so.set=function(e){var t=new v;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},l(v,{has:f,add:function(e){return this._[c(e+="")]=!0,e},remove:h,values:p,size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,d(t))}}),so.behavior={},so.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=x(e,t,t[n]);return e};var Ao=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var e=new I,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=A(e);return e},I.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},so.event=null,so.requote=function(e){return e.replace(Co,"\\$&")};var Co=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,_o={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ko=function(e,t){return t.querySelector(e)},Mo=function(e,t){return t.querySelectorAll(e)},zo=function(e,t){var n=e.matches||e[b(e,"matchesSelector")];return(zo=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(ko=function(e,t){return Sizzle(e,t)[0]||null},Mo=Sizzle,zo=Sizzle.matchesSelector),so.selection=function(){return so.select(co.documentElement)};var No=so.selection.prototype=[];No.select=function(e){var t,n,r,i,a=[];e=z(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return M(a)},No.selectAll=function(e){var t,n,r=[];e=N(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=uo(e.call(n,n.__data__,s,i))),t.parentNode=n);return M(r)};var So="http://www.w3.org/1999/xhtml",jo={svg:"http://www.w3.org/2000/svg",xhtml:So,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:jo,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),jo.hasOwnProperty(n)?{space:jo[n],local:e}:e}},No.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=so.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(S(t,e[t]));return this}return this.each(S(e,t))},No.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=T(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!D(e[i]).test(t))return!1;return!0}for(t in e)this.each(O(t,e[t]));return this}return this.each(O(e,t))},No.style=function(e,n,r){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(n="");for(r in e)this.each(E(r,e[r],n));return this}if(2>i){var a=this.node();return t(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(E(e,n,r))},No.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(B(t,e[t]));return this}return this.each(B(e,t))},No.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},No.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},No.append=function(e){return e=F(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},No.insert=function(e,t){return e=F(e),t=z(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},No.remove=function(){return this.each(P)},No.data=function(e,t){function n(e,n){var r,i,a,o=e.length,d=n.length,f=Math.min(o,d),h=new Array(d),p=new Array(d),g=new Array(o);if(t){var m,v=new u,y=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(v.has(m=t.call(i,i.__data__,r))?g[r]=i:v.set(m,i),y[r]=m);for(r=-1;++r<d;)(i=v.get(m=t.call(n,a=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=a):p[r]=G(a),v.set(m,!0);for(r=-1;++r<o;)r in y&&v.get(y[r])!==!0&&(g[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=G(a);for(;d>r;++r)p[r]=G(n[r]);for(;o>r;++r)g[r]=e[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=e.parentNode,s.push(p),l.push(h),c.push(g)}var r,i,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(e[a]=i.__data__);return e}var s=W([]),l=M([]),c=M([]);if("function"==typeof e)for(;++a<o;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],e);return l.enter=function(){return s},l.exit=function(){return c},l},No.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},No.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=Z(e));for(var a=0,o=this.length;o>a;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return M(i)},No.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},No.sort=function(e){e=R.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},No.each=function(e){return Y(this,function(t,n,r){e.call(t,t.__data__,n,r)})},No.call=function(e){var t=uo(arguments);return e.apply(t[0]=this,t),this},No.empty=function(){return!this.node()},No.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null},No.size=function(){var e=0;return Y(this,function(){++e}),e};var Do=[];so.selection.enter=W,so.selection.enter.prototype=Do,Do.append=No.append,Do.empty=No.empty,Do.node=No.node,Do.call=No.call,Do.size=No.size,Do.select=function(e){for(var t,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(a=i[u])?(t.push(r[u]=n=e.call(i.parentNode,a.__data__,u,s)),n.__data__=a.__data__):t.push(null)}return M(o)},Do.insert=function(e,t){return arguments.length<2&&(t=U(this)),No.insert.call(this,e,t)},so.select=function(t){var n;return"string"==typeof t?(n=[ko(t,co)],n.parentNode=co.documentElement):(n=[t],n.parentNode=e(t)),M([n])},so.selectAll=function(e){var t;return"string"==typeof e?(t=uo(Mo(e,co)),t.parentNode=co.documentElement):(t=uo(e),t.parentNode=null),M([t])},No.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(V(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(V(e,t,n))};var To=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});co&&To.forEach(function(e){"on"+e in co&&To.remove(e)});var Oo,Lo=0;so.mouse=function(e){return q(e,_())};var Eo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=_().changedTouches),t)for(var r,i=0,a=t.length;a>i;++i)if((r=t[i]).identifier===n)return q(e,r)},so.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(e,t,n,a,o){return function(){function s(){var e,n,r=t(f,g);r&&(e=r[0]-x[0],n=r[1]-x[1],p|=e|n,x=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(f,g)&&(v.on(a+m,null).on(o+m,null),y(p),h({type:"dragend"}))}var u,c=this,d=so.event.target.correspondingElement||so.event.target,f=c.parentNode,h=r.of(c,arguments),p=0,g=e(),m=".drag"+(null==g?"":"-"+g),v=so.select(n(d)).on(a+m,s).on(o+m,l),y=J(d),x=t(f,g);i?(u=i.apply(c,arguments),u=[u.x-x[0],u.y-x[1]]):u=[0,0],h({type:"dragstart"})}}var r=k(e,"drag","dragstart","dragend"),i=null,a=n(w,so.mouse,t,"mousemove","mouseup"),o=n(Q,so.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},so.rebind(e,r,"on")},so.touches=function(e,t){return arguments.length<2&&(t=_().touches),t?uo(t).map(function(t){var n=q(e,t);
return n.identifier=t.identifier,n}):[]};var Bo=1e-6,Fo=Bo*Bo,Po=Math.PI,Go=2*Po,Zo=Go-Bo,Ro=Po/2,Yo=Po/180,Wo=180/Po,Uo=Math.SQRT2,Vo=2,Xo=4;so.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-i,d=l-a,f=c*c+d*d;if(Fo>f)r=Math.log(u/o)/Uo,n=function(e){return[i+e*c,a+e*d,o*Math.exp(Uo*e*r)]};else{var h=Math.sqrt(f),p=(u*u-o*o+Xo*f)/(2*o*Vo*h),g=(u*u-o*o-Xo*f)/(2*u*Vo*h),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/Uo,n=function(e){var t=e*r,n=re(m),s=o/(Vo*h)*(n*ie(Uo*t+m)-ne(m));return[i+s*c,a+s*d,o*n/re(Uo*t+m)]}}return n.duration=1e3*r,n},so.behavior.zoom=function(){function e(e){e.on(j,d).on(Jo+".zoom",h).on("dblclick.zoom",p).on(O,f)}function n(e){return[(e[0]-_.x)/_.k,(e[1]-_.y)/_.k]}function r(e){return[e[0]*_.k+_.x,e[1]*_.k+_.y]}function i(e){_.k=Math.max(z[0],Math.min(z[1],e))}function a(e,t){t=r(t),_.x+=e[0]-t[0],_.y+=e[1]-t[1]}function o(t,n,r,o){t.__chart__={x:_.x,y:_.y,k:_.k},i(Math.pow(2,o)),a(m=n,r),t=so.select(t),N>0&&(t=t.transition().duration(N)),t.call(e.event)}function s(){w&&w.domain(b.range().map(function(e){return(e-_.x)/_.k}).map(b.invert)),A&&A.domain(I.range().map(function(e){return(e-_.y)/_.k}).map(I.invert))}function l(e){S++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function c(e){--S||(e({type:"zoomend"}),m=null)}function d(){function e(){s=1,a(so.mouse(i),f),u(o)}function r(){d.on(D,null).on(T,null),h(s),c(o)}var i=this,o=L.of(i,arguments),s=0,d=so.select(t(i)).on(D,e).on(T,r),f=n(so.mouse(i)),h=J(i);Rl.call(i),l(o)}function f(){function e(){var e=so.touches(p);return h=_.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=n(e))}),e}function t(){var t=so.event.target;so.select(t).on(b,r).on(w,s),I.push(t);for(var n=so.event.changedTouches,i=0,a=n.length;a>i;++i)m[n[i].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(500>u-x){var c=l[0];o(p,c,m[c.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),C()}x=u}else if(l.length>1){var c=l[0],d=l[1],f=c[0]-d[0],h=c[1]-d[1];v=f*f+h*h}}function r(){var e,t,n,r,o=so.touches(p);Rl.call(p);for(var s=0,l=o.length;l>s;++s,r=null)if(n=o[s],r=m[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,d=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(d*h)}x=null,a(e,t),u(g)}function s(){if(so.event.touches.length){for(var t=so.event.changedTouches,n=0,r=t.length;r>n;++n)delete m[t[n].identifier];for(var i in m)return void e()}so.selectAll(I).on(y,null),A.on(j,d).on(O,f),k(),c(g)}var h,p=this,g=L.of(p,arguments),m={},v=0,y=".zoom-"+so.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,I=[],A=so.select(p),k=J(p);t(),l(g),A.on(j,null).on(O,t)}function h(){var e=L.of(this,arguments);y?clearTimeout(y):(Rl.call(this),g=n(m=v||so.mouse(this)),l(e)),y=setTimeout(function(){y=null,c(e)},50),C(),i(Math.pow(2,.002*Ho())*_.k),a(m,g),u(e)}function p(){var e=so.mouse(this),t=Math.log(_.k)/Math.LN2;o(this,e,n(e),so.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var g,m,v,y,x,b,w,I,A,_={x:0,y:0,k:1},M=[960,500],z=qo,N=250,S=0,j="mousedown.zoom",D="mousemove.zoom",T="mouseup.zoom",O="touchstart.zoom",L=k(e,"zoomstart","zoom","zoomend");return Jo||(Jo="onwheel"in co?(Ho=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in co?(Ho=function(){return so.event.wheelDelta},"mousewheel"):(Ho=function(){return-so.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=L.of(this,arguments),t=_;Gl?so.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=M[0],r=M[1],i=m?m[0]:n/2,a=m?m[1]:r/2,o=so.interpolateZoom([(i-_.x)/_.k,(a-_.y)/_.k,n/_.k],[(i-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var r=o(t),s=n/r[2];this.__chart__=_={x:i-r[0]*s,y:a-r[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=_,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(_={x:+t[0],y:+t[1],k:_.k},s(),e):[_.x,_.y]},e.scale=function(t){return arguments.length?(_={x:_.x,y:_.y,k:null},i(+t),s(),e):_.k},e.scaleExtent=function(t){return arguments.length?(z=null==t?qo:[+t[0],+t[1]],e):z},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(M=t&&[+t[0],+t[1]],e):M},e.duration=function(t){return arguments.length?(N=+t,e):N},e.x=function(t){return arguments.length?(w=t,b=t.copy(),_={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(A=t,I=t.copy(),_={x:0,y:0,k:1},e):A},so.rebind(e,L,"on")};var Ho,Jo,qo=[0,1/0];so.color=oe,oe.prototype.toString=function(){return this.rgb()+""},so.hsl=se;var Qo=se.prototype=new oe;Qo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Qo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Qo.rgb=function(){return le(this.h,this.s,this.l)},so.hcl=ue;var Ko=ue.prototype=new oe;Ko.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+$o*(arguments.length?e:1)))},Ko.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-$o*(arguments.length?e:1)))},Ko.rgb=function(){return ce(this.h,this.c,this.l).rgb()},so.lab=de;var $o=18,es=.95047,ts=1,ns=1.08883,rs=de.prototype=new oe;rs.brighter=function(e){return new de(Math.min(100,this.l+$o*(arguments.length?e:1)),this.a,this.b)},rs.darker=function(e){return new de(Math.max(0,this.l-$o*(arguments.length?e:1)),this.a,this.b)},rs.rgb=function(){return fe(this.l,this.a,this.b)},so.rgb=ve;var is=ve.prototype=new oe;is.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new ve(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ve(i,i,i)},is.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ve(e*this.r,e*this.g,e*this.b)},is.hsl=function(){return Ie(this.r,this.g,this.b)},is.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};var as=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});as.forEach(function(e,t){as.set(e,ye(t))}),so.functor=ke,so.xhr=Me(y),so.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=ze(e,t,null==n?r:i(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=u)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],u=e.length,c=0,d=0;(r=n())!==o;){for(var f=[];r!==a&&r!==o;)f.push(r),r=n();t&&null==(f=t(f,d++))||s.push(f)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new v,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("	","text/tab-separated-values");var os,ss,ls,us,cs=this[b(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};so.timer=function(){je.apply(this,arguments)},so.timer.flush=function(){Te(),Oe()},so.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var ds=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Ee);so.formatPrefix=function(e,t){var n=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=so.round(e,Le(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ds[8+n/3]};var fs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,hs=so.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=so.round(e,Le(e,t))).toFixed(Math.max(0,Math.min(20,Le(e*(1+1e-15),t))))}}),ps=so.time={},gs=Date;Pe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ms.setUTCDate.apply(this._,arguments)},setDay:function(){ms.setUTCDay.apply(this._,arguments)},setFullYear:function(){ms.setUTCFullYear.apply(this._,arguments)},setHours:function(){ms.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ms.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ms.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ms.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ms.setUTCSeconds.apply(this._,arguments)},setTime:function(){ms.setTime.apply(this._,arguments)}};var ms=Date.prototype;ps.year=Ge(function(e){return e=ps.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=Ge(function(e){var t=new gs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(e){var t=ps.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ps[e]=Ge(function(e){return(e=ps.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ps[e+"s"]=n.range,ps[e+"s"].utc=n.utc.range,ps[e+"OfYear"]=function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var vs={"-":"",_:" ",0:"0"},ys=/^\s*\d+/,xs=/^%/;so.locale=function(e){return{numberFormat:Be(e),timeFormat:Re(e)}};var bs=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=bs.numberFormat,so.geo={},ut.prototype={s:0,t:0,add:function(e){ct(e,this.t,ws),ct(ws.s,this.s,this),this.s?this.t+=ws.t:this.s=ws.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ws=new ut;so.geo.stream=function(e,t){e&&Is.hasOwnProperty(e.type)?Is[e.type](e,t):dt(e,t)};var Is={Feature:function(e,t){dt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)dt(n[r].geometry,t)}},As={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ft(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ft(n[r],t,0)},Polygon:function(e,t){ht(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ht(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)dt(n[r],t)}};so.geo.area=function(e){return Cs=0,so.geo.stream(e,ks),Cs};var Cs,_s=new ut,ks={sphere:function(){Cs+=4*Po},point:w,lineStart:w,lineEnd:w,polygonStart:function(){_s.reset(),ks.lineStart=pt},polygonEnd:function(){var e=2*_s;Cs+=0>e?4*Po+e:e,ks.lineStart=ks.lineEnd=ks.point=w}};so.geo.bounds=function(){function e(e,t){x.push(b=[c=e,f=e]),d>t&&(d=t),t>h&&(h=t)}function t(t,n){var r=gt([t*Yo,n*Yo]);if(v){var i=vt(v,r),a=[i[1],-i[0],0],o=vt(a,i);bt(o),o=wt(o);var l=t-p,u=l>0?1:-1,g=o[0]*Wo*u,m=bo(l)>180;if(m^(g>u*p&&u*t>g)){var y=o[1]*Wo;y>h&&(h=y)}else if(g=(g+360)%360-180,m^(g>u*p&&u*t>g)){var y=-o[1]*Wo;d>y&&(d=y)}else d>n&&(d=n),n>h&&(h=n);m?p>t?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t):f>=c?(c>t&&(c=t),t>f&&(f=t)):t>p?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t)}else e(t,n);v=r,p=t}function n(){w.point=t}function r(){b[0]=c,b[1]=f,w.point=e,v=null}function i(e,n){if(v){var r=e-p;y+=bo(r)>180?r+(r>0?360:-360):r}else g=e,m=n;ks.point(e,n),t(e,n)}function a(){ks.lineStart()}function o(){i(g,m),ks.lineEnd(),bo(y)>Bo&&(c=-(f=180)),b[0]=c,b[1]=f,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,d,f,h,p,g,m,v,y,x,b,w={point:e,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=a,w.lineEnd=o,y=0,ks.polygonStart()},polygonEnd:function(){ks.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=r,0>_s?(c=-(f=180),d=-(h=90)):y>Bo?h=90:-Bo>y&&(d=-90),b[0]=c,b[1]=f}};return function(e){h=f=-(c=d=1/0),x=[],so.geo.stream(e,w);var t=x.length;if(t){x.sort(l);for(var n,r=1,i=x[0],a=[i];t>r;++r)n=x[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,p=-(1/0),t=a.length-1,r=0,i=a[t];t>=r;i=n,++r)n=a[r],(o=s(i[1],n[0]))>p&&(p=o,c=n[0],f=i[1])}return x=b=null,c===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,d],[f,h]]}}(),so.geo.centroid=function(e){Ms=zs=Ns=Ss=js=Ds=Ts=Os=Ls=Es=Bs=0,so.geo.stream(e,Fs);var t=Ls,n=Es,r=Bs,i=t*t+n*n+r*r;return Fo>i&&(t=Ds,n=Ts,r=Os,Bo>zs&&(t=Ns,n=Ss,r=js),i=t*t+n*n+r*r,Fo>i)?[NaN,NaN]:[Math.atan2(n,t)*Wo,te(r/Math.sqrt(i))*Wo]};var Ms,zs,Ns,Ss,js,Ds,Ts,Os,Ls,Es,Bs,Fs={sphere:w,point:At,lineStart:_t,lineEnd:kt,polygonStart:function(){Fs.lineStart=Mt},polygonEnd:function(){Fs.lineStart=_t}},Ps=Tt(Nt,Bt,Pt,[-Po,-Po/2]),Gs=1e9;so.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),i=a(e),i.valid=!0,i},extent:function(s){return arguments.length?(a=Yt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return Wt(Ut)}).raw=Ut,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(r(a,o),t)||i(a,o),t}var t,n,r,i,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),c=+t[0],d=+t[1];return n=a.translate(t).clipExtent([[c-.455*u,d-.238*u],[c+.455*u,d+.238*u]]).stream(l).point,r=o.translate([c-.307*u,d+.201*u]).clipExtent([[c-.425*u+Bo,d+.12*u+Bo],[c-.214*u-Bo,d+.234*u-Bo]]).stream(l).point,i=s.translate([c-.205*u,d+.212*u]).clipExtent([[c-.214*u+Bo,d+.166*u+Bo],[c-.115*u-Bo,d+.234*u-Bo]]).stream(l).point,e},e.scale(1070)};var Zs,Rs,Ys,Ws,Us,Vs,Xs={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Rs=0,Xs.lineStart=Vt},polygonEnd:function(){Xs.lineStart=Xs.lineEnd=Xs.point=w,Zs+=bo(Rs/2)}},Hs={point:Xt,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Js={point:qt,lineStart:Qt,lineEnd:Kt,polygonStart:function(){Js.lineStart=$t},polygonEnd:function(){Js.point=qt,Js.lineStart=Qt,Js.lineEnd=Kt}};so.geo.path=function(){function e(e){return e&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),so.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,r,i,a,o,s=4.5;return e.area=function(e){return Zs=0,so.geo.stream(e,i(Xs)),Zs},e.centroid=function(e){return Ns=Ss=js=Ds=Ts=Os=Ls=Es=Bs=0,so.geo.stream(e,i(Js)),Bs?[Ls/Bs,Es/Bs]:Os?[Ds/Os,Ts/Os]:js?[Ns/js,Ss/js]:[NaN,NaN]},e.bounds=function(e){return Us=Vs=-(Ys=Ws=1/0),so.geo.stream(e,i(Hs)),[[Ys,Ws],[Us,Vs]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nn(e):y,t()):n},e.context=function(e){return arguments.length?(a=null==(r=e)?new Ht:new en(e),"function"!=typeof s&&a.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var r in e)n[r]=e[r];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=on,so.geo.projectionMutator=sn,(so.geo.equirectangular=function(){return on(un)}).raw=un.invert=un,so.geo.rotation=function(e){function t(t){return t=e(t[0]*Yo,t[1]*Yo),t[0]*=Wo,t[1]*=Wo,t}return e=dn(e[0]%360*Yo,e[1]*Yo,e.length>2?e[2]*Yo:0),t.invert=function(t){return t=e.invert(t[0]*Yo,t[1]*Yo),t[0]*=Wo,t[1]*=Wo,t},t},cn.invert=un,so.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=dn(-e[0]*Yo,-e[1]*Yo,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Wo,e[1]*=Wo}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=gn((t=+r)*Yo,i*Yo),e):t},e.precision=function(r){return arguments.length?(n=gn(t*Yo,(i=+r)*Yo),e):i},e.angle(90)},so.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Yo,i=e[1]*Yo,a=t[1]*Yo,o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*o)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},so.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return so.range(Math.ceil(a/m)*m,i,m).map(f).concat(so.range(Math.ceil(u/v)*v,l,v).map(h)).concat(so.range(Math.ceil(r/p)*p,n,p).filter(function(e){return bo(e%m)>Bo}).map(c)).concat(so.range(Math.ceil(s/g)*g,o,g).filter(function(e){return bo(e%v)>Bo}).map(d))}var n,r,i,a,o,s,l,u,c,d,f,h,p=10,g=p,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(h(l).slice(1),f(i).reverse().slice(1),h(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],u=+t[0][1],l=+t[1][1],a>i&&(t=a,a=i,i=t),u>l&&(t=u,u=l,l=t),e.precision(y)):[[a,u],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(y)):[[r,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,c=vn(s,o,90),d=yn(r,n,y),f=vn(u,l,90),h=yn(a,i,y),e):y},e.majorExtent([[-180,-90+Bo],[180,90-Bo]]).minorExtent([[-180,-80-Bo],[180,80+Bo]])},so.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=xn,i=bn;return e.distance=function(){return so.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},so.geo.interpolate=function(e,t){return wn(e[0]*Yo,e[1]*Yo,t[0]*Yo,t[1]*Yo)},so.geo.length=function(e){return qs=0,so.geo.stream(e,Qs),qs};var qs,Qs={sphere:w,point:w,lineStart:In,lineEnd:w,polygonStart:w,polygonEnd:w},Ks=An(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(so.geo.azimuthalEqualArea=function(){return on(Ks)}).raw=Ks;var $s=An(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(so.geo.azimuthalEquidistant=function(){return on($s)}).raw=$s,(so.geo.conicConformal=function(){return Wt(Cn)}).raw=Cn,(so.geo.conicEquidistant=function(){return Wt(_n)}).raw=_n;var el=An(function(e){return 1/e},Math.atan);(so.geo.gnomonic=function(){return on(el)}).raw=el,kn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ro]},(so.geo.mercator=function(){return Mn(kn)}).raw=kn;var tl=An(function(){return 1},Math.asin);(so.geo.orthographic=function(){return on(tl)}).raw=tl;var nl=An(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(so.geo.stereographic=function(){return on(nl)}).raw=nl,zn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ro]},(so.geo.transverseMercator=function(){var e=Mn(zn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=zn,so.geom={},so.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=ke(n),a=ke(r),o=e.length,s=[],l=[];for(t=0;o>t;t++)s.push([+i.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(Dn),t=0;o>t;t++)l.push([s[t][0],-s[t][1]]);var u=jn(s),c=jn(l),d=c[0]===u[0],f=c[c.length-1]===u[u.length-1],h=[];for(t=u.length-1;t>=0;--t)h.push(e[s[u[t]][2]]);for(t=+d;t<c.length-f;++t)h.push(e[s[c[t]][2]]);return h}var n=Nn,r=Sn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},so.geom.polygon=function(e){return _o(e,rl),e};var rl=so.geom.polygon.prototype=[];rl.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},rl.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},rl.clip=function(e){for(var t,n,r,i,a,o,s=Ln(e),l=-1,u=this.length-Ln(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],a=t[(r=t.length-s)-1],n=-1;++n<r;)o=t[n],Tn(o,c,i)?(Tn(a,c,i)||e.push(On(a,o,c,i)),e.push(o)):Tn(a,c,i)&&e.push(On(a,o,c,i)),a=o;s&&e.push(e[0]),c=i}return e};var il,al,ol,sl,ll,ul=[],cl=[];Yn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Un),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=or(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ir(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ar(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ar(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ir(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?or(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ar(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ar(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ar(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},so.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return sr(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=a&&u.y>=i&&u.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Bo)*Bo,y:Math.round(o(e,t)/Bo)*Bo,i:t}})}var r=Nn,i=Sn,a=r,o=i,s=dl;return e?t(e):(t.links=function(e){return sr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return sr(n(e)).cells.forEach(function(n,r){for(var i,a,o=n.site,s=n.edges.sort(Un),l=-1,u=s.length,c=s[u-1].edge,d=c.l===o?c.r:c.l;++l<u;)i=c,a=d,c=s[l].edge,d=c.l===o?c.r:c.l,r<a.i&&r<d.i&&ur(o,a,d)<0&&t.push([e[r],e[a.i],e[d.i]])}),t},t.x=function(e){return arguments.length?(a=ke(r=e),t):r},t.y=function(e){return arguments.length?(o=ke(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?dl:e,t):s===dl?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===dl?null:s&&s[1]},t)};var dl=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(e){return so.geom.voronoi().triangles(e)},so.geom.quadtree=function(e,t,n,r,i){function a(e){function a(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(bo(l-n)+bo(c-r)<.01)u(e,t,n,r,i,a,o,s);else{var d=e.point;e.x=e.y=e.point=null,u(e,d,l,c,i,a,o,s),u(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,i,a,o,s)}function u(e,t,n,r,i,o,s,l){var u=.5*(i+s),c=.5*(o+l),d=n>=u,f=r>=c,h=f<<1|d;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=fr()),d?i=u:s=u,f?o=c:l=c,a(e,t,n,r,i,o,s,l)}var c,d,f,h,p,g,m,v,y,x=ke(s),b=ke(l);if(null!=t)g=t,m=n,v=r,y=i;else if(v=y=-(g=m=1/0),d=[],f=[],p=e.length,o)for(h=0;p>h;++h)c=e[h],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),d.push(c.x),f.push(c.y);else for(h=0;p>h;++h){var w=+x(c=e[h],h),I=+b(c,h);g>w&&(g=w),m>I&&(m=I),w>v&&(v=w),I>y&&(y=I),d.push(w),f.push(I)}var A=v-g,C=y-m;A>C?y=m+A:v=g+C;var _=fr();if(_.add=function(e){a(_,e,+x(e,++h),+b(e,h),g,m,v,y)},_.visit=function(e){hr(e,_,g,m,v,y)},_.find=function(e){return pr(_,e[0],e[1],g,m,v,y)},h=-1,null==t){for(;++h<p;)a(_,e[h],d[h],f[h],g,m,v,y);--h}else e.forEach(_.add);return d=f=e=c=null,_}var o,s=Nn,l=Sn;return(o=arguments.length)?(s=cr,l=dr,3===o&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):null==t?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):null==t?null:[r-t,i-n]},a)},so.interpolateRgb=gr,so.interpolateObject=mr,so.interpolateNumber=vr,so.interpolateString=yr;var fl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hl=new RegExp(fl.source,"g");so.interpolate=xr,so.interpolators=[function(e,t){var n=typeof t;return("string"===n?as.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gr:yr:t instanceof oe?gr:Array.isArray(t)?br:"object"===n&&isNaN(t)?mr:vr)(e,t)}],so.interpolateArray=br;var pl=function(){return y},gl=so.map({linear:pl,poly:Mr,quad:function(){return Cr},cubic:function(){return _r},sin:function(){return zr},exp:function(){return Nr},circle:function(){return Sr},elastic:jr,back:Dr,bounce:function(){return Tr}}),ml=so.map({"in":y,out:Ir,"in-out":Ar,"out-in":function(e){return Ar(Ir(e))}});so.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=gl.get(n)||pl,r=ml.get(r)||y,wr(r(n.apply(null,lo.call(arguments,1))))},so.interpolateHcl=Or,so.interpolateHsl=Lr,so.interpolateLab=Er,so.interpolateRound=Br,so.transform=function(e){
var t=co.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Fr(n?n.matrix:vl)})(e)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vl={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=Xr,so.layout={},so.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(qr(e[n]));return t}},so.layout.chord=function(){function e(){var e,u,d,f,h,p={},g=[],m=so.range(a),v=[];for(n=[],r=[],e=0,f=-1;++f<a;){for(u=0,h=-1;++h<a;)u+=i[f][h];g.push(u),v.push(so.range(a)),e+=u}for(o&&m.sort(function(e,t){return o(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Go-c*a)/e,u=0,f=-1;++f<a;){for(d=u,h=-1;++h<a;){var y=m[f],x=v[y][h],b=i[y][x],w=u,I=u+=b*e;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:I,value:b}}r[y]={index:y,startAngle:d,endAngle:u,value:g[y]},u+=c}for(f=-1;++f<a;)for(h=f-1;++h<a;){var A=p[f+"-"+h],C=p[h+"-"+f];(A.value||C.value)&&n.push(A.value<C.value?{source:C,target:A}:{source:A,target:C})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,a,o,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(a=(i=e)&&i.length,n=r=null,u):i},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(o=e,n=r=null,u):o},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},so.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,l=a*a+o*o;if(l>s*s/v){if(g>l){var u=t.charge/l;e.px-=a*u,e.py-=o*u}return!0}if(t.point&&l&&g>l){var u=t.pointCharge/l;e.px-=a*u,e.py-=o*u}}return!t.charge}}function t(e){e.px=so.event.x,e.py=so.event.y,l.resume()}var n,r,i,a,o,s,l={},u=so.dispatch("start","tick","end"),c=[1,1],d=.9,f=yl,h=xl,p=-30,g=bl,m=.1,v=.64,x=[],b=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var t,r,l,f,h,g,v,y,w,I=x.length,A=b.length;for(r=0;A>r;++r)l=b[r],f=l.source,h=l.target,y=h.x-f.x,w=h.y-f.y,(g=y*y+w*w)&&(g=i*o[r]*((g=Math.sqrt(g))-a[r])/g,y*=g,w*=g,h.x-=y*(v=f.weight+h.weight?f.weight/(f.weight+h.weight):.5),h.y-=w*v,f.x+=y*(v=1-v),f.y+=w*v);if((v=i*m)&&(y=c[0]/2,w=c[1]/2,r=-1,v))for(;++r<I;)l=x[r],l.x+=(y-l.x)*v,l.y+=(w-l.y)*v;if(p)for(ri(t=so.geom.quadtree(x),i,s),r=-1;++r<I;)(l=x[r]).fixed||t.visit(e(l));for(r=-1;++r<I;)l=x[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*d,l.y-=(l.py-(l.py=l.y))*d);u.tick({type:"tick",alpha:i})},l.nodes=function(e){return arguments.length?(x=e,l):x},l.links=function(e){return arguments.length?(b=e,l):b},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,l):f},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,l):h},l.friction=function(e){return arguments.length?(d=+e,l):d},l.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,l):p},l.chargeDistance=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.gravity=function(e){return arguments.length?(m=+e,l):m},l.theta=function(e){return arguments.length?(v=e*e,l):Math.sqrt(v)},l.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):e>0&&(u.start({type:"start",alpha:i=e}),n=je(l.tick)),l):i},l.start=function(){function e(e,r){if(!n){for(n=new Array(i),l=0;i>l;++l)n[l]=[];for(l=0;u>l;++l){var a=b[l];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[t],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][e]))return o;return Math.random()*r}var t,n,r,i=x.length,u=b.length,d=c[0],g=c[1];for(t=0;i>t;++t)(r=x[t]).index=t,r.weight=0;for(t=0;u>t;++t)r=b[t],"number"==typeof r.source&&(r.source=x[r.source]),"number"==typeof r.target&&(r.target=x[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=x[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof f)for(t=0;u>t;++t)a[t]=+f.call(this,b[t],t);else for(t=0;u>t;++t)a[t]=f;if(o=[],"function"==typeof h)for(t=0;u>t;++t)o[t]=+h.call(this,b[t],t);else for(t=0;u>t;++t)o[t]=h;if(s=[],"function"==typeof p)for(t=0;i>t;++t)s[t]=+p.call(this,x[t],t);else for(t=0;i>t;++t)s[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=so.behavior.drag().origin(y).on("dragstart.force",$r).on("drag.force",t).on("dragend.force",ei)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ni).call(r):r},so.rebind(l,u,"on")};var yl=20,xl=1,bl=1/0;so.layout.hierarchy=function(){function e(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(u=n.call(e,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=u}else r&&(a.value=+r.call(e,a,a.depth)||0),delete a.children;return oi(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=ui,n=si,r=li;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ai(t,function(e){e.children&&(e.value=0)}),oi(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},so.layout.partition=function(){function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,l,u=-1;for(r=t.value?r/t.value:0;++u<o;)e(s=a[u],n,l=s.value*r,i),n+=l}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=so.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ii(n,r)},so.layout.pie=function(){function e(o){var s,l=o.length,u=o.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),d=("function"==typeof i?i.apply(this,arguments):i)-c,f=Math.min(Math.abs(d)/l,+("function"==typeof a?a.apply(this,arguments):a)),h=f*(0>d?-1:1),p=so.sum(u),g=p?(d-l*h)/p:0,m=so.range(l),v=[];return null!=n&&m.sort(n===wl?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])}),m.forEach(function(e){v[e]={data:o[e],value:s=u[e],startAngle:c,endAngle:c+=s*g+h,padAngle:f}}),v}var t=Number,n=wl,r=0,i=Go,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var wl={};so.layout.stack=function(){function e(s,l){if(!(f=s.length))return s;var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),d=n.call(e,c,l);u=so.permute(u,d),c=so.permute(c,d);var f,h,p,g,m=r.call(e,c,l),v=u[0].length;for(p=0;v>p;++p)for(i.call(e,u[0][p],g=m[p],c[0][p][1]),h=1;f>h;++h)i.call(e,u[h][p],g+=c[h-1][p][1],c[h][p][1]);return s}var t=y,n=pi,r=gi,i=hi,a=di,o=fi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Il.get(t)||pi,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Al.get(t)||gi,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var Il=so.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(mi),a=e.map(vi),o=so.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,l=0,u=[],c=[];for(t=0;r>t;++t)n=o[t],l>s?(s+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return so.range(e.length).reverse()},"default":pi}),Al=so.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,r,i,a,o,s,l,u,c=e.length,d=e[0],f=d.length,h=[];for(h[0]=l=u=0,n=1;f>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,a=0,s=d[n][0]-d[n-1][0];c>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}h[n]=l-=i?a/i*s:0,u>l&&(u=l)}for(n=0;f>n;++n)h[n]-=u;return h},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:gi});so.layout.histogram=function(){function e(e,a){for(var o,s,l=[],u=e.map(n,this),c=r.call(this,u,a),d=i.call(this,c,u,a),a=-1,f=u.length,h=d.length-1,p=t?1:1/f;++a<h;)o=l[a]=[],o.dx=d[a+1]-(o.x=d[a]),o.y=0;if(h>0)for(a=-1;++a<f;)s=u[a],s>=c[0]&&s<=c[1]&&(o=l[so.bisect(d,s,1,h)-1],o.y+=p,o.push(e[a]));return l}var t=!0,n=Number,r=wi,i=xi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=ke(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return bi(e,t)}:ke(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},so.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,oi(s,function(e){e.r=+c(e.value)}),oi(s,ki),r){var d=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;oi(s,function(e){e.r+=d}),oi(s,ki),oi(s,function(e){e.r-=d})}return Ni(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var t,n=so.layout.hierarchy().sort(Ii),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ii(e,n)},so.layout.tree=function(){function e(e,i){var c=o.call(this,e,i),d=c[0],f=t(d);if(oi(f,n),f.parent.m=-f.z,ai(f,r),u)ai(d,a);else{var h=d,p=d,g=d;ai(d,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>g.depth&&(g=e)});var m=s(h,p)/2-h.x,v=l[0]/(p.x+s(p,h)/2+m),y=l[1]/(g.depth||1);ai(d,function(e){e.x=(e.x+m)*v,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;s>o;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Li(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,a=e,o=t,l=i.parent.children[0],u=i.m,c=a.m,d=o.m,f=l.m;o=Ti(o),i=Di(i),o&&i;)l=Di(l),a=Ti(a),a.a=e,r=o.z+d-i.z-u+s(o._,i._),r>0&&(Oi(Ei(o,e,n),e,r),u+=r,c+=r),d+=o.m,u+=i.m,f+=l.m,c+=a.m;o&&!Ti(a)&&(a.t=o,a.m+=d-c),i&&!Di(l)&&(l.t=i,l.m+=u-f,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var o=so.layout.hierarchy().sort(null).value(null),s=ji,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?a:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:a,e):u?l:null},ii(e,o)},so.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),l=s[0],u=0;oi(l,function(e){var t=e.children;t&&t.length?(e.x=Fi(t),e.y=Bi(t)):(e.x=o?u+=n(e,o):0,e.y=0,o=e)});var c=Pi(l),d=Gi(l),f=c.x-n(c,d)/2,h=d.x+n(d,c)/2;return oi(l,i?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-f)/(h-f)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),s}var t=so.layout.hierarchy().sort(null).value(null),n=ji,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ii(e,t)},so.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var a=n.children;if(a&&a.length){var o,s,l,u=d(n),c=[],f=a.slice(),p=1/0,g="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(f,u.dx*u.dy/n.value),c.area=0;(l=f.length)>0;)c.push(o=f[l-1]),c.area+=o.area,"squarify"!==h||(s=r(c,g))<=p?(f.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var a,o=d(t),s=r.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(i(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*p/r,r/(t*a*p)):1/0}function i(e,t,n,r){var i,a=-1,o=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=e[a],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=e[a],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(r){var i=o||s(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=u[0],a.dy=u[1]):a.dx=a.dy=0,o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),f&&(o=i),i}var o,s=so.layout.hierarchy(),l=Math.round,u=[1,1],c=null,d=Zi,f=!1,h="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(u=e,a):u},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Zi(t):Ri(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ri(t,e)}if(!arguments.length)return c;var r;return d=null==(c=e)?Zi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(f=e,o=null,a):f},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(h=e+"",a):h},ii(a,s)},so.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=so.random.normal.apply(so,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=so.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},so.scale={};var Cl={floor:y,ceil:y};so.scale.linear=function(){return Ji([0,1],[0,1],xr,!1)};var _l={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return ra(so.scale.linear().domain([0,1]),10,!0,[1,10])};var kl=so.format(".0e"),Ml={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};so.scale.pow=function(){return ia(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return oa([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(zl)},so.scale.category20=function(){return so.scale.ordinal().range(Nl)},so.scale.category20b=function(){return so.scale.ordinal().range(Sl)},so.scale.category20c=function(){return so.scale.ordinal().range(jl)};var zl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xe),Nl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xe),Sl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xe),jl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xe);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return la(0,1,[0,1])},so.scale.threshold=function(){return ua([.5],[0,1])},so.scale.identity=function(){return ca([0,1])},so.svg={},so.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-Ro,d=s.apply(this,arguments)-Ro,f=Math.abs(d-c),h=c>d?0:1;if(e>u&&(p=u,u=e,e=p),f>=Zo)return t(u,h)+(e?t(e,1-h):"")+"Z";var p,g,m,v,y,x,b,w,I,A,C,_,k=0,M=0,z=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=a===Dl?Math.sqrt(e*e+u*u):+a.apply(this,arguments),h||(M*=-1),u&&(M=te(m/u*Math.sin(v))),e&&(k=te(m/e*Math.sin(v)))),u){y=u*Math.cos(c+M),x=u*Math.sin(c+M),b=u*Math.cos(d-M),w=u*Math.sin(d-M);var N=Math.abs(d-c-2*M)<=Po?0:1;if(M&&va(y,x,b,w)===h^N){var S=(c+d)/2;y=u*Math.cos(S),x=u*Math.sin(S),b=w=null}}else y=x=0;if(e){I=e*Math.cos(d-k),A=e*Math.sin(d-k),C=e*Math.cos(c+k),_=e*Math.sin(c+k);var j=Math.abs(c-d+2*k)<=Po?0:1;if(k&&va(I,A,C,_)===1-h^j){var D=(c+d)/2;I=e*Math.cos(D),A=e*Math.sin(D),C=_=null}}else I=A=0;if(f>Bo&&(p=Math.min(Math.abs(u-e)/2,+i.apply(this,arguments)))>.001){g=u>e^h?0:1;var T=p,O=p;if(Po>f){var L=null==C?[I,A]:null==b?[y,x]:On([y,x],[C,_],[b,w],[I,A]),E=y-L[0],B=x-L[1],F=b-L[0],P=w-L[1],G=1/Math.sin(Math.acos((E*F+B*P)/(Math.sqrt(E*E+B*B)*Math.sqrt(F*F+P*P)))/2),Z=Math.sqrt(L[0]*L[0]+L[1]*L[1]);O=Math.min(p,(e-Z)/(G-1)),T=Math.min(p,(u-Z)/(G+1))}if(null!=b){var R=ya(null==C?[I,A]:[C,_],[y,x],u,T,h),Y=ya([b,w],[I,A],u,T,h);p===T?z.push("M",R[0],"A",T,",",T," 0 0,",g," ",R[1],"A",u,",",u," 0 ",1-h^va(R[1][0],R[1][1],Y[1][0],Y[1][1]),",",h," ",Y[1],"A",T,",",T," 0 0,",g," ",Y[0]):z.push("M",R[0],"A",T,",",T," 0 1,",g," ",Y[0])}else z.push("M",y,",",x);if(null!=C){var W=ya([y,x],[C,_],e,-O,h),U=ya([I,A],null==b?[y,x]:[b,w],e,-O,h);p===O?z.push("L",U[0],"A",O,",",O," 0 0,",g," ",U[1],"A",e,",",e," 0 ",h^va(U[1][0],U[1][1],W[1][0],W[1][1]),",",1-h," ",W[1],"A",O,",",O," 0 0,",g," ",W[0]):z.push("L",U[0],"A",O,",",O," 0 0,",g," ",W[0])}else z.push("L",I,",",A)}else z.push("M",y,",",x),null!=b&&z.push("A",u,",",u," 0 ",N,",",h," ",b,",",w),z.push("L",I,",",A),null!=C&&z.push("A",e,",",e," 0 ",j,",",1-h," ",C,",",_);return z.push("Z"),z.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=fa,r=ha,i=da,a=Dl,o=pa,s=ga,l=ma;return e.innerRadius=function(t){return arguments.length?(n=ke(t),e):n},e.outerRadius=function(t){return arguments.length?(r=ke(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=ke(t),e):i},e.padRadius=function(t){return arguments.length?(a=t==Dl?Dl:ke(t),e):a},e.startAngle=function(t){return arguments.length?(o=ke(t),e):o},e.endAngle=function(t){return arguments.length?(s=ke(t),e):s},e.padAngle=function(t){return arguments.length?(l=ke(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Ro;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Dl="auto";so.svg.line=function(){return xa(y)};var Tl=so.map({linear:ba,"linear-closed":wa,step:Ia,"step-before":Aa,"step-after":Ca,basis:Sa,"basis-open":ja,"basis-closed":Da,bundle:Ta,cardinal:Ma,"cardinal-open":_a,"cardinal-closed":ka,monotone:Pa});Tl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Ol=[0,2/3,1/3,0],Ll=[0,1/3,2/3,0],El=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var e=xa(Ga);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Aa.reverse=Ca,Ca.reverse=Aa,so.svg.area=function(){return Za(y)},so.svg.area.radial=function(){var e=Za(Ga);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},so.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),u=t(this,o,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),a=s.call(e,i,r),o=l.call(e,i,r)-Ro,c=u.call(e,i,r)-Ro;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Po)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var a=xn,o=bn,s=Ra,l=pa,u=ga;return e.radius=function(t){return arguments.length?(s=ke(t),e):s},e.source=function(t){return arguments.length?(a=ke(t),e):a},e.target=function(t){return arguments.length?(o=ke(t),e):o},e.startAngle=function(t){return arguments.length?(l=ke(t),e):l},e.endAngle=function(t){return arguments.length?(u=ke(t),e):u},e},so.svg.diagonal=function(){function e(e,i){var a=t.call(this,e,i),o=n.call(this,e,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=xn,n=bn,r=Ya;return e.source=function(n){return arguments.length?(t=ke(n),e):t},e.target=function(t){return arguments.length?(n=ke(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},so.svg.diagonal.radial=function(){var e=so.svg.diagonal(),t=Ya,n=e.projection;return e.projection=function(e){return arguments.length?n(Wa(t=e)):t},e},so.svg.symbol=function(){function e(e,r){return(Bl.get(t.call(this,e,r))||Xa)(n.call(this,e,r))}var t=Va,n=Ua;return e.type=function(n){return arguments.length?(t=ke(n),e):t},e.size=function(t){return arguments.length?(n=ke(t),e):n},e};var Bl=so.map({circle:Xa,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Pl)),n=t*Pl;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Fl),n=t*Fl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Fl),n=t*Fl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});so.svg.symbolTypes=Bl.keys();var Fl=Math.sqrt(3),Pl=Math.tan(30*Yo);No.transition=function(e){for(var t,n,r=Gl||++Wl,i=Ka(e),a=[],o=Zl||{time:Date.now(),ease:kr,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(n=u[c])&&$a(n,c,i,r,o),t.push(n)}return Ja(a,i,r)},No.interrupt=function(e){return this.each(null==e?Rl:Ha(Ka(e)))};var Gl,Zl,Rl=Ha(Ka()),Yl=[],Wl=0;Yl.call=No.call,Yl.empty=No.empty,Yl.node=No.node,Yl.size=No.size,so.transition=function(e,t){return e&&e.transition?Gl?e.transition(t):e:so.selection().transition(e)},so.transition.prototype=Yl,Yl.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=z(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),$a(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return Ja(o,a,i)},Yl.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,l=[];e=N(e);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],f=-1,h=d.length;++f<h;)if(r=d[f]){a=r[s][o],n=e.call(r,r.__data__,f,u),l.push(t=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&$a(i,p,s,o,a),t.push(i)}return Ja(l,s,o)},Yl.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=Z(e));for(var a=0,o=this.length;o>a;a++){i.push(t=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return Ja(i,this.namespace,this.id)},Yl.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):Y(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Yl.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Xr:xr,s=so.ns.qualify(e);return qa(this,"attr."+e,t,s.local?a:i)},Yl.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=so.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Yl.style=function(e,n,r){function i(){this.style.removeProperty(e)}function a(n){return null==n?i:(n+="",function(){var i,a=t(this).getComputedStyle(this,null).getPropertyValue(e);return a!==n&&(i=xr(a,n),function(t){this.style.setProperty(e,i(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return qa(this,"style."+e,n,a)},Yl.styleTween=function(e,n,r){function i(i,a){var o=n.call(this,i,a,t(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Yl.text=function(e){return qa(this,"text",e,Qa)},Yl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=so.ease.apply(so,arguments)),Y(this,function(r){r[n][t].ease=e}))},Yl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:Y(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},Yl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:Y(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Yl.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Zl,a=Gl;try{Gl=n,Y(this,function(t,i,a){Zl=t[r][n],e.call(t,t.__data__,i,a)})}finally{Zl=i,Gl=a}}else Y(this,function(i){var a=i[r][n];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(e,t)});return this},Yl.transition=function(){for(var e,t,n,r,i=this.id,a=++Wl,o=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(e=[]);for(var t=this[l],c=0,d=t.length;d>c;c++)(n=t[c])&&(r=n[o][i],$a(n,c,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Ja(s,o,a)},so.svg.axis=function(){function e(e){e.each(function(){var e,u=so.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),f=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,h=null==t?d.tickFormat?d.tickFormat.apply(d,s):y:t,p=u.selectAll(".tick").data(f,d),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Bo),m=so.transition(p.exit()).style("opacity",Bo).remove(),v=so.transition(p.order()).style("opacity",1),x=Math.max(i,0)+o,b=Wi(d),w=u.selectAll(".domain").data([0]),I=(w.enter().append("path").attr("class","domain"),so.transition(w));g.append("line"),g.append("text");var A,C,_,k,M=g.select("line"),z=v.select("line"),N=p.select("text").text(h),S=g.select("text"),j=v.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=eo,A="x",_="y",C="x2",k="y2",N.attr("dy",0>D?"0em":".71em").style("text-anchor","middle"),I.attr("d","M"+b[0]+","+D*a+"V0H"+b[1]+"V"+D*a)):(e=to,A="y",_="x",C="y2",k="x2",N.attr("dy",".32em").style("text-anchor",0>D?"end":"start"),I.attr("d","M"+D*a+","+b[0]+"H0V"+b[1]+"H"+D*a)),M.attr(k,D*i),S.attr(_,D*x),z.attr(C,0).attr(k,D*i),j.attr(A,0).attr(_,D*x),d.rangeBand){var T=d,O=T.rangeBand()/2;c=d=function(e){return T(e)+O}}else c.rangeBand?c=d:m.call(e,d,c);g.call(e,c,d),v.call(e,d,d)})}var t,n=so.scale.linear(),r=Ul,i=6,a=6,o=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Vl?t+"":Ul,e):r},e.ticks=function(){return arguments.length?(s=uo(arguments),e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,a=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Ul="bottom",Vl={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function e(t){t.each(function(){var t=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Xl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,d=so.transition(t),f=so.transition(o);u&&(l=Wi(u),f.attr("x",l[0]).attr("width",l[1]-l[0]),r(d)),c&&(l=Wi(c),f.attr("y",l[0]).attr("height",l[1]-l[0]),i(d)),n(d)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+d[+/e$/.test(e)]+","+f[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",d[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1]-d[0])}function i(e){e.select(".extent").attr("y",f[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function a(){function a(){32==so.event.keyCode&&(N||(x=null,j[0]-=d[1],j[1]-=f[1],N=2),C())}function g(){32==so.event.keyCode&&2==N&&(j[0]+=d[1],j[1]+=f[1],N=0,C())}function m(){var e=so.mouse(w),t=!1;b&&(e[0]+=b[0],e[1]+=b[1]),N||(so.event.altKey?(x||(x=[(d[0]+d[1])/2,(f[0]+f[1])/2]),j[0]=d[+(e[0]<x[0])],j[1]=f[+(e[1]<x[1])]):x=null),M&&v(e,u,0)&&(r(_),t=!0),z&&v(e,c,1)&&(i(_),t=!0),t&&(n(_),A({type:"brush",mode:N?"move":"resize"}))}function v(e,t,n){var r,i,a=Wi(t),l=a[0],u=a[1],c=j[n],g=n?f:d,m=g[1]-g[0];return N&&(l-=c,u-=m+c),r=(n?p:h)?Math.max(l,Math.min(u,e[n])):e[n],N?i=(r+=c)+m:(x&&(c=Math.max(l,Math.min(u,2*x[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:o=null,g[0]=r,g[1]=i,!0):void 0}function y(){m(),_.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),so.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),A({type:"brushend"})}var x,b,w=this,I=so.select(so.event.target),A=l.of(w,arguments),_=so.select(w),k=I.datum(),M=!/^(n|s)$/.test(k)&&u,z=!/^(e|w)$/.test(k)&&c,N=I.classed("extent"),S=J(w),j=so.mouse(w),D=so.select(t(w)).on("keydown.brush",a).on("keyup.brush",g);if(so.event.changedTouches?D.on("touchmove.brush",m).on("touchend.brush",y):D.on("mousemove.brush",m).on("mouseup.brush",y),_.interrupt().selectAll("*").interrupt(),N)j[0]=d[0]-j[0],j[1]=f[0]-j[1];else if(k){var T=+/w$/.test(k),O=+/^n/.test(k);b=[d[1-T]-j[0],f[1-O]-j[1]],j[0]=d[T],j[1]=f[O]}else so.event.altKey&&(x=j.slice());_.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",I.style("cursor")),A({type:"brushstart"}),m()}var o,s,l=k(e,"brushstart","brush","brushend"),u=null,c=null,d=[0,0],f=[0,0],h=!0,p=!0,g=Hl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:d,y:f,i:o,j:s},n=this.__chart__||t;this.__chart__=t,
Gl?so.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,d=n.x,f=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=br(d,t.x),r=br(f,t.y);return o=s=null,function(i){d=t.x=n(i),f=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,g=Hl[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,g=Hl[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(h=!!t[0],p=!!t[1]):u?h=!!t:c&&(p=!!t),e):u&&c?[h,p]:u?h:c?p:null},e.extent=function(t){var n,r,i,a,l;return arguments.length?(u&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),o=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(l=n,n=r,r=l),(n!=d[0]||r!=d[1])&&(d=[n,r])),c&&(i=t[0],a=t[1],u&&(i=i[1],a=a[1]),s=[i,a],c.invert&&(i=c(i),a=c(a)),i>a&&(l=i,i=a,a=l),(i!=f[0]||a!=f[1])&&(f=[i,a])),e):(u&&(o?(n=o[0],r=o[1]):(n=d[0],r=d[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(l=n,n=r,r=l))),c&&(s?(i=s[0],a=s[1]):(i=f[0],a=f[1],c.invert&&(i=c.invert(i),a=c.invert(a)),i>a&&(l=i,i=a,a=l))),u&&c?[[n,i],[r,a]]:u?[n,r]:c&&[i,a])},e.clear=function(){return e.empty()||(d=[0,0],f=[0,0],o=s=null),e},e.empty=function(){return!!u&&d[0]==d[1]||!!c&&f[0]==f[1]},so.rebind(e,l,"on")};var Xl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Jl=ps.format=bs.timeFormat,ql=Jl.utc,Ql=ql("%Y-%m-%dT%H:%M:%S.%LZ");Jl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?no:Ql,no.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},no.toString=Ql.toString,ps.second=Ge(function(e){return new gs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=Ge(function(e){return new gs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=Ge(function(e){var t=e.getTimezoneOffset()/60;return new gs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=Ge(function(e){return e=ps.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$l=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],eu=Jl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Nt]]),tu={range:function(e,t,n){return so.range(Math.ceil(e/n)*n,+t,n).map(io)},floor:y,ceil:y};$l.year=ps.year,ps.scale=function(){return ro(so.scale.linear(),$l,eu)};var nu=$l.map(function(e){return[e[0].utc,e[1]]}),ru=ql.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Nt]]);nu.year=ps.year.utc,ps.scale.utc=function(){return ro(so.scale.linear(),nu,ru)},so.text=Me(function(e){return e.responseText}),so.json=function(e,t){return ze(e,"application/json",ao,t)},so.html=function(e,t){return ze(e,"text/html",oo,t)},so.xml=Me(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=so,define(so)):"object"==typeof module&&module.exports?module.exports=so:this.d3=so}(),function(){function e(e){return[0,e.length-1]}function t(e){return[d3.quantile(e,.25),d3.quantile(e,.5),d3.quantile(e,.75)]}d3.box=function(){function n(e){e.each(function(e,t){var n=e[1].sort(d3.ascending),s=d3.select(this),f=n.length,h=n[0],p=n[f-1],g=n.quartiles=u(n),m=l&&l.call(this,n,t),v=m&&m.map(function(e){return n[e]}),y=m?d3.range(0,m[0]).concat(d3.range(m[1]+1,f)):d3.range(f),x=d3.scale.linear().domain(o&&o.call(this,n,t)||[h,p]).range([i,0]),b=this.__chart__||d3.scale.linear().domain([0,1/0]).range(x.range());this.__chart__=x;var w=s.selectAll("line.center").data(v?[v]:[]);w.enter().insert("line","rect").attr("class","center").attr("x1",r/2).attr("y1",function(e){return b(e[0])}).attr("x2",r/2).attr("y2",function(e){return b(e[1])}).style("opacity",1e-6).transition().duration(a).style("opacity",1).attr("y1",function(e){return x(e[0])}).attr("y2",function(e){return x(e[1])}),w.transition().duration(a).style("opacity",1).attr("y1",function(e){return x(e[0])}).attr("y2",function(e){return x(e[1])}),w.exit().transition().duration(a).style("opacity",1e-6).attr("y1",function(e){return x(e[0])}).attr("y2",function(e){return x(e[1])}).remove();var I=s.selectAll("rect.box").data([g]);I.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(e){return b(e[2])}).attr("width",r).attr("height",function(e){return b(e[0])-b(e[2])}).transition().duration(a).attr("y",function(e){return x(e[2])}).attr("height",function(e){return x(e[0])-x(e[2])}),I.transition().duration(a).attr("y",function(e){return x(e[2])}).attr("height",function(e){return x(e[0])-x(e[2])});var A=s.selectAll("line.median").data([g[1]]);A.enter().append("line").attr("class","median").attr("x1",0).attr("y1",b).attr("x2",r).attr("y2",b).transition().duration(a).attr("y1",x).attr("y2",x),A.transition().duration(a).attr("y1",x).attr("y2",x);var C=s.selectAll("line.whisker").data(v||[]);C.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",b).attr("x2",0+r).attr("y2",b).style("opacity",1e-6).transition().duration(a).attr("y1",x).attr("y2",x).style("opacity",1),C.transition().duration(a).attr("y1",x).attr("y2",x).style("opacity",1),C.exit().transition().duration(a).attr("y1",x).attr("y2",x).style("opacity",1e-6).remove();var _=s.selectAll("circle.outlier").data(y,Number);_.enter().insert("circle","text").attr("class","outlier").attr("r",4).attr("cx",r/2).attr("cy",function(e){return b(n[e])}).style("opacity",1e-6).transition().duration(a).attr("cy",function(e){return x(n[e])}).style("opacity",1),_.transition().duration(a).attr("cy",function(e){return x(n[e])}).style("opacity",1),_.exit().transition().duration(a).attr("cy",function(e){return x(n[e])}).style("opacity",1e-6).remove();var k=d||x.tickFormat(8),M=s.selectAll("text.box").data(g);1==c&&M.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(e,t){return 1&t?6:-6}).attr("x",function(e,t){return 1&t?+r:0}).attr("y",b).attr("text-anchor",function(e,t){return 1&t?"start":"end"}).text(k).transition().duration(a).attr("y",x),M.transition().duration(a).text(k).attr("y",x);var z=s.selectAll("text.whisker").data(v||[]);1==c&&z.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",r).attr("y",b).text(k).style("opacity",1e-6).transition().duration(a).attr("y",x).style("opacity",1),z.transition().duration(a).text(k).attr("y",x).style("opacity",1),z.exit().transition().duration(a).attr("y",x).style("opacity",1e-6).remove()}),d3.timer.flush()}var r=1,i=1,a=0,o=null,s=Number,l=e,u=t,c=!0,d=null;return n.width=function(e){return arguments.length?(r=e,n):r},n.height=function(e){return arguments.length?(i=e,n):i},n.tickFormat=function(e){return arguments.length?(d=e,n):d},n.duration=function(e){return arguments.length?(a=e,n):a},n.domain=function(e){return arguments.length?(o=null==e?e:d3.functor(e),n):o},n.value=function(e){return arguments.length?(s=e,n):s},n.whiskers=function(e){return arguments.length?(l=e,n):l},n.showLabels=function(e){return arguments.length?(c=e,n):c},n.quartiles=function(e){return arguments.length?(u=e,n):u},n}}(),!function(e,t){"use strict";if("object"==typeof exports)module.exports=t(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],function(n){return e.dimple=t(n),e.dimple});else if(e.d3)e.dimple=t(e.d3);else{if(!console||!console.warn)throw"dimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("dimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(e){"use strict";var t={version:"2.1.6",plot:{},aggregateMethod:{}};return t.axis=function(n,r,i,a,o,s){this.chart=n,this.position=r,this.categoryFields=null===o||void 0===o?i:[].concat(o),this.measure=a,this.timeField=o,this.floatingBarWidth=5,this.hidden=!1,this.showPercent=!1,this.colors=null,this.overrideMin=null,this.overrideMax=null,this.shapes=null,this.showGridlines=null,this.gridlineShapes=null,this.titleShape=null,this.dateParseFormat=null,this.tickFormat=null,this.timePeriod=null,this.timeInterval=1,this.useLog=!1,this.logBase=10,this.title=void 0,this.clamp=!0,this.ticks=null,this.fontSize="10px",this.fontFamily="sans-serif",this.autoRotateLabel=null===s||void 0===s?!0:s,this._slaves=[],this._scale=null,this._min=0,this._max=0,this._previousOrigin=null,this._origin=null,this._orderRules=[],this._groupOrderRules=[],this._draw=null,this._getAxisData=function(){var e,t,n=[],r=!1;if(this.chart&&this.chart.series){for(e=0;e<this.chart.series.length;e+=1)t=this.chart.series[e],t[this.position]===this&&(t.data&&t.data.length>0?n=n.concat(t.data):r=!0);r&&this.chart.data&&(n=n.concat(this.chart.data))}return n},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getFormat=function(){var t,n,r,i,a,o,s;return null!==this.tickFormat&&void 0!==this.tickFormat?t=this._hasTimeField()?e.time.format(this.tickFormat):e.format(this.tickFormat):this.showPercent?t=e.format("%"):this.useLog&&null!==this.measure?t=function(t){var n=Math.floor(Math.abs(t),0).toString().length,r=Math.min(Math.floor((n-1)/3),4),i="kmBT".substring(r-1,r),a="0"===Math.round(t/Math.pow(1e3,r)*10).toString().slice(-1)?0:1;return 0===t?0:e.format(",."+a+"f")(t/Math.pow(1e3,r))+i}:null!==this.measure?(n=Math.floor(Math.abs(this._max),0).toString(),r=Math.floor(Math.abs(this._min),0).toString(),i=Math.max(r.length,n.length),i>3?(a=Math.min(Math.floor((i-1)/3),4),o="kmBT".substring(a-1,a),s=1>=i-3*a?1:0,t=function(t){return 0===t?0:e.format(",."+s+"f")(t/Math.pow(1e3,a))+o}):(s=-Math.floor(Math.log(this._tick_step)/Math.LN10),t=e.format(",."+s+"f"))):t=function(e){return e},t},this._getTimePeriod=function(){var t=this.timePeriod,n=30,r=this._max-this._min;return this._hasTimeField()&&!this.timePeriod&&(t=n>=r/1e3?e.time.seconds:n>=r/6e4?e.time.minutes:n>=r/36e5?e.time.hours:n>=r/864e5?e.time.days:n>=r/6048e5?e.time.weeks:n>=r/26298e5?e.time.months:e.time.years),t},this._getTooltipText=function(t,n){if(this._hasTimeField())n[this.position+"Field"][0]&&t.push(this.timeField+": "+this._getFormat()(n[this.position+"Field"][0]));else if(this._hasCategories())this.categoryFields.forEach(function(e,r){null!==e&&void 0!==e&&n[this.position+"Field"][r]&&t.push(e+(n[this.position+"Field"][r]!==e?": "+n[this.position+"Field"][r]:""))},this);else if(this._hasMeasure())switch(this.position){case"x":t.push(this.measure+": "+this._getFormat()(n.width));break;case"y":t.push(this.measure+": "+this._getFormat()(n.height));break;case"p":t.push(this.measure+": "+this._getFormat()(n.angle)+" ("+e.format("%")(n.piePct)+")");break;default:t.push(this.measure+": "+this._getFormat()(n[this.position+"Value"]))}},this._getTopMaster=function(){var e=this;return null!==this.master&&void 0!==this.master&&(e=this.master._getTopMaster()),e},this._hasCategories=function(){return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0},this._hasMeasure=function(){return null!==this.measure&&void 0!==this.measure},this._hasTimeField=function(){return null!==this.timeField&&void 0!==this.timeField},this._parseDate=function(t){var n;return n=null===this.dateParseFormat||void 0===this.dateParseFormat?isNaN(t)?Date.parse(t):new Date(t):e.time.format(this.dateParseFormat).parse(t)},this._update=function(n){var r,i,a,o,s=[],l=this.ticks||10,u=function(e,n,r){var i,a,o=e.categoryFields[0],s=e._getAxisData(),l=o,u=!1,c=!0,d=null;for(i=0;i<s.length;i+=1)if(d=e._parseDate(s[i][o]),null!==d&&void 0!==d&&isNaN(d)){c=!1;break}return c||e.chart.series.forEach(function(t){t[n]===e&&t[r]._hasMeasure()&&(l=t[r].measure,u=!0)},this),a=e._orderRules.concat({ordering:l,desc:u}),t._getOrderedList(s,o,a)};if(this._min=this.showPercent&&this._min<-1?-1:this._min,this._max=this.showPercent&&this._max>1?1:this._max,this._min=null!==this.overrideMin?this.overrideMin:this._min,this._max=null!==this.overrideMax?this.overrideMax:this._max,"x"!==this.position||null!==this._scale&&!n){if("y"!==this.position||null!==this._scale&&!n)this.position.length>0&&"z"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scale.log().range([this.chart._heightPixels()/300,this.chart._heightPixels()/10]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scale.linear().range([1,this.chart._heightPixels()/10]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"p"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scale.log().range([0,360]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scale.linear().range([0,360]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"c"===this.position[0]&&null===this._scale&&(this._scale=e.scale.linear().range([0,null===this.colors||1===this.colors.length?1:this.colors.length-1]).domain([this._min,this._max]).clamp(this.clamp));else if(this._hasTimeField()?this._scale=e.time.scale().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scale.log().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(s=u(this,"y","x"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){s=s.concat(u(e,"y","x"))},this),this._scale=e.scale.ordinal().rangePoints([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain(s.concat([""]))):this._scale=e.scale.linear().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"y")){case 0:this._draw=e.svg.axis().orient("left").scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=e.svg.axis().orient("right").scale(this._scale),this.ticks&&this._draw.ticks(l)}}else if(this._hasTimeField()?this._scale=e.time.scale().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scale.log().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(s=u(this,"x","y"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){s=s.concat(u(e,"x","y"))},this),this._scale=e.scale.ordinal().rangePoints([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain(s.concat([""]))):this._scale=e.scale.linear().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"x")){case 0:this._draw=e.svg.axis().orient("bottom").scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=e.svg.axis().orient("top").scale(this._scale),this.ticks&&this._draw.ticks(l)}return null!==this._slaves&&void 0!==this._slaves&&this._slaves.length>0&&this._slaves.forEach(function(e){e._scale=this._scale},this),null!==n&&void 0!==n&&n!==!1||this._hasTimeField()||null===this._scale||null===this._scale.ticks||void 0===this._scale.ticks||!(this._scale.ticks(l).length>0)||"x"!==this.position&&"y"!==this.position||(r=this._scale.ticks(l),i=r[1]-r[0],a=((this._max-this._min)%i).toFixed(0),this._tick_step=i,0!==a&&(this._max=Math.ceil(this._max/i)*i,this._min=Math.floor(this._min/i)*i,this._update(!0))),o=null!==s&&void 0!==s&&s.length>0?this._scale.copy()(s[0]):this._min>0?this._scale.copy()(this._min):this._max<0?this._scale.copy()(this._max):this._scale.copy()(0),this._origin!==o&&(this._previousOrigin=null===this._origin?o:this._origin,this._origin=o),this},this.addGroupOrderRule=function(e,t){this._groupOrderRules.push({ordering:e,desc:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})}},t.chart=function(n,r){this.svg=n,this.x="10%",this.y="10%",this.width="80%",this.height="80%",this.data=r,this.noFormats=!1,this.axes=[],this.series=[],this.legends=[],this.storyboard=null,this.titleShape=null,this.shapes=null,this.ease="cubic-in-out",this.staggerDraw=!1,this._group=n.append("g"),this._tooltipGroup=null,this._assignedColors={},this._assignedClasses={},this._nextColor=0,this._nextClass=0,this._axisIndex=function(e,t){var n=0,r=0,i=-1;for(n=0;n<this.axes.length;n+=1){if(this.axes[n]===e){i=r;break}(null===t||void 0===t||t[0]===this.axes[n].position[0])&&(r+=1)}return i},this._getAllData=function(){var e=[];return null!==this.data&&void 0!==this.data&&this.data.length>0&&(e=e.concat(this.data)),null!==this.series&&void 0!==this.series&&this.series.length>0&&this.series.forEach(function(t){null!==t.data&&void 0!==t.data&&t.data.length>0&&(e=e.concat(t.data))}),e},this._getData=function(n,r,i,a,o,s,l,u,c,d){var f,h,p=[],g=function(e,t){var n=[];return null!==e&&(e._hasTimeField()?n.push(e._parseDate(t[e.timeField])):e._hasCategories()&&e.categoryFields.forEach(function(e){n.push(t[e])},this)),n},m={x:!1,y:!1,z:!1,p:!1,c:!1},v={x:[],y:[]},y={x:[],y:[],z:[],p:[]},x={min:null,max:null},b={x:[],y:[],z:[],p:[]},w=[],I={},A={x:0,y:0,z:0,p:0},C="",_=[],k=[],M=[],z="",N=[],S="",j=[],D="",T=[],O=[],L=n,E=[];this.storyboard&&this.storyboard.categoryFields.length>0&&(C=this.storyboard.categoryFields[0],_=t._getOrderedList(L,C,this.storyboard._orderRules)),s&&s._hasCategories()&&s._hasMeasure()&&(z=s.categoryFields[0],N=t._getOrderedList(L,z,s._orderRules.concat([{ordering:s.measure,desc:!0}]))),l&&l._hasCategories()&&l._hasMeasure()&&(S=l.categoryFields[0],j=t._getOrderedList(L,S,l._orderRules.concat([{ordering:l.measure,desc:!0}]))),c&&c._hasCategories()&&c._hasMeasure()&&(D=c.categoryFields[0],T=t._getOrderedList(L,D,c._orderRules.concat([{ordering:c.measure,desc:!0}]))),L.length>0&&r&&r.length>0&&(O=[].concat(a),k=[],r.forEach(function(e){void 0!==L[0][e]&&k.push(e)},this),c&&c._hasMeasure()?O.push({ordering:c.measure,desc:!0}):d&&d._hasMeasure()?O.push({ordering:d.measure,desc:!0}):u&&u._hasMeasure()?O.push({ordering:u.measure,desc:!0}):s&&s._hasMeasure()?O.push({ordering:s.measure,desc:!0}):l&&l._hasMeasure()&&O.push({ordering:l.measure,desc:!0}),M=t._getOrderedList(L,k,O)),L.sort(function(e,t){var n,r,i,a,o,s,l=0;if(""!==C&&(l=_.indexOf(e[C])-_.indexOf(t[C])),""!==z&&0===l&&(l=N.indexOf(e[z])-N.indexOf(t[z])),""!==S&&0===l&&(l=j.indexOf(e[S])-j.indexOf(t[S])),""!==D&&0===l&&(l=T.indexOf(e[D])-j.indexOf(t[D])),k&&k.length>0&&0===l)for(n=[].concat(k),l=0,i=0;i<M.length;i+=1){for(r=[].concat(M[i]),o=!0,s=!0,a=0;a<n.length;a+=1)o=o&&e[n[a]]===r[a],s=s&&t[n[a]]===r[a];if(o&&s){l=0;break}if(o){l=-1;break}if(s){l=1;break}}return l}),L.forEach(function(e){var t,n,a,o,f,h=-1,v=g(s,e),y=g(l,e),x=g(u,e),b=g(c,e),w=[];if(r&&0!==r.length)for(a=0;a<r.length;a+=1)void 0===e[r[a]]?w.push(r[a]):w.push(e[r[a]]);else w=["All"];for(t=w.join("/")+"_"+v.join("/")+"_"+y.join("/")+"_"+b.join("/")+"_"+x.join("/"),n=0;n<p.length;n+=1)if(p[n].key===t){h=n;break}-1===h&&(o={key:t,aggField:w,xField:v,xValue:null,xCount:0,yField:y,yValue:null,yCount:0,pField:b,pValue:null,pCount:0,zField:x,zValue:null,zCount:0,cValue:0,cCount:0,x:0,y:0,xOffset:0,yOffset:0,width:0,height:0,cx:0,cy:0,xBound:0,yBound:0,xValueList:[],yValueList:[],zValueList:[],pValueList:[],cValueList:[],fill:{},stroke:{}},p.push(o),h=p.length-1),f=function(t,n){var r,a,o=!0,s={value:0,count:1},l={value:0,count:1},u="";null!==n&&(r=n.getFrameValue(),n.categoryFields.forEach(function(t,n){n>0&&(u+="/"),u+=e[t],o=u===r},this)),null!==t&&void 0!==t&&o&&(a=p[h],t._hasMeasure()&&null!==e[t.measure]&&void 0!==e[t.measure]&&(-1===a[t.position+"ValueList"].indexOf(e[t.measure])&&a[t.position+"ValueList"].push(e[t.measure]),isNaN(parseFloat(e[t.measure]))&&(m[t.position]=!0),s.value=a[t.position+"Value"],s.count=a[t.position+"Count"],l.value=e[t.measure],a[t.position+"Value"]=i(s,l),a[t.position+"Count"]+=1))},f(s,this.storyboard),f(l,this.storyboard),f(u,this.storyboard),f(c,this.storyboard),f(d,this.storyboard)},this),s&&s._hasCategories()&&s.categoryFields.length>1&&void 0!==v.x&&(E=[],l._hasMeasure()&&E.push({ordering:l.measure,desc:!0}),v.x=t._getOrderedList(L,s.categoryFields[1],s._groupOrderRules.concat(E))),l&&l._hasCategories()&&l.categoryFields.length>1&&void 0!==v.y&&(E=[],s._hasMeasure()&&E.push({ordering:s.measure,desc:!0}),v.y=t._getOrderedList(L,l.categoryFields[1],l._groupOrderRules.concat(E)),v.y.reverse()),p.forEach(function(e){null!==s&&(m.x===!0&&(e.xValue=e.xValueList.length),f=s._hasMeasure()&&s._hasCategories()?(y.x[e.xField.join("/")]||0)+(s._hasMeasure()?Math.abs(e.xValue):0):(y.x[e.xField.join("/")]||0)+(l._hasMeasure()?Math.abs(e.yValue):0),y.x[e.xField.join("/")]=f),null!==l&&(m.y===!0&&(e.yValue=e.yValueList.length),f=l._hasMeasure()&&l._hasCategories()?(y.y[e.yField.join("/")]||0)+(l._hasMeasure()?Math.abs(e.yValue):0):(y.y[e.yField.join("/")]||0)+(s._hasMeasure()?Math.abs(e.xValue):0),y.y[e.yField.join("/")]=f),null!==c&&(m.p===!0&&(e.pValue=e.pValueList.length),f=(y.p[e.pField.join("/")]||0)+(c._hasMeasure()?Math.abs(e.pValue):0),y.p[e.pField.join("/")]=f),null!==u&&(m.z===!0&&(e.zValue=e.zValueList.length),f=(y.z[e.zField.join("/")]||0)+(u._hasMeasure()?Math.abs(e.zValue):0),y.z[e.zField.join("/")]=f),null!==d&&((null===x.min||e.cValue<x.min)&&(x.min=e.cValue),(null===x.max||e.cValue>x.max)&&(x.max=e.cValue))},this);for(h in y.x)y.x.hasOwnProperty(h)&&(A.x+=y.x[h]);for(h in y.y)y.y.hasOwnProperty(h)&&(A.y+=y.y[h]);for(h in y.p)y.p.hasOwnProperty(h)&&(A.p+=y.p[h]);for(h in y.z)y.z.hasOwnProperty(h)&&(A.z+=y.z[h]);return p.forEach(function(t){var n,r,i,a,f,h=function(e,n,r){var i,a,s,l,u;null!==e&&void 0!==e&&(l=e.position,e._hasCategories()?e._hasMeasure()?(i=t[e.position+"Field"].join("/"),a=e.showPercent?y[e.position][i]/A[e.position]:y[e.position][i],-1===w.indexOf(i)&&(I[i]=a+(w.length>0?I[w[w.length-1]]:0),w.push(i)),s=t[l+"Bound"]=t["c"+l]="x"!==l&&"y"!==l||!o?a:I[i],t[r]=a,t[l]=s-("x"===l&&a>=0||"y"===l&&0>=a?a:0)):(t[l]=t["c"+l]=t[l+"Field"][0],t[r]=1,void 0!==v[l]&&null!==v[l]&&v[l].length>=2&&(t[l+"Offset"]=v[l].indexOf(t[l+"Field"][1]),t[r]=1/v[l].length)):(a=e.showPercent?t[l+"Value"]/y[n][t[n+"Field"].join("/")]:t[l+"Value"],i=t[n+"Field"].join("/")+(t[l+"Value"]>=0),u=b[l][i]=(null===b[l][i]||void 0===b[l][i]||"z"===l||"p"===l?0:b[l][i])+a,s=t[l+"Bound"]=t["c"+l]="x"!==l&&"y"!==l||!o?a:u,t[r]=a,t[l]=s-("x"===l&&a>=0||"y"===l&&0>=a?a:0)))};h(s,"y","width"),h(l,"x","height"),h(u,"z","r"),h(c,"p","angle"),null!==d&&null!==x.min&&null!==x.max&&(x.min===x.max&&(x.min-=.5,x.max+=.5),x.min=d.overrideMin||x.min,x.max=d.overrideMax||x.max,t.cValue=t.cValue>x.max?x.max:t.cValue<x.min?x.min:t.cValue,i=e.scale.linear().range([0,null===d.colors||1===d.colors.length?1:d.colors.length-1]).domain([x.min,x.max]),a=i(t.cValue),f=a-Math.floor(a),t.cValue===x.max&&(f=1),d.colors&&1===d.colors.length?(n=e.rgb(d.colors[0]),r=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)):d.colors&&d.colors.length>1?(n=e.rgb(d.colors[Math.floor(a)]),r=e.rgb(d.colors[Math.ceil(a)])):(n=e.rgb("white"),r=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)),n.r=Math.floor(n.r+(r.r-n.r)*f),n.g=Math.floor(n.g+(r.g-n.g)*f),n.b=Math.floor(n.b+(r.b-n.b)*f),t.fill=n.toString(),t.stroke=n.darker(.5).toString())},this),p},this._getDelay=function(e,n,r){return function(i){var a=0;return r&&n.staggerDraw&&(r.x._hasCategories()?a=t._helpers.cx(i,n,r)/n._widthPixels()*e:r.y._hasCategories()&&(a=(1-t._helpers.cy(i,n,r)/n._heightPixels())*e)),a}},this._getSeriesData=function(){null!==this.series&&void 0!==this.series&&this.series.forEach(function(e){var t,n,r,i,a,o,s=e.data||this.data||[],l=[].concat(e.categoryFields||"All"),u=this._getData(s,l,e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),c=[],d={},f=e.startAngle*(Math.PI/180)||0,h=(e.endAngle||360)*(Math.PI/180);if(f>h&&(f-=2*Math.PI),e.p&&l.length>0){if(e.x&&e.y){for(l.pop(),c=this._getData(s,["__dimple_placeholder__"].concat(l),e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),t=0;t<u.length;t+=1)for(r=["__dimple_placeholder__"].concat(u[t].aggField),r.pop(),e.x&&e.x._hasCategories()&&(r=r.concat(u[t].xField)),e.y&&e.y._hasCategories()&&(r=r.concat(u[t].yField)),i=r.join("|"),n=0;n<c.length;n+=1)if(a=[].concat(c[n].aggField),e.x&&e.x._hasCategories()&&(a=a.concat(c[n].xField)),e.y&&e.y._hasCategories()&&(a=a.concat(c[n].yField)),o=a.join("|"),i===o){u[t].xField=c[n].xField,u[t].xValue=c[n].xValue,u[t].xCount=c[n].xCount,u[t].yField=c[n].yField,u[t].yValue=c[n].yValue,u[t].yCount=c[n].yCount,u[t].zField=c[n].zField,u[t].zValue=c[n].zValue,u[t].zCount=c[n].zCount,u[t].x=c[n].x,u[t].y=c[n].y,u[t].r=c[n].r,u[t].xOffset=c[n].xOffset,u[t].yOffset=c[n].yOffset,u[t].width=c[n].width,u[t].height=c[n].height,u[t].cx=c[n].cx,u[t].cy=c[n].cy,u[t].xBound=c[n].xBound,u[t].yBound=c[n].yBound,u[t].xValueList=c[n].xValueList,u[t].yValueList=c[n].yValueList,u[t].zValueList=c[n].zValueList,u[t].cValueList=c[n].cValueList,u[t].pieKey=c[n].key,u[t].value=u.pValue,d[c[n].key]||(d[c[n].key]={total:0,angle:f}),d[c[n].key].total+=u[t].pValue;break}}else for(t=0;t<u.length;t+=1)u[t].pieKey="All",u[t].value=u.pValue,d[u[t].pieKey]||(d[u[t].pieKey]={total:0,angle:f}),d[u[t].pieKey].total+=u[t].pValue;for(t=0;t<u.length;t+=1)u[t].piePct=u[t].pValue/d[u[t].pieKey].total,u[t].startAngle=d[u[t].pieKey].angle,u[t].endAngle=u[t].startAngle+u[t].piePct*(h-f),d[u[t].pieKey].angle=u[t].endAngle}e._positionData=u},this)},this._handleTransition=function(e,t,n,r){var i=null;return i=0===t?e:e.transition().duration(t).delay(n._getDelay(t,n,r)).ease(n.ease)},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this._registerEventHandlers=function(n){null!==n._eventHandlers&&n._eventHandlers.length>0&&n._eventHandlers.forEach(function(r){var i,a=function(i){var a=new t.eventArgs;null!==n.chart.storyboard&&(a.frameValue=n.chart.storyboard.getFrameValue()),a.seriesValue=i.aggField,a.xValue=i.x,a.yValue=i.y,a.zValue=i.z,a.pValue=i.p,a.colorValue=i.cValue,a.seriesShapes=n.shapes,a.selectedShape=e.select(this),r.handler(a)};if(null!==r.handler&&"function"==typeof r.handler)if(null!==n._markers&&void 0!==n._markers)for(i in n._markers)n._markers.hasOwnProperty(i)&&n._markers[i].on(r.event,a);else n.shapes.on(r.event,a)},this)},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this.addAxis=function(e,n,r,i){var a=null,o=null;if(null!==n&&void 0!==n&&(n=[].concat(n)),"string"==typeof e||e instanceof String)a=new t.axis(this,e,n,r,i),this.axes.push(a);else{if(o=e,a=new t.axis(this,o.position,n,r,i),a._hasMeasure()!==o._hasMeasure())throw"You have specified a composite axis where some but not all axes have a measure - this is not supported, all axes must be of the same type.";if(a._hasTimeField()!==o._hasTimeField())throw"You have specified a composite axis where some but not all axes have a time field - this is not supported, all axes must be of the same type.";if((null===a.categoryFields||void 0===a.categoryFields?0:a.categoryFields.length)!==(null===o.categoryFields||void 0===o.categoryFields?0:o.categoryFields.length))throw"You have specified a composite axis where axes have differing numbers of category fields - this is not supported, all axes must be of the same type.";o._slaves.push(a)}return a},this.addCategoryAxis=function(e,t){return this.addAxis(e,t,null)},this.addColorAxis=function(e,t){var n=this.addAxis("c",null,e);return n.colors=null===t||void 0===t?null:[].concat(t),n},this.addLegend=function(e,n,r,i,a,o){o=null===o||void 0===o?this.series:[].concat(o),a=null===a||void 0===a?"left":a;var s=new t.legend(this,e,n,r,i,a,o);return this.legends.push(s),s},this.addLogAxis=function(e,t,n){var r=this.addAxis(e,null,t,null);return null!==n&&void 0!==n&&(r.logBase=n),r.useLog=!0,r},this.addMeasureAxis=function(e,t){return this.addAxis(e,null,t)},this.addPctAxis=function(e,t,n){var r=null;return r=null!==n&&void 0!==n?this.addAxis(e,n,t):this.addMeasureAxis(e,t),r.showPercent=!0,r},this.addSeries=function(e,n,r){(null===r||void 0===r)&&(r=this.axes),(null===n||void 0===n)&&(n=t.plot.bubble);var i,a=null,o=null,s=null,l=null,u=null;return r.forEach(function(e){null!==e&&n.supportedAxes.indexOf(e.position)>-1&&(null===a&&"x"===e.position[0]?a=e:null===o&&"y"===e.position[0]?o=e:null===s&&"z"===e.position[0]?s=e:null===l&&"c"===e.position[0]?l=e:null===l&&"p"===e.position[0]&&(u=e))},this),e&&(e=[].concat(e)),i=new t.series(this,e,a,o,s,l,u,n,t.aggregateMethod.sum,n.stacked),this.series.push(i),i},this.addTimeAxis=function(e,t,n,r){var i=this.addAxis(e,null,null,t);return i.tickFormat=r,i.dateParseFormat=n,i},this.assignClass=function(e,t){return this._assignedClasses[e]=t,this._assignedClasses[e]},this.assignColor=function(e,n,r,i){return this._assignedColors[e]=new t.color(n,r,i),this._assignedColors[e]},this.customClassList={axisLine:"dimple-custom-axis-line",axisLabel:"dimple-custom-axis-label",axisTitle:"dimple-custom-axis-title",tooltipBox:"dimple-custom-tooltip-box",tooltipLabel:"dimple-custom-tooltip-label",tooltipDropLine:"dimple-custom-tooltip-dropline",lineMarker:"dimple-custom-line-marker",lineMarkerCircle:"dimple-custom-line-marker-circle",legendLabel:"dimple-custom-legend-label",legendKey:"dimple-custom-legend-key",areaSeries:"dimple-custom-series-area",barSeries:"dimple-custom-series-bar",bubbleSeries:"dimple-custom-series-bubble",lineSeries:"dimple-custom-series-line",pieSeries:"dimple-custom-series-pie",gridline:"dimple-custom-gridline",colorClasses:["dimple-custom-format-1","dimple-custom-format-2","dimple-custom-format-3","dimple-custom-format-4","dimple-custom-format-5","dimple-custom-format-6","dimple-custom-format-7","dimple-custom-format-8","dimple-custom-format-9","dimple-custom-format-10"]},this.defaultColors=[new t.color("#80B1D3"),new t.color("#FB8072"),new t.color("#FDB462"),new t.color("#B3DE69"),new t.color("#FFED6F"),new t.color("#BC80BD"),new t.color("#8DD3C7"),new t.color("#CCEBC5"),new t.color("#FFFFB3"),new t.color("#BEBADA"),new t.color("#FCCDE5"),new t.color("#D9D9D9")],this.draw=function(t,n){t=t||0;var r,i,a=null,o=null,s=!1,l=!1,u=this._xPixels(),c=this._yPixels(),d=this._widthPixels(),f=this._heightPixels();return(void 0===n||null===n||n===!1)&&this._getSeriesData(),this.axes.forEach(function(e){e._scale=null},this),this.axes.forEach(function(e){if(e._min=0,e._max=0,i=[],e._hasMeasure()){var t=!1;this.series.forEach(function(n){if(n._deepMatch(e)){var r=n._axisBounds(e.position);e._min>r.min&&(e._min=r.min),e._max<r.max&&(e._max=r.max),t=!0}},this),t||this._getAllData().forEach(function(t){
e._min>t[e.measure]&&(e._min=t[e.measure]),e._max<t[e.measure]&&(e._max=t[e.measure])},this)}else e._hasTimeField()?(e._min=null,e._max=null,this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].timeField&&void 0!==t[e.position].timeField&&-1===i.indexOf(t[e.position].timeField)&&i.push(t[e.position].timeField)},this),e._getAxisData().forEach(function(t){i.forEach(function(n){var r=e._parseDate(t[n]);(null===e._min||r<e._min)&&(e._min=r),(null===e._max||r>e._max)&&(e._max=r)},this)},this)):e._hasCategories()&&(e._min=0,r=[],this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].categoryFields[0]&&void 0!==t[e.position].categoryFields[0]&&-1===i.indexOf(t[e.position].categoryFields[0])&&i.push(t[e.position].categoryFields[0])},this),e._getAxisData().forEach(function(e){i.forEach(function(t){-1===r.indexOf(e[t])&&r.push(e[t])},this)},this),e._max=r.length);null!==e._slaves&&void 0!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(t){t._min=e._min,t._max=e._max},this),e._update(),null===a&&"x"===e.position?a=e:null===o&&"y"===e.position&&(o=e)},this),this.axes.forEach(function(n){var r=!1,i=null,h=0,p=null,g=!1,m=0,v={l:null,t:null,r:null,b:null},y=0,x=0,b="",w=this,I=function(e){var n;return n=null===i||0===t||r?e:w._handleTransition(e,t,w)},A=function(){var t=e.select(this).selectAll("text");return!n.measure&&n._max>0&&("x"===n.position?t.attr("x",d/n._max/2):"y"===n.position&&t.attr("y",-1*(f/n._max)/2)),n.categoryFields&&n.categoryFields.length>0&&(n!==a||null!==o.categoryFields&&0!==o.categoryFields.length||t.attr("y",c+f-o._scale(0)+9),n!==o||null!==a.categoryFields&&0!==a.categoryFields.length||t.attr("x",-1*(a._scale(0)-u)-9)),this},C=function(t){return function(){var n=e.select(this).attr("class")||"";return-1===n.indexOf(t)&&(n+=" "+t),n.trim()}};null===n.gridlineShapes?(n.showGridlines||null===n.showGridlines&&!n._hasCategories()&&(!s&&"x"===n.position||!l&&"y"===n.position))&&(n.gridlineShapes=this._group.append("g").attr("class","dimple-gridline"),"x"===n.position?s=!0:l=!0):"x"===n.position?s=!0:l=!0,null===n.shapes&&(n.shapes=this._group.append("g").attr("class","dimple-axis dimple-axis-"+n.position).each(function(){w.noFormats||e.select(this).style("font-family",n.fontFamily).style("font-size",n._getFontSize())}),r=!0),n===a&&null!==o?(i="translate(0, "+(null===o.categoryFields||0===o.categoryFields.length?o._scale(0):c+f)+")",p="translate(0, "+(n===a?c+f:c)+")",h=-f):n===o&&null!==a?(i="translate("+(null===a.categoryFields||0===a.categoryFields.length?a._scale(0):u)+", 0)",p="translate("+(n===o?u:u+d)+", 0)",h=-d):"x"===n.position?(p=i="translate(0, "+(n===a?c+f:c)+")",h=-f):"y"===n.position&&(p=i="translate("+(n===o?u:u+d)+", 0)",h=-d),null!==i&&null!==n._draw&&(n._hasTimeField()?I(n.shapes).call(n._draw.ticks(n._getTimePeriod(),n.timeInterval).tickFormat(n._getFormat())).attr("transform",i).each(A):n.useLog?I(n.shapes).call(n._draw.ticks(4,n._getFormat())).attr("transform",i).each(A):I(n.shapes).call(n._draw.tickFormat(n._getFormat())).attr("transform",i).each(A),null!==n.gridlineShapes&&I(n.gridlineShapes).call(n._draw.tickSize(h,0,0).tickFormat("")).attr("transform",p)),I(n.shapes.selectAll("text")).attr("class",C(w.customClassList.axisLabel)).call(function(){w.noFormats||this.style("font-family",n.fontFamily).style("font-size",n._getFontSize())}),I(n.shapes.selectAll("path, line")).attr("class",C(w.customClassList.axisLine)).call(function(){w.noFormats||this.style("fill","none").style("stroke","black").style("shape-rendering","crispEdges")}),null!==n.gridlineShapes&&I(n.gridlineShapes.selectAll("line")).attr("class",C(w.customClassList.gridline)).call(function(){w.noFormats||this.style("fill","none").style("stroke","lightgray").style("opacity",.8)}),(null===n.measure||void 0===n.measure)&&(n.autoRotateLabel?n===a?(m=0,n.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();m=e>m?e:m}),m>d/n.shapes.selectAll("text")[0].length?(g=!0,n.shapes.selectAll("text").style("text-anchor","start").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+t.x+","+(t.y+t.height/2)+") translate(-5, 0)")})):(g=!1,n.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):"x"===n.position&&(m=0,n.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();m=e>m?e:m}),m>d/n.shapes.selectAll("text")[0].length?(g=!0,n.shapes.selectAll("text").style("text-anchor","end").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+(t.x+t.width)+","+(t.y+t.height/2)+") translate(5, 0)")})):(g=!1,n.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):(g=!1,n.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))),null!==n.titleShape&&void 0!==n.titleShape&&n.titleShape.remove(),n.shapes.selectAll("text").each(function(){var e=this.getBBox();(null===v.l||-9-e.width<v.l)&&(v.l=-9-e.width),(null===v.r||e.x+e.width>v.r)&&(v.r=e.x+e.width),g?((null===v.t||e.y+e.height-e.width<v.t)&&(v.t=e.y+e.height-e.width),(null===v.b||e.height+e.width>v.b)&&(v.b=e.height+e.width)):((null===v.t||e.y<v.t)&&(v.t=e.y),(null===v.b||9+e.height>v.b)&&(v.b=9+e.height))}),"x"===n.position?(x=n===a?c+f+v.b+5:c+v.t-10,y=u+d/2):"y"===n.position&&(y=n===o?u+v.l-10:u+d+v.r+20,x=c+f/2,b="rotate(270, "+y+", "+x+")"),n.hidden||"x"!==n.position&&"y"!==n.position||null===n.title||(n.titleShape=this._group.append("text").attr("class","dimple-axis dimple-title "+w.customClassList.axisTitle+" dimple-axis-"+n.position),n.titleShape.attr("x",y).attr("y",x).attr("text-anchor","middle").attr("transform",b).text(void 0!==n.title?n.title:null===n.categoryFields||void 0===n.categoryFields||0===n.categoryFields.length?n.measure:n.categoryFields.join("/")).each(function(){w.noFormats||e.select(this).style("font-family",n.fontFamily).style("font-size",n._getFontSize())}),n===a?n.titleShape.each(function(){e.select(this).attr("y",x+this.getBBox().height/1.65)}):n===o&&n.titleShape.each(function(){e.select(this).attr("x",y+this.getBBox().height/1.65)}))},this),this.series.forEach(function(e){e.plot.draw(this,e,t),this._registerEventHandlers(e)},this),this.legends.forEach(function(e){e._draw()},this),this.storyboard&&(this.storyboard._drawText(),this.storyboard.autoplay&&this.storyboard.startAnimation()),this},this.getClass=function(e){return this._assignedClasses[e]||(this._assignedClasses[e]=this.customClassList.colorClasses[this._nextClass],this._nextClass=(this._nextClass+1)%this.customClassList.colorClasses.length),this._assignedClasses[e]},this.getColor=function(e){return(null===this._assignedColors[e]||void 0===this._assignedColors[e])&&(this._assignedColors[e]=this.defaultColors[this._nextColor],this._nextColor=(this._nextColor+1)%this.defaultColors.length),this._assignedColors[e]},this.setBounds=function(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this.draw(0,!0),this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this},this.setMargins=function(e,n,r,i){return this.x=e,this.y=n,this.width=0,this.height=0,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parentWidth(this.svg.node())-this._xPixels()-t._parseXPosition(r,this.svg.node())},this._heightPixels=function(){return t._parentHeight(this.svg.node())-this._yPixels()-t._parseYPosition(i,this.svg.node())},this},this.setStoryboard=function(e,n){return this.storyboard=new t.storyboard(this,e),null!==n&&void 0!==n&&(this.storyboard.onTick=n),this.storyboard}},t.color=function(t,n,r){this.fill=t,this.stroke=null===n||void 0===n?e.rgb(t).darker(.5).toString():n,this.opacity=null===r||void 0===r?.8:r},t.eventArgs=function(){this.seriesValue=null,this.xValue=null,this.yValue=null,this.zValue=null,this.pValue=null,this.colorValue=null,this.frameValue=null,this.seriesShapes=null,this.selectedShape=null},t.legend=function(n,r,i,a,o,s,l){this.chart=n,this.series=l,this.x=r,this.y=i,this.width=a,this.height=o,this.horizontalAlign=s,this.shapes=null,this.fontSize="10px",this.fontFamily="sans-serif",this._draw=function(){var n,r=this._getEntries(),i=0,a=0,o=0,s=0,l=15,u=9,c=5,d=this;this.shapes&&this.shapes.remove(),n=this.chart._group.selectAll(".dimple-dont-select-any").data(r).enter().append("g").attr("class",function(e){return"dimple-legend "+t._createClass(e.aggField)}).attr("opacity",1),n.append("text").attr("class",function(e){return"dimple-legend dimple-legend-text "+t._createClass(e.aggField)+" "+d.chart.customClassList.legendLabel}).text(function(e){return e.key}).call(function(){d.chart.noFormats||this.style("font-family",d.fontFamily).style("font-size",d._getFontSize()).style("shape-rendering","crispEdges")}).each(function(){var e=this.getBBox();e.width>i&&(i=e.width),e.height>a&&(a=e.height)}),n.append("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)}).attr("height",u).attr("width",l),a=(u>a?u:a)+d._getVerticalPadding(),i+=l+d._getHorizontalPadding(),n.each(function(n){o+i>d._widthPixels()&&(o=0,s+=a),s>d._heightPixels()?e.select(this).remove():(e.select(this).select("text").attr("x","left"===d.horizontalAlign?d._xPixels()+l+c+o:d._xPixels()+(d._widthPixels()-o-i)+l+c).attr("y",function(){return d._yPixels()+s+this.getBBox().height/1.65}).attr("width",d._widthPixels()).attr("height",d._heightPixels()),e.select(this).select("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)+" "+d.chart.customClassList.legendKey+" "+e.css}).attr("x","left"===d.horizontalAlign?d._xPixels()+o:d._xPixels()+(d._widthPixels()-o-i)).attr("y",d._yPixels()+s).attr("height",u).attr("width",l).call(function(){d.chart.noFormats||this.style("fill",n.fill).style("stroke",n.stroke).style("opacity",n.opacity).style("shape-rendering","crispEdges")}),o+=i)}),this.shapes=n},this._getEntries=function(){var e=[];return this.series&&this.series.forEach(function(t){var n=t._positionData;n.forEach(function(n){var r,i=-1,a=t.plot.grouped&&!t.x._hasCategories()&&!t.y._hasCategories()&&n.aggField.length<2?"All":n.aggField.slice(-1)[0];for(r=0;r<e.length;r+=1)if(e[r].key===a){i=r;break}-1===i&&t.chart._assignedColors[a]&&(e.push({key:a,fill:t.chart._assignedColors[a].fill,stroke:t.chart._assignedColors[a].stroke,opacity:t.chart._assignedColors[a].opacity,css:t.chart._assignedClasses[a],series:t,aggField:n.aggField}),i=e.length-1)})},this),e},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getHorizontalPadding=function(){var e;return e=isNaN(this.horizontalPadding)?20:this.horizontalPadding},this._getVerticalPadding=function(){var e;return e=isNaN(this.verticalPadding)?2:this.verticalPadding},this._heightPixels=function(){return t._parseYPosition(this.height,this.chart.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.chart.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.chart.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.chart.svg.node())}},t.series=function(e,t,n,r,i,a,o,s,l,u){this.chart=e,this.x=n,this.y=r,this.z=i,this.c=a,this.p=o,this.plot=s,this.categoryFields=t,this.aggregate=l,this.stacked=u,this.barGap=.2,this.clusterBarGap=.1,this.lineWeight=2,this.lineMarkers=!1,this.afterDraw=null,this.interpolation="linear",this.tooltipFontSize="10px",this.tooltipFontFamily="sans-serif",this.radius="auto",this._eventHandlers=[],this._positionData=[],this._orderRules=[],this._axisBounds=function(e){var t,n,r,i={min:0,max:0},a=null,o=null,s=[],l=0,u=this._positionData;return"x"===e?(a=this.x,o=this.y):"y"===e?(a=this.y,o=this.x):"z"===e?a=this.z:"p"===e?a=this.p:"c"===e&&(a=this.c),a.showPercent?u.forEach(function(e){e[a.position+"Bound"]<i.min&&(i.min=e[a.position+"Bound"]),e[a.position+"Bound"]>i.max&&(i.max=e[a.position+"Bound"])},this):null===o||null===o.categoryFields||0===o.categoryFields.length?u.forEach(function(e){!this._isStacked()||"x"!==a.position&&"y"!==a.position?(e[a.position+"Value"]<i.min&&(i.min=e[a.position+"Value"]),e[a.position+"Value"]>i.max&&(i.max=e[a.position+"Value"])):e[a.position+"Value"]<0?i.min=i.min+e[a.position+"Value"]:i.max=i.max+e[a.position+"Value"]},this):(t=a.position+"Value",n=o.position+"Field",r=[],u.forEach(function(e){var i=e[n].join("/"),a=r.indexOf(i);-1===a&&(r.push(i),a=r.length-1),void 0===s[a]&&(s[a]={min:0,max:0},a>=l&&(l=a+1)),this.stacked?e[t]<0?s[a].min=s[a].min+e[t]:s[a].max=s[a].max+e[t]:(e[t]<s[a].min&&(s[a].min=e[t]),e[t]>s[a].max&&(s[a].max=e[t]))},this),s.forEach(function(e){void 0!==e&&(e.min<i.min&&(i.min=e.min),e.max>i.max&&(i.max=e.max))},this)),i},this._deepMatch=function(e){var t=!1;return this[e.position]===e?t=!0:void 0!==e._slaves&&null!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(e){t=t||this._deepMatch(e)},this),t},this._dropLineOrigin=function(){var e=0,t=0,n={x:null,y:null},r={x:null,y:null};return this.chart.axes.forEach(function(e){"x"===e.position&&null===r.x?e._hasTimeField()?r.x=this.chart._xPixels():r.x=e._origin:"y"===e.position&&null===r.y&&(e._hasTimeField()?r.y=this.chart._yPixels()+this.chart._heightPixels():r.y=e._origin)},this),this.chart.axes.forEach(function(i){"x"!==i.position||this.x.hidden?"y"!==i.position||this.y.hidden||(this._deepMatch(i)&&(0===t?n.x=r.x:1===t&&(n.x=this.chart._xPixels()+this.chart._widthPixels())),t+=1):(this._deepMatch(i)&&(0===e?n.y=r.y:1===e&&(n.y=this.chart._yPixels())),e+=1)},this),n},this._getTooltipFontSize=function(){var e;return e=this.tooltipFontSize&&"auto"!==this.tooltipFontSize.toString().toLowerCase()?isNaN(this.tooltipFontSize)?this.tooltipFontSize:this.tooltipFontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._isStacked=function(){return this.stacked&&(this.x._hasCategories()||this.y._hasCategories())},this.addEventHandler=function(e,t){this._eventHandlers.push({event:e,handler:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getTooltipText=function(e){var t=[];return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0&&this.categoryFields.forEach(function(n,r){null!==n&&void 0!==n&&null!==e.aggField[r]&&void 0!==e.aggField[r]&&t.push(n+(e.aggField[r]!==n?": "+e.aggField[r]:""))},this),this.p?(this.x&&this.x._hasCategories()&&this.x._getTooltipText(t,e),this.y&&this.y._hasCategories()&&this.y._getTooltipText(t,e),this.z&&this.z._hasCategories()&&this.z._getTooltipText(t,e),this.p._getTooltipText(t,e)):(this.x&&this.x._getTooltipText(t,e),this.y&&this.y._getTooltipText(t,e),this.z&&this.z._getTooltipText(t,e)),this.c&&this.c._getTooltipText(t,e),t.filter(function(e,n){return t.indexOf(e)===n})}},t.storyboard=function(e,t){null!==t&&void 0!==t&&(t=[].concat(t)),this.chart=e,this.categoryFields=t,this.autoplay=!0,this.frameDuration=3e3,this.storyLabel=null,this.onTick=null,this.fontSize="10px",this.fontFamily="sans-serif",this._frame=0,this._animationTimer=null,this._categories=[],this._cachedCategoryFields=[],this._orderRules=[],this._drawText=function(){if(!this.storyLabel){var e=this.chart,t=this,n=0;this.chart.axes.forEach(function(e){"x"===e.position&&(n+=1)},this),this.storyLabel=this.chart._group.append("text").attr("class","dimple-storyboard-label").attr("opacity",1).attr("x",this.chart._xPixels()+.01*this.chart._widthPixels()).attr("y",this.chart._yPixels()+(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)*(n>1?1.25:-1)).call(function(){e.noFormats||this.style("font-family",t.fontFamily).style("font-size",t._getFontSize())})}this.storyLabel.text(this.categoryFields.join("\\")+": "+this.getFrameValue())},this._getCategories=function(){return this._categoryFields!==this._cachedCategoryFields&&(this._categories=[],this.chart._getAllData().forEach(function(e){var t=-1,n="";null!==this.categoryFields&&(this.categoryFields.forEach(function(t,r){r>0&&(n+="/"),n+=e[t]},this),t=this._categories.indexOf(n),-1===t&&(this._categories.push(n),t=this._categories.length-1))},this),this._cachedCategoryFields=this._categoryFields),this._categories},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._goToFrameIndex=function(e){this._frame=e%this._getCategories().length,this.chart.draw(this.frameDuration/2)},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getFrameValue=function(){var e=null;return this._frame>=0&&this._getCategories().length>this._frame&&(e=this._getCategories()[this._frame]),e},this.goToFrame=function(e){if(this._getCategories().length>0){var t=this._getCategories().indexOf(e);this._goToFrameIndex(t)}},this.pauseAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null)},this.startAnimation=function(){null===this._animationTimer&&(null!==this.onTick&&this.onTick(this.getFrameValue()),this._animationTimer=window.setInterval(function(e){return function(){e._goToFrameIndex(e._frame+1),null!==e.onTick&&e.onTick(e.getFrameValue()),e._drawText(e.frameDuration/2)}}(this),this.frameDuration))},this.stopAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null,this._frame=0)}},t.aggregateMethod.avg=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),e.count=null===e.count||void 0===e.count?1:parseFloat(e.count),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),t.count=null===t.count||void 0===t.count?1:parseFloat(t.count),(e.value*e.count+t.value*t.count)/(e.count+t.count)},t.aggregateMethod.count=function(e,t){return e.count=null===e.count||void 0===e.count?0:parseFloat(e.count),t.count=null===t.count||void 0===t.count?0:parseFloat(t.count),e.count+t.count},t.aggregateMethod.max=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value>t.value?e.value:t.value},t.aggregateMethod.min=function(e,t){return null===e.value?parseFloat(t.value):parseFloat(e.value)<parseFloat(t.value)?parseFloat(e.value):parseFloat(t.value)},t.aggregateMethod.sum=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value+t.value},t.plot.area={stacked:!0,grouped:!0,supportedAxes:["x","y","c"],draw:function(n,r,i){var a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z=r._positionData,N=[],S=null,j="dimple-series-"+n.series.indexOf(r),D=r.x._hasCategories()||r.y._hasCategories()?0:1,T=!1,O={},L=[],E=[],B=function(){return function(n,r,i,a){e.select(r).style("opacity",1),t._showPointTooltip(n,r,i,a)}},F=function(n){return function(r,i,a,o){e.select(i).style("opacity",o.lineMarkers||n.data.length<2?t._helpers.opacity(r,a,o):0),t._removeTooltip(r,i,a,o)}},P=function(e,a){t._drawMarkers(e,n,r,i,j,T,B(e),F(e),a)},G=function(e,i){var a;return"step"===r.interpolation&&r[e]._hasCategories()?(a=t._helpers[e](i,n,r)+("y"===e?t._helpers.height(i,n,r):0),r[e].categoryFields.length<2&&(a+=("y"===e?1:-1)*t._helpers[e+"Gap"](n,r))):a=t._helpers["c"+e](i,n,r),parseFloat(a)},Z=function(t,n){return e.svg.line().x(function(e){return r.x._hasCategories()||!n?e.x:r.x[n]}).y(function(e){return r.y._hasCategories()||!n?e.y:r.y[n]}).interpolate(t)},R=function(e,t){return parseFloat(e)-parseFloat(t)},Y=function(e,t){return parseFloat(e.x)-parseFloat(t.x)},W=function(e,t,n){var r,i,a=t[t.length-1],o=9999,s=a;for(r=0;r<e.length;r+=1)(e[r].x!==a.x||e[r].y!==a.y)&&(i=180-Math.atan2(e[r].x-a.x,e[r].y-a.y)*(180/Math.PI),i>n&&o>i&&(s=e[r],o=i));return t.push(s),o};for(a="step"===r.interpolation?"step-after":r.interpolation,p=t._getSeriesOrder(r.data||n.data,r),r.c&&(r.x._hasCategories()&&r.y._hasMeasure()||r.y._hasCategories()&&r.x._hasMeasure())&&(T=!0),r.x._hasCategories()?(k="x",M="y"):r.y._hasCategories()&&(k="y",M="x"),o=0;o<z.length;o+=1){for(u=[],d=-1,l=D;l<z[o].aggField.length;l+=1)u.push(z[o].aggField[l]);for(c=t._createClass(u),l=0;l<N.length;l+=1)if(N[l].keyString===c){d=l;break}-1===d&&(d=N.length,N.push({key:u,keyString:c,color:"white",data:[],points:[],area:{},entry:{},exit:{},group:k&&z[o][k+"Field"]&&z[o][k+"Field"].length>=2?z[o][k+"Field"][0]:"All"})),N[d].data.push(z[o])}for(p&&N.sort(function(e,n){return t._arrayIndexCompare(p,e.key,n.key)}),o=0;o<N.length;o+=1){for(N[o].data.sort(t._getSeriesSortPredicate(n,r,p)),s=0;s<N[o].data.length;s+=1)N[o].points.push({x:G("x",N[o].data[s]),y:G("y",N[o].data[s])}),k&&(O[N[o].group]||(O[N[o].group]={}),O[N[o].group][N[o].points[N[o].points.length-1][k]]=r[M]._origin);g=N[o].points,"step"===r.interpolation&&g.length>1&&k&&(r.x._hasCategories()?(g.push({x:2*g[g.length-1].x-g[g.length-2].x,y:g[g.length-1].y}),O[N[o].group][g[g.length-1][k]]=r[M]._origin):r.y._hasCategories()&&(g=[{x:g[0].x,y:2*g[0].y-g[1].y}].concat(g),O[N[o].group][g[0][k]]=r[M]._origin,N[o].points=g))}for(y in O)if(O.hasOwnProperty(y)){L[y]=[];for(x in O[y])O[y].hasOwnProperty(x)&&L[y].push(parseFloat(x));L[y].sort(R)}for(o=0;o<N.length;o+=1){if(g=N[o].points,b=N[o].group,m=[],E=[],T&&t._addGradient(N[o].key,"fill-area-gradient-"+N[o].keyString,r.x._hasCategories()?r.x:r.y,z,n,i,"fill"),L[b]&&L[b].length>0)for(s=0,l=0;s<L[b].length;s+=1)L[b][s]>=g[0][k]&&L[b][s]<=g[g.length-1][k]&&(v={},v[k]=L[b][s],v[M]=O[b][L[b][s]],m.push(v),g[l][k]>L[b][s]?E.push(v):(E.push(g[l]),O[N[o].group][L[b][s]]=g[l][M],l+=1));else if(r._orderRules&&r._orderRules.length>0)E=g.concat(g[0]);else{g=g.sort(Y),E.push(g[0]),_=0;do _=W(g,E,_);while(E.length<=g.length&&(E[0].x!==E[E.length-1].x||E[0].y!==E[E.length-1].y))}m=m.reverse(),w=Z(a,"_previousOrigin")(E),I=Z("step-after"===a?"step-before":"step-before"===a?"step-after":a,"_previousOrigin")(m),A=Z("linear","_previousOrigin")(E),C=-1===A.indexOf("L")?void 0:A.indexOf("L"),N[o].entry=w+(I&&I.length>0?"L"+I.substring(1):"")+(A&&A.length>0?"L"+A.substring(1,C):0),w=Z(a)(E),I=Z("step-after"===a?"step-before":"step-before"===a?"step-after":a)(m),A=Z("linear")(E),C=-1===A.indexOf("L")?void 0:A.indexOf("L"),N[o].update=w+(I&&I.length>0?"L"+I.substring(1):"")+(A&&A.length>0?"L"+A.substring(1,C):0),w=Z(a,"_origin")(E),I=Z("step-after"===a?"step-before":"step-before"===a?"step-after":a,"_origin")(m),A=Z("linear","_origin")(E),C=-1===A.indexOf("L")?void 0:A.indexOf("L"),N[o].exit=w+(I&&I.length>0?"L"+I.substring(1):"")+(A&&A.length>0?"L"+A.substring(1,C):0),N[o].color=n.getColor(N[o].key.length>0?N[o].key[N[o].key.length-1]:"All"),N[o].css=n.getClass(N[o].key.length>0?N[o].key[N[o].key.length-1]:"All")}null!==n._tooltipGroup&&void 0!==n._tooltipGroup&&n._tooltipGroup.remove(),S=null===r.shapes||void 0===r.shapes?n._group.selectAll("."+j).data(N):r.shapes.data(N,function(e){return e.key}),S.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return j+" dimple-line "+e.keyString+" "+n.customClassList.areaSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(){n.noFormats||this.attr("opacity",function(e){return T?1:e.color.opacity}).style("fill",function(e){return T?"url(#"+t._createClass(["fill-area-gradient-"+e.keyString])+")":e.color.fill}).style("stroke",function(e){return T?"url(#"+t._createClass(["stroke-area-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",r.lineWeight)}).each(function(e){e.markerData=e.data,P(e,this)}),f=n._handleTransition(S,i,n).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,P(e,this)}),h=n._handleTransition(S.exit(),i,n).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],P(e,this)}),t._postDrawHandling(r,f,h,i),r.shapes=S}},t.plot.bar={stacked:!0,grouped:!1,supportedAxes:["x","y","c"],draw:function(e,n,r){var i,a,o=n._positionData,s=null,l=["dimple-series-"+e.series.indexOf(n),"dimple-bar"],u=!n._isStacked()&&n.x._hasMeasure(),c=!n._isStacked()&&n.y._hasMeasure(),d="none";n.x._hasCategories()&&n.y._hasCategories()?d="both":n.x._hasCategories()?d="x":n.y._hasCategories()&&(d="y"),null!==e._tooltipGroup&&void 0!==e._tooltipGroup&&e._tooltipGroup.remove(),s=null===n.shapes||void 0===n.shapes?e._group.selectAll("."+l.join(".")).data(o):n.shapes.data(o,function(e){return e.key}),s.enter().append("rect").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(n){var r=[];return r=r.concat(n.aggField),r=r.concat(n.xField),r=r.concat(n.yField),l.join(" ")+" "+t._createClass(r)+" "+e.customClassList.barSeries+" "+t._helpers.css(n,e)}).attr("x",function(r){var i=n.x._previousOrigin;return"x"===d?i=t._helpers.x(r,e,n):"both"===d&&(i=t._helpers.cx(r,e,n)),i}).attr("y",function(r){var i=n.y._previousOrigin;return"y"===d?i=t._helpers.y(r,e,n):"both"===d&&(i=t._helpers.cy(r,e,n)),i}).attr("width",function(r){return"x"===d?t._helpers.width(r,e,n):0}).attr("height",function(r){return"y"===d?t._helpers.height(r,e,n):0}).on("mouseover",function(r){t._showBarTooltip(r,this,e,n)}).on("mouseleave",function(r){t._removeTooltip(r,this,e,n)}).call(function(){e.noFormats||this.attr("opacity",function(r){return t._helpers.opacity(r,e,n)}).style("fill",function(r){return t._helpers.fill(r,e,n)}).style("stroke",function(r){return t._helpers.stroke(r,e,n)})}),i=e._handleTransition(s,r,e,n).attr("x",function(r){return u?t._helpers.cx(r,e,n)-n.x.floatingBarWidth/2:t._helpers.x(r,e,n)}).attr("y",function(r){return c?t._helpers.cy(r,e,n)-n.y.floatingBarWidth/2:t._helpers.y(r,e,n)}).attr("width",function(r){return u?n.x.floatingBarWidth:t._helpers.width(r,e,n)}).attr("height",function(r){return c?n.y.floatingBarWidth:t._helpers.height(r,e,n)}).call(function(){e.noFormats||this.attr("fill",function(r){return t._helpers.fill(r,e,n)}).attr("stroke",function(r){return t._helpers.stroke(r,e,n)})}),a=e._handleTransition(s.exit(),r,e,n).attr("x",function(r){var i=n.x._origin;return"x"===d?i=t._helpers.x(r,e,n):"both"===d&&(i=t._helpers.cx(r,e,n)),i}).attr("y",function(r){var i=n.y._origin;return"y"===d?i=t._helpers.y(r,e,n):"both"===d&&(i=t._helpers.cy(r,e,n)),i}).attr("width",function(r){return"x"===d?t._helpers.width(r,e,n):0}).attr("height",function(r){return"y"===d?t._helpers.height(r,e,n):0}),t._postDrawHandling(n,i,a,r),n.shapes=s}},t.plot.bubble={stacked:!1,grouped:!1,supportedAxes:["x","y","z","c"],draw:function(e,n,r){var i,a,o=n._positionData,s=null,l=["dimple-series-"+e.series.indexOf(n),"dimple-bubble"];null!==e._tooltipGroup&&void 0!==e._tooltipGroup&&e._tooltipGroup.remove(),s=null===n.shapes||void 0===n.shapes?e._group.selectAll("."+l.join(".")).data(o):n.shapes.data(o,function(e){return e.key}),s.enter().append("circle").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(n){var r=[];return r=r.concat(n.aggField),r=r.concat(n.xField),r=r.concat(n.yField),r=r.concat(n.zField),l.join(" ")+" "+t._createClass(r)+" "+e.customClassList.bubbleSeries+" "+t._helpers.css(n,e)}).attr("cx",function(r){return n.x._hasCategories()?t._helpers.cx(r,e,n):n.x._previousOrigin}).attr("cy",function(r){return n.y._hasCategories()?t._helpers.cy(r,e,n):n.y._previousOrigin}).attr("r",0).on("mouseover",function(r){t._showPointTooltip(r,this,e,n)}).on("mouseleave",function(r){t._removeTooltip(r,this,e,n)}).call(function(){e.noFormats||this.attr("opacity",function(r){return t._helpers.opacity(r,e,n)}).style("fill",function(r){return t._helpers.fill(r,e,n)}).style("stroke",function(r){return t._helpers.stroke(r,e,n)})}),i=e._handleTransition(s,r,e,n).attr("cx",function(r){return t._helpers.cx(r,e,n)}).attr("cy",function(r){return t._helpers.cy(r,e,n)}).attr("r",function(r){return t._helpers.r(r,e,n)}).call(function(){e.noFormats||this.attr("fill",function(r){return t._helpers.fill(r,e,n)}).attr("stroke",function(r){return t._helpers.stroke(r,e,n)})}),a=e._handleTransition(s.exit(),r,e,n).attr("r",0).attr("cx",function(r){return n.x._hasCategories()?t._helpers.cx(r,e,n):n.x._origin}).attr("cy",function(r){return n.y._hasCategories()?t._helpers.cy(r,e,n):n.y._origin}),t._postDrawHandling(n,i,a,r),n.shapes=s}},t.plot.line={stacked:!1,grouped:!0,supportedAxes:["x","y","c"],draw:function(n,r,i){var a,o,s,l,u,c,d,f,h,p,g=r._positionData,m=[],v=null,y="dimple-series-"+n.series.indexOf(r),x=r.x._hasCategories()||r.y._hasCategories()?0:1,b=!1,w=function(){return function(n,r,i,a){e.select(r).style("opacity",1),t._showPointTooltip(n,r,i,a)}},I=function(n){return function(r,i,a,o){e.select(i).style("opacity",o.lineMarkers||n.data.length<2?t._helpers.opacity(r,a,o):0),t._removeTooltip(r,i,a,o)}},A=function(e,a){t._drawMarkers(e,n,r,i,y,b,w(e),I(e),a)},C=function(e,i){var a;return"step"===r.interpolation&&r[e]._hasCategories()?(r.barGap=0,r.clusterBarGap=0,a=t._helpers[e](i,n,r)+("y"===e?t._helpers.height(i,n,r):0)):a=t._helpers["c"+e](i,n,r),parseFloat(a.toFixed(1))},_=function(t,n){return e.svg.line().x(function(e){return r.x._hasCategories()||!n?e.x:r.x[n]}).y(function(e){return r.y._hasCategories()||!n?e.y:r.y[n]}).interpolate(t)};for(a="step"===r.interpolation?"step-after":r.interpolation,p=t._getSeriesOrder(r.data||n.data,r),r.c&&(r.x._hasCategories()&&r.y._hasMeasure()||r.y._hasCategories()&&r.x._hasMeasure())&&(b=!0),o=0;o<g.length;o+=1){for(u=[],d=-1,l=x;l<g[o].aggField.length;l+=1)u.push(g[o].aggField[l]);for(c=t._createClass(u),l=0;l<m.length;l+=1)if(m[l].keyString===c){d=l;break}-1===d&&(d=m.length,m.push({key:u,keyString:c,color:"white",data:[],markerData:[],points:[],line:{},entry:{},exit:{}})),m[d].data.push(g[o])}for(p&&m.sort(function(e,n){return t._arrayIndexCompare(p,e.key,n.key)}),o=0;o<m.length;o+=1){for(m[o].data.sort(t._getSeriesSortPredicate(n,r,p)),b&&t._addGradient(m[o].key,"fill-line-gradient-"+m[o].keyString,r.x._hasCategories()?r.x:r.y,g,n,i,"fill"),s=0;s<m[o].data.length;s+=1)m[o].points.push({x:C("x",m[o].data[s]),y:C("y",m[o].data[s])});"step"===r.interpolation&&m[o].points.length>1&&(r.x._hasCategories()?m[o].points.push({x:2*m[o].points[m[o].points.length-1].x-m[o].points[m[o].points.length-2].x,y:m[o].points[m[o].points.length-1].y}):r.y._hasCategories()&&(m[o].points=[{x:m[o].points[0].x,y:2*m[o].points[0].y-m[o].points[1].y}].concat(m[o].points))),m&&m[o]&&m[o].points&&1===m[o].points.length&&m[o].points.push({x:m[o].points[0].x,y:m[o].points[0].y}),m[o].entry=_(a,"_previousOrigin")(m[o].points),m[o].update=_(a)(m[o].points),m[o].exit=_(a,"_origin")(m[o].points),m[o].color=n.getColor(m[o].key.length>0?m[o].key[m[o].key.length-1]:"All"),m[o].css=n.getClass(m[o].key.length>0?m[o].key[m[o].key.length-1]:"All")}null!==n._tooltipGroup&&void 0!==n._tooltipGroup&&n._tooltipGroup.remove(),v=null===r.shapes||void 0===r.shapes?n._group.selectAll("."+y).data(m):r.shapes.data(m,function(e){return e.key}),v.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return y+" dimple-line "+e.keyString+" "+n.customClassList.lineSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(){n.noFormats||this.attr("opacity",function(e){return b?1:e.color.opacity}).style("fill","none").style("stroke",function(e){return b?"url(#"+t._createClass(["fill-line-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",r.lineWeight)}).each(function(e){e.markerData=e.data,A(e,this)}),f=n._handleTransition(v,i,n).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,A(e,this)}),h=n._handleTransition(v.exit(),i,n).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],A(e,this)}),t._postDrawHandling(r,f,h,i),r.shapes=v}},t.plot.pie={stacked:!1,grouped:!1,supportedAxes:["x","y","c","z","p"],draw:function(n,r,i){var a,o,s=r._positionData,l=null,u=["dimple-series-"+n.series.indexOf(r),"dimple-pie"],c=function(e){var i;return i=r.x&&r.y?t._helpers.r(e,n,r):n._widthPixels()<n._heightPixels()?n._widthPixels()/2:n._heightPixels()/2},d=function(e){var n=c(e);return r.outerRadius&&(n=t._parsePosition(r.outerRadius,n)),Math.max(n,0)},f=function(e){var n=0;return r.innerRadius&&(n=t._parsePosition(r.innerRadius,c(e))),Math.max(n,0)},h=function(t){var n;return(n=e.svg.arc().innerRadius(f(t)).outerRadius(d(t)))(t);
},p=function(t){t.innerRadius=f(t),t.outerRadius=d(t);var n,r=e.interpolate(this._current,t);return n=e.svg.arc().innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}),this._current=r(0),function(e){return n(r(e))}},g=function(e){return function(i){var a,o;return r.x&&r.y?(a=!e||r.x._hasCategories()?t._helpers.cx(i,n,r):r.x._previousOrigin,o=!e||r.y._hasCategories()?t._helpers.cy(i,n,r):r.y._previousOrigin):(a=n._xPixels()+n._widthPixels()/2,o=n._yPixels()+n._heightPixels()/2),"translate("+a+","+o+")"}};null!==n._tooltipGroup&&void 0!==n._tooltipGroup&&n._tooltipGroup.remove(),l=null===r.shapes||void 0===r.shapes?n._group.selectAll("."+u.join(".")).data(s):r.shapes.data(s,function(e){return e.key}),l.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){var r=[];return r=r.concat(e.aggField),r=r.concat(e.pField),u.join(" ")+" "+t._createClass(r)+" "+n.customClassList.pieSeries+" "+t._helpers.css(e,n)}).attr("d",h).on("mouseover",function(e){t._showBarTooltip(e,this,n,r)}).on("mouseleave",function(e){t._removeTooltip(e,this,n,r)}).call(function(){n.noFormats||this.attr("opacity",function(e){return t._helpers.opacity(e,n,r)}).style("fill",function(e){return t._helpers.fill(e,n,r)}).style("stroke",function(e){return t._helpers.stroke(e,n,r)})}).attr("transform",g(!0)).each(function(e){this._current=e,e.innerRadius=f(e),e.outerRadius=d(e)}),a=n._handleTransition(l,i,n,r).call(function(){i&&i>0?this.attrTween("d",p):this.attr("d",h),n.noFormats||this.attr("fill",function(e){return t._helpers.fill(e,n,r)}).attr("stroke",function(e){return t._helpers.stroke(e,n,r)})}).attr("transform",g(!1)),o=n._handleTransition(l.exit(),i,n,r).attr("transform",g(!0)).attr("d",h),t._postDrawHandling(r,a,o,i),r.shapes=l}},t._addGradient=function(e,n,r,i,a,o,s){var l=[].concat(e),u=a.svg.select("#"+t._createClass([n])),c=[],d=r.position+"Field",f=!0,h=[];i.forEach(function(e){-1===c.indexOf(e[d])&&e.aggField.join("_")===l.join("_")&&c.push(e[d])},this),c=c.sort(function(e,t){return r._scale(e)-r._scale(t)}),null===u.node()&&(f=!1,u=a.svg.append("defs").append("linearGradient").attr("id",t._createClass([n])).attr("gradientUnits","userSpaceOnUse").attr("x1","x"===r.position?r._scale(c[0])+a._widthPixels()/c.length/2:0).attr("y1","y"===r.position?r._scale(c[0])-a._heightPixels()/c.length/2:0).attr("x2","x"===r.position?r._scale(c[c.length-1])+a._widthPixels()/c.length/2:0).attr("y2","y"===r.position?r._scale(c[c.length-1])-a._heightPixels()/c.length/2:0)),c.forEach(function(e,t){var n={},r=0;for(r=0;r<i.length;r+=1)if(i[r].aggField.join("_")===l.join("_")&&i[r][d].join("_")===e.join("_")){n=i[r];break}h.push({offset:Math.round(t/(c.length-1)*100)+"%",color:n[s]})},this),f?a._handleTransition(u.selectAll("stop").data(h),o,a).attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}):u.selectAll("stop").data(h).enter().append("stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color})},t._arrayIndexCompare=function(e,t,n){var r,i,a,o,s,l;for(i=0;i<e.length;i+=1){for(o=!0,s=!0,l=[].concat(e[i]),a=0;a<t.length;a+=1)o=o&&t[a]===l[a];for(a=0;a<n.length;a+=1)s=s&&n[a]===l[a];if(o&&s){r=0;break}if(o){r=-1;break}if(s){r=1;break}}return r},t._createClass=function(e){var t,n,r=[];if(n=function(e){var t=e.charCodeAt(0),n="-";return t>=65&&90>=t&&(n=e.toLowerCase()),n},e.length>0)for(t=0;t<e.length;t+=1)e[t]&&r.push("dimple-"+e[t].toString().replace(/[^a-z0-9]/g,n));else r=["dimple-all"];return r.join(" ")},t._drawMarkerBacks=function(n,r,i,a,o,s){var l,u,c,d=["dimple-marker-back",o,n.keyString];i.lineMarkers&&(l=null===i._markerBacks||void 0===i._markerBacks||void 0===i._markerBacks[n.keyString]?r._group.selectAll("."+d.join(".")).data(n.markerData):i._markerBacks[n.keyString].data(n.markerData,function(e){return e.key}),c=s.nextSibling&&s.nextSibling.id?l.enter().insert("circle","#"+s.nextSibling.id):l.enter().append("circle"),c.attr("id",function(e){return t._createClass([e.key+" Marker Back"])}).attr("class",function(e){var n=[];return i.x._hasCategories()&&(n=n.concat(e.xField)),i.y._hasCategories()&&(n=n.concat(e.yField)),t._createClass(n)+" "+d.join(" ")}).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._previousOrigin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._previousOrigin}).attr("r",0).attr("fill","white").attr("stroke","none"),r._handleTransition(l,a,r).attr("cx",function(e){return t._helpers.cx(e,r,i)}).attr("cy",function(e){return t._helpers.cy(e,r,i)}).attr("r",2+i.lineWeight),u=r._handleTransition(l.exit(),a,r).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._origin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._origin}).attr("r",0),0===a?u.remove():u.each("end",function(){e.select(this).remove()}),(void 0===i._markerBacks||null===i._markerBacks)&&(i._markerBacks={}),i._markerBacks[n.keyString]=l)},t._drawMarkers=function(n,r,i,a,o,s,l,u,c){var d,f,h,p=["dimple-marker",o,n.keyString];d=null===i._markers||void 0===i._markers||void 0===i._markers[n.keyString]?r._group.selectAll("."+p.join(".")).data(n.markerData):i._markers[n.keyString].data(n.markerData,function(e){return e.key}),h=c.nextSibling&&c.nextSibling.id?d.enter().insert("circle","#"+c.nextSibling.id):d.enter().append("circle"),h.attr("id",function(e){return t._createClass([e.key+" Marker"])}).attr("class",function(e){var n=[],a=r.getClass(e.aggField.length>0?e.aggField[e.aggField.length-1]:"All");return i.x._hasCategories()&&(n=n.concat(e.xField)),i.y._hasCategories()&&(n=n.concat(e.yField)),t._createClass(n)+" "+p.join(" ")+" "+r.customClassList.lineMarker+" "+a}).on("mouseover",function(e){l(e,this,r,i)}).on("mouseleave",function(e){u(e,this,r,i)}).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._previousOrigin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._previousOrigin}).attr("r",0).attr("opacity",i.lineMarkers||n.data.length<2?n.color.opacity:0).call(function(){r.noFormats||this.attr("fill","white").style("stroke-width",i.lineWeight).attr("stroke",function(e){return s?t._helpers.fill(e,r,i):n.color.stroke})}),r._handleTransition(d,a,r).attr("cx",function(e){return t._helpers.cx(e,r,i)}).attr("cy",function(e){return t._helpers.cy(e,r,i)}).attr("r",2+i.lineWeight).attr("opacity",i.lineMarkers||n.data.length<2?n.color.opacity:0).call(function(){r.noFormats||this.attr("fill","white").style("stroke-width",i.lineWeight).attr("stroke",function(e){return s?t._helpers.fill(e,r,i):n.color.stroke})}),f=r._handleTransition(d.exit(),a,r).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._origin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._origin}).attr("r",0),0===a?f.remove():f.each("end",function(){e.select(this).remove()}),(void 0===i._markers||null===i._markers)&&(i._markers={}),i._markers[n.keyString]=d,t._drawMarkerBacks(n,r,i,a,o,c)},t._getOrderedList=function(e,n,r){var i,a=[],o=[],s=[].concat(n),l=[].concat(n),u=[];return null!==r&&void 0!==r&&(u=u.concat(r)),u=u.concat({ordering:s,desc:!1}),u.forEach(function(t){var n,r=[],i=[];if("function"==typeof t.ordering){if(e&&e.length>0)for(n in e[0])e[0].hasOwnProperty(n)&&-1===l.indexOf(n)&&l.push(n)}else if(t.ordering instanceof Array){for(n=0;n<t.ordering.length;n+=1)e&&e.length>0&&e[0].hasOwnProperty(t.ordering[n])&&i.push(t.ordering[n]),r.push(t.ordering[n]);i.length>r.length/2?l.concat(i):t.values=r}else l.push(t.ordering)},this),i=t._rollUp(e,s,l),u.length>=1&&(u.forEach(function(e){var t=null===e.desc||void 0===e.desc?!1:e.desc,n=e.ordering,r=[],i=function(e){var t,n=0;for(t=0;t<e.length;t+=1){if(isNaN(e[t])){n=void 0;break}n+=parseFloat(e[t])}return n},o=function(e,t){var n=0,r=i(e),a=i(t);return isNaN(r)||isNaN(a)?isNaN(Date.parse(e[0]))||isNaN(Date.parse(t[0]))?e[0]<t[0]?n=-1:e[0]>t[0]&&(n=1):n=Date.parse(e[0])-Date.parse(t[0]):n=parseFloat(r)-parseFloat(a),n};"function"==typeof n?a.push(function(e,r){return(t?-1:1)*n(e,r)}):e.values&&e.values.length>0?(e.values.forEach(function(e){r.push([].concat(e).join("|"))},this),a.push(function(e,n){var i,a,o,l="",u="";for(o=0;o<s.length;o+=1)o>0&&(l+="|",u+="|"),l+=e[s[o]],u+=n[s[o]];return i=r.indexOf(l),a=r.indexOf(u),i=0>i?t?-1:r.length:i,a=0>a?t?-1:r.length:a,(t?-1:1)*(i-a)})):[].concat(e.ordering).forEach(function(e){a.push(function(n,r){var i=0;return void 0!==n[e]&&void 0!==r[e]&&(i=o([].concat(n[e]),[].concat(r[e]))),(t?-1:1)*i})})}),i.sort(function(e,t){for(var n=0,r=0;n<a.length&&0===r;)r=a[n](e,t),n+=1;return r}),i.forEach(function(e){var t,n=[];if(1===s.length)o.push(e[s[0]]);else{for(t=0;t<s.length;t+=1)n.push(e[s[t]]);o.push(n)}},this)),o},t._getSeriesOrder=function(e,n){var r=[].concat(n._orderRules),i=n.categoryFields,a=[];return null!==i&&void 0!==i&&i.length>0&&(null!==n.c&&void 0!==n.c&&n.c._hasMeasure()&&r.push({ordering:n.c.measure,desc:!0}),n.x._hasMeasure()&&r.push({ordering:n.x.measure,desc:!0}),n.y._hasMeasure()&&r.push({ordering:n.y.measure,desc:!0}),a=t._getOrderedList(e,i,r)),a},t._getSeriesSortPredicate=function(e,n,r){return function(i,a){var o=0;return n.x._hasCategories()&&(o=t._helpers.cx(i,e,n)-t._helpers.cx(a,e,n)),0===o&&n.y._hasCategories()&&(o=t._helpers.cy(i,e,n)-t._helpers.cy(a,e,n)),0===o&&r&&(o=t._arrayIndexCompare(r,i.aggField,a.aggField)),o}},t._helpers={cx:function(e,n,r){var i=0;return i=null!==r.x.measure&&void 0!==r.x.measure?r.x._scale(e.cx):r.x._hasCategories()&&r.x.categoryFields.length>=2?r.x._scale(e.cx)+t._helpers.xGap(n,r)+(e.xOffset+.5)*((n._widthPixels()/r.x._max-2*t._helpers.xGap(n,r))*e.width):r.x._scale(e.cx)+n._widthPixels()/r.x._max/2},cy:function(e,n,r){var i=0;return i=null!==r.y.measure&&void 0!==r.y.measure?r.y._scale(e.cy):null!==r.y.categoryFields&&void 0!==r.y.categoryFields&&r.y.categoryFields.length>=2?r.y._scale(e.cy)-n._heightPixels()/r.y._max+t._helpers.yGap(n,r)+(e.yOffset+.5)*((n._heightPixels()/r.y._max-2*t._helpers.yGap(n,r))*e.height):r.y._scale(e.cy)-n._heightPixels()/r.y._max/2},r:function(e,t,n){var r=0,i=1;return null===n.z||void 0===n.z?r=n.radius&&"auto"!==n.radius?n.radius:5:(n.radius&&"auto"!==n.radius&&n.radius>1&&(i=n.radius/n.z._scale(n.z._max)),r=n.z._hasMeasure()?n.z._scale(e.r)*i:n.z._scale(t._heightPixels()/100)*i),r},xGap:function(e,t){var n=0;return(null===t.x.measure||void 0===t.x.measure)&&t.barGap>0&&(n=e._widthPixels()/t.x._max*(t.barGap>.99?.99:t.barGap)/2),n},xClusterGap:function(e,n,r){var i=0;return null!==r.x.categoryFields&&void 0!==r.x.categoryFields&&r.x.categoryFields.length>=2&&r.clusterBarGap>0&&!r.x._hasMeasure()&&(i=e.width*(n._widthPixels()/r.x._max-2*t._helpers.xGap(n,r))*(r.clusterBarGap>.99?.99:r.clusterBarGap)/2),i},yGap:function(e,t){var n=0;return(null===t.y.measure||void 0===t.y.measure)&&t.barGap>0&&(n=e._heightPixels()/t.y._max*(t.barGap>.99?.99:t.barGap)/2),n},yClusterGap:function(e,n,r){var i=0;return null!==r.y.categoryFields&&void 0!==r.y.categoryFields&&r.y.categoryFields.length>=2&&r.clusterBarGap>0&&!r.y._hasMeasure()&&(i=e.height*(n._heightPixels()/r.y._max-2*t._helpers.yGap(n,r))*(r.clusterBarGap>.99?.99:r.clusterBarGap)/2),i},x:function(e,n,r){var i=0;return i=r.x._hasTimeField()?r.x._scale(e.x)-t._helpers.width(e,n,r)/2:null!==r.x.measure&&void 0!==r.x.measure?r.x._scale(e.x):r.x._scale(e.x)+t._helpers.xGap(n,r)+e.xOffset*(t._helpers.width(e,n,r)+2*t._helpers.xClusterGap(e,n,r))+t._helpers.xClusterGap(e,n,r)},y:function(e,n,r){var i=0;return i=r.y._hasTimeField()?r.y._scale(e.y)-t._helpers.height(e,n,r)/2:null!==r.y.measure&&void 0!==r.y.measure?r.y._scale(e.y):r.y._scale(e.y)-n._heightPixels()/r.y._max+t._helpers.yGap(n,r)+e.yOffset*(t._helpers.height(e,n,r)+2*t._helpers.yClusterGap(e,n,r))+t._helpers.yClusterGap(e,n,r)},width:function(e,n,r){var i=0;return i=null!==r.x.measure&&void 0!==r.x.measure?Math.abs(r.x._scale(e.x<0?e.x-e.width:e.x+e.width)-r.x._scale(e.x)):r.x._hasTimeField()?r.x.floatingBarWidth:e.width*(n._widthPixels()/r.x._max-2*t._helpers.xGap(n,r))-2*t._helpers.xClusterGap(e,n,r)},height:function(e,n,r){var i=0;return i=r.y._hasTimeField()?r.y.floatingBarWidth:null!==r.y.measure&&void 0!==r.y.measure?Math.abs(r.y._scale(e.y)-r.y._scale(e.y<=0?e.y+e.height:e.y-e.height)):e.height*(n._heightPixels()/r.y._max-2*t._helpers.yGap(n,r))-2*t._helpers.yClusterGap(e,n,r)},opacity:function(e,t,n){var r=0;return r=null!==n.c&&void 0!==n.c?e.opacity:t.getColor(e.aggField.slice(-1)[0]).opacity},fill:function(e,t,n){var r=0;return r=null!==n.c&&void 0!==n.c?e.fill:t.getColor(e.aggField.slice(-1)[0]).fill},stroke:function(e,t,n){var r=0;return r=null!==n.c&&void 0!==n.c?e.stroke:t.getColor(e.aggField.slice(-1)[0]).stroke},css:function(e,t){return t.getClass(e.aggField.slice(-1)[0])}},t._parentHeight=function(e){var n=e.offsetHeight;return(0>=n||null===n||void 0===n)&&(n=e.clientHeight),(0>=n||null===n||void 0===n)&&(n=null===e.parentNode||void 0===e.parentNode?0:t._parentHeight(e.parentNode)),n},t._parentWidth=function(e){var n=e.offsetWidth;return(!n||0>n)&&(n=e.clientWidth),(!n||0>n)&&(n=e.parentNode?t._parentWidth(e.parentNode):0),n},t._parsePosition=function(e,t){var n,r=0;return e&&(n=e.toString().split(","),n.forEach(function(n){n&&(isNaN(n)?"%"===n.slice(-1)?r+=t*(parseFloat(n.slice(0,n.length-1))/100):"px"===n.slice(-2)?r+=parseFloat(n.slice(0,n.length-2)):r=e:r+=parseFloat(n))},this)),0>r&&(r=t+r),r},t._parseXPosition=function(e,n){return t._parsePosition(e,t._parentWidth(n))},t._parseYPosition=function(e,n){return t._parsePosition(e,t._parentHeight(n))},t._postDrawHandling=function(t,n,r,i){0===i?(n.each(function(e,n){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,e,n)}),r.remove()):(n.each("end",function(e,n){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,e,n)}),r.each("end",function(){e.select(this).remove()}))},t._removeTooltip=function(e,t,n,r){n._tooltipGroup&&n._tooltipGroup.remove()},t._rollUp=function(e,t,n){var r=[];return t=null!==t&&void 0!==t?[].concat(t):[],e.forEach(function(e){var i=-1,a={},o=!0;r.forEach(function(n,r){-1===i&&(o=!0,t.forEach(function(t){o=o&&e[t]===n[t]},this),o&&(i=r))},this),-1!==i?a=r[i]:(t.forEach(function(t){a[t]=e[t]},this),r.push(a),i=r.length-1),n.forEach(function(n){-1===t.indexOf(n)&&(void 0===a[n]&&(a[n]=[]),a[n]=a[n].concat(e[n]))},this),r[i]=a},this),r},t._showBarTooltip=function(t,n,r,i){var a,o,s,l,u,c,d=5,f=10,h=750,p=e.select(n),g=p.node().getBBox().x,m=p.node().getBBox().y,v=p.node().getBBox().width,y=p.node().getBBox().height,x=p.attr("opacity"),b=p.attr("fill"),w=i._dropLineOrigin(),I=e.rgb(e.rgb(b).r+.6*(255-e.rgb(b).r),e.rgb(b).g+.6*(255-e.rgb(b).g),e.rgb(b).b+.6*(255-e.rgb(b).b)),A=e.rgb(e.rgb(b).r+.8*(255-e.rgb(b).r),e.rgb(b).g+.8*(255-e.rgb(b).g),e.rgb(b).b+.8*(255-e.rgb(b).b)),C=i.getTooltipText(t),_=0,k=0,M=0,z=function(e,t){var n=p.node().getCTM(),i=r.svg.node().createSVGPoint();return i.x=e||0,i.y=t||0,i.matrixTransform(n)};null!==r._tooltipGroup&&void 0!==r._tooltipGroup&&r._tooltipGroup.remove(),r._tooltipGroup=r.svg.append("g"),i.p||(c=i._isStacked()?1:v/2,i.x._hasCategories()||null===w.y||r._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+r.customClassList.tooltipDropLine).attr("x1",g<i.x._origin?g+c:g+v-c).attr("y1",m<w.y?m+y:m).attr("x2",g<i.x._origin?g+c:g+v-c).attr("y2",m<w.y?m+y:m).call(function(){r.noFormats||this.style("fill","none").style("stroke",b).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",x)}).transition().delay(h/2).duration(h/2).ease("linear").attr("y2",m<w.y?w.y-1:w.y+1),c=i._isStacked()?1:y/2,i.y._hasCategories()||null===w.x||r._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+r.customClassList.tooltipDropLine).attr("x1",g<w.x?g+v:g).attr("y1",m<i.y._origin?m+c:m+y-c).attr("x2",g<w.x?g+v:g).attr("y2",m<i.y._origin?m+c:m+y-c).call(function(){r.noFormats||this.style("fill","none").style("stroke",b).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",x)}).transition().delay(h/2).duration(h/2).ease("linear").attr("x2",g<w.x?w.x-1:w.x+1)),a=r._tooltipGroup.append("g"),o=a.append("rect").attr("class","dimple-tooltip "+r.customClassList.tooltipBox),a.selectAll(".dimple-dont-select-any").data(C).enter().append("text").attr("class","dimple-tooltip "+r.customClassList.tooltipLabel).text(function(e){return e}).call(function(){r.noFormats||this.style("font-family",i.tooltipFontFamily).style("font-size",i._getTooltipFontSize())}),a.each(function(){k=this.getBBox().width>k?this.getBBox().width:k,M=this.getBBox().width>M?this.getBBox().height:M}),a.selectAll("text").attr("x",0).attr("y",function(){return _+=this.getBBox().height,_-this.getBBox().height/2}),o.attr("x",-d).attr("y",-d).attr("height",Math.floor(_+d)-.5).attr("width",k+2*d).attr("rx",5).attr("ry",5).call(function(){r.noFormats||this.style("fill",A).style("stroke",I).style("stroke-width",2).style("opacity",.95)}),z(g+v+d+f+k).x<parseFloat(r.svg.node().getBBox().width)?(s=g+v+d+f,l=m+y/2-(_-(M-d))/2):z(g-(d+f+k)).x>0?(s=g-(d+f+k),l=m+y/2-(_-(M-d))/2):z(0,m+y+_+f+d).y<parseFloat(r.svg.node().getBBox().height)?(s=g+v/2-(2*d+k)/2,s=s>0?s:f,s=s+k<parseFloat(r.svg.node().getBBox().width)?s:parseFloat(r.svg.node().getBBox().width)-k-f,l=m+y+2*d):(s=g+v/2-(2*d+k)/2,s=s>0?s:f,s=s+k<parseFloat(r.svg.node().getBBox().width)?s:parseFloat(r.svg.node().getBBox().width)-k-f,l=m-_-(M-d)),u=z(s,l),a.attr("transform","translate("+u.x+" , "+u.y+")")},t._showPointTooltip=function(n,r,i,a){var o,s,l,u,c=5,d=10,f=750,h=e.select(r),p=parseFloat(h.attr("cx")),g=parseFloat(h.attr("cy")),m=parseFloat(h.attr("r")),v=t._helpers.opacity(n,i,a),y=h.attr("stroke"),x=a._dropLineOrigin(),b=e.rgb(e.rgb(y).r+.6*(255-e.rgb(y).r),e.rgb(y).g+.6*(255-e.rgb(y).g),e.rgb(y).b+.6*(255-e.rgb(y).b)),w=e.rgb(e.rgb(y).r+.8*(255-e.rgb(y).r),e.rgb(y).g+.8*(255-e.rgb(y).g),e.rgb(y).b+.8*(255-e.rgb(y).b)),I=0,A=0,C=0,_=a.getTooltipText(n);null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),i._tooltipGroup=i.svg.append("g"),i._tooltipGroup.append("circle").attr("class","dimple-line-marker-circle "+i.customClassList.lineMarkerCircle).attr("cx",p).attr("cy",g).attr("r",m).call(function(){i.noFormats||this.attr("opacity",0).style("fill","none").style("stroke",y).style("stroke-width",1)}).transition().duration(f/2).ease("linear").attr("r",m+a.lineWeight+2).call(function(){i.noFormats||this.attr("opacity",1).style("stroke-width",2)}),null!==x.y&&i._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+i.customClassList.tooltipDropLine).attr("x1",p).attr("y1",g<x.y?g+m+a.lineWeight+2:g-m-a.lineWeight-2).attr("x2",p).attr("y2",g<x.y?g+m+a.lineWeight+2:g-m-a.lineWeight-2).call(function(){i.noFormats||this.style("fill","none").style("stroke",y).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",v)}).transition().delay(f/2).duration(f/2).ease("linear").attr("y2",g<x.y?x.y-1:x.y+1),null!==x.x&&i._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+i.customClassList.tooltipDropLine).attr("x1",p<x.x?p+m+a.lineWeight+2:p-m-a.lineWeight-2).attr("y1",g).attr("x2",p<x.x?p+m+a.lineWeight+2:p-m-a.lineWeight-2).attr("y2",g).call(function(){i.noFormats||this.style("fill","none").style("stroke",y).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",v)}).transition().delay(f/2).duration(f/2).ease("linear").attr("x2",p<x.x?x.x-1:x.x+1),o=i._tooltipGroup.append("g"),s=o.append("rect").attr("class","dimple-tooltip "+i.customClassList.tooltipBox),o.selectAll(".dont-select-any").data(_).enter().append("text").attr("class","dimple-tooltip "+i.customClassList.tooltipLabel).text(function(e){return e}).call(function(){i.noFormats||this.style("font-family",a.tooltipFontFamily).style("font-size",a._getTooltipFontSize())}),o.each(function(){A=this.getBBox().width>A?this.getBBox().width:A,C=this.getBBox().width>C?this.getBBox().height:C}),o.selectAll("text").attr("x",0).attr("y",function(){return I+=this.getBBox().height,I-this.getBBox().height/2}),s.attr("x",-c).attr("y",-c).attr("height",Math.floor(I+c)-.5).attr("width",A+2*c).attr("rx",5).attr("ry",5).call(function(){i.noFormats||this.style("fill",w).style("stroke",b).style("stroke-width",2).style("opacity",.95)}),p+m+c+d+A<parseFloat(i.svg.node().getBBox().width)?(l=p+m+c+d,u=g-(I-(C-c))/2):p-m-(c+d+A)>0?(l=p-m-(c+d+A),u=g-(I-(C-c))/2):g+m+I+d+c<parseFloat(i.svg.node().getBBox().height)?(l=p-(2*c+A)/2,l=l>0?l:d,l=l+A<parseFloat(i.svg.node().getBBox().width)?l:parseFloat(i.svg.node().getBBox().width)-A-d,u=g+m+2*c):(l=p-(2*c+A)/2,l=l>0?l:d,l=l+A<parseFloat(i.svg.node().getBBox().width)?l:parseFloat(i.svg.node().getBBox().width)-A-d,u=g-I-(C-c)),o.attr("transform","translate("+l+" , "+u+")")},t.filterData=function(e,t,n){var r=e;return null!==t&&null!==n&&(null!==n&&void 0!==n&&(n=[].concat(n)),r=[],e.forEach(function(e){null===e[t]?r.push(e):n.indexOf([].concat(e[t]).join("/"))>-1&&r.push(e)},this)),r},t.getUniqueValues=function(e,t){var n=[];return null!==t&&void 0!==t&&(t=[].concat(t),e.forEach(function(e){var r="";t.forEach(function(t,n){n>0&&(r+="/"),r+=e[t]},this),-1===n.indexOf(r)&&n.push(r)},this)),n},t.newSvg=function(t,n,r){var i=null;if((null===t||void 0===t)&&(t="body"),i=e.select(t),i.empty())throw"The '"+t+"' selector did not match any elements.  Please prefix with '#' to select by id or '.' to select by class";return i.append("svg").attr("width",n).attr("height",r)},t}),!function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){(function(t){"use strict";function r(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e){return this instanceof a?(a.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?o(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):l(this,e)):arguments.length>1?new a(e,arguments[1]):new a(e)}function o(e,t){if(e=g(e,0>t?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function s(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|y(t,n);return e=g(e,r),e.write(t,n),e}function l(e,t){if(a.isBuffer(t))return u(e,t);if(q(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return d(e,t);if(t instanceof ArrayBuffer)return f(e,t)}return t.length?h(e,t):p(e,t)}function u(e,t){var n=0|m(t.length);return e=g(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|m(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var n=0|m(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){return t.byteLength,a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):e=d(e,new Uint8Array(t)),e}function h(e,t){var n=0|m(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){var n,r=0;"Buffer"===t.type&&q(t.data)&&(n=t.data,r=0|m(n.length)),e=g(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function g(e,t){a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):e.length=t;var n=0!==t&&t<=a.poolSize>>>1;return n&&(e.parent=Q),e}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e,t){if(!(this instanceof v))return new v(e,t);var n=new a(e,t);return delete n.parent,n}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return N(this,t,n);case"binary":return S(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=t.length;if(a%2!==0)throw new Error("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;r>o;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+o]=s}return o}function w(e,t,n,r){return X(Y(t,e.length-n),e,n,r)}function I(e,t,n,r){return X(W(t),e,n,r)}function A(e,t,n,r){return I(e,t,n,r)}function C(e,t,n,r){return X(V(t),e,n,r)}function _(e,t,n,r){return X(U(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?H.fromByteArray(e):H.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(n>=i+s){var l,u,c,d;switch(s){case 1:128>a&&(o=a);break;case 2:l=e[i+1],128===(192&l)&&(d=(31&a)<<6|63&l,d>127&&(o=d));break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(d=(15&a)<<12|(63&l)<<6|63&u,d>2047&&(55296>d||d>57343)&&(o=d));break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(d=(15&a)<<18|(63&l)<<12|(63&u)<<6|63&c,d>65535&&1114112>d&&(o=d))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return z(r)}function z(e){var t=e.length;if(K>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=K));return n}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",a=t;n>a;a++)i+=R(e[a]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function T(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function L(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);a>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function E(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);a>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function F(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function G(e){if(e=Z(e).replace($,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function R(e){return 16>e?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;r>o;o++){if(n=e.charCodeAt(o),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;a.push(n)}else if(2048>n){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function W(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function U(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function V(e){return H.toByteArray(G(e))}function X(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var H=e("base64-js"),J=e("ieee754"),q=e("isarray");n.Buffer=a,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50,a.poolSize=8192;var Q={};a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),a._augment=function(e){return e.__proto__=a.prototype,e},a.TYPED_ARRAY_SUPPORT?(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array):(a.prototype.length=void 0,a.prototype.parent=void 0),a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);o>i&&e[i]===t[i];)++i;return i!==o&&(n=e[i],r=t[i]),r>n?-1:n>r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!q(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new a(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new a(t),i=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(r,i),i+=o.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):x.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:a.compare(this,e)},a.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(a.isBuffer(e))return n(this,e,t);if("number"==typeof e)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return I(this,e,t,n);case"binary":return A(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;i>o;o++)r[o]=this[o+e]}return r.length&&(r.parent=this.parent||this),r},a.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||T(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;
return r},a.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||T(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||T(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||T(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),J.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),J.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),J.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),J.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||O(this,e,t,n,Math.pow(2,8*n),0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||O(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):E(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=0,o=1,s=0>e?1:0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0>e?1:0;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):E(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&t>n&&r>t)for(i=o-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>o||!a.TYPED_ARRAY_SUPPORT)for(i=0;o>i;i++)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=Y(e.toString()),a=i.length;for(r=t;n>r;r++)this[r]=i[r%a]}return this}};var $=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:3,isarray:4}],2:[function(e,t,n){!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o||t===d?62:t===s||t===f?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function n(e){function n(e){u[d++]=e}var r,i,o,s,l,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,u=new a(3*e.length/4-l),o=l>0?e.length-4:e.length;var d=0;for(r=0,i=0;o>r;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===l?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===l&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),u}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,a,o,s=e.length%3,l="";for(r=0,o=e.length-s;o>r;r+=3)a=(e[r]<<16)+(e[r+1]<<8)+e[r+2],l+=n(a);switch(s){case 1:a=e[e.length-1],l+=t(a>>2),l+=t(a<<4&63),l+="==";break;case 2:a=(e[e.length-2]<<8)+e[e.length-1],l+=t(a>>10),l+=t(a>>4&63),l+=t(a<<2&63),l+="="}return l}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),s="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),d="-".charCodeAt(0),f="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}("undefined"==typeof n?this.base64js={}:n)},{}],3:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:(h?-1:1)*(1/0);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*g}},{}],4:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],5:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":6}],6:[function(e,t,n){(function(){var e,r,i,a,o,s,l,u,c,d,f,h,p,g,m;i=Math.floor,d=Math.min,r=function(e,t){return t>e?-1:e>t?1:0},c=function(e,t,n,a,o){var s;if(null==n&&(n=0),null==o&&(o=r),0>n)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);a>n;)s=i((n+a)/2),o(t,e[s])<0?a=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),g(e,0,e.length-1,n)},o=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,m(e,0,t)):i=n,i},u=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,m(e,0,n),i},l=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],m(e,0,n)),t},a=function(e,t){var n,a,o,s,l,u;for(null==t&&(t=r),s=function(){u=[];for(var t=0,n=i(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],a=0,o=s.length;o>a;a++)n=s[a],l.push(m(e,n,t));return l},p=function(e,t,n){var i;return null==n&&(n=r),i=e.indexOf(t),-1!==i?(g(e,0,i,n),m(e,i,n)):void 0},f=function(e,t,n){var i,o,s,u,c;if(null==n&&(n=r),o=e.slice(0,t),!o.length)return o;for(a(o,n),c=e.slice(t),s=0,u=c.length;u>s;s++)i=c[s],l(o,i,n);return o.sort(n).reverse()},h=function(e,t,n){var i,s,l,u,f,h,p,g,m,v;if(null==n&&(n=r),10*t<=e.length){if(u=e.slice(0,t).sort(n),!u.length)return u;for(l=u[u.length-1],g=e.slice(t),f=0,p=g.length;p>f;f++)i=g[f],n(i,l)<0&&(c(u,i,0,null,n),u.pop(),l=u[u.length-1]);return u}for(a(e,n),v=[],s=h=0,m=d(t,e.length);m>=0?m>h:h>m;s=m>=0?++h:--h)v.push(o(e,n));return v},g=function(e,t,n,i){var a,o,s;for(null==i&&(i=r),a=e[n];n>t&&(s=n-1>>1,o=e[s],i(a,o)<0);)e[n]=o,n=s;return e[n]=a},m=function(e,t,n){var i,a,o,s,l;for(null==n&&(n=r),a=e.length,l=t,o=e[t],i=2*t+1;a>i;)s=i+1,a>s&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],t=i,i=2*t+1;return e[t]=o,g(e,l,t,n)},e=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=o,e.replace=u,e.pushpop=l,e.heapify=a,e.updateItem=p,e.nlargest=f,e.nsmallest=h,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,r){return"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.Heap=r()}(this,function(){return e})}).call(this)},{}],7:[function(require,module,exports){(function(global){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i,a;for("undefined"==typeof t&&(t=15),i=.5,n=new Date;;){for(i*=2,a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(r=new Date,r-n>t)break}for(a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return r=new Date,1e3*(3*i-1)/(r-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;n>t;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(0>e)return"-"+t(-e);if(isFinite(e)){var n=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,r=1,i=r.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}function n(e){var i;if("undefined"==typeof e)return r.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return r.push('"'+e+'"'),!1;if("boolean"==typeof e)return r.push(e.toString()),!1;if("number"==typeof e){var a=t(e),o=e.toPrecision(numeric.precision),s=parseFloat(e.toString()).toString(),l=[a,o,s,parseFloat(o).toString(),parseFloat(s).toString()];for(i=1;i<l.length;i++)l[i].length<a.length&&(a=l[i]);return r.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(null===e)return r.push("null"),!1;if("function"==typeof e){r.push(e.toString());var u=!1;for(i in e)e.hasOwnProperty(i)&&(u?r.push(",\n"):r.push("\n{"),u=!0,r.push(i),r.push(": \n"),n(e[i]));return u&&r.push("}\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return r.push("...Large Array..."),!0;var u=!1;for(r.push("["),i=0;i<e.length;i++)i>0&&(r.push(","),u&&r.push("\n ")),u=n(e[i]);return r.push("]"),!0}r.push("{");var u=!1;for(i in e)e.hasOwnProperty(i)&&(u&&r.push(",\n"),u=!0,r.push(i),r.push(": \n"),n(e[i]));return r.push("}"),!0}var r=[];return n(e),r.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseCSV=function(e){var t,n,r=e.split("\n"),i=[],a=/(([^'",]*)|('[^']*')|("[^"]*")),/g,o=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,s=function(e){return e.substr(0,e.length-1)},l=0;for(n=0;n<r.length;n++){var u,c=(r[n]+",").match(a);if(c.length>0){for(i[l]=[],t=0;t<c.length;t++)u=s(c[t]),o.test(u)?i[l][t]=parseFloat(u):i[l][t]=u;l++}}return i},numeric.toCSV=function(e){var t,n,r,i,a,o,s=numeric.dim(e);for(r=s[0],i=s[1],o=[],t=0;r>t;t++){for(a=[],n=0;r>n;n++)a[n]=e[t][n].toString();o[t]=a.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,n,r,i,a,o,s,l,u=e.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="";for(t=0;u>t;t+=3)n=e[t],r=e[t+1],i=e[t+2],a=n>>2,o=((3&n)<<4)+(r>>4),s=((15&r)<<2)+(i>>6),l=63&i,t+1>=u?s=l=64:t+2>=u&&(l=64),d+=c.charAt(a)+c.charAt(o)+c.charAt(s)+c.charAt(l);return d}function n(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1,o=0;for(e.length,r=t;n>r;r++)o=255&(a^e[r]),a=a>>>8^i[o];return-1^a}var r,i,a,o,s,l,u,c,d,f,h=e[0].length,p=e[0][0].length,g=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,p>>24&255,p>>16&255,p>>8&255,255&p,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(f=n(g,12,29),g[29]=f>>24&255,g[30]=f>>16&255,g[31]=f>>8&255,g[32]=255&f,r=1,i=0,u=0;h>u;u++){for(h-1>u?g.push(0):g.push(1),s=3*p+1+(0===u)&255,l=3*p+1+(0===u)>>8&255,g.push(s),g.push(l),g.push(255&~s),g.push(255&~l),0===u&&g.push(0),c=0;p>c;c++)for(a=0;3>a;a++)s=e[a][u][c],s=s>255?255:0>s?0:Math.round(s),r=(r+s)%65521,i=(i+r)%65521,g.push(s);g.push(0)}return d=(i<<16)+r,g.push(d>>24&255),g.push(d>>16&255),g.push(d>>8&255),g.push(255&d),o=g.length-41,g[33]=o>>24&255,g[34]=o>>16&255,g[35]=o>>8&255,g[36]=255&o,f=n(g,37),g.push(f>>24&255),g.push(f>>16&255),g.push(f>>8&255),g.push(255&f),g.push(0),g.push(0),g.push(0),g.push(0),g.push(73),g.push(69),g.push(78),g.push(68),g.push(174),g.push(66),g.push(96),g.push(130),"data:image/png;base64,"+t(g)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,n;return"object"==typeof e?(t=e[0],"object"==typeof t?(n=t[0],"object"==typeof n?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if(i=t.length,i!==n.length)return!1;for(r=0;i>r;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){"undefined"==typeof n&&(n=0);var r,i=e[n],a=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)a[r+1]=t,a[r]=t;return-1===r&&(a[0]=t),a}for(r=i-1;r>=0;r--)a[r]=numeric.rep(e,t,n+1);return a},numeric.dotMMsmall=function(e,t){var n,r,i,a,o,s,l,u,c,d,f;for(a=e.length,o=t.length,s=t[0].length,l=Array(a),n=a-1;n>=0;n--){for(u=Array(s),c=e[n],i=s-1;i>=0;i--){for(d=c[o-1]*t[o-1][i],r=o-2;r>=1;r-=2)f=r-1,d+=c[r]*t[r][i]+c[f]*t[f][i];0===r&&(d+=c[0]*t[0][i]),u[i]=d}l[n]=u}return l},numeric._getCol=function(e,t,n){var r,i=e.length;for(r=i-1;r>0;--r)n[r]=e[r][t],--r,n[r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,a,o=numeric._getCol,s=t.length,l=Array(s),u=e.length,c=t[0].length,d=new Array(u),f=numeric.dotVV;for(--s,--u,r=u;-1!==r;--r)d[r]=Array(c);for(--c,r=c;-1!==r;--r)for(o(t,r,l),i=u;-1!==i;--i)a=0,n=e[i],d[i][r]=f(n,l);return d},numeric.dotMV=function(e,t){var n,r=e.length,i=(t.length,Array(r)),a=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=a(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,a,o,s,l;for(i=e.length,a=t[0].length,o=Array(a),r=a-1;r>=0;r--){for(s=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)l=n-1,s+=e[n]*t[n][r]+e[l]*t[l][r];0===n&&(s+=e[0]*t[0][r]),o[r]=s}return o},numeric.dotVV=function(e,t){var n,r,i=e.length,a=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,a+=e[n]*t[n]+e[r]*t[r];return 0===n&&(a+=e[0]*t[0]),a},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),n=t+2,r=a-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),o[t]=i}return o},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],--t,r[t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)o.test(e[r])?(i=e[r].substring(0,e[r].length-3),s=i):i=e[r],"ret"===i&&(l=!0),a.push(i);return a[e.length]="_s",a[e.length+1]="_k",a[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric.pointwise2=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)o.test(e[r])?(i=e[r].substring(0,e[r].length-3),s=i):i=e[r],"ret"===i&&(l=!0),a.push(i);return a[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric._biforeach=function t(e,n,r,i,a){if(i===r.length-1)return void a(e,n);var o,s=r[i];for(o=s-1;o>=0;o--)t("object"==typeof e?e[o]:e,"object"==typeof n?n[o]:n,r,i+1,a)},numeric._biforeach2=function n(e,t,r,i,a){if(i===r.length-1)return a(e,t);var o,s=r[i],l=Array(s);for(o=s-1;o>=0;--o)l[o]=n("object"==typeof e?e[o]:e,"object"==typeof t?t[o]:t,r,i+1,a);return l},numeric._foreach=function r(e,t,n,i){if(n===t.length-1)return void i(e);var a,o=t[n];for(a=o-1;a>=0;a--)r(e[a],t,n+1,i)},numeric._foreach2=function i(e,t,n,r){if(n===t.length-1)return r(e);var a,o=t[n],s=Array(o);for(a=o-1;a>=0;a--)s[a]=i(e[a],t,n+1,r);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,a,o,s,e,l=numeric.dim(e),u=Math.abs,c=l[0],d=l[1],f=numeric.clone(e),h=numeric.identity(c);for(o=0;d>o;++o){var p=-1,g=-1;for(a=o;a!==c;++a)s=u(f[a][o]),s>g&&(p=a,g=s);for(n=f[p],f[p]=f[o],f[o]=n,i=h[p],h[p]=h[o],h[o]=i,e=n[o],s=o;s!==d;++s)n[s]/=e;for(s=d-1;-1!==s;--s)i[s]/=e;for(a=c-1;-1!==a;--a)if(a!==o){for(t=f[a],r=h[a],e=t[o],s=o+1;s!==d;++s)t[s]-=n[s]*e;for(s=d-1;s>0;--s)r[s]-=i[s]*e,--s,r[s]-=i[s]*e;0===s&&(r[0]-=i[0]*e)}}return h},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,a,o,s,l,u,c=t[0],d=1,f=numeric.clone(e);for(r=0;c-1>r;r++){for(i=r,n=r+1;c>n;n++)Math.abs(f[n][r])>Math.abs(f[i][r])&&(i=n);for(i!==r&&(l=f[i],f[i]=f[r],f[r]=l,d*=-1),a=f[r],n=r+1;c>n;n++){for(o=f[n],s=o[r]/a[r],i=r+1;c-1>i;i+=2)u=i+1,o[i]-=a[i]*s,o[u]-=a[u]*s;i!==c&&(o[i]-=a[i]*s)}if(0===a[r])return 0;d*=a[r]}return d*f[r][r]},numeric.transpose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)a=l[n],a[t]=i[n],a[t-1]=r[n],--n,a=l[n],a[t]=i[n],a[t-1]=r[n];0===n&&(a=l[0],a[t]=i[0],a[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=r[n],--n,l[n][0]=r[n];0===n&&(l[0][0]=r[0])}return l},numeric.negtranspose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)a=l[n],a[t]=-i[n],a[t-1]=-r[n],--n,a=l[n],a[t]=-i[n],a[t-1]=-r[n];0===n&&(a=l[0],a[t]=-i[0],a[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=-r[n],--n,l[n][0]=-r[n];0===n&&(l[0][0]=-r[0])}return l},numeric._random=function a(e,t){var n,r,i=e[t],o=Array(i);if(t===e.length-1){for(r=Math.random,n=i-1;n>=1;n-=2)o[n]=r(),o[n-1]=r();return 0===n&&(o[0]=r()),o}for(n=i-1;n>=0;n--)o[n]=a(e,t+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if("undefined"==typeof n&&(n=Math.max(Math.round(t-e)+1,1)),2>n)return 1===n?[e]:[];var r,i=Array(n);for(n--,r=n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){function r(e,a){var o,s=t[a],l=n[a]-s,u=Array(l);if(a===i.length-1){for(o=l;o>=0;o--)u[o]=e[o+s];return u}for(o=l;o>=0;o--)u[o]=r(e[o+s],a+1);return u}var i=numeric.dim(e);return r(e,0)},numeric.setBlock=function(e,t,n,r){function i(e,r,o){var s,l=t[o],u=n[o]-l;if(o===a.length-1)for(s=u;s>=0;s--)e[s+l]=r[s];for(s=u;s>=0;s--)i(e[s+l],r[s],o+1)}var a=numeric.dim(e);return i(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,a,o,s=t.length,l=n.length,u=Array(s);for(r=s-1;-1!==r;--r)for(u[r]=Array(l),a=u[r],o=e[t[r]],i=l-1;-1!==i;--i)a[i]=o[n[i]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,a,o,s=t[0],l=t[1];for(n=0,r=0,i=0;s>i;++i)n+=e[i][0].length;for(a=0;l>a;++a)r+=e[0][a][0].length;var u=Array(n);for(i=0;n>i;++i)u[i]=Array(r);var c,d,f,h,p,g=0;for(i=0;s>i;++i){for(c=r,a=l-1;-1!==a;--a)for(o=e[i][a],c-=o[0].length,f=o.length-1;-1!==f;--f)for(p=o[f],d=u[g+f],h=p.length-1;-1!==h;--h)d[c+h]=p[h];g+=e[i][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,o,s,l=n[0],u=r[0],c=Array(l);for(a=l-1;a>=0;a--){for(i=Array(u),s=e[a],o=u-1;o>=3;--o)i[o]=s*t[o],--o,i[o]=s*t[o],--o,i[o]=s*t[o],--o,i[o]=s*t[o];for(;o>=0;)i[o]=s*t[o],--o;c[a]=i}return c},numeric.T=function(e,t){
this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){if(numeric.indexOf,"string"!=typeof i){var a;i="";for(a in numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||t.indexOf(a)>=0||n.indexOf(a)>=0||r.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function o(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var o=numeric.div;return this.y?new numeric.T(o(this.x,e.x),o(this.y,e.x)):new numeric.T(o(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,a,o,s,l,u,c,d,t,n,r,f,h,p,g,m,v,y,x=e.x.length,b=numeric.identity(x),w=numeric.rep([x,x],0),I=numeric.clone(e.x),A=numeric.clone(e.y);for(t=0;x>t;t++){for(p=I[t][t],g=A[t][t],f=p*p+g*g,r=t,n=t+1;x>n;n++)p=I[n][t],g=A[n][t],h=p*p+g*g,h>f&&(r=n,f=h);for(r!==t&&(y=I[t],I[t]=I[r],I[r]=y,y=A[t],A[t]=A[r],A[r]=y,y=b[t],b[t]=b[r],b[r]=y,y=w[t],w[t]=w[r],w[r]=y),i=I[t],a=A[t],l=b[t],u=w[t],p=i[t],g=a[t],n=t+1;x>n;n++)m=i[n],v=a[n],i[n]=(m*p+v*g)/f,a[n]=(v*p-m*g)/f;for(n=0;x>n;n++)m=l[n],v=u[n],l[n]=(m*p+v*g)/f,u[n]=(v*p-m*g)/f;for(n=t+1;x>n;n++){for(o=I[n],s=A[n],c=b[n],d=w[n],p=o[t],g=s[t],r=t+1;x>r;r++)m=i[r],v=a[r],o[r]-=m*p-v*g,s[r]-=v*p+m*g;for(r=0;x>r;r++)m=l[r],v=u[r],c[r]-=m*p-v*g,d[r]-=v*p+m*g}}for(t=x-1;t>0;t--)for(l=b[t],u=w[t],n=t-1;n>=0;n--)for(c=b[n],d=w[n],p=I[n][t],g=A[n][t],r=x-1;r>=0;r--)m=l[r],v=u[r],c[r]-=p*m-g*v,d[r]-=p*v+g*m;return new numeric.T(b,w)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,a=e.length;if(r){for(;a>i;)t=e[i],n=n[t],r=r[t],i++;return new numeric.T(n,r)}for(;a>i;)t=e[i],n=n[t],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,a=0,o=e.length,s=t.x,l=t.y;if(0===o)return l?this.y=l:i&&(this.y=void 0),this.x=r,this;if(l){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);o-1>a;)n=e[a],r=r[n],i=i[n],a++;return n=e[a],r[n]=s,i[n]=l,this}if(i){for(;o-1>a;)n=e[a],r=r[n],i=i[n],a++;return n=e[a],r[n]=s,s instanceof Array?i[n]=numeric.rep(numeric.dim(s),0):i[n]=0,this}for(;o-1>a;)n=e[a],r=r[n],a++;return n=e[a],r[n]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,a=Array(i),o=this.x,s=this.y;for(n=e;t>=n;n++)a[n-e]=o[n];if(s){for(r=Array(i),n=e;t>=n;n++)r[n-e]=s[n];return new numeric.T(a,r)}return new numeric.T(a)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,a=this.y,o=n.x,s=n.y;for(r=e;t>=r;r++)i[r]=o[r-e];if(s)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),r=e;t>=r;r++)a[r]=s[r-e];else if(a)for(r=e;t>=r;r++)a[r]=numeric.rep([o[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,a=t.y;return n[e]=i,a?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=a):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,a=numeric.setBlock,o=n.x,s=n.y;return s?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(r,e,t,o),a(i,e,t,s),this):(a(r,e,t,o),void(i&&a(i,e,t,numeric.rep(numeric.dim(o),0))))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,a=numeric.rep;return i?new n(a(e,r),a(e,i)):new n(a(e,r))},numeric.T.diag=function s(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,s=numeric.diag;return n?new numeric.T(s(t),s(n)):new numeric.T(s(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=e[0]>=0?1:-1,r=n*numeric.norm2(e);t[0]+=r;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,a,o,s,l,u,c,d,f=t[0],h=numeric.clone(e),p=numeric.identity(f);for(r=0;f-2>r;r++){for(a=Array(f-r-1),n=r+1;f>n;n++)a[n-r-1]=h[n][r];if(numeric.norm2(a)>0){for(o=numeric.house(a),s=numeric.getBlock(h,[r+1,r],[f-1,f-1]),l=numeric.tensor(o,numeric.dot(o,s)),n=r+1;f>n;n++)for(u=h[n],c=l[n-r-1],i=r;f>i;i++)u[i]-=2*c[i-r];for(s=numeric.getBlock(h,[0,r+1],[f-1,f-1]),l=numeric.tensor(numeric.dot(s,o),o),n=0;f>n;n++)for(u=h[n],c=l[n],i=r+1;f>i;i++)u[i]-=2*c[i-r-1];for(s=Array(f-r-1),n=r+1;f>n;n++)s[n-r-1]=p[n];for(l=numeric.tensor(o,numeric.dot(o,s)),n=r+1;f>n;n++)for(d=p[n],c=l[n-r-1],i=0;f>i;i++)d[i]-=2*c[i]}}return{H:h,Q:p}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var n,r,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b=(numeric.clone(e),numeric.dim(e)),w=b[0],I=numeric.identity(w);if(3>w)return{Q:I,B:[[0,w-1]]};var A=numeric.epsilon;for(x=0;t>x;x++){for(v=0;w-1>v;v++)if(Math.abs(e[v+1][v])<A*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var C=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),_=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[w-1,w-1]),t);for(h=Array(v+1),m=0;v>=m;m++)h[m]=I[m];for(p=numeric.dot(C.Q,h),m=0;v>=m;m++)I[m]=p[m];for(h=Array(w-v-1),m=v+1;w>m;m++)h[m-v-1]=I[m];for(p=numeric.dot(_.Q,h),m=v+1;w>m;m++)I[m]=p[m-v-1];return{Q:I,B:C.B.concat(numeric.add(_.B,v+1))}}if(i=e[w-2][w-2],a=e[w-2][w-1],o=e[w-1][w-2],s=e[w-1][w-1],u=i+s,l=i*s-a*o,c=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*l){var k,M;k=.5*(u+Math.sqrt(u*u-4*l)),M=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,k+M)),numeric.diag(numeric.rep([3],k*M)))}else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),h=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,h)),m=0;3>m;m++)for(f=e[m],g=p[m],y=0;w>y;y++)f[y]-=2*g[y];for(h=numeric.getBlock(e,[0,0],[w-1,2]),p=numeric.tensor(numeric.dot(h,r),r),m=0;w>m;m++)for(f=e[m],g=p[m],y=0;3>y;y++)f[y]-=2*g[y];for(h=[I[0],I[1],I[2]],p=numeric.tensor(r,numeric.dot(r,h)),m=0;3>m;m++)for(d=I[m],g=p[m],y=0;w>y;y++)d[y]-=2*g[y];var z;for(v=0;w-2>v;v++){for(y=v;v+1>=y;y++)if(Math.abs(e[y+1][y])<A*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var C=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),_=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[w-1,w-1]),t);for(h=Array(y+1),m=0;y>=m;m++)h[m]=I[m];for(p=numeric.dot(C.Q,h),m=0;y>=m;m++)I[m]=p[m];for(h=Array(w-y-1),m=y+1;w>m;m++)h[m-y-1]=I[m];for(p=numeric.dot(_.Q,h),m=y+1;w>m;m++)I[m]=p[m-y-1];return{Q:I,B:C.B.concat(numeric.add(_.B,y+1))}}for(z=Math.min(w-1,v+3),n=Array(z-v),m=v+1;z>=m;m++)n[m-v-1]=e[m][v];for(r=numeric.house(n),h=numeric.getBlock(e,[v+1,v],[z,w-1]),p=numeric.tensor(r,numeric.dot(r,h)),m=v+1;z>=m;m++)for(f=e[m],g=p[m-v-1],y=v;w>y;y++)f[y]-=2*g[y-v];for(h=numeric.getBlock(e,[0,v+1],[w-1,z]),p=numeric.tensor(numeric.dot(h,r),r),m=0;w>m;m++)for(f=e[m],g=p[m],y=v+1;z>=y;y++)f[y]-=2*g[y-v-1];for(h=Array(z-v),m=v+1;z>=m;m++)h[m-v-1]=I[m];for(p=numeric.tensor(r,numeric.dot(r,h)),m=v+1;z>=m;m++)for(d=I[m],g=p[m-v-1],y=0;w>y;y++)d[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x=numeric.toUpperHessenberg(e),b=numeric.QRFrancis(x.H,t),w=numeric.T,I=e.length,A=b.B,C=numeric.dot(b.Q,numeric.dot(x.H,numeric.transpose(b.Q))),_=new w(numeric.dot(b.Q,x.Q)),k=A.length,M=Math.sqrt;for(r=0;k>r;r++)if(n=A[r][0],n===A[r][1]);else{if(a=n+1,o=C[n][n],s=C[n][a],l=C[a][n],u=C[a][a],0===s&&0===l)continue;c=-o-u,d=o*u-s*l,f=c*c-4*d,f>=0?(h=0>c?-.5*(c-M(f)):-.5*(c+M(f)),v=(o-h)*(o-h)+s*s,y=l*l+(u-h)*(u-h),v>y?(v=M(v),g=(o-h)/v,m=s/v):(y=M(y),g=l/y,m=(u-h)/y),i=new w([[m,-g],[g,m]]),_.setRows(n,a,i.dot(_.getRows(n,a)))):(h=-.5*c,p=.5*M(-f),v=(o-h)*(o-h)+s*s,y=l*l+(u-h)*(u-h),v>y?(v=M(v+p*p),g=(o-h)/v,m=s/v,h=0,p/=v):(y=M(y+p*p),g=l/y,m=(u-h)/y,h=p/y,p=0),i=new w([[m,-g],[g,m]],[[h,p],[p,-h]]),_.setRows(n,a,i.dot(_.getRows(n,a))))}var z=_.dot(e).dot(_.transjugate()),I=e.length,N=numeric.T.identity(I);for(a=0;I>a;a++)if(a>0)for(r=a-1;r>=0;r--){var S=z.get([r,r]),j=z.get([a,a]);numeric.neq(S.x,j.x)||numeric.neq(S.y,j.y)?(h=z.getRow(r).getBlock([r],[a-1]),p=N.getRow(a).getBlock([r],[a-1]),N.set([a,r],z.get([r,a]).neg().sub(h.dot(p)).div(S.sub(j)))):N.setRow(a,N.getRow(r))}for(a=0;I>a;a++)h=N.getRow(a),N.setRow(a,h.div(h.norm2()));return N=N.transpose(),N=_.transjugate().dot(N),{lambda:z.getDiag(),E:N}},numeric.ccsSparse=function(e){var t,n,r,i,a=e.length,o=[];for(r=a-1;-1!==r;--r){n=e[r];for(i in n){for(i=parseInt(i);i>=o.length;)o[o.length]=0;0!==n[i]&&o[i]++}}var t=o.length,s=Array(t+1);for(s[0]=0,r=0;t>r;++r)s[r+1]=s[r]+o[r];var l=Array(s[t]),u=Array(s[t]);for(r=a-1;-1!==r;--r){n=e[r];for(i in n)0!==n[i]&&(o[i]--,l[s[i]+o[i]]=r,u[s[i]+o[i]]=n[i])}return[s,l,u]},numeric.ccsFull=function(e){var t,n,r,i,a=e[0],o=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],d=numeric.rep([u,c],0);for(t=0;c>t;t++)for(r=a[t],i=a[t+1],n=r;i>n;++n)d[o[n]][t]=s[n];return d},numeric.ccsTSolve=function(e,t,n,r,i){function a(e){var t;if(0===n[e]){for(n[e]=1,t=o[e];t<o[e+1];++t)a(s[t]);i[d]=e,++d}}var o=e[0],s=e[1],l=e[2],u=o.length-1,c=Math.max,d=0;"undefined"==typeof r&&(n=numeric.rep([u],0)),"undefined"==typeof r&&(r=numeric.linspace(0,n.length-1)),"undefined"==typeof i&&(i=[]);var f,h,p,g,m,v,y;for(f=r.length-1;-1!==f;--f)a(r[f]);for(i.length=d,f=i.length-1;-1!==f;--f)n[i[f]]=0;for(f=r.length-1;-1!==f;--f)h=r[f],n[h]=t[h];for(f=i.length-1;-1!==f;--f){for(h=i[f],p=o[h],g=c(o[h+1],p),m=p;m!==g;++m)if(s[m]===h){n[h]/=l[m];break}for(y=n[h],m=p;m!==g;++m)v=s[m],v!==h&&(n[v]-=y*l[m])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,a){var o,s,l,u=0,c=i.length,d=this.k,f=this.k1,h=this.j;if(0===r[e])for(r[e]=1,h[0]=e,d[0]=s=t[e],f[0]=l=t[e+1];;)if(s>=l){if(i[c]=h[u],0===u)return;++c,--u,s=d[u],l=f[u]}else o=a[n[s]],0===r[o]?(r[o]=1,d[u]=s,++u,h[u]=o,s=t[o],f[u]=l=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,i,a,o){var s,l,u,c,d,f,h,p,g,m=e[0],v=e[1],y=e[2],x=(m.length-1,t[0]),b=t[1],w=t[2];for(l=x[i],u=x[i+1],r.length=0,s=l;u>s;++s)o.dfs(a[b[s]],m,v,n,r,a);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=l;s!==u;++s)c=a[b[s]],n[c]=w[s];for(s=r.length-1;-1!==s;--s){for(c=r[s],d=m[c],f=m[c+1],h=d;f>h;++h)if(a[v[h]]===c){n[c]/=y[h];break}for(g=n[c],h=d;f>h;++h)p=a[v[h]],p!==c&&(n[p]-=g*y[h])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,a,o,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],d=[numeric.rep([u+1],0),[],[]],f=c[0],h=c[1],p=c[2],g=d[0],m=d[1],v=d[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve,w=(Math.max,Math.abs),I=numeric.linspace(0,u-1),A=numeric.linspace(0,u-1),C=new numeric.ccsDFS(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,A,C),a=-1,o=-1,r=x.length-1;-1!==r;--r)i=x[r],n>=i||(s=w(y[i]),s>a&&(o=i,a=s));for(w(y[n])<t*a&&(r=I[n],a=I[o],I[n]=a,A[a]=n,I[o]=r,A[r]=o,a=y[n],y[n]=y[o],y[o]=a),a=f[n],o=g[n],l=y[n],h[a]=I[n],p[a]=1,++a,r=x.length-1;-1!==r;--r)i=x[r],s=y[i],x[r]=0,y[i]=0,n>=i?(m[o]=i,v[o]=s,++o):(h[a]=I[i],p[a]=s/l,++a);f[n+1]=a,g[n+1]=o}for(r=h.length-1;-1!==r;--r)h[r]=A[h[r]];return{L:c,U:d,P:I,Pinv:A}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,a,o){var s,l,u,c=0,d=i.length,f=this.k,h=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,f[0]=l=t[a[e]],h[0]=u=t[a[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(i[d]=a[p[c]],0===c)return;++d,--c,l=f[c],u=h[c]}else s=n[l],0===r[s]?(r[s]=1,f[c]=l,++c,p[c]=s,s=a[s],l=t[s],h[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,n,r,i,a,o,s){var l,u,c,d,f,h,p,g,m,v=e[0],y=e[1],x=e[2],b=(v.length-1,t[0]),w=t[1],I=t[2];for(u=b[i],c=b[i+1],r.length=0,l=u;c>l;++l)s.dfs(w[l],v,y,n,r,a,o);for(l=r.length-1;-1!==l;--l)d=r[l],n[o[d]]=0;for(l=u;l!==c;++l)d=w[l],n[d]=I[l];for(l=r.length-1;-1!==l;--l){for(d=r[l],g=o[d],f=v[d],h=v[d+1],p=f;h>p;++p)if(y[p]===g){n[g]/=x[p];break}for(m=n[g],p=f;h>p;++p)n[y[p]]-=m*x[p];n[g]=m}},numeric.ccsLUP0=function(e,t){var n,r,i,a,o,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],d=[numeric.rep([u+1],0),[],[]],f=c[0],h=c[1],p=c[2],g=d[0],m=d[1],v=d[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve0,w=(Math.max,Math.abs),I=numeric.linspace(0,u-1),A=numeric.linspace(0,u-1),C=new numeric.ccsDFS0(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,A,I,C),a=-1,o=-1,r=x.length-1;-1!==r;--r)i=x[r],n>=i||(s=w(y[I[i]]),s>a&&(o=i,a=s));for(w(y[I[n]])<t*a&&(r=I[n],a=I[o],I[n]=a,A[a]=n,I[o]=r,A[r]=o),a=f[n],o=g[n],l=y[I[n]],h[a]=I[n],p[a]=1,++a,r=x.length-1;-1!==r;--r)i=x[r],s=y[I[i]],x[r]=0,y[I[i]]=0,n>=i?(m[o]=i,v[o]=s,++o):(h[a]=I[i],p[a]=s/l,++a);f[n+1]=a,g[n+1]=o}for(r=h.length-1;-1!==r;--r)h[r]=A[h[r]];return{L:c,U:d,P:I,Pinv:A}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],a=r[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]);var o,s,l,u,c,d=t.length,f=n.length,h=numeric.rep([a],0),p=[],g=[],m=[h,p,g],v=e[0],y=e[1],x=e[2],b=numeric.rep([i],0),w=0,I=numeric.rep([i],0);for(s=0;f>s;++s){u=n[s];var A=v[u],C=v[u+1];for(o=A;C>o;++o)l=y[o],I[l]=1,b[l]=x[o];for(o=0;d>o;++o)c=t[o],I[c]&&(p[w]=o,g[w]=b[t[o]],++w);for(o=A;C>o;++o)l=y[o],I[l]=0;h[s+1]=w}return m},numeric.ccsDot=function(e,t){var n,r,i,a,o,s,l,u,c,d,f,h=e[0],p=e[1],g=e[2],m=t[0],v=t[1],y=t[2],x=numeric.ccsDim(e),b=numeric.ccsDim(t),w=x[0],I=(x[1],b[1]),A=numeric.rep([w],0),C=numeric.rep([w],0),_=Array(w),k=numeric.rep([I],0),M=[],z=[],N=[k,M,z];for(i=0;i!==I;++i){for(a=m[i],o=m[i+1],c=0,r=a;o>r;++r)for(d=v[r],f=y[r],s=h[d],l=h[d+1],n=s;l>n;++n)u=p[n],0===C[u]&&(_[c]=u,C[u]=1,c+=1),A[u]=A[u]+g[n]*f;for(a=k[i],o=a+c,k[i+1]=o,r=c-1;-1!==r;--r)f=a+r,n=_[r],M[f]=n,z[f]=A[n],C[n]=0,A[n]=0;k[i+1]=k[i]+c}return N},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,i=(e.P,t[0]),a=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],a=!0);var o,s,l,u,c,d,f=t[1],h=t[2],p=n[0].length-1,g=i.length-1,m=numeric.rep([p],0),v=Array(p),y=numeric.rep([p],0),x=Array(p),b=numeric.rep([g+1],0),w=[],I=[],A=numeric.ccsTSolve,C=0;for(o=0;g>o;++o){for(c=0,l=i[o],u=i[o+1],s=l;u>s;++s)d=e.Pinv[f[s]],x[c]=d,y[d]=h[s],++c;for(x.length=c,A(n,y,m,x,v),s=x.length-1;-1!==s;--s)y[x[s]]=0;if(A(r,m,y,v,x),a)return y;for(s=v.length-1;-1!==s;--s)m[v[s]]=0;for(s=x.length-1;-1!==s;--s)d=x[s],w[C]=d,I[C]=y[d],y[d]=0,++C;b[o+1]=C}return[b,w,I]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],a=numeric.sup(r)+1,o=n.length,s=numeric.rep([a],0),l=Array(o),u=Array(o),c=numeric.rep([a],0);for(t=0;o>t;++t)c[r[t]]++;for(t=0;a>t;++t)s[t+1]=s[t]+c[t];var d,f,h=s.slice(0);for(t=0;o>t;++t)f=r[t],d=h[f],l[d]=n[t],u[d]=i[t],h[f]=h[f]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,n,r,i,a,o=e[0],s=e[1],l=e[2],u=o.length-1,c=s.length,d=Array(c),f=Array(c),h=Array(c);for(a=0,t=0;u>t;++t)for(r=o[t],i=o[t+1],n=r;n!==i;++n)f[a]=t,d[a]=s[n],h[a]=l[n],++a;return[d,f,h]},numeric.sdim=function l(e,t,n){if("undefined"==typeof t&&(t=[]),"object"!=typeof e)return t;"undefined"==typeof n&&(n=0),n in t||(t[n]=0),e.length>t[n]&&(t[n]=e.length);var r;for(r in e)e.hasOwnProperty(r)&&l(e[r],t,n+1);return t},numeric.sclone=function u(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=numeric.sdim(e).length);var r,i=Array(e.length);if(t===n-1){for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}for(r in e)e.hasOwnProperty(r)&&(i[r]=u(e[r],t+1,n));return i},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];e.length;for(t in e)if(e.hasOwnProperty(t)){r=e[t];for(n in r)r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n])}return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,i,a,o,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),d=c.length,f=Array(u);for(i=u-1;i>=0;i--){for(l=[],n=e[i],o=d-1;o>=0;o--){s=0,r=c[o];for(a in n)n.hasOwnProperty(a)&&a in r&&(s+=n[a]*r[a]);s&&(l[o]=s)}f[i]=l}return f},numeric.sdotMV=function(e,t){var n,r,i,a,o=e.length,s=Array(o);for(r=o-1;r>=0;r--){n=e[r],a=0;for(i in n)n.hasOwnProperty(i)&&t[i]&&(a+=n[i]*t[i]);a&&(s[r]=a)}return s},numeric.sdotVM=function(e,t){var n,r,i,a,o=[];for(n in e)if(e.hasOwnProperty(n)){i=t[n],a=e[n];for(r in i)i.hasOwnProperty(r)&&(o[r]||(o[r]=0),o[r]+=a*i[r])}return o},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length,i=1e3*n+r;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,a=e[0].length,o=e.length,s=[];for(n=a-1;n>=0;--n)if(e[o-1][n]){for(i=s,r=0;o-2>r;r++)t=e[r][n],i[t]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function c(e,t,n){"undefined"==typeof t&&(t=[]),"undefined"==typeof n&&(n=[]);var r,i,a;r=n.length;for(i in e)if(e.hasOwnProperty(i))if(n[r]=parseInt(i),a=e[i],"number"==typeof a){if(a){if(0===t.length)for(i=r+1;i>=0;--i)t[i]=[];for(i=r;i>=0;--i)t[i].push(n[i]);t[r+1].push(a)}}else c(a,t,n);return n.length>r&&n.pop(),t},numeric.cLU=function(e){var t,n,r,i,a,o,s=e[0],l=e[1],u=e[2],c=s.length,d=0;for(t=0;c>t;t++)s[t]>d&&(d=s[t]);d++;var f,h,p,g=Array(d),m=Array(d),v=numeric.rep([d],1/0),y=numeric.rep([d],-(1/0));for(r=0;c>r;r++)t=s[r],n=l[r],n<v[t]&&(v[t]=n),n>y[t]&&(y[t]=n);for(t=0;d-1>t;t++)y[t]>y[t+1]&&(y[t+1]=y[t]);for(t=d-1;t>=1;t--)v[t]<v[t-1]&&(v[t-1]=v[t]);var x=0,b=0;for(t=0;d>t;t++)m[t]=numeric.rep([y[t]-v[t]+1],0),g[t]=numeric.rep([t-v[t]],0),x+=t-v[t]+1,b+=y[t]-t+1;for(r=0;c>r;r++)t=s[r],m[t][l[r]-v[t]]=u[r];for(t=0;d-1>t;t++)for(i=t-v[t],f=m[t],n=t+1;v[n]<=t&&d>n;n++)if(a=t-v[n],o=y[t]-t,h=m[n],p=h[a]/f[i]){for(r=1;o>=r;r++)h[r+a]-=p*f[r+i];g[n][t-v[n]]=p}var c,w,I,f=[],h=[],A=[],C=[],_=[],k=[];for(c=0,w=0,t=0;d>t;t++){for(i=v[t],a=y[t],I=m[t],n=t;a>=n;n++)I[n-i]&&(f[c]=t,h[c]=n,A[c]=I[n-i],c++);for(I=g[t],n=i;t>n;n++)I[n-i]&&(C[w]=t,_[w]=n,k[w]=I[n-i],w++);C[w]=t,_[w]=t,k[w]=1,w++}return{U:[f,h,A],L:[C,_,k]}},numeric.cLUsolve=function(e,t){var n,r,i=e.L,a=e.U,o=numeric.clone(t),s=i[0],l=i[1],u=i[2],c=a[0],d=a[1],f=a[2],h=c.length,p=(s.length,o.length);for(r=0,n=0;p>n;n++){for(;l[r]<n;)o[n]-=u[r]*o[l[r]],r++;r++}for(r=h-1,n=p-1;n>=0;n--){for(;d[r]>n;)o[n]-=f[r]*o[d[r]],r--;o[n]/=f[r],r--}return o},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,a=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(a[n][r]=i,i++);return a},numeric.cdelsq=function(e){var t,n,r,i,a,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],d=[],f=[];for(t=1;l-1>t;t++)for(n=1;u-1>n;n++)if(!(e[t][n]<0)){for(r=0;4>r;r++)i=t+o[r][0],a=n+o[r][1],e[i][a]<0||(c.push(e[t][n]),d.push(e[i][a]),f.push(-1));c.push(e[t][n]),d.push(e[t][n]),f.push(4)}return[c,d,f]},numeric.cdotMV=function(e,t){var n,r,i,a=e[0],o=e[1],s=e[2],l=a.length;for(i=0,r=0;l>r;r++)a[r]>i&&(i=a[r]);for(i++,n=numeric.rep([i],0),r=0;l>r;r++)n[a[r]]+=s[r]*t[o[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,n,r,i,a=this.x,o=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,d=numeric.sub,f=numeric.mul;n=d(f(l[t],a[t+1]-a[t]),d(s[t+1],o[t])),r=c(f(u[t+1],a[t]-a[t+1]),d(s[t+1],o[t])),i=(e-a[t])/(a[t+1]-a[t]);var h=i*(1-i);return c(c(c(f(1-i,o[t]),f(i,s[t+1])),f(n,h*(1-i))),f(r,h*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,a=i.length,o=Math.floor;for(t=0,n=a-1;n-t>1;)r=o((t+n)/2),i[r]<=e?t=r:n=r;return this._at(e,t)}var s,a=e.length,l=Array(a);for(s=a-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,a=this.yr,o=this.kl,s=this.kr,l=i.length,u=o,c=s,d=Array(l),f=Array(l),h=numeric.add,p=numeric.mul,g=numeric.div,m=numeric.sub;for(e=l-1;-1!==e;--e)t=r[e+1]-r[e],n=m(a[e+1],i[e]),d[e]=g(h(p(n,6),p(o[e],-4*t),p(s[e+1],-2*t)),t*t),f[e+1]=g(h(p(n,-6),p(o[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(r,u,c,d,f)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,a=this.kl,o=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],a=[a],o=[o]);var s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j=r.length,D=n.length-1,t=Array(j),T=Math.sqrt;for(s=0;s!==j;++s){for(c=r[s],d=i[s],f=a[s],h=o[s],p=[],l=0;l!==D;l++){for(l>0&&d[l]*c[l]<0&&p.push(n[l]),I=n[l+1]-n[l],A=n[l],v=c[l],y=d[l+1],g=f[l]/I,m=h[l+1]/I,w=e(g-m+3*(v-y))+12*m*v,x=m+3*v+2*g-3*y,b=3*(m+g+2*(v-y)),0>=w?(_=x/b,C=_>n[l]&&_<n[l+1]?[n[l],_,n[l+1]]:[n[l],n[l+1]]):(_=(x-T(w))/b,k=(x+T(w))/b,C=[n[l]],_>n[l]&&_<n[l+1]&&C.push(_),k>n[l]&&k<n[l+1]&&C.push(k),C.push(n[l+1])),z=C[0],_=this._at(z,l),u=0;u<C.length-1;u++)if(N=C[u+1],k=this._at(N,l),0!==_)if(0===k||_*k>0)z=N,_=k;else{for(var O=0;S=(_*N-k*z)/(_-k),!(z>=S||S>=N);)if(M=this._at(S,l),M*k>0)N=S,k=M,-1===O&&(_*=.5),O=-1;else{if(!(M*_>0))break;z=S,_=M,1===O&&(k*=.5),O=1}p.push(S),z=C[u+1],_=this._at(z,l)}else p.push(z),z=N,_=k;0===k&&p.push(N)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,a=e.length,o=[],s=[],l=[],u=numeric.sub,c=numeric.mul,d=numeric.add;for(i=a-2;i>=0;i--)s[i]=e[i+1]-e[i],l[i]=u(t[i+1],t[i]);("string"==typeof n||"string"==typeof r)&&(n=r="periodic");var f=[[],[],[]];switch(typeof n){case"undefined":o[0]=c(3/(s[0]*s[0]),l[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/s[0],1/s[0]);break;case"string":o[0]=d(c(3/(s[a-2]*s[a-2]),l[a-2]),c(3/(s[0]*s[0]),l[0])),f[0].push(0,0,0),f[1].push(a-2,0,1),f[2].push(1/s[a-2],2/s[a-2]+2/s[0],1/s[0]);break;default:o[0]=n,f[0].push(0),f[1].push(0),f[2].push(1)}for(i=1;a-1>i;i++)o[i]=d(c(3/(s[i-1]*s[i-1]),l[i-1]),c(3/(s[i]*s[i]),l[i])),f[0].push(i,i,i),f[1].push(i-1,i,i+1),f[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof r){case"undefined":o[a-1]=c(3/(s[a-2]*s[a-2]),l[a-2]),f[0].push(a-1,a-1),f[1].push(a-2,a-1),f[2].push(1/s[a-2],2/s[a-2]);break;case"string":f[1][f[1].length-1]=0;break;default:o[a-1]=r,f[0].push(a-1),f[1].push(a-1),f[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var h=Array(o.length);if("string"==typeof n)for(i=h.length-1;-1!==i;--i)h[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),o[i]),h[i][a-1]=h[i][0];else for(i=h.length-1;-1!==i;--i)h[i]=numeric.cLUsolve(numeric.cLU(f),o[i]);return h="number"==typeof t[0]?h[0]:numeric.transpose(h),new numeric.Spline(e,t,t,h,h)},numeric.fftpow2=function d(e,t){var n=e.length;if(1!==n){var r,i,a=Math.cos,o=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],c[i]=t[r],--r,s[i]=e[r],l[i]=t[r];d(s,l),d(u,c),i=n/2;var f,h,p,g=-6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),f=g*r,h=a(f),p=o(f),e[r]=s[i]+h*u[i]-p*c[i],t[r]=l[i]+h*c[i]+p*u[i]}},numeric._ifftpow2=function f(e,t){var n=e.length;if(1!==n){var r,i,a=Math.cos,o=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],c[i]=t[r],--r,s[i]=e[r],l[i]=t[r];f(s,l),f(u,c),i=n/2;var d,h,p,g=6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),d=g*r,h=a(d),p=o(d),e[r]=s[i]+h*u[i]-p*c[i],t[r]=l[i]+h*c[i]+p*u[i]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){numeric.fftpow2(e,t),numeric.fftpow2(n,r);var i,a,o,s,l,u=e.length;for(i=u-1;-1!==i;--i)a=e[i],s=t[i],o=n[i],l=r[i],e[i]=a*o-s*l,t[i]=a*l+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),d=Math.cos,f=Math.sin,h=-3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(Math.floor(i/2),e=0;i>e;e++)p[e]=n[e];if("undefined"!=typeof r)for(e=0;i>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=h*e*e,u[e]=d(t),c[e]=f(t),u[l-e]=d(t),c[l-e]=f(t);var m=new numeric.T(p,g),v=new numeric.T(u,c);return m=m.mul(v),numeric.convpow2(m.x,m.y,numeric.clone(v.x),numeric.neg(v.y)),m=m.mul(v),m.x.length=i,m.y.length=i,m},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),d=Math.cos,f=Math.sin,h=3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(Math.floor(i/2),e=0;i>e;e++)p[e]=n[e];if("undefined"!=typeof r)for(e=0;i>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=h*e*e,u[e]=d(t),c[e]=f(t),u[l-e]=d(t),c[l-e]=f(t);var m=new numeric.T(p,g),v=new numeric.T(u,c);return m=m.mul(v),numeric.convpow2(m.x,m.y,numeric.clone(v.x),numeric.neg(v.y)),m=m.mul(v),m.x.length=i,m.y.length=i,m.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,a,o,s,l,u,c,d,f,h,p=Math.max,g=numeric.clone(t),m=Array(n),p=(numeric.div,numeric.sub,Math.max),v=.001,y=Math.abs,x=Math.min,b=0;for(i=0;n>i;i++)for(var w=p(1e-6*r,1e-8);;){if(++b,b>20)throw new Error("Numerical gradient fails");if(g[i]=t[i]+w,a=e(g),g[i]=t[i]-w,o=e(g),g[i]=t[i],isNaN(a)||isNaN(o))w/=16;else{if(m[i]=(a-o)/(2*w),l=t[i]-w,u=t[i],c=t[i]+w,d=(a-r)/w,f=(r-o)/w,h=p(y(m[i]),y(r),y(a),y(o),y(l),y(u),y(c),1e-8),s=x(p(y(d-m[i]),y(f-m[i]),y(d-f))/h,w/h),!(s>v))break;w/=16}}return m},numeric.uncmin=function(e,t,n,r,i,a,o){var s=numeric.gradient;"undefined"==typeof o&&(o={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof r&&(r=function(t){return s(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var l,u,c=t.length,d=e(t);if(isNaN(d))throw new Error("uncmin: f(x0) is a NaN!");var f=Math.max,h=numeric.norm2;n=f(n,numeric.epsilon);var p,g,m,v,y,x,b,w,I,A,C=o.Hinv||numeric.identity(c),_=numeric.dot,k=(numeric.inv,numeric.sub),M=numeric.add,z=numeric.tensor,N=numeric.div,S=numeric.mul,j=numeric.all,D=numeric.isFinite,T=numeric.neg,O=0,L="";for(g=r(t);i>O;){if("function"==typeof a&&a(O,t,d,g,C)){L="Callback returned true";break}if(!j(D(g))){L="Gradient has Infinity or NaN";break}if(p=T(_(C,g)),!j(D(p))){L="Search direction has Infinity or NaN";break}if(A=h(p),n>A){L="Newton step smaller than tol";break}for(I=1,u=_(g,p),y=t;i>O&&!(n>I*A)&&(v=S(p,I),y=M(t,v),l=e(y),l-d>=.1*I*u||isNaN(l));)I*=.5,++O;if(n>I*A){L="Line search step size smaller than tol";break}if(O===i){L="maxit reached during line search";break}m=r(y),x=k(m,g),w=_(x,v),b=_(C,x),C=k(M(C,S((w+_(x,b))/(w*w),z(v,v))),N(M(z(b,v),z(v,b)),w)),t=y,d=l,g=m,++O}return{solution:t,f:d,gradient:g,invHessian:C,iterations:O,message:L}},numeric.Dopri=function(e,t,n,r,i,a,o){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=o,this.message=a},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,a,o,s,l,e,u,c,d,f,h=this,p=h.x,g=h.y,m=h.f,v=h.ymid,y=(p.length,Math.floor,.5),x=numeric.add,b=numeric.mul,w=numeric.sub;return r=p[t],i=p[t+1],o=g[t],s=g[t+1],u=i-r,a=r+y*u,l=v[t],c=w(m[t],b(o,1/(r-a)+2/(r-i))),d=w(m[t+1],b(s,1/(i-a)+2/(i-r))),f=[n(e-i)*(e-a)/n(r-i)/(r-a),n(e-r)*n(e-i)/n(r-a)/n(i-a),n(e-r)*(e-a)/n(i-r)/(i-a),(e-r)*n(e-i)*(e-a)/n(r-i)/(r-a),(e-i)*n(e-r)*(e-a)/n(r-i)/(i-a)],
x(x(x(x(b(o,f[0]),b(l,f[1])),b(s,f[2])),b(c,f[3])),b(d,f[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var a=e.length,o=Array(a);for(t=a-1;-1!==t;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,n=s.length-1;n-t>1;)r=i(.5*(t+n)),s[r]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,a,o){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof a&&(a=1e3);var s,l,u,c,d,f,h,p,g,m,v,y,x,b=[e],w=[n],I=[r(e,n)],A=[],C=.2,_=[.075,.225],k=[44/45,-56/15,32/9],M=[19372/6561,-25360/2187,64448/6561,-212/729],z=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],N=[35/384,0,500/1113,125/192,-2187/6784,11/84],S=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],j=[.2,.3,.8,8/9,1,1],D=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],T=0,O=(t-e)/10,L=0,E=numeric.add,B=numeric.mul,F=(Math.max,Math.min),P=Math.abs,G=numeric.norminf,Z=Math.pow,R=numeric.any,Y=numeric.lt,W=numeric.and,U=(numeric.sub,new numeric.Dopri(b,w,I,A,-1,""));for("function"==typeof o&&(v=o(e,n));t>e&&a>L;)if(++L,e+O>t&&(O=t-e),s=r(e+j[0]*O,E(n,B(C*O,I[T]))),l=r(e+j[1]*O,E(E(n,B(_[0]*O,I[T])),B(_[1]*O,s))),u=r(e+j[2]*O,E(E(E(n,B(k[0]*O,I[T])),B(k[1]*O,s)),B(k[2]*O,l))),c=r(e+j[3]*O,E(E(E(E(n,B(M[0]*O,I[T])),B(M[1]*O,s)),B(M[2]*O,l)),B(M[3]*O,u))),d=r(e+j[4]*O,E(E(E(E(E(n,B(z[0]*O,I[T])),B(z[1]*O,s)),B(z[2]*O,l)),B(z[3]*O,u)),B(z[4]*O,c))),g=E(E(E(E(E(n,B(I[T],O*N[0])),B(l,O*N[2])),B(u,O*N[3])),B(c,O*N[4])),B(d,O*N[5])),f=r(e+O,g),h=E(E(E(E(E(B(I[T],O*D[0]),B(l,O*D[2])),B(u,O*D[3])),B(c,O*D[4])),B(d,O*D[5])),B(f,O*D[6])),m="number"==typeof h?P(h):G(h),m>i){if(O=.2*O*Z(i/m,.25),e+O===e){U.msg="Step size became too small";break}}else{if(A[T]=E(E(E(E(E(E(n,B(I[T],O*S[0])),B(l,O*S[2])),B(u,O*S[3])),B(c,O*S[4])),B(d,O*S[5])),B(f,O*S[6])),++T,b[T]=e+O,w[T]=g,I[T]=f,"function"==typeof o){var V,X,H=e,J=e+.5*O;if(y=o(J,A[T-1]),x=W(Y(v,0),Y(0,y)),R(x)||(H=J,J=e+O,v=y,y=o(J,g),x=W(Y(v,0),Y(0,y))),R(x)){for(var q,Q,K=0,$=1,ee=1;;){if("number"==typeof v)X=(ee*y*H-$*v*J)/(ee*y-$*v);else for(X=J,p=v.length-1;-1!==p;--p)v[p]<0&&y[p]>0&&(X=F(X,(ee*y[p]*H-$*v[p]*J)/(ee*y[p]-$*v[p])));if(H>=X||X>=J)break;V=U._at(X,T-1),Q=o(X,V),q=W(Y(v,0),Y(0,Q)),R(q)?(J=X,y=Q,x=q,ee=1,-1===K?$*=.5:$=1,K=-1):(H=X,v=Q,$=1,1===K?ee*=.5:ee=1,K=1)}return g=U._at(.5*(e+X),T-1),U.f[T]=r(X,V),U.x[T]=X,U.y[T]=V,U.ymid[T-1]=g,U.events=x,U.iterations=L,U}}e+=O,n=g,v=y,O=F(.8*O*Z(i/m,.25),4*O)}return U.iterations=L,U},numeric.LU=function(e,t){t=t||!1;var n,r,i,a,o,s,l,u,c,d=Math.abs,f=e.length,h=f-1,p=new Array(f);for(t||(e=numeric.clone(e)),i=0;f>i;++i){for(l=i,s=e[i],c=d(s[i]),r=i+1;f>r;++r)a=d(e[r][i]),a>c&&(c=a,l=r);for(p[i]=l,l!=i&&(e[i]=e[l],e[l]=s,s=e[i]),o=s[i],n=i+1;f>n;++n)e[n][i]/=o;for(n=i+1;f>n;++n){for(u=e[n],r=i+1;h>r;++r)u[r]-=u[i]*s[r],++r,u[r]-=u[i]*s[r];r===h&&(u[r]-=u[i]*s[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,i,a,o,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(n=l-1;-1!==n;--n)u[n]=t[n];for(n=0;l>n;++n)for(i=c[n],c[n]!==n&&(o=u[n],u[n]=u[i],u[i]=o),a=s[n],r=0;n>r;++r)u[n]-=u[r]*a[r];for(n=l-1;n>=0;--n){for(a=s[n],r=n+1;l>r;++r)u[n]-=u[r]*a[r];u[n]/=a[n]}return u},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,a,o,s,l,u=numeric.dim(e),c=u[0],d=u[1],f=numeric.identity(c),h=Array(c),p=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;c>t;++t){for(r=0,a=e[t],o=f[t],n=1;d>n;++n)p(a[r])<p(a[n])&&(r=n);for(h[t]=r,g(o,a[r]),g(a,a[r]),n=0;c>n;++n)if(n!==t){for(s=e[n],l=s[r],i=d-1;-1!==i;--i)s[i]-=a[i]*l;for(s=f[n],i=c-1;-1!==i;--i)s[i]-=o[i]*l}}return{I:f,A:e,P:h}},numeric.__solveLP=function(e,t,n,r,i,a,o){var s,l,u,c,d=numeric.sum,f=(numeric.log,numeric.mul),h=numeric.sub,p=numeric.dot,g=numeric.div,m=numeric.add,v=e.length,y=n.length,x=!1,b=0,w=1,I=(numeric.transpose(t),numeric.svd,numeric.transpose),A=(numeric.leq,Math.sqrt),C=Math.abs,_=(numeric.muleq,numeric.norminf,numeric.any,Math.min),k=numeric.all,M=numeric.gt,z=Array(v),N=Array(y),S=(numeric.rep([y],1),numeric.solve),j=h(n,p(t,a)),D=p(e,e);for(u=b;i>u;++u){var T,O;for(T=y-1;-1!==T;--T)N[T]=g(t[T],j[T]);var L=I(N);for(T=v-1;-1!==T;--T)z[T]=d(L[T]);w=.25*C(D/p(e,z));var E=100*A(D/p(z,z));for((!isFinite(w)||w>E)&&(w=E),c=m(e,f(w,z)),l=p(L,N),T=v-1;-1!==T;--T)l[T][T]+=1;O=S(l,g(c,w),!0);var B=g(j,p(t,O)),F=1;for(T=y-1;-1!==T;--T)B[T]<0&&(F=_(F,-.999*B[T]));if(s=h(a,f(O,F)),j=h(n,p(t,s)),!k(M(j,0)))return{solution:a,message:"",iterations:u};if(a=s,r>w)return{solution:s,message:"",iterations:u};if(o){var P=p(e,c),G=p(t,c);for(x=!0,T=y-1;-1!==T;--T)if(P*G[T]<0){x=!1;break}}else x=a[v-1]>=0?!1:!0;if(x)return{solution:s,message:"Unbounded",iterations:u}}return{solution:a,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,n,r,i){var a,o=e.length,s=n.length,l=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),d=numeric.rep([s,1],-1),f=numeric.blockMatrix([[t,d]]),h=n,a=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(c,f,h,r,i,a,!1),g=numeric.clone(p.solution);g.length=o;var m=numeric.inf(l(n,u(t,g)));if(0>m)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var v=numeric.__solveLP(e,t,n,r,i-p.iterations,g,!0);return v.iterations+=p.iterations,v},numeric.solveLP=function(e,t,n,r,i,a,o){if("undefined"==typeof o&&(o=1e3),"undefined"==typeof a&&(a=numeric.epsilon),"undefined"==typeof r)return numeric._solveLP(e,t,n,a,o);var s,l=r.length,u=r[0].length,c=t.length,d=numeric.echelonize(r),f=numeric.rep([u],0),h=d.P,p=[];for(s=h.length-1;-1!==s;--s)f[h[s]]=1;for(s=u-1;-1!==s;--s)0===f[s]&&p.push(s);var g=numeric.getRange,m=numeric.linspace(0,l-1),v=numeric.linspace(0,c-1),y=g(r,m,p),x=g(t,v,h),b=g(t,v,p),w=numeric.dot,I=numeric.sub,A=w(x,d.I),C=I(b,w(A,y)),_=I(n,w(A,i)),k=Array(h.length),M=Array(p.length);for(s=h.length-1;-1!==s;--s)k[s]=e[h[s]];for(s=p.length-1;-1!==s;--s)M[s]=e[p[s]];var z=I(M,w(k,w(d.I,y))),N=numeric._solveLP(z,C,_,a,o),S=N.solution;if(S!==S)return N;var j=w(d.I,I(i,w(y,S))),D=Array(e.length);for(s=h.length-1;-1!==s;--s)D[h[s]]=j[s];for(s=p.length-1;-1!==s;--s)D[p[s]]=S[s];return{solution:D,message:N.message,iterations:N.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\nLine "+n+": "+e[n]+"\nCurrent state: "+s[o]+"\n")}e instanceof String&&e.split("\n");var n,r,i,a,o=0,s=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],l=e.length,u=0,c={},d=[],f=0,h={},p=0,g=[],m=[],v=[];for(n=0;l>n;++n){i=e[n];var y=i.match(/\S*/g),x=[];for(r=0;r<y.length;++r)""!==y[r]&&x.push(y[r]);if(0!==x.length){for(r=0;r<s.length&&i.substr(0,s[r].length)!==s[r];++r);if(r<s.length){if(o=r,1===r&&(a=x[1]),6===r)return{name:a,c:g,A:numeric.transpose(m),b:v,rows:c,vars:h}}else switch(o){case 0:case 1:t("Unexpected line");case 2:switch(x[0]){case"N":0===u?u=x[1]:t("Two or more N rows");break;case"L":c[x[1]]=f,d[f]=1,v[f]=0,++f;break;case"G":c[x[1]]=f,d[f]=-1,v[f]=0,++f;break;case"E":c[x[1]]=f,d[f]=0,v[f]=0,++f;break;default:t("Parse error "+numeric.prettyPrint(x))}break;case 3:h.hasOwnProperty(x[0])||(h[x[0]]=p,g[p]=0,m[p]=numeric.rep([f],0),++p);var b=h[x[0]];for(r=1;r<x.length;r+=2)if(x[r]!==u){var w=c[x[r]];m[b][w]=(d[w]<0?-1:1)*parseFloat(x[r+1])}else g[b]=parseFloat(x[r+1]);break;case 4:for(r=1;r<x.length;r+=2)v[c[x[r]]]=(d[c[x[r]]]<0?-1:1)*parseFloat(x[r+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,a,o){function s(e){var t,r,i=this,a=e.length,o=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],a||(e=[a++]);n>o;)i.S[o]=o++;for(o=0;n>o;o++)t=i.S[o],s=c(s+t+e[o%a]),r=i.S[s],i.S[o]=r,i.S[s]=t;i.g=function(e){var t=i.S,r=c(i.i+1),a=t[r],o=c(i.j+a),s=t[o];t[r]=s,t[o]=a;for(var l=t[c(a+s)];--e;)r=c(r+1),a=t[r],o=c(o+a),s=t[o],t[r]=s,t[o]=a,l=l*n+t[c(a+s)];return i.i=r,i.j=o,l},i.g(n)}function l(e,t,n,r,i){if(n=[],i=typeof e,t&&"object"==i)for(r in e)if(r.indexOf("S")<5)try{n.push(l(e[r],t-1))}catch(a){}return n.length?n:e+("string"!=i?"\x00":"")}function u(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[c(r)]=c((n^=19*t[c(r)])+e.charCodeAt(r));e="";for(r in t)e+=String.fromCharCode(t[r]);return e}function c(e){return e&n-1}t.seedrandom=function(c,d){var f,h=[];return c=u(l(d?[c,e]:arguments.length?c:[(new Date).getTime(),e,window],3),h),f=new s(h),u(f.S,e),t.random=function(){for(var e=f.g(r),t=o,s=0;i>e;)e=(e+s)*n,t*=n,s=f.g(1);for(;e>=a;)e/=2,t/=2,s>>>=1;return(e+s)/t},c},o=t.pow(n,r),i=t.pow(2,i),a=2*i,u(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;i>n;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;i>t;t++)r[t-1]=n(e[t]);return r}function r(e,t,n){var r,i,a,o,s;for(a=1;n>=a;a+=1){for(e[a][a]=1/e[a][a],s=-e[a][a],r=1;a>r;r+=1)e[r][a]=s*e[r][a];if(o=a+1,o>n)break;for(i=o;n>=i;i+=1)for(s=e[a][i],e[a][i]=0,r=1;a>=r;r+=1)e[r][i]=e[r][i]+s*e[r][a]}}function i(e,t,n,r){var i,a,o,s;for(a=1;n>=a;a+=1){for(s=0,i=1;a>i;i+=1)s+=e[i][a]*r[i];r[a]=(r[a]-s)/e[a][a]}for(o=1;n>=o;o+=1)for(a=n+1-o,r[a]=r[a]/e[a][a],s=-r[a],i=1;a>i;i+=1)r[i]=r[i]+s*e[i][a]}function a(e,t,n,r){var i,a,o,s,l,u;for(a=1;n>=a;a+=1){if(r[1]=a,u=0,o=a-1,1>o){if(u=e[a][a]-u,0>=u)break;e[a][a]=Math.sqrt(u)}else{for(s=1;o>=s;s+=1){for(l=e[s][a],i=1;s>i;i+=1)l-=e[i][a]*e[i][s];l/=e[s][s],e[s][a]=l,u+=l*l}if(u=e[a][a]-u,0>=u)break;e[a][a]=Math.sqrt(u)}r[1]=0}}function o(e,t,n,o,s,l,u,c,d,f,h,p,g,m,v,y){function x(){for(m[1]=m[1]+1,k=T,C=1;f>=C;C+=1){for(k+=1,P=-c[C],_=1;o>=_;_+=1)P+=u[_][C]*s[_];if(Math.abs(P)<X&&(P=0),C>h)v[k]=P;else if(v[k]=-Math.abs(P),P>0){for(_=1;o>=_;_+=1)u[_][C]=-u[_][C];c[C]=-c[C]}}for(C=1;g>=C;C+=1)v[T+p[C]]=0;for(L=0,F=0,C=1;f>=C;C+=1)v[T+C]<F*v[B+C]&&(L=C,F=v[T+C]/v[B+C]);return 0===L?999:0}function b(){for(C=1;o>=C;C+=1){for(P=0,_=1;o>=_;_+=1)P+=e[_][C]*u[_][L];v[C]=P}for(M=S,C=1;o>=C;C+=1)v[M+C]=0;for(_=g+1;o>=_;_+=1)for(C=1;o>=C;C+=1)v[M+C]=v[M+C]+e[C][_]*v[_];for(U=!0,C=g;C>=1;C-=1){for(P=v[C],k=D+C*(C+3)/2,M=k-C,_=C+1;g>=_;_+=1)P-=v[k]*v[j+_],k+=_;if(P/=v[M],v[j+C]=P,p[C]<h)break;if(0>P)break;U=!1,N=C}if(!U)for(G=v[O+N]/v[j+N],C=1;g>=C&&!(p[C]<h)&&!(v[j+C]<0);C+=1)F=v[O+C]/v[j+C],G>F&&(G=F,N=C);for(P=0,C=S+1;S+o>=C;C+=1)P+=v[C]*v[C];if(Math.abs(P)<=X){if(U)return y[1]=1,999;for(C=1;g>=C;C+=1)v[O+C]=v[O+C]-G*v[j+C];return v[O+g+1]=v[O+g+1]+G,700}for(P=0,C=1;o>=C;C+=1)P+=v[S+C]*u[C][L];for(Z=-v[T+L]/P,V=!0,U||Z>G&&(Z=G,V=!1),C=1;o>=C;C+=1)s[C]=s[C]+Z*v[S+C],Math.abs(s[C])<X&&(s[C]=0);for(l[1]=l[1]+Z*P*(Z/2+v[O+g+1]),C=1;g>=C;C+=1)v[O+C]=v[O+C]-Z*v[j+C];if(v[O+g+1]=v[O+g+1]+Z,!V){for(P=-c[L],_=1;o>=_;_+=1)P+=s[_]*u[_][L];if(L>h)v[T+L]=P;else if(v[T+L]=-Math.abs(P),P>0){for(_=1;o>=_;_+=1)u[_][L]=-u[_][L];c[L]=-c[L]}return 700}for(g+=1,p[g]=L,k=D+(g-1)*g/2+1,C=1;g-1>=C;C+=1)v[k]=v[C],k+=1;if(g===o)v[k]=v[o];else{for(C=o;C>=g+1&&0!==v[C]&&(R=Math.max(Math.abs(v[C-1]),Math.abs(v[C])),Y=Math.min(Math.abs(v[C-1]),Math.abs(v[C])),F=v[C-1]>=0?Math.abs(R*Math.sqrt(1+Y*Y/(R*R))):-Math.abs(R*Math.sqrt(1+Y*Y/(R*R))),R=v[C-1]/F,Y=v[C]/F,1!==R);C-=1)if(0===R)for(v[C-1]=Y*F,_=1;o>=_;_+=1)F=e[_][C-1],e[_][C-1]=e[_][C],e[_][C]=F;else for(v[C-1]=F,W=Y/(1+R),_=1;o>=_;_+=1)F=R*e[_][C-1]+Y*e[_][C],e[_][C]=W*(e[_][C-1]+F)-e[_][C],e[_][C-1]=F;v[k]=v[g]}return 0}function w(){if(k=D+N*(N+1)/2+1,M=k+N,0===v[M])return 798;if(R=Math.max(Math.abs(v[M-1]),Math.abs(v[M])),Y=Math.min(Math.abs(v[M-1]),Math.abs(v[M])),F=v[M-1]>=0?Math.abs(R*Math.sqrt(1+Y*Y/(R*R))):-Math.abs(R*Math.sqrt(1+Y*Y/(R*R))),R=v[M-1]/F,Y=v[M]/F,1===R)return 798;if(0===R){for(C=N+1;g>=C;C+=1)F=v[M-1],v[M-1]=v[M],v[M]=F,M+=C;for(C=1;o>=C;C+=1)F=e[C][N],e[C][N]=e[C][N+1],e[C][N+1]=F}else{for(W=Y/(1+R),C=N+1;g>=C;C+=1)F=R*v[M-1]+Y*v[M],v[M]=W*(v[M-1]+F)-v[M],v[M-1]=F,M+=C;for(C=1;o>=C;C+=1)F=R*e[C][N]+Y*e[C][N+1],e[C][N+1]=W*(e[C][N]+F)-e[C][N+1],e[C][N]=F}return 0}function I(){for(M=k-N,C=1;N>=C;C+=1)v[M]=v[k],k+=1,M+=1;return v[O+N]=v[O+N+1],p[N]=p[N+1],N+=1,g>N?797:0}function A(){return v[O+g]=v[O+g+1],v[O+g+1]=0,p[g]=0,g-=1,m[2]=m[2]+1,0}var C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U,V,X,H,J,q;E=Math.min(o,f),k=2*o+E*(E+5)/2+2*f+1,X=1e-60;do X+=X,H=1+.1*X,J=1+.2*X;while(1>=H||1>=J);for(C=1;o>=C;C+=1)v[C]=t[C];for(C=o+1;k>=C;C+=1)v[C]=0;for(C=1;f>=C;C+=1)p[C]=0;if(z=[],0===y[1]){if(a(e,n,o,z),0!==z[1])return void(y[1]=2);i(e,n,o,t),r(e,n,o)}else{for(_=1;o>=_;_+=1)for(s[_]=0,C=1;_>=C;C+=1)s[_]=s[_]+e[C][_]*t[C];for(_=1;o>=_;_+=1)for(t[_]=0,C=_;o>=C;C+=1)t[_]=t[_]+e[_][C]*s[C]}for(l[1]=0,_=1;o>=_;_+=1)for(s[_]=t[_],l[1]=l[1]+v[_]*s[_],v[_]=0,C=_+1;o>=C;C+=1)e[C][_]=0;for(l[1]=-l[1]/2,y[1]=0,S=o,j=S+o,O=j+E,D=O+E+1,T=D+E*(E+1)/2,B=T+f,C=1;f>=C;C+=1){for(P=0,_=1;o>=_;_+=1)P+=u[_][C]*u[_][C];v[B+C]=Math.sqrt(P)}for(g=0,m[1]=0,m[2]=0,q=0;;){if(q=x(),999===q)return;for(;q=b(),0!==q;){if(999===q)return;if(700===q)if(N===g)A();else{for(;w(),q=I(),797===q;);A()}}}}function s(e,r,i,a,s,l){e=t(e),r=t(r),i=t(i);var u,c,d,f,h,p,g=[],m=[],v=[],y=[],x=[];if(s=s||0,l=l?t(l):[void 0,0],a=a?t(a):[],c=e.length-1,d=i[1].length-1,!a)for(u=1;d>=u;u+=1)a[u]=0;for(u=1;d>=u;u+=1)m[u]=0;for(f=0,h=Math.min(c,d),u=1;c>=u;u+=1)v[u]=0;for(g[1]=0,u=1;2*c+h*(h+5)/2+2*d+1>=u;u+=1)y[u]=0;for(u=1;2>=u;u+=1)x[u]=0;return o(e,r,c,c,v,g,i,a,c,d,s,m,f,x,y,l),p="",1===l[1]&&(p="constraints are inconsistent, no solution!"),2===l[1]&&(p="matrix D in quadratic function is not positive definite!"),{solution:n(v),value:n(g),unconstrained_solution:n(r),iterations:n(x),iact:n(m),message:p}}e.solveQP=s}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var n,r=numeric.epsilon,i=1e-64/r,a=50,o=0,s=0,l=0,u=0,c=0,d=numeric.clone(e),f=d.length,h=d[0].length;if(h>f)throw"Need more rows than columns";var p=new Array(h),g=new Array(h);for(s=0;h>s;s++)p[s]=g[s]=0;var m=numeric.rep([h,h],0),v=0,y=0,x=0,b=0,w=0,I=0,A=0;for(s=0;h>s;s++){for(p[s]=y,A=0,c=s+1,l=s;f>l;l++)A+=d[l][s]*d[l][s];if(i>=A)y=0;else for(v=d[s][s],y=Math.sqrt(A),v>=0&&(y=-y),x=v*y-A,d[s][s]=v-y,l=c;h>l;l++){for(A=0,u=s;f>u;u++)A+=d[u][s]*d[u][l];for(v=A/x,u=s;f>u;u++)d[u][l]+=v*d[u][s]}for(g[s]=y,A=0,l=c;h>l;l++)A+=d[s][l]*d[s][l];if(i>=A)y=0;else{for(v=d[s][s+1],y=Math.sqrt(A),v>=0&&(y=-y),x=v*y-A,d[s][s+1]=v-y,l=c;h>l;l++)p[l]=d[s][l]/x;for(l=c;f>l;l++){for(A=0,u=c;h>u;u++)A+=d[l][u]*d[s][u];for(u=c;h>u;u++)d[l][u]+=A*p[u]}}w=Math.abs(g[s])+Math.abs(p[s]),w>b&&(b=w)}for(s=h-1;-1!=s;s+=-1){if(0!=y){for(x=y*d[s][s+1],l=c;h>l;l++)m[l][s]=d[s][l]/x;for(l=c;h>l;l++){for(A=0,u=c;h>u;u++)A+=d[s][u]*m[u][l];for(u=c;h>u;u++)m[u][l]+=A*m[u][s]}}for(l=c;h>l;l++)m[s][l]=0,m[l][s]=0;m[s][s]=1,y=p[s],c=s}for(s=h-1;-1!=s;s+=-1){for(c=s+1,y=g[s],l=c;h>l;l++)d[s][l]=0;if(0!=y){for(x=d[s][s]*y,l=c;h>l;l++){for(A=0,u=c;f>u;u++)A+=d[u][s]*d[u][l];for(v=A/x,u=s;f>u;u++)d[u][l]+=v*d[u][s]}for(l=s;f>l;l++)d[l][s]=d[l][s]/y}else for(l=s;f>l;l++)d[l][s]=0;d[s][s]+=1}for(r*=b,u=h-1;-1!=u;u+=-1)for(var C=0;a>C;C++){var _=!1;for(c=u;-1!=c;c+=-1){if(Math.abs(p[c])<=r){_=!0;break}if(Math.abs(g[c-1])<=r)break}if(!_){o=0,A=1;var k=c-1;for(s=c;u+1>s&&(v=A*p[s],p[s]=o*p[s],!(Math.abs(v)<=r));s++)for(y=g[s],x=t(v,y),g[s]=x,o=y/x,A=-v/x,l=0;f>l;l++)w=d[l][k],I=d[l][s],d[l][k]=w*o+I*A,d[l][s]=-w*A+I*o}if(I=g[u],c==u){if(0>I)for(g[u]=-I,l=0;h>l;l++)m[l][u]=-m[l][u];break}if(C>=a-1)throw"Error: no convergence.";for(b=g[c],w=g[u-1],y=p[u-1],x=p[u],v=((w-I)*(w+I)+(y-x)*(y+x))/(2*x*w),y=t(v,1),v=0>v?((b-I)*(b+I)+x*(w/(v-y)-x))/b:((b-I)*(b+I)+x*(w/(v+y)-x))/b,o=1,A=1,s=c+1;u+1>s;s++){for(y=p[s],w=g[s],x=A*y,y=o*y,I=t(v,x),p[s-1]=I,o=v/I,A=x/I,v=b*o+y*A,y=-b*A+y*o,x=w*A,w*=o,l=0;h>l;l++)b=m[l][s-1],I=m[l][s],m[l][s-1]=b*o+I*A,m[l][s]=-b*A+I*o;for(I=t(v,x),g[s-1]=I,o=v/I,A=x/I,v=o*y+A*w,b=-A*y+o*w,l=0;f>l;l++)w=d[l][s-1],I=d[l][s],d[l][s-1]=w*o+I*A,d[l][s]=-w*A+I*o}p[c]=0,p[u]=v,g[u]=b}for(s=0;s<g.length;s++)g[s]<r&&(g[s]=0);for(s=0;h>s;s++)for(l=s-1;l>=0;l--)if(g[l]<g[s]){for(o=g[l],g[l]=g[s],g[s]=o,u=0;u<d.length;u++)n=d[u][s],d[u][s]=d[u][l],d[u][l]=n;for(u=0;u<m.length;u++)n=m[u][s],m[u][s]=m[u][l],m[u][l]=n;s=l}return{U:d,S:g,V:m}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){!function(){"use strict";function e(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function n(e,t,n){var r=t.x,i=t.y,a=n.x-r,o=n.y-i;if(0!==a||0!==o){var s=((e.x-r)*a+(e.y-i)*o)/(a*a+o*o);s>1?(r=n.x,i=n.y):s>0&&(r+=a*s,i+=o*s)}return a=e.x-r,o=e.y-i,a*a+o*o}function r(t,n){for(var r,i=t[0],a=[i],o=1,s=t.length;s>o;o++)r=t[o],e(r,i)>n&&(a.push(r),i=r);return i!==r&&a.push(r),a}function i(e,t){var r,i,a,o,s=e.length,l="undefined"!=typeof Uint8Array?Uint8Array:Array,u=new l(s),c=0,d=s-1,f=[],h=[];for(u[c]=u[d]=1;d;){for(i=0,r=c+1;d>r;r++)a=n(e[r],e[c],e[d]),a>i&&(o=r,i=a);i>t&&(u[o]=1,f.push(c,o,o,d)),d=f.pop(),c=f.pop()}for(r=0;s>r;r++)u[r]&&h.push(e[r]);return h}function a(e,t,n){var a=void 0!==t?t*t:1;return e=n?e:r(e,a),e=i(e,a)}"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof t?t.exports=a:"undefined"!=typeof self?self.simplify=a:window.simplify=a}()},{}],9:[function(e,t,n){"use strict";function r(e,t,n,r){this.points=e,this.ids=t,this.dimension=r,this.length=n}function i(e){var t,n,i;if(Array.isArray(e)){if(t=e.length,0===t)return new r(null,null,0,0);n=e[0].length,i=o(d.mallocDouble(t*(n+1)),[t,n+1]),l(e,i.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var a=e.dtype;a="int8"===a||"int16"===a||"int32"===a?"int32":"uint8"===a||"uint8_clamped"===a||"buffer"===a||"uint16"===a||"uint32"===a?"uint32":"float32"===a?"float32":"float64",i=o(d.malloc(t*(n+1)),[t,n+1]),u.assign(i.hi(t,n),e)}for(var p=0;t>p;++p)i.set(p,n,p);for(var g=c.malloc([t,n],e.dtype),m=d.mallocInt32(t),v=0,y=g.data,x=i.data,b=(h.log2(h.nextPow2(t)),s.compile(i.order,!0,i.dtype)),w=[i];t>v;){var I=w.shift(),A=I,C=0|A.shape[0];if(C>1){var _,k=h.log2(v+1)%n,M=f.root(C);_=b(A,M,function(e,t){return e.get(k)-t.get(k)});for(var z=g.index(v,0),N=_.offset,p=0;n>p;++p)y[z++]=x[N++];m[v]=x[N],v+=1,w.push(A.hi(M)),C>2&&w.push(A.lo(M+1))}else{for(var N=A.offset,z=g.index(v,0),p=0;n>p;++p)y[z+p]=x[N++];m[v]=x[N],v+=1}}return d.free(i.data),new r(g,m,t,n)}function a(e){var t=e.p,n=e.i;if(t){for(var i=t.length,a=d.mallocFloat64(i),s=0;i>s;++s)a[s]=t[s];for(var l=n.length,u=d.mallocInt32(l),s=0;l>s;++s)u[s]=n[s];var c=i/l|0;return new r(o(a,[l,c]),u,l,c)}return new r(null,null,0,e.d)}t.exports=i,t.exports.deserialize=a;var o=e("ndarray"),s=e("ndarray-select"),l=e("ndarray-pack"),u=e("ndarray-ops"),c=e("ndarray-scratch"),d=e("typedarray-pool"),f=e("inorder-tree-layout"),h=e("bit-twiddle"),p=e("./lib/heap.js"),g=r.prototype;g.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},g.range=function(e,t,n){var r=this.length;if(!(1>r)){for(var i=this.dimension,a=0;i>a;++a)if(t[a]<e[a])return;var o,s=this.points,u=this.ids,f=c.malloc([r,2,i]),p=d.mallocInt32(r),g=f.data,m=s.data,v=1,y=0;for(p[0]=0,l(e,f.pick(0,0)),l(t,f.pick(0,1));v>y;){for(var x=p[y],b=h.log2(x+1)%i,w=f.index(y,0,0),I=f.index(y,1,0),A=s.index(x,0),C=!0,a=0;i>a;++a){var _=m[A+a];if(_<g[w+a]||g[I+a]<_){C=!1;break}}if(C&&(o=n(u[x]),void 0!==o))break;var k=m[A+b],M=g[I+b],z=g[w+b];if(k>=z){var N=2*x+1;if(r>N){p[v]=N;for(var S=f.index(v,0,0),a=0;i>a;++a)g[S+a]=g[w+a];for(var j=f.index(v,1,0),a=0;i>a;++a)g[j+a]=g[I+a];g[j+b]=Math.min(M,k),v+=1}}if(M>=k){var D=2*(x+1);if(r>D){p[v]=D;for(var S=f.index(v,0,0),a=0;i>a;++a)g[S+a]=g[w+a];for(var j=f.index(v,1,0),a=0;i>a;++a)g[j+a]=g[I+a];g[S+b]=Math.max(z,k),v+=1}}y+=1}return c.free(f),d.free(p),o}},g.rnn=function(e,t,n){if(!(0>t)){var r=this.length;if(!(1>r)){var i,a=this.dimension,o=this.points,s=this.ids,l=c.malloc([r,a]),u=d.mallocInt32(r),f=l.data,p=o.data,g=1,m=0,v=t*t;u[0]=0;for(var y=0;a>y;++y)l.set(0,y,0);for(;g>m;){for(var x=u[m],b=o.index(x,0),w=0,y=0;a>y;++y)w+=Math.pow(e[y]-p[b+y],2);if(v>=w&&(i=n(s[x]),void 0!==i))break;for(var I=h.log2(x+1)%a,A=0,C=l.index(m,0),y=0;a>y;++y)y!==I&&(A+=f[C+y]);var _=e[I],k=p[b+I],M=f[C+I],z=M,N=M;k>_?N=Math.max(M,Math.pow(k-_,2)):z=Math.max(M,Math.pow(k-_,2));var S=z+A,j=N+A;if(v>=S){var D=2*x+1;if(r>D){u[g]=D;for(var T=l.index(g,0),y=0;a>y;++y)f[T+y]=f[C+y];f[T+I]=z,g+=1}}if(v>=j){var O=2*(x+1);if(r>O){u[g]=O;for(var T=l.index(g,0),y=0;a>y;++y)f[T+y]=f[C+y];f[T+I]=N,g+=1}}m+=1}return c.free(l),d.free(u),i}}},g.nn=function(e,t){var n=this.length;if(1>n)return-1;if("number"==typeof t){if(0>t)return-1}else t=1/0;var r=this.dimension,i=this.points,a=i.data,o=d.mallocFloat64(r),s=new p(n,r+1),l=s.index,u=s.data;l[0]=0;for(var c=0;r>=c;++c)u[c]=0;s.count+=1;for(var f=-1,g=t;s.count>0&&!(u[0]>=g);){for(var m=l[0],v=i.index(m,0),y=0,c=0;r>c;++c)y+=Math.pow(e[c]-a[v+c],2);g>y&&(g=y,f=m);for(var x=h.log2(m+1)%r,b=0,c=0;r>c;++c){var w=u[c+1];c!==x&&(b+=w),o[c]=w}var I=e[x],A=a[v+x],C=o[x],_=C,k=C;A>I?k=Math.max(C,Math.pow(A-I,2)):_=Math.max(C,Math.pow(A-I,2));var M=_+b,z=k+b;if(s.pop(),g>M){var N=2*m+1;if(n>N){var S=s.count;l[S]=N;var j=S*(r+1);u[j]=M;for(var c=1;r>=c;++c)u[j+c]=o[c-1];u[j+x+1]=_,s.push()}}if(g>z){var D=2*(m+1);if(n>D){var S=s.count;l[S]=D;var j=S*(r+1);u[j]=z;for(var c=1;r>=c;++c)u[j+c]=o[c-1];u[j+x+1]=k,s.push()}}}return d.freeFloat64(o),s.dispose(),0>f?-1:this.ids[f]},g.knn=function(e,t,n){if("number"==typeof n){if(0>n)return[]}else n=1/0;var r=this.length;if(1>r)return[];if("number"==typeof t){if(0>=t)return[];t=0|Math.min(t,r)}else t=r;var i=this.ids,a=this.dimension,o=this.points,s=o.data,l=d.mallocFloat64(a),u=new p(t,1),c=u.index,f=u.data,g=new p(r,a+1),m=g.index,v=g.data;m[0]=0;for(var y=0;a>=y;++y)v[y]=0;g.count+=1;for(var x=n;g.count>0&&!(v[0]>=x);){for(var b=m[0],w=o.index(b,0),I=0,y=0;a>y;++y)I+=Math.pow(e[y]-s[w+y],2);if(x>I){u.count>=t&&u.pop();var A=u.count;c[A]=b,f[A]=-I,u.push(),u.count>=t&&(x=-f[0])}for(var C=h.log2(b+1)%a,_=0,y=0;a>y;++y){var k=v[y+1];y!==C&&(_+=k),l[y]=k}var M=e[C],z=s[w+C],N=l[C],S=N,j=N;z>M?j=Math.max(N,Math.pow(z-M,2)):S=Math.max(N,Math.pow(z-M,2));var D=S+_,T=j+_;if(g.pop(),x>D){var O=2*b+1;if(r>O){var L=g.count;m[L]=O;var E=L*(a+1);v[E]=D;for(var y=1;a>=y;++y)v[E+y]=l[y-1];v[E+C+1]=S,g.push()}}if(x>T){var B=2*(b+1);if(r>B){var L=g.count;m[L]=B;var E=L*(a+1);v[E]=T;for(var y=1;a>=y;++y)v[E+y]=l[y-1];v[E+C+1]=j,g.push()}}}d.freeFloat64(l),g.dispose();for(var F=new Array(u.count),i=this.ids,y=u.count-1;y>=0;--y)F[y]=i[c[0]],u.pop();return u.dispose(),F},g.dispose=function(){d.free(this.points.data),d.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":10,"bit-twiddle":11,"inorder-tree-layout":12,ndarray:27,"ndarray-ops":14,"ndarray-pack":19,"ndarray-scratch":25,"ndarray-select":26,"typedarray-pool":31}],10:[function(e,t,n){"use strict";function r(e){return 1&e?e-1>>1:(e>>1)-1}function i(e,t){this.count=0,this.dataSize=t,this.index=a.mallocInt32(e),this.data=a.mallocFloat64(e*t)}t.exports=i;var a=e("typedarray-pool"),o=i.prototype;o.heapSwap=function(e,t){var n=this.data,r=this.index,i=this.dataSize,a=r[e];r[e]=r[t],r[t]=a;for(var o=i*e,s=i*t,l=0;i>l;++l){var u=n[o];n[o]=n[s],n[s]=u,o+=1,s+=1}},o.heapUp=function(e){for(var t=this.dataSize,n=(this.index,this.data),i=n[t*e];e>0;){var a=r(e);if(a>=0){var o=n[t*a];if(o>i){this.heapSwap(e,a),e=a;continue}}break}},o.heapDown=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=this.count,i=n[t*e];;){var a=i,o=2*e+1,s=2*(e+1),l=e;if(r>o){var u=n[t*o];a>u&&(l=o,a=u)}if(r>s){var c=n[t*s];a>c&&(l=s)}if(l===e)break;this.heapSwap(e,l),e=l}},o.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},o.push=function(){this.heapUp(this.count),this.count+=1},o.dispose=function(){a.freeInt32(this.index),a.freeFloat64(this.data)}},{"typedarray-pool":31}],11:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(e){return(e>0)-(0>e)},n.abs=function(e){var t=e>>i-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(t>e)},n.max=function(e,t){return e^(e^t)&-(t>e)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var a=new Array(256);!function(e){for(var t=0;256>t;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(a),n.reverse=function(e){return a[255&e]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],12:[function(e,t,n){"use strict";function r(e){var t=(g.nextPow2(e+1)>>>1)-1,n=e-t;return g.nextPow2(n)-1>=t?t:(t>>>1)+n}function i(e){return 0}function a(e){return e-1}function o(e,t){if(0>=e)return 0;var n=r(e);return t>n?o(e-n-1,t-n-1):t===n?g.log2(e):o(n,t)}function s(e,t){return Math.max(t-1,0)}function l(e,t){return Math.min(t+1,e-1)}function u(e,t){if(0>=e)return-1;var n=r(e);if(t>n){var i=u(e-n-1,t-n-1);return 0>i?n:i+n+1}if(t===n)return-1;var i=u(n,t);return 0>i?n:i}function c(e,t){if(0>=e)return 0;var n=r(e);return t>n?c(e-n-1,t-n-1)+n+1:t===n?r(t):c(n,t)}function d(e,t){if(0>=e)return 0;var n=r(e);return t>n?d(e-n-1,t-n-1)+n+1:t===n?r(e-n-1)+n+1:d(n,t)}function f(e,t){return 0===o(e,t)}function h(e,t){e|=0,t|=0;for(var n=0;e>1;){var i=r(e);if(t>i)n+=i+1,e-=i+1,t-=i+1;else{if(t===i)break;e=i}}return n}function p(e,t){e|=0,t|=0;for(var n=0;e>1;){var i=r(e);if(t>i)n+=i+1,e-=i+1,t-=i+1;else{if(t===i){n+=e-1;break}e=i}}return n}var g=e("bit-twiddle");n.root=r,n.begin=i,n.end=a,n.height=o,n.prev=s,n.next=l,n.parent=u,n.left=c,n.right=d,n.leaf=f,n.lo=h,n.hi=p},{"bit-twiddle":13}],13:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],14:[function(e,t,n){"use strict";function r(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var n=e.args[t];0===t?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return o({args:e.args,pre:r(e.pre),body:r(e.body),post:r(e.proc),funcName:e.funcName})}function a(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);var r=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return r(i(e))}var o=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in l){var t=l[e];n[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];n[e]=a({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var t=c[e];n[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var d=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<d.length;++e){var t=d[e];n[t]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];n[t]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var h=["atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];n[t+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=o({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=o({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=o({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":15}],15:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var o=n[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,a(t)}var a=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":17}],16:[function(e,t,n){"use strict";function r(e,t,n){var r,i,a=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,d=0;for(r=0;a>r;++r)u.push(["i",r,"=0"].join(""));for(i=0;o>i;++i)for(r=0;a>r;++r)d=c,c=e[r],0===r?u.push(["d",i,"s",r,"=t",i,"p",c].join("")):u.push(["d",i,"s",r,"=(t",i,"p",c,"-s",d,"*t",i,"p",d,")"].join(""));for(l.push("var "+u.join(",")),r=a-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;a>r;++r){for(d=c,c=e[r],i=0;o>i;++i)l.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&l.push(["index[",d,"]-=s",d].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function i(e,t,n,i){for(var a=t.length,o=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;o>c;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=e;a>c;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(var c=0;o>c;++c){for(var d=["offset"+c],f=e;a>f;++f)d.push(["j",f,"*t",c,"p",t[f]].join(""));u.push(["p",c,"=(",d.join("+"),")"].join(""))}u.push(r(t,n,i));for(var c=e;a>c;++c)u.push("}");return u.join("\n")}function a(e){for(var t=0,n=e[0].length;n>t;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function o(e,t,n){for(var r=e.body,i=[],a=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var d=t.offsetArgIndex.indexOf(o),f=t.offsetArgs[d];c=f.array,u="+q"+d;case"array":u="p"+c+u;var h="l"+o,p="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(i.push(["var ",h,"=",p,".get(",u,")"].join("")),r=r.replace(l,h),a.push([p,".set(",u,",",h,")"].join(""))):r=r.replace(l,[p,".get(",u,")"].join("")):r=r.replace(l,[p,"[",u,"]"].join("")):"generic"===n[c]?(i.push(["var ",h,"=",p,".get(",u,")"].join("")),r=r.replace(l,h),s.lvalue&&a.push([p,".set(",u,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",u,"]"].join("")),r=r.replace(l,h),s.lvalue&&a.push([p,"[",u,"]=",h].join("")));else{for(var g=[s.name],m=[u],v=0;v<Math.abs(t.arrayBlockIndices[c]);v++)g.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(v+1)+"*t"+c+"b"+v);if(l=new RegExp(g.join(""),"g"),u=m.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[p,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,a.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+a:t[r]=i.charAt(0)+a,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function l(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,l=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),d=0;d<e.arrayArgs.length;++d)c[d]=t[2*d],l[d]=t[2*d+1];for(var f=[],h=[],p=[],g=[],m=[],d=0;d<e.arrayArgs.length;++d){e.arrayBlockIndices[d]<0?(p.push(0),g.push(n),f.push(n),h.push(n+e.arrayBlockIndices[d])):(p.push(e.arrayBlockIndices[d]),g.push(e.arrayBlockIndices[d]+n),f.push(0),h.push(e.arrayBlockIndices[d]));for(var v=[],y=0;y<l[d].length;y++)p[d]<=l[d][y]&&l[d][y]<g[d]&&v.push(l[d][y]-p[d]);m.push(v)}for(var x=["SS"],b=["'use strict'"],w=[],y=0;n>y;++y)w.push(["s",y,"=SS[",y,"]"].join(""));for(var d=0;d<e.arrayArgs.length;++d){x.push("a"+d),x.push("t"+d),x.push("p"+d);for(var y=0;n>y;++y)w.push(["t",d,"p",y,"=t",d,"[",p[d]+y,"]"].join(""));for(var y=0;y<Math.abs(e.arrayBlockIndices[d]);++y)w.push(["t",d,"b",y,"=t",d,"[",f[d]+y,"]"].join(""))}for(var d=0;d<e.scalarArgs.length;++d)x.push("Y"+d);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var I=new Array(n),d=0;n>d;++d)I[d]="0";w.push(["index=[",I.join(","),"]"].join(""))}for(var d=0;d<e.offsetArgs.length;++d){for(var A=e.offsetArgs[d],C=[],y=0;y<A.offset.length;++y)0!==A.offset[y]&&(1===A.offset[y]?C.push(["t",A.array,"p",y].join("")):C.push([A.offset[y],"*t",A.array,"p",y].join("")));0===C.length?w.push("q"+d+"=0"):w.push(["q",d,"=",C.join("+")].join(""))}var _=u([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(_),b.push("var "+w.join(","));for(var d=0;d<e.arrayArgs.length;++d)b.push("p"+d+"|=0");e.pre.body.length>3&&b.push(o(e.pre,e,c));var k=o(e.body,e,c),M=a(m);n>M?b.push(i(M,m[0],e,k)):b.push(r(m[0],e,k)),e.post.body.length>3&&b.push(o(e.post,e,c)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+b.join("\n")+"\n----------");var z=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",M,s(c)].join(""),N=new Function(["function ",z,"(",x.join(","),"){",b.join("\n"),"} return ",z].join(""));return N()}var u=e("uniq");t.exports=l},{uniq:18}],17:[function(e,t,n){"use strict";function r(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],c=0;c<e.arrayArgs.length;++c){var d=e.arrayArgs[c];n.push(["t",d,"=array",d,".dtype,","r",d,"=array",d,".order"].join("")),a.push("t"+d),a.push("r"+d),o.push("t"+d),o.push("r"+d+".join()"),s.push("array"+d+".data"),s.push("array"+d+".stride"),s.push("array"+d+".offset|0"),c>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+d+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+d+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var f=new Function("compile",t.join("\n"));return f(i.bind(void 0,e))}var i=e("./compile.js");t.exports=r},{"./compile.js":16}],18:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,i=e[0],a=e[0],o=1;r>o;++o)if(a=i,i=e[o],t(i,a)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}function i(e){for(var t=1,n=e.length,r=e[0],i=e[0],a=1;n>a;++a,i=r)if(i=r,r=e[a],r!==i){if(a===t){t++;continue}e[t++]=r}return e.length=t,e}function a(e,t,n){return 0===e.length?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}t.exports=a},{}],19:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var n=[],a=e,o=1;a instanceof Array;)n.push(a.length),o*=a.length,a=a[0];return 0===n.length?r():(t||(t=r(new Float64Array(o),n)),i(t,e),t)}},{"./doConvert.js":20,ndarray:27}],20:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":21}],21:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{"./lib/thunk.js":23,dup:15}],22:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{dup:16,uniq:24}],23:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./compile.js":22,dup:17}],24:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],25:[function(e,t,n){"use strict";function r(e){var t=e.dtype;("generic"===t||"array"===t)&&(t="double");var n=d.malloc(e.size,t),r=u(n,e.shape);return c.assign(r,e),r}function i(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];return u(d.malloc(n,t),e,r,0)}function a(e){"generic"!==e.dtype&&"array"!==e.dtype&&d.free(e.data)}function o(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];for(var a=d.malloc(n,t),i=0;n>i;++i)a[i]=0;return u(a,e,r,0)}function s(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];for(var a=d.malloc(n,t),i=0;n>i;++i)a[i]=1;return u(a,e,r,0)}function l(e,t){var n,r;t||(t="double");var i=1,a=new Array(e.length);for(n=e.length-1;n>=0;--n)a[n]=i,i*=e[n];var o=d.malloc(i,t);for(n=0;i>n;++n)o[n]=0;var s=1/0,l=0;for(n=e.length-1;n>=0;n--)l+=a[n],s=Math.min(s,e[n]);for(n=0,r=0;s>n;n++,r+=l)o[r]=1;return u(o,e,a,0)}var u=e("ndarray"),c=e("ndarray-ops"),d=e("typedarray-pool");n.clone=r,n.malloc=i,n.free=a,n.zeros=o,n.ones=s,n.eye=l},{ndarray:27,"ndarray-ops":14,"typedarray-pool":31}],26:[function(e,t,n){"use strict";function r(e){return"s"+e}function i(e){return"t"+e}function a(e){return"u"+e}function o(e){return"v"+e}function s(e){return"i"+e}function l(e){return"p"+e}function u(e){return"x"+e}function c(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}function d(e,t,n){function d(n,a,c){if(t)k.push(l(0),".offset=",y,"+",i(e[0]),"*(",a,");",l(1),".offset=",y,"+",i(e[0]),"*(",c,");",n,"=",m,"(",l(0),",",l(1),");");else{k.push(u(0),"=",y,"+",i(0),"*(",a,");",u(1),"=",y,"+",i(0),"*(",c,");"),h>1&&k.push("_cmp:");for(var d=h-1;d>0;--d)k.push("for(",s(d),"=0;",s(d),"<",r(d),";",s(d),"++){");C?k.push(n,"=",v,".get(",u(0),")-",v,".get(",u(1),");"):k.push(n,"=",v,"[",u(0),"]-",v,"[",u(1),"];"),h>1&&k.push("if(",n,")break _cmp;");for(var d=1;h>d;++d)k.push(u(0),"+=",o(d),";",u(1),"+=",o(d),"}")}}function f(t,n){k.push(u(0),"=",y,"+",i(e[0]),"*(",t,");",u(1),"=",y,"+",i(e[0]),"*(",n,");");for(var o=h-1;o>0;--o)k.push("for(",s(e[o]),"=0;",s(e[o]),"<",r(e[o]),";",s(e[o]),"++){");C?k.push(b,"=",v,".get(",u(0),");",v,".set(",u(0),",",v,".get(",u(1),"));",v,".set(",u(1),",",b,");"):k.push(b,"=",v,"[",u(0),"];",v,"[",u(0),"]=",v,"[",u(1),"];",v,"[",u(1),"]=",b,";");for(var o=1;h>o;++o)k.push(u(0),"+=",a(e[o]),";",u(1),"+=",a(e[o]),"}")}e=c(e);var h=e.length,C="generic"===n,_="ndSelect"+n+e.join("_")+"_"+(t?"cmp":"lex"),k=[],M=[p,g];t&&M.push(m);for(var z=[v+"="+p+".data",y+"="+p+".offset|0",x+"=Math.random",b],N=0;2>N;++N)z.push(u(N)+"=0");for(var N=0;h>N;++N)z.push(r(N)+"="+p+".shape["+N+"]|0",i(N)+"="+p+".stride["+N+"]|0",s(N)+"=0");for(var N=1;h>N;++N)N>1?z.push(o(N)+"=("+i(N)+"-"+r(N-1)+"*"+i(N-1)+")|0",a(e[N])+"=("+i(e[N])+"-"+r(e[N-1])+"*"+i(e[N-1])+")|0"):z.push(o(N)+"="+i(N),a(e[N])+"="+i(e[N]));if(t)for(var N=0;2>N;++N)z.push(l(N)+"="+p+".pick(0)");z.push(A+"=0",w+"=0",I+"="+r(e[0])+"-1"),k.push("while(",w,"<",I,"){",A,"=(",x,"()*(",I,"-",w,"+1)+",w,")|0;"),f(A,I),k.push(A,"=",w,";","for(",s(0),"=",w,";",s(0),"<",I,";",s(0),"++){"),d(b,s(0),I),k.push("if(",b,"<0){"),f(A,s(0)),k.push(A,"++;"),k.push("}}"),f(A,I),k.push("if(",A,"===",g,"){",w,"=",A,";","break;","}else if(",g,"<",A,"){",I,"=",A,"-1;","}else{",w,"=",A,"+1;","}","}"),t?k.push(l(0),".offset=",y,"+",w,"*",i(0),";","return ",l(0),";"):k.push("return ",p,".pick(",w,");");var S=["'use strict';function ",_,"(",M,"){","var ",z.join(),";",k.join(""),"};return ",_].join(""),j=new Function(S);return j()}function f(e,t,n){var r=e.join()+t+n,i=C[r];return i?i:C[r]=d(e,t,n)}function h(e,t,n){if(t|=0,0===e.dimension||e.shape[0]<=t||0>t)return null;var r=!!n,i=f(e.order,r,e.dtype);return r?i(e,t,n):i(e,t)}t.exports=h,t.exports.compile=f;var p="a",g="K",m="C",v="d",y="o",x="R",b="T",w="L",I="H",A="X",C={}},{}],27:[function(e,t,n){function r(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(r);var i=new Array(n.length);for(e=0;e<i.length;++e)i[e]=n[e][1];return i}function a(e,t){var n=["View",t,"d",e].join("");0>t&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var a="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",o=new Function(a);return o()}if(0===t){var a="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=new Function("TrivialArray",a);return o(d[e][0])}var a=["'use strict'"],s=l(t),u=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),f=s.map(function(e){return"b"+e}).join(","),h=s.map(function(e){return"c"+e}).join(",");a.push("function "+n+"(a,"+f+","+h+",d){this.data=a","this.shape=["+f+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),4>t?(a.push("function "+n+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),r?a.push("return this.data.set("+c+",v)}"):a.push("return this.data["+c+"]=v}"),a.push("proto.get=function "+n+"_get("+u.join(",")+"){"),r?a.push("return this.data.get("+c+")}"):a.push("return this.data["+c+"]}"),a.push("proto.index=function "+n+"_index(",u.join(),"){return "+c+"}"),a.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),g=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+g.join(","));for(var m=0;t>m;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");a.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),a.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var m=0;t>m;++m)a.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");a.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var v=new Array(t),y=new Array(t),m=0;t>m;++m)v[m]="a[i"+m+"]",y[m]="b[i"+m+"]";a.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+v.join(",")+","+y.join(",")+",this.offset)}"),a.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(var m=0;t>m;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",a.join("\n"));return o(d[e],i)}function o(e){if(u(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,n,r){if(void 0===e){var i=d.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===n){n=new Array(s);for(var l=s-1,u=1;l>=0;--l)n[l]=u,u*=t[l]}if(void 0===r){r=0;for(var l=0;s>l;++l)n[l]<0&&(r-=(t[l]-1)*n[l])}for(var c=o(e),f=d[c];f.length<=s+1;)f.push(a(c,f.length-1));var i=f[s+1];return i(e,t,n,r)}var l=e("iota-array"),u=e("is-buffer"),c="undefined"!=typeof Float64Array,d={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=s},{"iota-array":28,"is-buffer":29}],28:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e),n=0;e>n;++n)t[n]=n;return t}t.exports=r},{}],29:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],30:[function(e,t,n){"use strict";function r(e,t,n){var i=0|e[n];if(0>=i)return[];var a,o=new Array(i);if(n===e.length-1)for(a=0;i>a;++a)o[a]=t;else for(a=0;i>a;++a)o[a]=r(e,t,n+1);return o}function i(e,t){var n,r;for(n=new Array(e),r=0;e>r;++r)n[r]=t;return n}function a(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=a},{}],31:[function(e,t,n){(function(t,r){"use strict";function i(e){if(e){var t=e.length||e.byteLength,n=y.log2(t);I[n].push(e)}}function a(e){i(e.buffer)}function o(e){var e=y.nextPow2(e),t=y.log2(e),n=I[t];return n.length>0?n.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(o(e),0,e)}function l(e){return new Uint16Array(o(2*e),0,e)}function u(e){return new Uint32Array(o(4*e),0,e)}function c(e){return new Int8Array(o(e),0,e)}function d(e){return new Int16Array(o(2*e),0,e)}function f(e){return new Int32Array(o(4*e),0,e)}function h(e){return new Float32Array(o(4*e),0,e)}function p(e){return new Float64Array(o(8*e),0,e)}function g(e){return b?new Uint8ClampedArray(o(e),0,e):s(e)}function m(e){return new DataView(o(e),0,e)}function v(e){e=y.nextPow2(e);var t=y.log2(e),n=A[t];return n.length>0?n.pop():new r(e)}var y=e("bit-twiddle"),x=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var b="undefined"!=typeof Uint8ClampedArray,w=t.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=x([32,0])),w.BUFFER||(w.BUFFER=x([32,0]));var I=w.DATA,A=w.BUFFER;n.free=function(e){if(r.isBuffer(e))A[y.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|y.log2(t);I[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=a,n.freeArrayBuffer=i,n.freeBuffer=function(e){A[y.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return o(e);switch(t){case"uint8":return s(e);case"uint16":return l(e);case"uint32":return u(e);case"int8":return c(e);case"int16":return d(e);case"int32":return f(e);case"float":case"float32":return h(e);case"double":case"float64":return p(e);case"uint8_clamped":return g(e);case"buffer":return v(e);case"data":case"dataview":return m(e);default:return null}return null},n.mallocArrayBuffer=o,n.mallocUint8=s,n.mallocUint16=l,n.mallocUint32=u,n.mallocInt8=c,n.mallocInt16=d,n.mallocInt32=f,n.mallocFloat32=n.mallocFloat=h,n.mallocFloat64=n.mallocDouble=p,n.mallocUint8Clamped=g,n.mallocDataView=m,n.mallocBuffer=v,n.clearCache=function(){for(var e=0;32>e;++e)w.UINT8[e].length=0,w.UINT16[e].length=0,w.UINT32[e].length=0,w.INT8[e].length=0,w.INT16[e].length=0,w.INT32[e].length=0,w.FLOAT[e].length=0,w.DOUBLE[e].length=0,w.UINT8C[e].length=0,I[e].length=0,A[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":11,buffer:1,dup:30}],32:[function(e,t,n){var r;r=e("../color/sort.coffee"),t.exports=function(e,t,n,i,a,o,s){var l,u,c;for(i||(i="asc"),a instanceof Array||(a=[a]),n instanceof Array||(n=[n]),o&&void 0!==s&&"number"!=typeof s&&(s=o.id.nesting.indexOf(s)),c=0,l=0;l<n.length&&(u=n[l],e=o&&e.d3plus&&e.d3plus.sortKeys?e.d3plus.sortKeys[u]:e[u],t=o&&t.d3plus&&t.d3plus.sortKeys?t.d3plus.sortKeys[u]:t[u],c=o&&a.indexOf(u)>=0?r(e,t):t>e?-1:1,0===c&&l!==n.length-1);)l++;return"asc"===i?c:-c}},{"../color/sort.coffee":49}],33:[function(e,t,n){t.exports=function(e,t){var n;return e instanceof Array?(n=void 0===t||null===t?t:t.constructor,e.indexOf(t)>=0||e.indexOf(n)>=0):!1}},{}],34:[function(e,t,n){var r,i;r=e("./comparator.coffee"),i=e("../core/fetch/sort.coffee"),t.exports=function(e,t,n,a,o,s){var l,u,c,d;if(!e||e.length<=1)return e||[];if(o)for(t||(t=o.order.value||o.size.value||o.id.value),n||(n=o.order.sort.value),a||(a=o.color.value||[]),c=0,d=e.length;d>c;c++)l=e[c],l.d3plus||(l.d3plus={}),u="d3plus"in l&&"d3plus"in l.d3plus?l.d3plus:l,l.d3plus.sortKeys=i(o,u,t,a,s);return e.sort(function(e,i){return r(e,i,t,n,a,o,s)})}},{"../core/fetch/sort.coffee":65,"./comparator.coffee":32}],35:[function(e,t,n){t.exports=function(e,t){return void 0===t?e:t===!1?[]:t instanceof Array?t:(e instanceof Array||(e=[]),e.indexOf(t)>=0?e.splice(e.indexOf(t),1):e.push(t),e)}},{}],36:[function(e,t,n){var r;r=function(e){var t,n,i,a;if(a=r.tested,e in a)return a[e];for(n=0,i=!1;n<document.styleSheets.length;){if(t=document.styleSheets[n],t.href&&t.href.indexOf(e)>=0){i=!0;break}n++}return i},r.tested={},t.exports=r},{}],37:[function(e,t,n){t.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],38:[function(e,t,n){var r,i;r=e("./ie.js"),i=e("./touch.coffee"),i?t.exports={click:"click",down:"touchstart",up:"touchend",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}:t.exports={click:"click",down:"mousedown",up:"mouseup",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":37,"./touch.coffee":43}],39:[function(e,t,n){var r;r=function(){var e;return e="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",r=function(){return e},e},t.exports=r},{}],40:[function(e,t,n){t.exports="rtl"===d3.select("html").attr("dir")},{}],41:[function(e,t,n){t.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],42:[function(e,t,n){var r;r=function(){var e,t,n,i,a;return e=document.createElement("p"),e.style.width="100%",e.style.height="200px",t=document.createElement("div"),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),i=e.offsetWidth,t.style.overflow="scroll",a=e.offsetWidth,i===a&&(a=t.clientWidth),document.body.removeChild(t),n=i-a,r=function(){return n},n},t.exports=r},{}],43:[function(e,t,n){t.exports="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1},{}],44:[function(e,t,n){t.exports=function(e){var t;return t=d3.hsl(e),t.l>.45&&(t.s>.8&&(t.s=.8),t.l=.45),t.toString()}},{}],45:[function(e,t,n){t.exports=function(e,t){var n;return void 0===t&&(t=.5),n=d3.hsl(e),t=(1-n.l)*t,n.l+=t,n.s-=t,n.toString()}},{}],46:[function(e,t,n){t.exports=function(e,t,n,r){var i,a,o;return n||(n=1),r||(r=1),e=d3.rgb(e),t=d3.rgb(t),o=(n*e.r+r*t.r-n*r*t.r)/(n+r-n*r),a=(n*e.g+r*t.g-n*r*t.g)/(n+r-n*r),i=(n*e.b+r*t.b-n*r*t.b)/(n+r-n*r),d3.rgb(o,a,i).toString()}},{}],47:[function(e,t,n){var r;r=e("./scale.coffee"),t.exports=function(e,t){var n;return n=e||Math.floor(20*Math.random()),(t=t||r)(n)}},{"./scale.coffee":48}],48:[function(e,t,n){t.exports=d3.scale.ordinal().range(["#b22200","#282F6B","#EACE3F","#B35C1E","#224F20","#5F487C","#759143","#419391","#993F88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])},{}],49:[function(e,t,n){
t.exports=function(e,t){var n,r;return n=d3.hsl(e),r=d3.hsl(t),e=0===n.s?361:n.h,t=0===r.s?361:r.h,e===t?n.l-r.l:e-t}},{}],50:[function(e,t,n){t.exports=function(e){var t,n,r,i,a;return i=d3.rgb(e),r=i.r,n=i.g,t=i.b,a=(299*r+587*n+114*t)/1e3,a>=128?"#444444":"#f7f7f7"}},{}],51:[function(e,t,n){t.exports=function(e){var t,n,r;return e+="",e=e.replace(RegExp(" ","g"),""),0===e.indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]),n=d3.rgb(e).toString(),t=["black","#000","#000000","0%","0,0,0"],r=t.indexOf(e)>=0,"#000000"!==n||r}},{}],52:[function(e,t,n){var r,i,a;r=e("../../client/ie.js"),a=e("./wiki.coffee"),i=function(e,t,n){n=n||"",r||"undefined"!=typeof InstallTrigger?console.log("[ D3plus ] "+t):0===e.indexOf("group")?console[e]("%c[ D3plus ]%c "+t,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight:200;"+n):console[e]("%c"+t,n+"font-weight:200;")},i.comment=function(e){this("log",e,"color:#aaa;")},i.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},i.group=function(e){this("group",e,"color:#888;")},i.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},i.groupEnd=function(){r||console.groupEnd()},i.log=function(e){this("log",e,"color:#444444;")},i.stack=function(){var e,t,n,i,a,o,s;r||(e=new Error,e.stack&&(o=e.stack.split("\n"),o=o.filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3plus.js:")<0&&e.indexOf("d3plus.min.js:")<0}),o.length&&o[0].length&&(a=window.chrome?"at ":"@",s=o[0],s.indexOf(a)>=0&&(s=s.split(a)[1]),o=s.split(":"),3===o.length&&o.pop(),t=o.pop(),i=o.join(":").split("/"),i=i[i.length-1],n="line "+t+" of "+i+": "+s,this("log",n,"color:#D74B03;"))))},i.time=function(e){r||console.time(e)},i.timeEnd=function(e){r||console.timeEnd(e)},i.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},i.wiki=function(e){e&&(e in a&&(e=d3plus.repo+"wiki/"+a[e]),this("log","documentation: "+e,"color:#aaa;"))},t.exports=i},{"../../client/ie.js":37,"./wiki.coffee":53}],53:[function(e,t,n){t.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}},{}],54:[function(e,t,n){var r=e("../../util/buckets.coffee"),i=e("../fetch/value.coffee"),a=e("../console/print.coffee");t.exports=function(e){e.dev.value&&a.time("getting color data range");var t=[];if(e.data.pool.forEach(function(n){var r=parseFloat(i(e,n,e.color.value));"number"==typeof r&&!isNaN(r)&&t.indexOf(r)<0&&t.push(r)}),e.dev.value&&a.timeEnd("getting color data range"),t.length>1){if(e.dev.value&&a.time("calculating color scale"),t=d3.extent(t),t[0]<0&&t[1]>0){var n=e.color.range;3==n.length&&(t.push(t[1]),t[1]=0)}else if(t[1]>0&&t[0]>=0){var n=e.color.heatmap;t=r(t,n.length)}else{var n=e.color.range.slice(0);t[0]<0?n.pop():n.shift()}e.color.valueScale=d3.scale.sqrt().domain(t).range(n).interpolate(d3.interpolateRgb),e.dev.value&&a.timeEnd("calculating color scale")}else e.color.valueScale=null}},{"../../util/buckets.coffee":203,"../console/print.coffee":52,"../fetch/value.coffee":67}],55:[function(e,t,n){var r=e("../fetch/value.coffee"),i=e("../console/print.coffee"),a=e("../../object/validate.coffee");t.exports=function(e,t){e.dev.value&&i.time("filtering data");var n=d3.keys(e.data.keys||{});"attrs"in e&&(n=n.concat(d3.keys(e.attrs.keys||{}))),t=t.filter(function(t){var n=r(e,t,e.id.value);return null!==n});var o=e.types[e.type.value].requirements||[];e.data.filters.forEach(function(i){n.indexOf(e[i].value)>=0&&o.indexOf(i)>=0&&(t=t.filter(function(t){var n=r(e,t,e[i].value);return"y"===i&&e.y2.value&&null===n?n=r(e,t,e.y2.value):"x"===i&&e.x2.value&&null===n&&(n=r(e,t,e.x2.value)),"size"===i?"number"==typeof n:null!==n}))});var s=e.data.solo.length?"solo":"mute";return e.data[s].length?e.data[s].forEach(function(n){function o(t){var r=e[n][s].value,i=!1;return r.forEach(function(e){"function"==typeof e?i=e(t):e===t&&(i=!0)}),"solo"===s?i:!i}function l(t,i){if(!i&&e[n].nesting){var s=e[n].nesting;a(s)&&(s=d3.values(s));for(var l=0;l<s.length;l++){var u=t.filter(function(t){return o(r(e,t,s[l]))});u.length&&(t=u)}}else t=t.filter(function(t){return o(r(e,t,e[n].value))});return t}t=l(t),"id"===n&&("nodes"in e&&e.nodes.value&&(e.dev.value&&i.time("filtering nodes"),e.nodes.restricted=l(e.nodes.value),e.dev.value&&i.timeEnd("filtering nodes")),"edges"in e&&e.edges.value&&(e.dev.value&&i.time("filtering edges"),e.edges.restricted=e.edges.value.filter(function(t){var n=l([t[e.edges.source],t[e.edges.target]]);return 2===n.length}),e.dev.value&&i.timeEnd("filtering edges")))}):"nodes"in e&&(e.nodes.restricted=void 0,e.edges.restricted=void 0),e.dev.value&&i.timeEnd("filtering data"),t}},{"../../object/validate.coffee":171,"../console/print.coffee":52,"../fetch/value.coffee":67}],56:[function(e,t,n){var r=e("./nest.js"),i=e("../fetch/value.coffee"),a=e("../console/print.coffee"),o=e("../../util/uniques.coffee");t.exports=function(e){var t;if(e.data.time={values:[]},e.time&&e.time.value){e.dev.value&&(t="analyzing time periods",a.time(t)),e.data.time.values=o(e.data.value,e.time.value,i,e),e.data.time.values.sort(function(e,t){return e-t});var n=[];e.data.time.values.forEach(function(t,r){if(0!==r){var i=e.data.time.values[r-1];n.push(t-i),r===e.data.time.values.length-1&&(e.data.time.total=t-e.data.time.values[0])}}),n=d3.min(n),e.data.time.step=n;var s=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],l=[1e3,60,60,24,30,12,1];e.data.time.periods=s;var u=function(t,n,r){return e.data.time.stepDivider||(arr=l.slice(0,r),arr.length?e.data.time.stepDivider=arr.reduce(function(e,t){return e*t}):e.data.time.stepDivider=1),Math.round(Math.floor(n-t)/e.data.time.stepDivider)},c=e.data.time.total;s.forEach(function(t,r){var i="Date"===t?28:l[r];if(!e.data.time.stepType&&(r===s.length-1||Math.round(n)<i)){e.data.time.stepType=t;var a=e.data.time.values[0],o=e.data.time.values[e.data.time.values.length-1];e.data.time.stepIntervals=u(a,o,r)}!e.data.time.totalType&&(r===s.length-1||Math.round(c)<i)&&(e.data.time.totalType=t),n/=i,c/=i}),e.data.time.values.forEach(function(t,n){if(0!==n){var r=e.data.time.values[0];e.data.time.dataSteps.push(u(r,t,s.indexOf(e.data.time.stepType)))}else e.data.time.dataSteps=[0]});var d=e.time.format.value,f=e.format.locale.value,h=[function(e){return e.getMilliseconds()},function(e){return e.getSeconds()},function(e){return e.getMinutes()},function(e){return e.getHours()},function(e){return 1!=e.getDate()},function(e){return e.getMonth()},function(e){return!0}];e.data.time.functions=h;var p=function(e,t,n){if(e===t)return n&&f.timeFormat[e+"Small"]?f.timeFormat[e+"Small"]:f.timeFormat[e];if(s.indexOf(e)>=4||s.indexOf(t)<=3)return f.timeFormat[t+"-"+e];var r;return r="Date"===t?f.timeFormat[t]:f.timeFormat[t+"-Date"],"Hours"===e?r+" "+f.timeFormat[e]:r+" "+f.timeFormat["Hours-"+e]};if(e.data.time.getFormat=p,d)"string"==typeof d?e.data.time.format=d3.locale(f.format).timeFormat(d):"function"==typeof d?e.data.time.format=d:d instanceof Array&&(e.data.time.format=d3.locale(f.format).timeFormat.multi(d)),e.data.time.multiFormat=e.data.time.format;else{for(var g=e.data.time.stepType,m=e.data.time.totalType,v=[],y=s.indexOf(g);y<=s.indexOf(m);y++){var x=y-1<s.indexOf(g)?s[y]:s[y-1],b=s[y]===x&&g!==m,w=p(x,s[y],b);v.push([w,h[y]])}e.data.time.format=d3.locale(f.format).timeFormat(p(g,m)),v.length>1?(v[v.length-1][1]=function(e){return!0},e.data.time.multiFormat=d3.locale(f.format).timeFormat.multi(v)):e.data.time.multiFormat=e.data.time.format}e.data.time.ticks=[];for(var I=d3.min(e.data.time.values),A=d3.max(e.data.time.values),C=0;C<=e.data.time.stepIntervals;C++){var _=new Date(I);_["set"+e.data.time.stepType](_["get"+e.data.time.stepType]()+C),A>=_&&e.data.time.ticks.push(_)}e.dev.value&&a.timeEnd(t)}if(e.dev.value&&(t="nesting data by time and depths",a.time(t)),e.data.nested={},0===e.data.time.values.length)e.data.nested.all={},e.id.nesting.forEach(function(t,n){var i=e.id.nesting.slice(0,n+1);e.data.nested.all[t]=r(e,e.data.value,i)});else{var k=e.data.value.reduce(function(t,n){var r=i(e,n,e.time.value).getTime();return r in t||(t[r]=[]),t[r].push(n),t},{});e.data.time.values.forEach(function(t){var n=t.getTime();e.data.nested[n]={},e.id.nesting.forEach(function(t,i){var a=e.id.nesting.slice(0,i+1);e.data.nested[n][t]=r(e,k[n],a)})})}e.dev.value&&a.timeEnd(t)}},{"../../util/uniques.coffee":209,"../console/print.coffee":52,"../fetch/value.coffee":67,"./nest.js":60}],57:[function(e,t,n){var r;r=e("../fetch/value.coffee"),t.exports=function(e,t,n){var i,a,o,s,l,u,c,d,f,h;if(a=d3.nest(),e.id.grouping.value)for(void 0===n&&(n=e.id.nesting),o=s=0,u=n.length;u>s;o=++s)d=n[o],o<e.depth.value&&!function(t){return a.key(function(n){return r(e,n.d3plus,t)})}(d);for(f=[],l=0,c=t.length;c>l;l++)i=t[l],h=e.size.value?r(e,i,e.size.value):1,h&&"number"==typeof h&&h>0&&(delete i.d3plus.r,delete i.d3plus.x,delete i.d3plus.y,f.push({d3plus:i,id:i[e.id.value],value:h}));return a.entries(f)}},{"../fetch/value.coffee":67}],58:[function(e,t,n){var r,i,a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../console/print.coffee"),i=e("../../object/validate.coffee"),t.exports=function(e,t){var n,o,s,l,u,c,d,f,h;if(d=t+" key analysis",e.dev.value&&r.time(d),e[t].keys={},n=function(r){var o,s,l,u,c,d,f;if(r instanceof Array){for(c=[],s=0,u=r.length;u>s;s++)o=r[s],c.push(n(o));return c}if(i(r)){d=[];for(l in r)f=r[l],0===l.indexOf("d3plus")||a.call(e[t].keys,l)>=0||null===f?d.push(void 0):d.push(e[t].keys[l]=typeof f);return d}},i(e[t].value)){l=d3.keys(e[t].value).length===e.id.nesting.length,u=e[t].value;for(o in u)if(f=u[o],l&&e.id.nesting.indexOf(o)>=0&&i(f))for(s in f)h=f[s],n(h);else n(f)}else{c=e[t].value;for(o in c)f=c[o],n(f)}return e.dev.value?r.time(d):void 0}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],59:[function(e,t,n){var r,i;r=e("../console/print.coffee"),i=e("../../object/validate.coffee"),t.exports=function(e,t,n){var a,o,s,l;return a=e.dev.value,a&&r.time("loading "+t),l=e[t].url,e[t].filetype.value?o=e[t].filetype.value:(o=l.slice(l.length-5).split("."),o=o.length>1?o[1]:!1,o?("txt"===o&&(o="text"),e[t].filetype.accepted.indexOf(o)<0&&(o="json")):o="json"),(s="dsv"===o?d3.dsv(e[t].delimiter.value,"text/plain"):d3[o])(l,function(s,u){var c,d;if(!s&&u){if("function"==typeof e[t].callback){if(d=e[t].callback(u))if(i(d)&&t in d)for(c in d)c in e&&(e[c].value=d[c]);else e[t].value=d}else e[t].value=u;["json"].indexOf(o)<0&&e[t].value.forEach(function(e){var t;t=[];for(c in e)isNaN(e[c])?"false"===e[c].toLowerCase()?t.push(e[c]=!1):"true"===e[c].toLowerCase()?t.push(e[c]=!0):"null"===e[c].toLowerCase()?t.push(e[c]=null):"undefined"===e[c].toLowerCase()?t.push(e[c]=void 0):t.push(void 0):t.push(e[c]=parseFloat(e[c]));return t}),e[t].changed=!0,e[t].loaded=!0}else e.error.internal='Could not load data from: "'+l+'"';return a&&r.timeEnd("loading "+t),n()})}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],60:[function(e,t,n){var r=e("../fetch/value.coffee"),i=e("../../object/validate.coffee"),a=e("../../util/uniques.coffee"),o=function(e,t,n,i){void 0===i&&(i=!0);var o=d3.nest(),c=[],d="temp"in e?["active","temp","total"]:[];n.length?n.forEach(function(t,n){o.key(function(n){return r(e,n,t)})}):o.key(function(e){return!0}),i&&e.axes&&e.axes.discrete&&(!e.time||e[e.axes.discrete].value!==e.time.value)&&o.key(function(t){return r(e,t,e[e.axes.discrete].value)});var f=n.length&&e.id.nesting.indexOf(n[n.length-1])>=0,h=n.length&&f?n.length-1:0;f?e.id.nesting[h]:e.depth.value,o.rollup(function(t){if(1===t.length&&"d3plus"in t[0])return c.push(t[0]),t[0];t=t.reduce(function(e,t){return t.values instanceof Array?e.concat(t.values):(e.push(t),e)},[]);var i={d3plus:{data:{},depth:h}},o=d3.sum(t,function(e){return"d3plus"in e&&e.d3plus.merged?1:0});if(o===t.length)for(var u=0;u<t.length;u++){var f=t[u];i.d3plus.merged||(i.d3plus.merged=[]),i.d3plus.merged=i.d3plus.merged.concat(f.d3plus.merged),f.d3plus.text&&(i.d3plus.text=f.d3plus.text)}for(var p=0;p<d.length;p++){var g=d[p],m=e.aggs&&e.aggs.value[v]?e.aggs.value[v]:"sum";"d3plus"in t[0]&&g in t[0].d3plus?i.d3plus[g]=d3.sum(t,function(e){return e.d3plus[g]}):"function"==typeof m?i.d3plus[g]=m(t):i.d3plus[g]=d3[m](t,function(t){var n="total"===g?1:0;return e[g].value&&(n=r(e,t,e[g].value),"number"!=typeof n&&(n=n?1:0)),n})}for(var v in e.data.keys){if(v in i.d3plus.data)i[v]=i.d3plus[v];else{var y=e.aggs&&e.aggs.value[v]?e.aggs.value[v]:"sum",x=typeof y,b=e.data.keys[v],w=e.id.nesting.indexOf(v)>=0,I="time"in e&&v===e.time.value;if(v in i.d3plus.data)i[v]=i.d3plus[v];else if("function"===x)i[v]=e.aggs.value[v](t);else if(I)i[v]=l(a(t,v));else if(e.axes&&e.axes.discrete&&e[e.axes.discrete].value===v)i[v]=a(t,v);else if("number"!==b||"string"!==x||w){var A=s(t,v),C=1===A.length?A[0][v]:a(A,v);if(1===A.length)i[v]=C;else if(C&&C.length)C instanceof Array||(C=[C]),w&&e.id.nesting.indexOf(v)>h?i[v]=A:i[v]=C;else if(w){var _=e.id.nesting.indexOf(v)-1;_>=h&&(!("endPoint"in i.d3plus)||i.d3plus.endPoint>h)&&(i.d3plus.endPoint=h)}}else{var k=t.map(function(e){return e[v]});k=k.filter(function(e){return typeof e===b}),k.length&&(i[v]=d3[y](k))}}v in i&&i[v]instanceof Array&&1===i[v].length&&(i[v]=i[v][0])}for(var M=0;M<n.length;M++){var z=n[M];z in i||(i[z]=r(e,t[0],z))}return c.push(i),i});var p=function(t,r,i){if(t.children){"number"==e.data.keys[n[r]]&&(t.key=parseFloat(t.key)),i[n[r]]=t.key,delete t.key;for(var a in i)t[a]=i[a];r++,t.children.forEach(function(e){p(e,r,i)})}};return o=o.entries(t).map(u).map(function(e){return p(e,0,{}),e}),c},s=function(e,t){function n(e){e instanceof Array?e.forEach(n):i(e)&&t in e&&(e[t]instanceof Array?e[t].forEach(n):r.push(e))}var r=[];return n(e),r},l=function(e){function t(e){for(var r=0;r<e.length;r++){var i=e[r];i&&(i.constructor===Array?t(i):n.push(i))}}var n=[];return t(e),a(n)},u=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return u(e)}),delete e.values,e):e.values?e.values:e};t.exports=o},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"../fetch/value.coffee":67}],61:[function(e,t,n){var r=e("../../array/sort.coffee"),i=e("./nest.js"),a=e("../fetch/value.coffee"),o=(e("../fetch/color.coffee"),e("../fetch/text.js"));t.exports=function(e,t,n){var s;if(s=e.size.threshold.value===!1?0:"number"==typeof e.size.threshold.value?e.size.threshold.value:"function"==typeof e.size.threshold.value?e.size.threshold.value(e):"number"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold:"function"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold(e):.02,"number"==typeof s&&s>0){var l=[],u=0===e.depth.value?0:{},c=[],d=[],f=[],h={},p=d3.nest();n&&p.key(function(t){return a(e,t,n)}),p.rollup(function(t){var r=t.length;e.aggs.value[e.size.value]?"function"==typeof e.aggs.value[e.size.value]?r=e.aggs.value[e.size.value](t):"string"==typeof e.aggs.value[e.size.value]&&(r=d3[e.aggs.value[e.size.value]](t,function(t){return a(e,t,e.size.value)})):r=d3.sum(t,function(t){return a(e,t,e.size.value)});var i=n?a(e,t[0],n):"all";return h[i]=r,r}).entries(t),t.forEach(function(t){var r=a(e,t,e.id.value),i=a(e,t,e.size.value),o=n?a(e,t,n):"all",u=i/h[o]>=s;if(u&&l.indexOf(r)<0&&(l.push(r),e.depth.value)){var c=a(e,t,e.id.nesting[e.depth.value-1]);d.indexOf(c)<0&&d.push(c)}});var g=t.filter(function(t){var n=a(e,t,e.id.value),r=l.indexOf(n)>=0,i=e.depth.value?a(e,t,e.id.nesting[e.depth.value-1]):null;if(null!==i&&d.indexOf(i)<0&&f.indexOf(i)<0&&f.push(i),!r){var o=a(e,t,e.size.value);o>0&&(0===e.depth.value?o>u&&(u=o):(i in u||(u[i]=0),o>u[i]&&(u[i]=o)),c.push(t))}return r});if(c.length>1){c=r(c,e.size.value,"desc",[],e);var m=e.id.nesting.slice(0,e.depth.value);e.types[e.type.value].requirements.indexOf(e.axes.discrete)>=0&&m.push(e[e.axes.discrete].value);var v=i(e,c,m);v.forEach(function(t){var n=e.id.nesting[e.depth.value-1],r=a(e,t,n);if(children=n?c.filter(function(t){return a(e,t,n)===r}):c,children.length>1){e.id.nesting.forEach(function(n,r){if(e.depth.value==r){var i=t[n];"string"==typeof i?t[n]="d3plus_other_"+i:t[n]="d3plus_other"}else r>e.depth.value&&delete t[n]}),e.color.value&&"string"===e.color.type&&(0===e.depth.value?t[e.color.value]=e.color.missing:t[e.color.value]=a(e,r,e.color.value,n)),e.icon.value&&(t[e.icon.value]=a(e,r,e.icon.value,n)),r&&(t.d3plus.depth=e.depth.value);var i;0===e.depth.value?(i=e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),i+=" < "+e.format.value(u,{key:e.size.value,vars:e})):(i=o(e,t,e.depth.value-1),i=i.length?i[0].split(" < ")[0]:e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),f.indexOf(r)<0&&(i+=" < "+e.format.value(u[r],{key:e.size.value,vars:e}))),f.indexOf(r)<0&&(i+=" ("+e.format.value(100*s,{key:"share",vars:e})+")"),t.d3plus.threshold=u,t.d3plus.merged=children,e.text.value&&(t[e.text.value]=i),t.d3plus.text=i}})}else v=c;return g.concat(v)}return t}},{"../../array/sort.coffee":34,"../fetch/color.coffee":63,"../fetch/text.js":66,"../fetch/value.coffee":67,"./nest.js":60}],62:[function(e,t,n){var r;r=e("../../font/sizes.coffee"),t.exports=function(e,t){var n,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b;if(b=t.values||e.data.time.ticks,m=t.style||{},s=t.limit||e.width.value,v={},c=e.data.time.periods,g=e.data.time.stepType,y=e.data.time.totalType,a=e.data.time.functions,o=e.data.time.getFormat,l=e.format.locale.value.format,e.time.format.value)v.format=e.data.time.format,v.values=b,v.sizes=r(b.map(function(e){return v.format(e)}),m);else for(u=c.indexOf(g);u<=c.indexOf(y);){if(x=b.filter(function(e){var t,n;if(u===c.indexOf(g))return!0;if(t=!0,n=u-1,0>u)return!0;for(;n>=c.indexOf(g)&&t;)t=!a[n](e),n--;return t}),c[u]===y)i=d3.locale(l).timeFormat(o(c[u],y));else{for(d=u,i=[];d<=c.indexOf(y);)f=d-1<c.indexOf(g)?d:d-1,f=c[f],p=c[d]===f&&g!==y,n=o(f,c[d],p),i.push([n,a[d]]),d++;i[i.length-1][1]=function(){return!0},i=d3.locale(l).timeFormat.multi(i)}if(h=r(x.map(function(e){return i(e)}),m),d3.sum(h,function(e){return e.width})<s||u===c.indexOf(y)){v.format=i,v.values=x,v.sizes=h;break}u++}return v}},{"../../font/sizes.coffee":101}],63:[function(e,t,n){var r,i,a,o,s,l,u;r=e("./value.coffee"),o=e("../../color/random.coffee"),l=e("../../color/validate.coffee"),u=e("../../object/validate.coffee"),s=e("../../util/uniques.coffee"),t.exports=function(e,t,n){var o,l,c,d,f,h;if(f=u(t),f&&"d3plus"in t&&"color"in t.d3plus)return t.d3plus.color;if(void 0===n&&(n=e.id.value),"number"==typeof n&&(n=e.id.nesting[n]),e.color.value){for(c=[],d=e.id.nesting.indexOf(n);d>=0;){if(l=e.id.nesting[d],h=s(t,e.color.value,r,e,l),1===h.length&&(h=h[0]),!(h instanceof Array)&&void 0!==h&&null!==h){o=i(e,t,h,n),c.indexOf(o)<0&&c.push(o);break}d--}return 1===c.length?c[0]:e.color.missing}return a(e,t,n)},i=function(e,t,n,r){return n?e.color.valueScale?e.color.valueScale(n):l(n)?n:a(e,n,r):e.color.value&&"function"==typeof e.color.valueScale?e.color.valueScale(0):a(e,t,r)},a=function(e,t,n){return u(t)&&(t=r(e,t,n)),t instanceof Array&&(t=t[0]),o(t,e.color.scale.value)}},{"../../color/random.coffee":47,"../../color/validate.coffee":51,"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],64:[function(e,t,n){var r=e("../data/filter.js"),i=e("../data/nest.js"),a=e("../console/print.coffee"),o=e("../../string/format.js"),s=e("../../string/list.coffee");t.exports=function(e,t,n){if(!e.data.value)return[];void 0===n&&(n=e.depth.value);var l=e.id.nesting[n];if(!t||t instanceof Array||(t=[t]),!t&&"time"in e){t=[];var u=e.time.solo.value.length?"solo":"mute",c=e.time[u].value;if(c.length){t=[];for(var d=0;d<c.length;d++){var f=c[d];if("function"==typeof f)for(var h=0;h<e.data.time.values.length;h++){var p=e.data.time.values[h].getTime();f(p)&&t.push(p)}else if(f.constructor===Date)t.push(new Date(f).getTime());else{f+="",4===f.length&&parseInt(f)+""===f&&(f+="/01/01");var g=new Date(f);"Invalid Date"!==g&&t.push(g.getTime())}}"mute"===u&&(t=e.data.time.values.filter(function(e){return t.indexOf(e.getTime())<0}))}else t.push("all")}else t=["all"];if(t.indexOf("all")>=0&&e.data.time.values.length){t=e.data.time.values.slice(0);for(var m=0;m<t.length;m++)t[m]=t[m].getTime()}var v=[e.type.value,l,n].concat(e.data.filters).concat(t),y=e.data.solo.length?"solo":"mute",x=d3.keys(e.data.cache),b=e.types[e.type.value].filter||void 0;if(e.data[y].length)for(var w=0;w<e.data[y].length;w++){var I=e.data[y][w],A=e[I][y].value.slice(0);A.unshift(I),A.unshift(y),v=v.concat(A)}e.axes&&e.axes.discrete&&v.push(e.axes.discrete),v=v.join("_"),e.data.cacheID=v;for(var C=0;C<x.length;C++){var _=x[C].split("_").slice(1).join("_");if(_===v){v=(new Date).getTime()+"_"+v,e.data.cache[v]=e.data.cache[x[C]],delete e.data.cache[x[C]];break}}var k;if(e.data.cache[v])return e.dev.value&&a.comment("data already cached"),k=e.data.cache[v].data,"nodes"in e&&(e.nodes.restricted=e.data.cache[v].nodes,e.edges.restricted=e.data.cache[v].edges),"function"==typeof b&&(k=b(e,k)),k;var M=[];if(k=[],e.data.value&&e.data.value.length)for(var z=0;z<t.length;z++){var N=t[z];e.data.nested[N]?k=k.concat(e.data.nested[N][l]):M.push(N)}if(0===k.length&&M.length&&!e.error.internal){M.length>1&&(M=d3.extent(M)),M=M.map(function(t){return e.data.time.format(new Date(t))}),M=M.join(" - ");var S=e.format.locale.value.error.dataYear,j=e.format.locale.value.ui.and;M=s(M,j),e.error.internal=o(S,M),e.time.missing=!0}else{if(e.time&&(e.time.missing=!1),t.length>1){var D=!1;if(["x","y","x2","y2"].forEach(function(t){e[t].value===e.time.value&&"discrete"===e[t].scale.value&&(D=!0)}),!D){var T=e.id.nesting.slice(0,n+1);k=i(e,k,T)}}k=k?r(e,k):[],20===x.length&&(x.sort(),delete e.data.cache[x[0]]),v=(new Date).getTime()+"_"+v,e.data.cache[v]={data:k},"nodes"in e&&(e.data.cache[v].nodes=e.nodes.restricted,e.data.cache[v].edges=e.edges.restricted),"function"==typeof b&&(k=b(e,k)),e.dev.value&&a.comment("storing data in cache")}return k}},{"../../string/format.js":172,"../../string/list.coffee":173,"../console/print.coffee":52,"../data/filter.js":55,"../data/nest.js":60}],65:[function(e,t,n){var r,i,a;a=e("./value.coffee"),r=e("./color.coffee"),i=e("./text.js"),t.exports=function(e,t,n,o,s){var l,u,c,d,f,h;for(n instanceof Array||(n=[n]),o instanceof Array||(o=[o]),e&&(void 0===s?s=e.id.value:"number"!=typeof s&&(s=e.id.nesting.indexOf(s))),f={},u=0,d=n.length;d>u;u++)c=n[u],h=e?o.indexOf(c)>=0?r(e,t,s):c===e.text.value?i(e,t,s):3===d3.keys(t).length&&t.d3plus&&t.key&&t.values?a(e,t.values.map(function(e){return e.d3plus}),c,s):a(e,t,c,s):t[c],[e.data.keys[c],e.attrs.keys[c]].indexOf("number")>=0?(l=e.order.agg.value||e.aggs.value[c]||"sum",h instanceof Array||(h=[h]),h=d3[l](h)):(h instanceof Array&&(h=h[0]),h="string"==typeof h?h.toLowerCase():h),f[c]=h;return f}},{"./color.coffee":63,"./text.js":66,"./value.coffee":67}],66:[function(e,t,n){var r=e("./value.coffee"),i=e("../../object/validate.coffee"),a=e("../../util/uniques.coffee");t.exports=function(e,t,n){"number"!=typeof n&&(n=e.depth.value);var o,s=e.id.nesting[n];e.text.nesting&&i(e.text.nesting)?o=e.text.nesting[s]?e.text.nesting[s]:e.text.value:(o=[],e.text.value&&n===e.depth.value&&o.push(e.text.value),o.push(s)),o instanceof Array||(o=[o]);var l=[];if(i(t)&&"d3plus"in t&&t.d3plus.text)l.push(t.d3plus.text.toString()),l.push(e.format.value(t.d3plus.text.toString(),{vars:e,data:t}));else{var u=i(t)?t:void 0;u&&t[e.id.value]instanceof Array?t=t[e.id.value]:t instanceof Array||(t=[t]),o.forEach(function(n){var i=a(t,n,r,e,s);i.length&&(i.length>1&&(i=i.filter(function(e){return e instanceof Array||"string"==typeof e&&e.indexOf(" < ")<0})),i=i.map(function(t){return t instanceof Array?(t=t.filter(function(e){return e}),t.map(function(t){return e.format.value(t.toString(),{vars:e,data:u,key:n})})):t?e.format.value(t.toString(),{vars:e,data:u,key:n}):void 0}),1===i.length&&(i=i[0]),l.push(i))})}return l}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],67:[function(e,t,n){var r,i,a,o,s,l,u,c,d,f;d=e("../../object/validate.coffee"),c=e("../../util/uniques.coffee"),u=function(e,t,n,o){var s,l,u,f;if(l=d(t),"function"==typeof n&&l)return n(t,e);if(l){if(n in t)return t[n];if(s=e.data.cacheID+"_"+o,r(t,s,e),n in t.d3plus.data[s])return t.d3plus.data[s][n];if(o in t)t=t[o];else{if(!(e.id.value in t))return null;if(t=t[e.id.value],o!==n&&(u=a(e,t,o,e.id.value)),(null===u||void 0===u)&&(u=i(e,t,o,e.id.value)),null===u||void 0===u)return null;if(o===n)return u;t=u}}return t instanceof Array&&!d(t[0])&&(t=c(t)),t instanceof Array&&d(t[0])&&(f=c(t,n),f.length)?f:(f=a(e,t,n,o))?f:f=i(e,t,n,o)},a=function(e,t,n,r){var i;return e.data.viz instanceof Array&&n in e.data.keys&&(i=c(l(e.data.viz,t,r),n)),i&&i.length?i:null},i=function(e,t,n,r){var i,a,o,s;if("attrs"in e&&e.attrs.value&&n in e.attrs.keys)if(i=d(e.attrs.value)&&r in e.attrs.value?e.attrs.value[r]:e.attrs.value,i instanceof Array){if(o=c(l(i,t,r),n),o.length)return o}else if(t instanceof Array){if(i=[function(){var e,n,r;if(a in i){for(r=[],e=0,n=t.length;n>e;e++)a=t[e],r.push(i[a]);return r}}()],i.length&&(s=c(i,n),s.length))return s}else if(t in i)return i[t][n];return null},l=function(e,t,n){return t instanceof Array?e.filter(function(e){return t.indexOf(e[n])>=0}):e.filter(function(e){return e[n]===t})},r=function(e,t,n){return"d3plus"in e||(e.d3plus={}),"data"in e.d3plus||(e.d3plus.data={}),(n.data.changed||n.attrs&&n.attrs.changed||!(t in e.d3plus.data))&&(e.d3plus.data[t]={}),e},f=function(e,t,n,r,i){var a,o,s,l,u,c,f;if(null===i)return i;c="time"in e&&e.time.value===r,i instanceof Array||(i=[i]);for(s=l=0,u=i.length;u>l;s=++l)f=i[s],c&&null!==f&&f.constructor!==Date&&(f+="",4===f.length&&parseInt(f)+""===f&&(f+="/01/01"),o=new Date(f),"Invalid Date"!==o&&(i[s]=o));return 1===i.length&&(i=i[0]),null===i||!d(t)||"string"!=typeof r||r in t||(a=e.data.cacheID+"_"+n,t.d3plus.data[a][r]=i),i},s=function(e,t,n,r){var i,a,o,s,l;for(l=[],a=0,o=t.length;o>a;a++)i=t[a],d(i)?(s=u(e,i,n,r),l.push(f(e,i,r,n,s))):l.push(i);return"number"!=typeof l[0]&&(l=c(l)),1===l.length?l[0]:l},o=function(e,t,n,r){var i,a;return n?"number"==typeof n?n:(i=d(t),r||(r=e.id.value),i&&t.values instanceof Array?a=s(e,t.values,n,r):i&&t[n]instanceof Array?a=s(e,t[n],n,r):t instanceof Array?a=s(e,t,n,r):(a=u(e,t,n,r),a=f(e,t,r,n,a)),a):null},t.exports=o},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209}],68:[function(e,t,n){t.exports=function(e){var t,n,r;return["div","svg"].indexOf(e)<0&&(e="div"),n={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},t="div"===e?{}:{position:"absolute"},r=d3.select("body").selectAll(e+".d3plus_tester").data([0]),r.enter().append(e).attr("class","d3plus_tester").style(n).attr(t),r}},{}],69:[function(e,t,n){t.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],70:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u20ac"],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],shortDays:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",deprecated:"el m\xe9todo {0} ha sido eliminado, por favor, actualiza tu c\xf3digo para utilizar {1}.",
noChange:"{0} no se actualiza porque no cambi\xf3.",noContainer:"no se puede encontrar un contenedor en la p\xe1gina correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los v\xednculos no se pueden enlazar con si mismos. eliminando autom\xe1ticamente el v\xednculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes librer\xedas: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes librer\xedas: {1}.",method:"{0} visualizaciones requieren establecer el \u200b\u200bm\xe9todo {1}.",methods:"{0} visualizaciones requieren establecer los siguientes m\xe9todos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"\xedcono",id:"id",height:"alto",labels:"r\xf3tulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",mute:"ocultar",order:"orden",search:"b\xfasqueda",shape:"forma",size:"tama\xf1o",solo:"aislar",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"l\xednea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"#ERROR!",mode:"modo"},time:["fecha","d\xeda","mes","hora","a\xf1o"],visualization:{bubbles:"Burbujas",chart:"Tabla",geo_map:"Mapa Geo",line:"L\xednea Solar",network:"Red",rings:"Anillos",scatter:"Gr\xe1fico De Dispersi\xf3n",stacked:"\xc1rea Apilada",tree_map:"Mapa de \xc1rbol",bar:"Gr\xe1fico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Gr\xe1fico de Pastel",table:"Tabla"},ui:{and:"y",back:"atr\xe1s",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} m\xe1s",moreInfo:"clic para m\xe1s informaci\xf3n",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"porcentaje",total:"total",values:"valores",including:"Incluyendo",or:"o"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],71:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u20ac"],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],shortMonths:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",deprecated:"{0} a \xe9t\xe9 \xe9limin\xe9 de la version courante, mettez \xe0 jour votre code source avec {1}.",noChange:"{0} n'a pas \xe9t\xe9 mis \xe0 jour car inchang\xe9.",noContainer:"impossible de trouver un contenant correspondant \xe0 {0}.",of:"de",oldStyle:"les propri\xe9t\xe9s de {0} ont \xe9t\xe9 imbriqu\xe9es dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui m\xeame. L'auto-r\xe9f\xe9rence est automatiquement \xe9limin\xe9e {0}.",set:"{0} a \xe9t\xe9 mis \xe0 jour.",setLong:"{0} a \xe9t\xe9 mis \xe0 jour \xe0 {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de donn\xe9es disponibles",dataYear:"Pas de donn\xe9es disponibles pour {0}.",lib:"La visualisation de {0} n\xe9cessite le chargement de la librairie {1}.",libs:"La visualisation de {0} n\xe9cessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la d\xe9finition de {1}.",methods:"La visualisation du {0} exige les d\xe9finitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","pr\xe8s","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"\xedcone",id:"id",height:"hauteur",labels:"labels",legend:"l\xe9gende",margin:"marge",messages:"messages",mute:"cacher",order:"ordre",search:"recherche",shape:"format",size:"taille",solo:"isoler",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode"},time:["ann\xe9e","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geo_map:"Carte",line:"Courbes",network:"R\xe9seau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empil\xe9es",tree_map:"Arbre",bar:"Diagramme en barres",box:"Bo\xeetes \xe0 Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour r\xe9duire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de r\xe9sultat correspondant \xe0 {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou"},message:{data:"analyse des donn\xe9es",draw:"trac\xe9 en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"r\xe9initialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],72:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["\u20a9",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["\uc624\uc804","\uc624\ud6c4"],days:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],shortDays:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],months:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],shortMonths:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"]},dev:{accepted:"{0} {1}, \ub2e4\uc74c \uc911 \ud558\ub098\ub97c \uc0ac\uc6a9\ud558\uc2ed\uc2dc\uc624\uc5d0 \ub300\ud55c \ud5c8\uc6a9 \uac12\uc774 \uc544\ub2d9\ub2c8\ub2e4 : {2}.",deprecated:"{0} \uba54\uc18c\ub4dc\uac00 \uc81c\uac70 \ub41c, \uc0ac\uc6a9\ud558\ub294 \ucf54\ub4dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uc2ed\uc2dc\uc624 {1}.",noChange:"{0}\uc774 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 \uc5c5\ub370\uc774\ud2b8\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",noContainer:"\ud398\uc774\uc9c0 \ub9e4\uce6d {0}\uc5d0 \ucee8\ud14c\uc774\ub108\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4.",of:"\uc758",oldStyle:"{0} \uc9c0\uae08\uc5d0 \uc9c1\uc811 \ub0b4\uc7a5 \ub41c\uc704\ud55c \uc2a4\ud0c0\uc77c\uc758 \ud638\ud154 .{1}().",sameEdge:"\uac00\uc7a5\uc790\ub9ac\ub294 \uc790\uc2e0\uc5d0 \ub9c1\ud06c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc790\ub3d9\uc73c\ub85c \uc790\uccb4 \ucc38\uc870 \uac00\uc7a5\uc790\ub9ac {0}\uc744 \uc81c\uac70\ud558\ub294 \ub2e8\uacc4\ub97c \ud3ec\ud568\ud55c\ub2e4.",set:"{0} \uc124\uc815\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",setLong:"{0} {1}\ub85c \uc124\uc815\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",setContainer:".container() \uc0ac\uc6a9\ud558\uc5ec \ucee8\ud14c\uc774\ub108 \uc0ac\uc5c5\ubd80\ub97c \uc815\uc758\ud558\uc2ed\uc2dc\uc624"},error:{accepted:"{0} \uc544\ub2c8\ub2e4 \ud5c8\uc6a9 {1} {2} \uc2dc\uac01\ud654\ub294 \ub2e4\uc74c \uc911 \ud558\ub098\ub97c \uc0ac\uc6a9\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4 : {3}.",connections:"{0}\uc5d0 \ub300\ud55c \uc5f0\uacb0\uc774 \uc5c6\uc74c.",data:"\uc790\ub8cc \uc5c6\uc74c",dataYear:"{0}\uc5d0 \ub300\ud55c \uc790\ub8cc\uac00 \uc5c6\uc74c.",lib:"{0} \uc2dc\uac01\ud654\ub294 {1} \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c\ub85c\ub4dc \ud560 \ud544\uc694\ud569\ub2c8\ub2e4.",libs:"{0} \uc2dc\uac01\ud654\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c\ub85c\ub4dc \ud560 \ud544\uc694 : {1}.",method:"{0} \uc2dc\uac01\ud654\ub97c \uc704\ud574 {1} \uba54\uc11c\ub4dc\ub97c \uc124\uc815\ud574\uc57c \ud55c\ub2e4.",methods:"{0} \uc2dc\uac01\ud654\ub97c \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uba54\uc11c\ub4dc\ub97c \uc124\uc815\ud574\uc57c\ud55c\ub2e4: {1}."},lowercase:[],method:{active:"\ud65c\uc131 \uc138\uadf8\uba3c\ud2b8",color:"\uc0c9",depth:"\uae4a\uc774",dev:"\ud480\uc5b4\uc11c",focus:"\ucd08\uc810",icon:"\uc0c1",id:"\uc2e0\ubd84\uc99d",height:"\ub192\uc774",labels:"\ub77c\ubca8",legend:"\ubc94\ub840",margin:"\uc5ec\uc720",messages:"\uc0c1\ud0dc \uba54\uc2dc\uc9c0",order:"\uc8fc\ubb38",search:"\uc218\uc0c9",shape:"\ubaa8\uc591",size:"\ud06c\uae30",style:"\uc2a4\ud0c0\uc77c",temp:"\uc784\uc2dc \uc138\uadf8\uba3c\ud2b8",text:"\ubcf8\ubb38",time:"\uc2dc\uac01",timeline:"\ud0c0\uc784 \ub77c\uc778",total:"\ucd1d \uc138\uadf8\uba3c\ud2b8",type:"\uc720\ud615",width:"\ud3ed",x:"X \ucd95",y:"Y \ucd95",zoom:"\uc90c",mode:"\ubaa8\ub4dc",mute:"\uc228\uae40",solo:"\ub3c5\uc8fc"},time:["\ub0a0\uc9dc","\uc694\uc77c","\uc6d4","\uc2dc\uac04","\ub144"],visualization:{bubbles:"\ubc84\ube14 \ucc28\ud2b8",chart:"\ucc28\ud2b8",geo_map:"\uc9c0\ub3c4\ud615",line:"\uc120\ud615 \uadf8\ub798\ud504",network:"\ub124\ud2b8\uc6cc\ud06c \uadf8\ub798\ud504",rings:"\ubc18\uc9c0",scatter:"\uc0b0\ud3ec\ub3c4",stacked:"\uc2a4\ud0dd \uc601\uc5ed",tree_map:"\ud2b8\ub9ac \ub9f5",bar:"\ub9c9\ub300 \ucc28\ud2b8",box:"\ubc15\uc2a4 \ud50c\ub86f",paths:"\uacbd\ub85c",pie:"\ud30c\uc774 \ucc28\ud2b8",table:"\ud45c"},ui:{and:"\uacfc",back:"\ub4a4\ub85c",collapse:"\ucd95\uc18c\ud558\ub824\uba74 \ud074\ub9ad",error:"\uc624\ub958",expand:"\ud655\uc7a5\ud558\ub824\uba74 \ud074\ub9ad",loading:"\ub85c\ub4dc \uc911 ...",more:"{0} \uc774\uc0c1",moreInfo:"\ucd94\uac00 \uc815\ubcf4\ub97c \uc704\ud574 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624",noResults:"\uc77c\uce58\ud558\ub294 \uacb0\uacfc\uac12\uc774 \uc5c6\uc74c {0}.",primary:"\uae30\ubcf8 \uc5f0\uacb0",share:"\ube44\uc911",total:"\ud569\uacc4",values:"\uac12",including:"...\uc744 \ud3ec\ud568\ud558\uc5ec",or:"\ub610\ub294"},message:{data:"\ub370\uc774\ud130 \ubd84\uc11d \uc911",draw:"\ub370\uc774\ud130 \uc2dc\uac01\ud654 \uc911",initializing:"\ucd08\uae30\ud654 {0}",loading:"\ub370\uc774\ud130 \ub85c\ub529 \uc911",tooltipReset:"\ud234\ud301\uc744 \uc7ac\uc124\uc815",ui:"UI \uc5c5\ub370\uc774\ud2b8 \uc911"},uppercase:["CEO","\ucd5c\uace0 \uacbd\uc601\uc790","\ucd5c\uace0 \uc7ac\ubb34 \ucc45\uc784\uc790 (CFO)","CFO\ub294","CNC","COO","\uad6c\uad6c","CPU","CPU\ub97c","\uad6d\ub0b4 \ucd1d\uc0dd\uc0b0 (GDP)","HVAC","ID","IT","R & D","TV","UI"]}},{}],73:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u0434\u0435\u043d."],dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u043d\u0435\u0434\u0435\u043b\u0430","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a","\u043f\u0435\u0442\u043e\u043a","\u0441\u0430\u0431\u043e\u0442\u0430"],shortDays:["\u043d\u0435\u0434","\u043f\u043e\u043d","\u0432\u0442\u043e","\u0441\u0440\u0435","\u0447\u0435\u0442","\u043f\u0435\u0442","\u0441\u0430\u0431"],months:["\u0458\u0430\u043d\u0443\u0430\u0440\u0438","\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0438\u043b","\u043c\u0430\u0458","\u0458\u0443\u043d\u0438","\u0458\u0443\u043b\u0438","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438","\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438","\u043d\u043e\u0435\u043c\u0432\u0440\u0438","\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438"],shortMonths:["\u0458\u0430\u043d","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0458","\u0458\u0443\u043d","\u0458\u0443\u043b","\u0430\u0432\u0433","\u0441\u0435\u043f","\u043e\u043a\u0442","\u043d\u043e\u0435","\u0434\u0435\u043a"]},dev:{accepted:"{0} \u043d\u0435 \u0435 \u043f\u0440\u0438\u0444\u0430\u0442\u0435\u043da \u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0430 \u0437\u0430 {1}, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0442\u0435 \u0435\u0434\u043da \u043e\u0434 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0438: {2}.",deprecated:"{0} \u043c\u0435\u0442\u043e\u0434 \u0435 \u043e\u0442\u0441\u0442\u0440\u0430\u043d\u0435\u0442\u0430, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043e\u0431\u043d\u043e\u0432\u0435\u0442\u0435 \u0433\u043e \u0432\u0430\u0448\u0438\u043e\u0442 \u043a\u043e\u0434 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438 {1}.",noChange:"{0} \u043d\u0435 \u0435 \u0430\u0436\u0443\u0440\u0438\u0440\u0430\u043d\u0430, \u0431\u0438\u0434\u0435\u0458\u045c\u0438 \u043d\u0435\u043c\u0430\u0448\u0435 \u043f\u0440\u043e\u043c\u0435\u043d\u0438.",noContainer:"\u043d\u0435 \u043c\u043e\u0436e \u0434\u0430 \u0441\u0435 \u043d\u0430\u0458\u0434\u0435 \u043a\u043e\u043d\u0442\u0435\u0458\u043d\u0435\u0440 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0442\u0430 \u043a\u043e\u0458 \u0441\u0435 \u0441\u043e\u0432\u043f\u0430\u0453\u0430 \u0441\u043e {0}.",of:"\u043d\u0430",oldStyle:"\u0441\u0432\u043e\u0458\u0441\u0442\u0432\u0430\u0442\u0430 \u0437\u0430 \u0441\u0442\u0438\u043b\u043e\u0442 \u0437\u0430 {0} \u0441\u0435\u0433\u0430 \u0441\u0435 \u0432\u0433\u0440\u0430\u0434\u0435\u043d\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043d\u043e \u0432\u043e. {1} ().",sameEdge:"\u0440\u0430\u0431\u043e\u0432\u0438\u0442\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0438\u043c\u0430\u0430\u0442 \u0430\u043b\u043a\u0430 \u0441\u0430\u043c\u0438\u0442\u0435 \u043a\u043e\u043d \u0441\u0435\u0431\u0435. \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0441\u043a\u0438 \u0433\u0438 \u043e\u0442\u0441\u0442\u0440\u0430\u043d\u0443\u0432\u0430\u043c \u0440\u0430\u0431\u043e\u0432\u0438\u0442\u0435 \u043a\u043e\u0438 \u0441\u0435 \u0441\u0430\u043c\u043e-\u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0440\u0430\u0430\u0442 {0}.",set:"{0} \u0435 \u043d\u0430\u043c\u0435\u0441\u0442\u0435\u043d.",setLong:"{0} \u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0435\u043d \u043d\u0430 {1}.",setContainer:"\u0412\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u0434\u0435\u0444\u0438\u043d\u0438\u0440\u0430\u0458\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u0458\u043d\u0435\u0440 div \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0458\u045c\u0438 .container()"},error:{accepted:"{0} \u043d\u0435 \u0435 \u043f\u0440\u0438\u0444\u0430\u0442\u043b\u0438\u0432\u0430 \u0437\u0430 {1} {2} \u0432\u0438\u0437\u0443\u0435\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0442\u0435 \u0435\u0434\u043d\u0430 \u043e\u0434 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435: {3}.",connections:"\u043d\u0435 \u0435 \u0434\u043e\u0441\u0442\u0430\u043f\u043d\u0430 \u0437\u0430 \u0432\u0440\u0441\u043a\u0438 {0}.",data:"\u043d\u0435\u043c\u0430 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438",dataYear:"\u041d\u0435\u043c\u0430 \u0434\u043e\u0441\u0442\u0430\u043f\u043d\u0438 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438 \u0437\u0430 {0}.",lib:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0442\u0430 {1} .",libs:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438: {1}.",method:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 {1} \u043c\u0435\u0442\u043e\u0434\u043e\u0442.",methods:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u043c\u0435\u0442\u043e\u0434\u0438: {1}."},lowercase:["a","\u0438","\u0432\u043e","\u043d\u043e","\u043d\u0430","\u0438\u043b\u0438","\u0434\u0430","\u0441\u0435","\u0441\u043e"],method:{active:"\u0430\u043a\u0442\u0438\u0432\u043d\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",color:"\u0431\u043e\u0458\u0430",depth:"\u0434\u043b\u0430\u0431\u043e\u0447\u0438\u043d\u0430",dev:"\u043e\u043f\u0448\u0438\u0440\u043d\u043e",focus:"\u0444\u043e\u043a\u0443\u0441",icon:"\u0438\u043a\u043e\u043d\u0430",id:"id",height:"\u0432\u0438\u0441\u0438\u043d\u0430",labels:"\u0435\u0442\u0438\u043a\u0435\u0442\u0438",legend:"\u043b\u0435\u0433\u0435\u043d\u0434\u0430",margin:"\u043c\u0430\u0440\u0433\u0438\u043d\u0430",messages:"\u043f\u043e\u0440\u0430\u043a\u0438 \u0437\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0442",mute:"\u0441\u043a\u0440\u0438\u0435",order:"\u0446\u0435\u043b",search:"\u0431\u0430\u0440\u0430\u0458",shape:"\u0444\u043e\u0440\u043c\u0430",size:"\u0433\u043e\u043b\u0435\u043c\u0438\u043d\u0430",solo:"\u0438\u0437\u043e\u043b\u0438\u0440\u0430\u045a\u0435",style:"\u0441\u0442\u0438\u043b",temp:"\u043f\u0440\u0438\u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",text:"\u0442\u0435\u043a\u0441\u0442",time:"\u0432\u0440\u0435\u043c\u0435",timeline:"\u0432\u0440\u0435\u043c\u0435\u043f\u043b\u043e\u0432",total:"\u0412\u043a\u0443\u043f\u043d\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",type:"\u0442\u0438\u043f",width:"\u0448\u0438\u0440\u0438\u043d\u0430",x:"x \u043e\u0441\u043a\u0430\u0442\u0430",y:"\u043e\u0441\u043a\u0430\u0442\u0430 y",zoom:"\u0437\u0443\u043c",mode:"\u0440\u0435\u0436\u0438\u043c"},time:["\u0434\u0430\u0442\u0443\u043c","\u0434\u0435\u043d","\u043c\u0435\u0441\u0435\u0446","\u0432\u0440\u0435\u043c\u0435","\u0433\u043e\u0434\u0438\u043d\u0430"],visualization:{bubbles:"\u041c\u0435\u0443\u0440\u0447\u0438\u045a\u0430",chart:"\u0428\u0435\u043c\u0430",geo_map:"\u0413\u0435\u043e \u043c\u0430\u043f\u0430",line:"\u041b\u0438\u043d\u0438\u0441\u043a\u0438 \u0433\u0440\u0430\u0444\u0438\u043a",network:"\u041c\u0440\u0435\u0436\u0430",rings:"\u041f\u0440\u0441\u0442\u0435\u043d\u0438",scatter:"\u0420\u0430\u0441\u043f\u0440\u0441\u043a\u0430\u043d \u0433\u0440\u0430\u0444\u0438\u043a",stacked:"\u041d\u0430\u0440\u0435\u0434\u0435\u043d\u0430 \u043f\u043e\u0432\u0440\u0448\u0438\u043d\u0430",tree_map:"\u041c\u0430\u043f\u0430 \u0432\u043e \u0432\u0438\u0434 \u043d\u0430 \u0434\u0440\u0432\u043e",bar:"\u0411\u0430\u0440 \u0442\u0430\u0431\u0435\u043b\u0430",box:"\u041a\u0443\u0442\u0438\u0458\u0430 \u041f\u0430\u0440\u0446\u0435\u043b",paths:"\u041f\u0430\u0442\u0435\u043a\u0438",pie:"\u041f\u0438\u0442\u0430 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u043d",table:"\u0422\u0430\u0431\u0435\u043b\u0430"},ui:{and:"\u0438",back:"\u043d\u0430\u0437\u0430\u0434",collapse:"\u043a\u043b\u0438\u043a\u043d\u0438 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u0441\u043e\u0431\u0435\u0440\u0435",error:"\u0433\u0440\u0435\u0448\u043a\u0430",expand:"\u043a\u043b\u0438\u043a\u043d\u0438 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u043f\u0440\u043e\u0448\u0438\u0440\u0438",loading:"\u0421\u0435 \u0432\u0447\u0438\u0442\u0443\u0432\u0430 ...",more:"{0} \u043f\u043e\u0432\u0435\u045c\u0435",moreInfo:"\u043a\u043b\u0438\u043a\u043d\u0435\u0442\u0435 \u0437\u0430 \u043f\u043e\u0432\u0435\u045c\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",noResults:"\u041d\u0435 \u0441\u0435 \u043f\u0440\u043e\u043d\u0430\u0458\u0434\u0435\u043d\u0438 \u043f\u043e\u0458\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 {0}.",primary:"\u043e\u0441\u043d\u043e\u0432\u043d\u043e \u0432\u0440\u0441\u043a\u0438",share:"\u0443\u0434\u0435\u043b",total:"\u0412\u043a\u0443\u043f\u043d\u0438\u043e\u0442",values:"\u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0438",including:"\u0412\u043a\u043b\u0443\u0447\u0443\u0432\u0430\u0458\u045c\u0438",or:"\u0438\u043b\u0438"},message:{data:"\u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043d\u0430 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438",draw:"\u0446\u0440\u0442\u0430\u045a\u0435 \u043d\u0430 \u0432\u0438\u0437\u0443\u0435\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430",initializing:"\u0438\u043d\u0438\u0446\u0438\u0458\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430 {0}",loading:"\u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438 \u0437\u0430 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435",tooltipReset:"\u0440\u0435\u0441\u0435\u0442\u0438\u0440\u0430\u045a\u0435 \u043d\u0430 \u043e\u0431\u0458\u0430\u0441\u043d\u0443\u0432\u0430\u045a\u0430\u0442\u0430",ui:"\u0430\u0436\u0443\u0440\u0438\u0440\u0430\u045a\u0435 \u043d\u0430 \u043a\u043e\u0440\u0438\u043d\u0438\u0447\u043a\u0438\u043e\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0458\u0441"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],74:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} n\xe3o \xe9 um valor v\xe1lido para {1}, por favor use um dos seguintes procedimentos: {2}.",deprecated:"{0} m\xe9todo foi removido, por favor atualize seu c\xf3digo para utilizar {1}.",noChange:"{0} n\xe3o foi atualizado porque ele n\xe3o mudou.",noContainer:"N\xe3o foi poss\xedvel encontrar um local na p\xe1gina correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} j\xe1 foi incorporado diretamente no. {1} ().",sameEdge:"bordas n\xe3o podem vincular a si mesmos. removendo automaticamente borda de auto-refer\xeancia {0}.",set:"{0} foi definido.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} n\xe3o \xe9 um {1} reconhecido para visualiza\xe7\xf5es {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"N\xe3o h\xe1 conex\xf5es dispon\xedveis para {0}.",data:"N\xe3o h\xe1 dados dispon\xedveis",dataYear:"N\xe3o h\xe1 dados dispon\xedveis para {0}.",lib:"A visualiza\xe7\xe3o {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualiza\xe7\xe3o {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualiza\xe7\xe3o {0} exige a defini\xe7\xe3o do m\xe9todo {1}.",methods:"A visualiza\xe7\xe3o {0} exige a defini\xe7\xe3o dos m\xe9todos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"\xedcone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",mute:"ocultar",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",solo:"isolar",style:"estilo",temp:"segmentos tempor\xe1rios",text:"texto",time:"tempo",timeline:"linha do tempo",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["data","dia","m\xeas","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Gr\xe1fico",geo_map:"Mapa",line:"Gr\xe1fico de Linha",network:"Rede",rings:"An\xe9is",scatter:"Dispers\xe3o",stacked:"Evolu\xe7\xe3o",tree_map:"Tree Map",bar:"Gr\xe1fico de Barras",box:"Box Plot",paths:"Caminhos",pie:"Pie Chart",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informa\xe7\xf5es",noResults:"nenhum resultado para {0}.",primary:"conex\xf5es prim\xe1rias",share:"participa\xe7\xe3o",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"analisando dados",draw:"desenhando visualiza\xe7\xe3o",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],75:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["\u20ac",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} n\xe3o \xe9 um valor v\xe1lido para {1}, por favor escolha uma das seguintes op\xe7\xf5es: {2}.",deprecated:"o m\xe9todo {0} foi removido, por favor atualize o seu c\xf3digo para usar {1}.",noChange:"{0} n\xe3o foi atualizado porque n\xe3o houve modifica\xe7\xf5es.",noContainer:"N\xe3o foi poss\xedvel encontrar um elemento na p\xe1gina correspondente a {0}.",of:"de",oldStyle:"as propriedades de {0} j\xe1 foram inclu\xeddas em .{1}().",sameEdge:"bordas n\xe3o podem vincular a si mesmos. removendo automaticamente borda de auto-refer\xeancia {0}.",set:"{0} foi definido.",setLong:"{0} foi alterado para {1}.",setContainer:"por favor indique um elemento div atrav\xe9s do m\xe9todo .container()"},error:{accepted:"{0} n\xe3o \xe9 uma {1} v\xe1lida para a visualiza\xe7\xe3o {2}, por favor escolha uma das seguintes: {3}.",connections:"n\xe3o existem liga\xe7\xf5es dispon\xedveis para {0}.",data:"n\xe3o existem dados dispon\xedveis",dataYear:"n\xe3o existem dados dispon\xedveis para {0}.",lib:"a visualiza\xe7\xe3o {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualiza\xe7\xe3o {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualiza\xe7\xe3o {0} exige a defini\xe7\xe3o do m\xe9todo {1}.",methods:"A visualiza\xe7\xe3o {0} exige a defini\xe7\xe3o dos seguintes m\xe9todos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"\xedcone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos tempor\xe1rios",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"#ERROR!",mute:"ocultar",solo:"isolar"},time:["data","dia","m\xeas","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geo_map:"Mapa",line:"Gr\xe1fico de Linha",network:"Grafo",rings:"An\xe9is",scatter:"Gr\xe1fico de Dispers\xe3o",stacked:"Gr\xe1fico de \xc1rea",tree_map:"Tree Map",bar:"Gr\xe1fico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"Caminhos",pie:"Gr\xe1fico de Setores",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informa\xe7\xf5es",noResults:"nenhum resultado para {0}.",primary:"liga\xe7\xf5es principais",share:"propor\xe7\xe3o",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"a analisar os dados",draw:"a desenhar a visualiza\xe7\xe3o",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informa\xe7\xe3o",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],76:[function(e,t,n){t.exports={format:{decimal:",",thousands:"\xa0",grouping:[3],currency:[""," \u0440\u0443\u0431."],dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],shortDays:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],months:["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],shortMonths:["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"]},dev:{accepted:"{0} \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 {1}, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445: {2}.",deprecated:"\u041c\u0435\u0442\u043e\u0434 {0} \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u043a\u043e\u0434, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c {1}.",noChange:"{0} \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u043d \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f.",noContainer:"\u043d\u0435 \u043c\u043e\u0433\u0443 \u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f {0}.",of:"\u0438\u0437",oldStyle:"\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0441\u0442\u0438\u043b\u044f \u0434\u043b\u044f {0} \u0443\u0436\u0435 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0431\u044b\u043b\u0438 \u0432\u0441\u0442\u0440\u043e\u0435\u043d \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0432. {1} ().",sameEdge:"\u041a\u0440\u0430\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0435\u0431\u044f. \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0443\u0434\u0430\u043b\u044f\u044f \u0430\u0432\u0442\u043e\u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0442\u043d\u044b\u0445 \u0440\u0435\u0431\u0440\u043e {0}.",
set:"{0} \u0431\u044b\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.",setLong:"{0} \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 {1}.",setContainer:"\u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 DIV \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e .container ()"},error:{accepted:"{0} \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f {1} \u0434\u043b\u044f {2} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445: {3}.",connections:"\u043d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f {0}.",data:"\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b",dataYear:"\u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 {0}.",lib:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 {1} \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443.",libs:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a: {1}.",method:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 {1} \u043c\u0435\u0442\u043e\u0434\u0430.",methods:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432: {1}."},lowercase:["\u0438","\u043a\u0430\u043a","\u0432","\u043d\u043e","\u0434\u043b\u044f","\u0438\u0437","\u0435\u0441\u043b\u0438 \u0432","\u0432","\u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e","\u043d\u0438","\u043d\u0430","\u043d\u0430","\u0438\u043b\u0438","\u0432","\u0447\u0442\u043e","\u043a","\u0441","\u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e","\u043f\u0440\u043e\u0442\u0438\u0432","\u043f\u0440\u043e\u0442\u0438\u0432"],method:{active:"\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b",color:"\u0446\u0432\u0435\u0442",depth:"\u0433\u043b\u0443\u0431\u0438\u043d\u0430",dev:"\u043c\u043d\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u043d\u044b\u0439",focus:"\u0444\u043e\u043a\u0443\u0441",icon:"\u0437\u043d\u0430\u0447\u043e\u043a",id:"ID",height:"\u0432\u044b\u0441\u043e\u0442\u0430",labels:"\u043d\u0430\u0434\u043f\u0438\u0441\u0438",legend:"\u043b\u0435\u0433\u0435\u043d\u0434\u0430",margin:"\u043f\u043e\u043b\u0435",messages:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438",mute:"\u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c",order:"\u043f\u043e\u0440\u044f\u0434\u043e\u043a",search:"\u043f\u043e\u0438\u0441\u043a",shape:"\u0444\u043e\u0440\u043c\u0430",size:"\u0440\u0430\u0437\u043c\u0435\u0440",solo:"\u0438\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c",style:"\u0441\u0442\u0438\u043b\u044c",temp:"\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b",text:"\u0442\u0435\u043a\u0441\u0442",time:"\u0432\u0440\u0435\u043c\u044f",timeline:"\u0433\u0440\u0430\u0444\u0438\u043a",total:"\u0432\u0441\u0435\u0433\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432",type:"\u0442\u0438\u043f",width:"\u0448\u0438\u0440\u0438\u043d\u0430",x:"\u043e\u0441\u044c \u0445",y:"\u041e\u0441\u044c Y",zoom:"\u043c\u0430\u0441\u0448\u0442\u0430\u0431",mode:"\u0440\u0435\u0436\u0438\u043c"},time:["\u0434\u0430\u0442\u0430","\u0434\u0435\u043d\u044c","\u043c\u0435\u0441\u044f\u0446","\u0432\u0440\u0435\u043c\u044f","\u0433\u043e\u0434"],visualization:{bubbles:"\u041f\u0443\u0437\u044b\u0440\u0438",chart:"\u0413\u0440\u0430\u0444\u0438\u043a",geo_map:"\u0413\u0435\u043e \u041a\u0430\u0440\u0442\u0430",line:"\u041b\u0438\u043d\u0438\u044f \u0437\u0435\u043c\u043b\u044f",network:"\u0421\u0435\u0442\u044c",rings:"\u041a\u043e\u043b\u044c\u0446\u0430",scatter:"\u0420\u0430\u0437\u0431\u0440\u043e\u0441 \u0437\u0435\u043c\u043b\u044f",stacked:"\u0421 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u0435\u043c \u041f\u043b\u043e\u0449\u0430\u0434\u044c",tree_map:"\u0414\u0435\u0440\u0435\u0432\u043e \u041a\u0430\u0440\u0442\u0430",bar:"\u0413\u0438\u0441\u0442\u043e\u0433\u0440\u0430\u043c\u043c\u0430",box:"\u041a\u043e\u0440\u043e\u0431\u043a\u0430 \u0437\u0435\u043c\u043b\u044f",paths:"\u041f\u0443\u0442\u0438",pie:"\u041a\u0440\u0443\u0433\u043e\u0432\u0430\u044f \u0434\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430",table:"\u0421\u0442\u043e\u043b"},ui:{and:"\u0438",back:"\u043d\u0430\u0437\u0430\u0434",collapse:"\u0429\u0435\u043b\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c",error:"\u043e\u0448\u0438\u0431\u043a\u0430",expand:"\u0449\u0435\u043b\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c",loading:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ...",more:"{0} \u0431\u043e\u043b\u0435\u0435",moreInfo:"\u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",noResults:"\u043d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 {0}.",primary:"\u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f",share:"\u0434\u043e\u043b\u044f",total:"\u043e\u0431\u0449\u0435\u0435",values:"\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f",including:"\u0432\u043a\u043b\u044e\u0447\u0430\u044f",or:"\u0438\u043b\u0438"},message:{data:"\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u044f \u0434\u0430\u043d\u043d\u044b\u0435",draw:"\u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f",initializing:"\u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 {0}",loading:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445",tooltipReset:"\u0441\u0431\u0440\u043e\u0441 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438",ui:"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430"},uppercase:["ID"]}},{}],77:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["\xa5",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["\u4e0a\u5348","\u4e0b\u5348"],days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],shortDays:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],shortMonths:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},dev:{accepted:"{0}\u4e0d\u662f{1}\u7684\u53ef\u63a5\u53d7\u503c, \u8bf7\u7528\u4e0b\u5217\u4e4b\u4e00\u7684\u503c:{2}",deprecated:"{0}\u7684\u65b9\u6cd5\u5df2\u88ab\u79fb\u9664, \u8bf7\u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u53bb\u4f7f\u7528{1}",noChange:"{0}\u6ca1\u6709\u66f4\u65b0, \u56e0\u4e3a\u5b83\u5e76\u6ca1\u6709\u6539\u53d8\u3002",noContainer:"\u65e0\u6cd5\u5728\u8be5\u9875\u627e\u5230\u5bb9\u5668\u53bb\u5339\u914d{0}",of:"\u7684",oldStyle:"\u6837\u5f0f\u5c5e\u6027{0}\u73b0\u5728\u5df2\u7ecf\u76f4\u63a5\u5d4c\u5165\u5230\u3002{1}\uff08\uff09\u3002",sameEdge:"\u8fb9\u7f18\u4e0d\u80fd\u94fe\u63a5\u5230\u81ea\u5df1\u3002\u81ea\u52a8\u53bb\u9664\u81ea\u6211\u53c2\u7167\u8fb9\u7f18{0}\u3002",set:"{0}\u5df2\u7ecf\u88ab\u8bbe\u7f6e\u3002",setLong:"{0}\u88ab\u8bbe\u7f6e\u4e3a{1}\u3002",setContainer:"\u8bf7\u4f7f\u7528()\u5bb9\u5668\u6765\u5b9a\u4e49div\u5bb9\u5668"},error:{accepted:"{0}\u5bf9\u4e8e{2}\u7684\u53ef\u89c6\u5316\u6548\u679c\u5e76\u4e0d\u662f\u4e00\u4e2a\u53ef\u63a5\u53d7\u7684{1}, \u8bf7\u4f7f\u7528\u5982\u4e0b\u7684\u4e00\u4e2a\uff1a{3}.",connections:"\u6ca1\u6709\u5bf9{0}\u53ef\u7528\u7684\u8fde\u63a5\u3002",data:"\u65e0\u53ef\u7528\u6570\u636e",dataYear:"\u6ca1\u6709\u6570\u636e\u5bf9{0}\u53ef\u7528\u3002",lib:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u88c5\u8f7d{1}\u5e93\u3002",libs:"{0}\u7684\u53ef\u89c6\u5316\u9700\u8981\u52a0\u8f7d\u4ee5\u4e0b\u5e93\uff1a{1}\u3002",method:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u8bbe\u7f6e{1}\u65b9\u6cd5\u3002",methods:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u8bbe\u7f6e\u4ee5\u4e0b\u65b9\u6cd5\uff1a{1}\u3002"},lowercase:["\u4e00\u4e2a","\u548c","\u5728","\u4f46\u662f","\u5728...\u91cc","\u7684","\u6216\u8005","\u8fd9","\u5411","\u4e0e...\u4e00\u8d77"],method:{active:"\u6d3b\u8dc3\u6bb5",color:"\u989c\u8272",depth:"\u6df1\u5ea6",dev:"\u8be6\u7ec6",focus:"\u7126\u70b9",icon:"\u56fe\u6807",id:"\u8eab\u4efd\u8ba4\u8bc1",height:"\u9ad8\u5ea6",labels:"\u6807\u7b7e",legend:"\u56fe\u4f8b\u6ce8\u91ca",margin:"\u5916\u8fb9\u8ddd",messages:"\u72b6\u6001\u6d88\u606f",mute:"\u9690\u85cf",order:"\u89c4\u5219",search:"\u641c\u7d22",shape:"\u5f62\u72b6",size:"\u5927\u5c0f",solo:"\u9694\u79bb",style:"\u6837\u5f0f",temp:"\u6682\u65f6\u6027\u533a\u6bb5",text:"\u6587\u672c",time:"\u65f6\u95f4",timeline:"\u65f6\u95f4\u8f74",total:"\u603b\u6bb5",type:"\u7c7b\u578b",width:"\u5bbd\u5ea6",x:"X\u8f74",y:"Y\u8f74",zoom:"\u7f29\u653e",mode:"\u6a21\u5f0f"},time:["\u65e5","\u661f\u671f","\u6708","\u65f6\u95f4","\u5e74"],visualization:{bubbles:"\u6c14\u6ce1",chart:"\u56fe\u8868",geo_map:"\u5730\u7406\u5730\u56fe",line:"\u7ebf\u56fe",network:"\u7f51\u7edc",rings:"\u7279\u6027",scatter:"\u6563\u70b9\u56fe",stacked:"\u5806\u79ef\u9762\u79ef\u56fe",tree_map:"\u6811\u56fe",bar:"\u6761\u56fe",box:"\u7bb1\u7ebf\u56fe",paths:"\u8def\u5f84",pie:"\u997c\u56fe",table:"\u8868"},ui:{and:"\u548c",back:"\u540e\u9762",collapse:"\u70b9\u51fb\u5408\u5e76",error:"\u9519\u8bef",expand:"\u5355\u51fb\u4ee5\u5c55\u5f00",loading:"\u8f7d\u5165\u4e2d...",more:"{0}\u66f4\u591a",moreInfo:"\u70b9\u51fb\u4e86\u89e3\u66f4\u591a\u4fe1\u606f",noResults:"\u6ca1\u6709\u7ed3\u679c\u5339\u914d{0}\u3002",primary:"\u4e3b\u8981\u8fde\u63a5",share:"\u5171\u4eab",total:"\u603b",values:"\u503c",including:"\u5305\u62ec",or:"\u6216"},message:{data:"\u5206\u6790\u6570\u636e",draw:"\u7ed8\u5236\u53ef\u89c6\u5316",initializing:"\u521d\u59cb\u5316{0}",loading:"\u52a0\u8f7d\u6570\u636e",tooltipReset:"\u91cd\u7f6e\u5de5\u5177\u63d0\u793a",ui:"\u66f4\u65b0UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","\u7535\u89c6","\u7528\u6237\u754c\u9762","\u7814\u53d1"]}},{}],78:[function(e,t,n){t.exports={en_US:e("./languages/en_US.coffee"),es_ES:e("./languages/es_ES.js"),fr_FR:e("./languages/fr_FR.js"),ko_KR:e("./languages/ko_KR.js"),mk_MK:e("./languages/mk_MK.js"),pt_BR:e("./languages/pt_BR.js"),pt_PT:e("./languages/pt_PT.js"),ru_RU:e("./languages/ru_RU.js"),zh_CN:e("./languages/zh_CN.js")}},{"./languages/en_US.coffee":69,"./languages/es_ES.js":70,"./languages/fr_FR.js":71,"./languages/ko_KR.js":72,"./languages/mk_MK.js":73,"./languages/pt_BR.js":74,"./languages/pt_PT.js":75,"./languages/ru_RU.js":76,"./languages/zh_CN.js":77}],79:[function(e,t,n){var r,i,a,o,s,l,u,c,d;i=e("../../util/copy.coffee"),s=e("../console/print.coffee"),l=e("./process/detect.coffee"),u=e("./set.coffee"),c=e("../../string/format.js"),d=e("../../object/validate.coffee"),t.exports=function(e,t){var n,r,s;s=[];for(n in t)r=t[n],e[n]=i(r),e[n].initialized=o(e,e[n],n),s.push(e.self[n]=a(e,n));return s},o=function(e,t,n,r){var i,a,u,f,h;t.previous=!1,t.changed=!1,t.initialized=!1,t.callback=!1,"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=l(e,t,t.value));for(h in t)if("deprecates"===h)for(a=t[h]instanceof Array?t[h]:[t[h]],u=0,f=a.length;f>u;u++)i=a[u],e.self[i]=function(t,n){return function(i){var a,o,l;return l=e.format.locale.value.dev.deprecated,t="."+t+"()",o=r?'"'+n+'" in .'+r+"()":"."+n+"()",a=r||n,s.error(c(l,t,o),a),e.self}}(i,n);else"global"===h?n in e||(e[n]=[]):"value"!==h&&d(t[h])&&o(e,t[h],h,n);return!0},a=function(e,t){return function(n,i){var a,o,l,u,f,h,p,g;if(a="accepted"in e[t]?e[t].accepted:null,"function"==typeof a&&(a=a(e)),a instanceof Array||(a=[a]),n===Object)return e[t];if(!arguments.length&&a.indexOf(void 0)<0)return"value"in e[t]?e[t].value:e[t];if("style"===t&&"object"==typeof n){g=e.format.locale.value.dev.oldStyle;for(h in n)s.warning(c(g,'"'+h+'"',h),h),e.self[h](n[h])}if("font"===t){"string"==typeof n&&(n={family:n}),p=!0,l=function(e,t,n,r){d(e[n])&&t in e[n]&&(d(e[n][t])?e[n][t].process?e[n][t].value=e[n][t].process(r):e[n][t].value=r:e[n][t]=r)},o=function(e,t,n){var r;if(d(e)){if(p)for(r in e)l(e,t,r,n);else"font"in e&&l(e,t,"font",n);p=!1;for(r in e)o(e[r],t,n)}};for(u in n)f=n[u],"secondary"!==u&&(d(f)&&(f=f.value),f&&o(e,u,f))}return r(e,t,e,t,n),"function"==typeof i&&(e[t].callback=i),e[t].chainable===!1?e[t].value:e.self}},r=function(e,t,n,i,a){var o,s,l,c;if(["accepted","changed","initialized","previous","process"].indexOf(i)<0)if(c=d(a),l=d(n[i])&&"objectAccess"in n[i]&&n[i].objectAccess===!1,o=c&&(l||!("value"in a)&&(!d(n[i])||!(d3.keys(a)[0]in n[i]))),null===a||!c||o)u(e,t,n,i,a);else if(c)for(s in a)r(e,t,n[i],s,a[s])}},{"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../console/print.coffee":52,"./process/detect.coffee":87,"./set.coffee":93}],80:[function(e,t,n){t.exports=function(e){return e||(e=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:e,process:Array,value:[]}}},{}],81:[function(e,t,n){var r;r=e("../../../client/rtl.coffee"),t.exports=function(e){var t;return t=["left","center","right"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="left"),{accepted:t,process:function(e){return r?"left"===e?"right":"right"===e?"left":e:e},value:e}}},{"../../../client/rtl.coffee":40}],82:[function(e,t,n){t.exports=function(e){var t;return t=["line-through","none","overline","underline"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],83:[function(e,t,n){var r,i;i=e("../../../font/validate.coffee"),r=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"],t.exports=function(e){return void 0===e&&(e=r),{process:i,value:e}}},{"../../../font/validate.coffee":102}],84:[function(e,t,n){t.exports=function(e){var t;return t=["top","middle","bottom"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="bottom"),{accepted:t,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(e){return this.text=e,this.mapping[e]},value:e}}},{}],85:[function(e,t,n){t.exports=function(e){var t;return t=["capitalize","lowercase","none","uppercase"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],86:[function(e,t,n){t.exports=function(e,t,n){var r;return t.history&&t.history.reset(),e.constructor===String?e.indexOf("/")>=0?(n.url=e,[]):(r=d3.selectAll(e),r.size()?r:(e.indexOf(".")>=0&&(n.url=e),[])):e}},{}],87:[function(e,t,n){var r,i;r=e("../../../util/copy.coffee"),i=e("../../../array/update.coffee"),t.exports=function(e,t,n){return t.process===Array?i(r(t.value),n):"object"==typeof t.process&&"string"==typeof n?t.process[n]:"function"==typeof t.process?t.process(n,e,t):n}},{"../../../array/update.coffee":35,"../../../util/copy.coffee":206}],88:[function(e,t,n){var r;r=e("../../../client/css.coffee"),t.exports=function(e,t,n){return e===!1||e.indexOf("fa-")<0||0===e.indexOf("fa-")&&r("font-awesome")?e:n.fallback}},{"../../../client/css.coffee":36}],89:[function(e,t,n){t.exports=function(e,t){var n,r,i,a,o,s,l,u,c,d,f,h,p;if("string"==typeof e){for(e=e.split(" "),n=r=0,o=e.length;o>r;n=++r)p=e[n],e[n]=parseFloat(p,10);e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0}if(h=["top","right","bottom","left"],"number"==typeof e)for(i=0,s=h.length;s>i;i++)f=h[i],t[f]=e;else for(a=0,l=h.length;l>a;a++)f=h[a],t[f]=e[f];for(t.css="",d=[],n=c=0,u=h.length;u>c;n=++c)f=h[n],n&&(t.css+=" "),d.push(t.css+=t[f]+"px");return d}},{}],90:[function(e,t,n){var r,i,a,o;r=e("../../array/contains.coffee"),i=e("../../string/format.js"),a=e("../../string/list.coffee"),o=e("../console/print.coffee"),t.exports=function(e,t,n,s,l){var u,c,d,f,h,p,g,m;if("function"==typeof t&&(t=t(e)),t instanceof Array||(t=[t]),c=r(t,n),c===!1&&void 0!==n){for(p=[],m=JSON.stringify(n),"string"!=typeof n&&(m='"'+m+'"'),f=0,h=t.length;h>f;f++)u=t[f],"string"==typeof u?p.push('"'+u+'"'):"function"==typeof u?p.push(u.toString().split("()")[0].substring(9)):void 0===u?p.push("undefined"):p.push(JSON.stringify(u));p=a(p,e.format.locale.value.ui.or),e.type&&["mode","shape"].indexOf(s)>=0?(g=e.format.locale.value.error.accepted,d=e.format.locale.value.visualization[e.type.value]||e.type.value,o.warning(i(g,m,s,d,p),s)):(g=e.format.locale.value.dev.accepted,o.warning(i(g,m,l,p),s))}return!c}},{"../../array/contains.coffee":33,"../../string/format.js":172,"../../string/list.coffee":173,"../console/print.coffee":52}],91:[function(e,t,n){t.exports=function(e){var t;return t=["auto","optimizeSpeed","crispEdges","geometricPrecision"],t.indexOf(e)>=0||(e="crispEdges"),{accepted:t,value:e}}},{}],92:[function(e,t,n){var r,i;i=e("../../object/validate.coffee"),r=function(e,t){var n;e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1);for(n in e)n.indexOf("d3plus")<0&&i(e[n])&&r(e[n],n)},t.exports=r},{"../../object/validate.coffee":171}],93:[function(e,t,n){var r,i,a,o,s,l,u,c,d;r=e("../../util/copy.coffee"),i=e("../../util/d3selection.coffee"),d=e("../../object/validate.coffee"),a=e("../../object/merge.coffee"),o=e("../console/print.coffee"),s=e("./process/detect.coffee"),l=e("./rejected.coffee"),u=e("../../string/format.js"),c=e("../../array/update.coffee"),t.exports=function(e,t,n,f,h){var p,g,m,v,y,x,b,w,I,A,C,_,k,M;if(_="value"!==f&&f&&f!==t?'"'+f+'" '+e.format.locale.value.dev.of+" ."+t+"()":"."+t+"()",p="value"===f&&"accepted"in n?n.accepted:d(n[f])&&"accepted"in n[f]?n[f].accepted:[h],!l(e,p,h,t,_)){if(d(n[f])&&"value"in n[f]&&(A=f,n=n[f],f="value"),"value"===f&&"process"in n&&(h=s(e,n,h)),n[f]instanceof Array||n[f]!==h||void 0===h){if(n.changed=!0,n.loaded&&(n.loaded=!1),"history"in e&&"draw"!==t&&(g=r(n),g.method=t,e.history.chain.push(g)),n.previous=n[f],"id"in e&&"value"===f&&"nesting"in n)if("id"!==t){if("object"!=typeof n.nesting&&(n.nesting={}),d(h)){for(x in h)"string"==typeof h[x]&&(h[x]=[h[x]]);n.nesting=a(n.nesting,h),e.id.value in n.nesting||(n.nesting[e.id.value]=h[d3.keys(h)[0]])}else h instanceof Array?n.nesting[e.id.value]=h:n.nesting[e.id.value]=[h];n[f]=n.nesting[e.id.value][0]}else h instanceof Array?(n.nesting=h,"depth"in e&&e.depth.value<h.length?n[f]=h[e.depth.value]:(n[f]=h[0],"depth"in e&&(e.depth.value=0))):(n[f]=h,n.nesting=[h],"depth"in e&&(e.depth.value=0));else"depth"===t?(h>=e.id.nesting.length?e.depth.value=e.id.nesting.length-1:0>h?e.depth.value=0:e.depth.value=h,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting&&(I=e.text.nesting[e.id.value],I&&(e.text.nesting[e.id.value]="string"==typeof I?[I]:I,e.text.value=I instanceof Array?I[0]:I))):d(n[f])&&d(h)?n[f]=a(n[f],h):n[f]=h;"value"===f&&n.global&&(y=n[f].length>0,b=A||f,b in e&&(y&&e.data[b].indexOf(t)<0||!y&&e.data[b].indexOf(t)>=0)&&(e.data[b]=c(e.data[b],t))),"value"===f&&n.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),e.dev.value&&n.changed&&void 0!==n[f]&&(w=n[f]instanceof Array&&n[f].length>10,v=i(n[f]),k="function"==typeof n[f],M=w||v||k?null:"string"==typeof n[f]?n[f]:JSON.stringify(n[f]),null!==M&&M.length<260?(C=e.format.locale.value.dev.setLong,o.log(u(C,_,'"'+M+'"'))):(C=e.format.locale.value.dev.set,o.log(u(C,_))))}else C=e.format.locale.value.dev.noChange,e.dev.value&&o.comment(u(C,_));"value"===f&&n.callback&&!n.url&&(m="function"==typeof n.callback?n.callback:n.callback.value,m&&m(h,e.self))}}},{"../../array/update.coffee":35,"../../object/merge.coffee":170,"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../../util/d3selection.coffee":207,"../console/print.coffee":52,"./process/detect.coffee":87,"./rejected.coffee":90}],94:[function(e,t,n){var r=e("../console/print.coffee"),i=e("../../string/format.js");t.exports=function(e){if(e.dev.value){var t="analyzing edges list";r.time(t)}var n=e.types[e.type.value].requirements;n instanceof Array||(n=[n]);var a=n.indexOf("nodes")>=0&&!e.nodes.value;if(a){e.nodes.value=[];var o=[];e.nodes.changed=!0}e.edges.value.forEach(function(t){["source","target"].forEach(function(n){var r=typeof t[e.edges[n]];if("object"!==r)if("number"!==r||a||"number"===e.data.keys[e.id.value])if(a&&o.indexOf(t[e.edges[n]])>=0)t[e.edges[n]]=e.nodes.value.filter(function(r){return r[e.id.value]===t[e.edges[n]]})[0];else{var i={};i[e.id.value]=t[e.edges[n]],t[e.edges[n]]=i}else t[e.edges[n]]=e.nodes.value[t[e.edges[n]]];var s=t[e.edges[n]];a&&o.indexOf(s[e.id.value])<0&&(o.push(s[e.id.value]),e.nodes.value.push(s))}),"keys"in e.data||(e.data.keys={}),e.id.value in e.data.keys||(e.data.keys[e.id.value]=typeof t[e.edges.source][e.id.value])}),e.edges.value=e.edges.value.filter(function(t){var n=t[e.edges.source][e.id.value],a=t[e.edges.target][e.id.value];if(n===a){var o=e.format.locale.value.dev.sameEdge;return r.warning(i(o,'"'+n+'"'),"edges"),!1}return!0}),e.edges.linked=!0,e.dev.value&&r.timeEnd(t)}},{"../../string/format.js":172,"../console/print.coffee":52}],95:[function(e,t,n){var r=e("./hideElement.js");t.exports=function(e){function t(e,t){[].forEach.call(t.attributes,function(t){if(/^data-/.test(t.name)){var n=t.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});e[n]=t.value}}),n.forEach(function(n){null!==t.getAttribute(n)&&(e[n]=t.getAttribute(n))})}var n=[e.color.value,e.icon.value,e.keywords.value,e.alt.value,"style"];e.text.value||e.self.text("text"),n=n.concat(e.id.nesting),e.self.data({element:e.data.value});var i=e.data.element.value.node().tagName.toLowerCase(),a=e.data.element.value.attr("type"),o=[];if("select"===i){var s=e.data.element.value.node().id;s&&e.self.container({id:s}),e.data.element.value.selectAll("option").each(function(n,r){var i={};if(i.text=d3.select(this).text(),t(i,this),o.push(i),this.selected)for(var r=e.id.nesting.length-1;r>=0;r--){var a=e.id.nesting[r];if(a in i){e.self.focus(i[a]);break}}})}else if("input"===i&&"radio"===a){var l=e.data.element.value.node().getAttribute("name");l&&e.self.container({id:l}),e.data.element.value.each(function(n,i){var a={};t(a,this);var s=a[e.id.value]||this.id||!1;if(s&&isNaN(parseFloat(s))){var l=d3.select("label[for="+s+"]");l.empty()||(a.text=l.html(),l.call(r))}o.push(a),this.checked&&e.self.focus(a[e.id.value])})}!e.focus.value.length&&o.length&&(e.data.element.value.node().selectedIndex=0,e.self.focus(o[0][e.id.value]));var u=d3.select("legend[for="+e.container.id+"]");u.empty()||(e.self.title(u.html()),u.call(r));var c=e.container.value?e.container.value.node().tagName.toLowerCase():!1;return(e.container.value===!1||"body"===c)&&(e.container.value=d3.select(e.data.element.value.node().parentNode)),e.data.element.value.call(r),o}},{"./hideElement.js":96}],96:[function(e,t,n){t.exports=function(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],97:[function(e,t,n){var r=e("../console/print.coffee");t.exports=function(e){if("network"===e.type.value){if(e.dev.value){var t="analyzing node positions";r.time(t)}var n=e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length;if(n===e.nodes.value.length)e.nodes.positions=!0;else{var i=d3.layout.force().size([e.width.viz,e.height.viz]).nodes(e.nodes.value).links(e.edges.value),a=e.edges.strength.value;a&&("string"==typeof a?i.linkStrength(function(e){return e[a]}):i.linkStrength(a));var o=50,s=.01;i.start();for(var l=o;l>0&&(i.tick(),!(i.alpha()<s));--l);i.stop(),e.nodes.positions=!0}e.dev.value&&r.timeEnd(t)}}},{"../console/print.coffee":52}],98:[function(e,t,n){var r;r=e("numeric"),t.exports=function(e,t){var n,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M;for(null==t&&(t={}),null==t.maxDegree&&(t.maxDegree=5),n=e.length,x=Number.MAX_VALUE,s=null,a=function(){var n,r,i;for(i=[],c=n=1,r=t.maxDegree+1;r>=1?r>n:n>r;c=r>=1?++n:--n)i.push(function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)y=e[n],r.push(Math.pow(y[0],c));return r}());return i}(),k=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)y=e[t],r.push(y[1]);return r}(),f=g=0,w=1<<t.maxDegree;w>=0?w>g:g>w;f=w>=0?++g:--g){for(o=[function(){var e,t,r;for(r=[],b=e=0,t=n;t>=0?t>e:e>t;b=t>=0?++e:--e)r.push(1);return r}()],d=[0],h=v=0,I=t.maxDegree;I>=0?I>v:v>I;h=I>=0?++v:--v)(f&1<<h)>0&&(o.push(a[h]),d.push(h+1));i=r.transpose(o),p=d.length,l=r.dot(r.dot(r.inv(r.dot(o,i)),o),k),M=r.dot(i,l),A=r.sub(k,M),_=r.dot(A,A),C=_/(n-p),m=-.5*n*Math.log(2*Math.PI)-.5*n*Math.log(C)-_/(2*C),u=-2*m+p*(Math.log(n)-Math.log(2*Math.PI)),x>u&&(x=u,s=[d,l,M])}return s}},{numeric:7}],99:[function(e,t,n){var r;r=e("static-kdtree"),t.exports=function(e,t){var n,i,a,o,s,l,u,c,d,f,h,p;return null==t&&(t=10),p=r(e),u=function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)c=e[n],i.push(p.knn(c,t+1).slice(1));return i}(),h=function(t,n){var r,i,a,o,s,l;for(r=e[t],i=e[n],o=0,t=s=0,l=r.length;l>=0?l>s:s>l;t=l>=0?++s:--s)a=r[t]-i[t],o+=a*a;return o},o=function(){var n,r,a;for(a=[],i=n=0,r=e.length;r>=0?r>n:n>r;i=r>=0?++n:--n)a.push(h(i,u[i][t-1]));return a}(),d=function(e,t){return Math.max(h(e,t),o[t])},s=function(e){var n,r,i,a,o;for(a=0,o=u[e],r=0,i=o.length;i>r;r++)n=o[r],a+=d(e,n);return t/a},l=function(){var t,n,r;for(r=[],i=t=0,n=e.length;n>=0?n>t:t>n;i=n>=0?++t:--t)r.push(s(i));return r}(),f=function(){var r,o,s,c,d,f;for(f=[],i=r=0,c=e.length;c>=0?c>r:r>c;i=c>=0?++r:--r){for(n=0,d=u[i],o=0,s=d.length;s>o;o++)a=d[o],n+=l[a];n/=t,f.push([i,n/l[i]])}return f}(),f.sort(function(e,t){return t[1]-e[1]})}},{"static-kdtree":9}],100:[function(e,t,n){t.exports=function(e){var t,n,r;return n=d3.median(e),t=d3.median(e.map(function(e){return Math.abs(e-n)})),r=e.map(function(e,r){return[r,Math.abs(e-n)/t]}),r.sort(function(e,t){return t[1]-e[1]})}},{}],101:[function(e,t,n){var r;r=e("../core/font/tester.coffee"),t.exports=function(e,t,n){var i,a,o,s,l,u,c;return n||(n={}),t=t||{},u=n.parent||r("svg").append("text"),s=[],e instanceof Array||(e=[e]),c=u.selectAll("tspan").data(e),i={left:"0px",position:"absolute",top:"0px",x:0,y:0},l=0,"letter-spacing"in t&&(l=parseFloat(t["letter-spacing"]),delete t["letter-spacing"]),o=function(e){var t;return t=0,l&&(t=(d3.select(e).text().length-1)*l),e.getComputedTextLength()+t},a=function(e){return e.parentNode.getBBox().height||e.getBoundingClientRect().height},c.enter().append("tspan").text(String).style(t).attr(i).each(function(e){return"function"==typeof n.mod?n.mod(this):void 0}).each(function(e){var t,n,r;return t=d3.select(this).selectAll("tspan"),t.size()?(r=[],t.each(function(){return r.push(o(this))}),r=d3.max(r)):r=o(this),n=a(this),s.push({height:n,text:e,width:r})}),c.remove(),n.parent||u.remove(),s}},{"../core/font/tester.coffee":68}],102:[function(e,t,n){var r,i;r=e("../core/font/tester.coffee"),i=function(e){var t,n,a,o,s,l,u,c,d,f,h,p,g,m;for(e instanceof Array||(e=e.split(",")),s=0,u=e.length;u>s;s++)a=e[s],a.trim();if(o=e.join(", "),t=i.complete,o in t)return t[o];for(h=function(e){return g.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},p=function(e,t){var n,r,i;return n=h(e),r=n.node().offsetWidth,i=t.node().offsetWidth,n.remove(),r!==i},g=r("div"),d=h("monospace"),f=h("sans-serif"),l=0,c=e.length;c>l;l++)if(n=e[l],m=p(n+",monospace",d),m||(m=p(n+",sans-serif",f)),m){m=n;break}return m||(m="sans-serif"),d.remove(),f.remove(),t[o]=m,m},i.complete={},t.exports=i},{"../core/font/tester.coffee":68}],103:[function(e,t,n){var r=e("../array/sort.coffee"),i=e("../core/methods/attach.coffee"),a=e("../core/data/format.js"),o=e("../core/data/keys.coffee"),s=e("../core/data/load.coffee"),l=e("../core/fetch/data.js"),u=e("../client/ie.js"),c=e("../core/methods/reset.coffee"),d=e("../core/console/print.coffee");t.exports=function(){var t={types:{auto:e("./types/auto.js"),button:e("./types/button/button.coffee"),drop:e("./types/drop/drop.coffee"),toggle:e("./types/toggle.js")}};return t.self=function(e){var n=t.data.value instanceof Array&&t.data.value.length>t.data.large;if(t.draw.timing=t.draw.first||n||u?0:t.timing.ui,t.data.value instanceof Array){if(t.dev.value&&d.group('drawing "'+t.type.value+'"'),t.data.changed&&(t.data.cache={},o(t,"data"),a(t)),t.data.viz=l(t),t.data.sort.value&&(t.data.changed||t.order.changed||t.order.sort.changed)&&r(t.data.viz,t.order.value||t.text.value,t.order.sort.value,t.color.value,t),t.focus.value===!1&&["auto","button"].indexOf(t.type.value)<0){var i=t.data.element.value;if(i&&"select"===i.node().tagName.toLowerCase()){var f=i.property("selectedIndex");f=0>f?0:f;var h=i.selectAll("option")[0][f],p=h.getAttribute("data-"+t.id.value)||h.getAttribute(t.id.value);p&&(t.focus.value=p)}t.focus.value===!1&&t.data.viz.length&&(t.focus.value=t.data.viz[0][t.id.value]),t.dev.value&&t.focus.value!==!1&&d.log('"value" set to "'+t.focus.value+'"')}var g=function(e,n){n="number"!=typeof n?1===t.id.nesting.length?0:t.id.nesting.length-1:n;var r=t.id.nesting[n];return n>0&&(!(r in e)||e[r]instanceof Array)?g(e,n-1):r};if(t.data.changed){"auto"===t.search.value?t.data.viz.length>10?(t.search.enabled=!0,t.dev.value&&d.log("Search enabled.")):(t.search.enabled=!1,t.dev.value&&d.log("Search disabled.")):t.search.enabled=t.search.value;var m=t.data.element.value?t.data.element.value.node().tagName.toLowerCase():"";if(t.data.element.value&&"select"===m){var v=[];for(var y in t.data.nested.all)v=v.concat(t.data.nested.all[y]);options=t.data.element.value.selectAll("option").data(v,function(e){var t=e?g(e):!1;return e&&t in e?e[t]:!1}),options.exit().remove(),options.enter().append("option"),options.each(function(e){var n=g(e),r=n===t.id.value?t.text.value||t.id.value:t.text.nesting!==!0&&n in t.text.nesting?t.text.nesting[n]:n;for(var i in e)"object"!=typeof e[i]&&(i===r&&d3.select(this).html(e[i]),["alt","value"].indexOf(i)>=0?d3.select(this).attr(i,e[i]):d3.select(this).attr("data-"+i,e[i]));e[n]===t.focus.value?this.selected=!0:this.selected=!1})}}else if(t.focus.changed&&t.data.element.value){var x=t.data.element.value.node().tagName.toLowerCase();if("select"===x)t.data.element.value.selectAll("option").each(function(e){e[g(e)]===t.focus.value?this.selected=!0:this.selected=!1});else{var x=t.data.element.value.attr("type").toLowerCase();"radio"===x&&t.data.element.value.each(function(e){this.value===t.focus.value?this.checked=!0:this.checked=!1})}}if("auto"!==t.type.value){if(!t.container.ui){t.container.ui=t.container.value.selectAll("div#d3plus_"+t.type.value+"_"+t.container.id).data(["container"]);
var b=t.data.element.value?t.data.element.value[0][0]:null;if(b)if(b.id)b="#"+b.id;else{var w=b.getAttribute(t.id.value)?t.id.value:"data-"+t.id.value;b=b.getAttribute(w)?"["+w+"="+b.getAttribute(w)+"]":null}t.container.ui.enter().insert("div",b).attr("id","d3plus_"+t.type.value+"_"+t.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}t.container.ui.style("display",t.ui.display.value),t.container.ui.transition().duration(t.draw.timing).style("margin",t.ui.margin.css);var I=t.container.ui.selectAll("div.d3plus_title").data(t.title.value?[t.title.value]:[]);I.enter().insert("div","#d3plus_"+t.type.value+"_"+t.container.id).attr("class","d3plus_title").style("display","inline-block"),I.style("color",t.font.color).style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("padding",t.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",t.ui.border+"px").text(String).each(function(e){t.margin.left=this.offsetWidth})}if(t.data.value.length){var A=t.format.locale.value.visualization[t.type.value];t.dev.value&&d.time("drawing "+A),t.types[t.type.value](t),t.dev.value&&d.timeEnd("drawing "+A)}else!t.data.url||t.data.loaded&&!t.data.stream||s(t,"data",t.self.draw);t.dev.value&&d.timeEnd("total draw time"),c(t)}},i(t,{active:e("./methods/active.coffee"),alt:e("./methods/alt.coffee"),color:e("./methods/color.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),data:e("./methods/data.js"),depth:e("./methods/depth.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),hover:e("./methods/hover.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),keywords:e("./methods/keywords.coffee"),margin:e("./methods/margin.coffee"),open:e("./methods/open.coffee"),order:e("./methods/order.coffee"),remove:e("./methods/remove.coffee"),search:e("./methods/search.coffee"),select:e("./methods/select.coffee"),selectAll:e("./methods/selectAll.coffee"),text:e("./methods/text.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee")}),t.self}},{"../array/sort.coffee":34,"../client/ie.js":37,"../core/console/print.coffee":52,"../core/data/format.js":56,"../core/data/keys.coffee":58,"../core/data/load.coffee":59,"../core/fetch/data.js":64,"../core/methods/attach.coffee":79,"../core/methods/reset.coffee":92,"./methods/active.coffee":104,"./methods/alt.coffee":105,"./methods/color.coffee":106,"./methods/config.coffee":107,"./methods/container.coffee":108,"./methods/data.js":109,"./methods/depth.coffee":110,"./methods/dev.coffee":111,"./methods/draw.js":112,"./methods/focus.coffee":113,"./methods/font.coffee":114,"./methods/format.coffee":115,"./methods/height.coffee":116,"./methods/history.coffee":117,"./methods/hover.coffee":118,"./methods/icon.coffee":119,"./methods/id.coffee":120,"./methods/keywords.coffee":121,"./methods/margin.coffee":122,"./methods/open.coffee":123,"./methods/order.coffee":124,"./methods/remove.coffee":125,"./methods/search.coffee":126,"./methods/select.coffee":127,"./methods/selectAll.coffee":128,"./methods/text.coffee":129,"./methods/timing.coffee":130,"./methods/title.coffee":131,"./methods/type.coffee":132,"./methods/ui.coffee":133,"./methods/width.coffee":134,"./types/auto.js":135,"./types/button/button.coffee":136,"./types/drop/drop.coffee":141,"./types/toggle.js":158}],104:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":80}],105:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"alt"}},{"../../core/methods/filter.coffee":80}],106:[function(e,t,n){t.exports={accepted:[String],value:"color"}},{}],107:[function(e,t,n){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}},{}],108:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e===!1?d3.select("body"):r(e)?e:e instanceof Array?d3.select(e[0][0]):d3.select(e)},value:d3.select("body")}},{"../../util/d3selection.coffee":207}],109:[function(e,t,n){var r=e("../../util/d3selection.coffee"),i=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(e,t){var n=!1;return r(e)?n=e:"string"!=typeof e||d3.select(e).empty()||(n=d3.select(e)),n&&t.self.container(d3.select(n.node().parentNode)),n},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),i(e,t,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":86,"../../util/d3selection.coffee":207}],110:[function(e,t,n){t.exports={accepted:[Number],value:0}},{}],111:[function(e,t,n){t.exports={accepted:[Boolean],value:!1}},{}],112:[function(e,t,n){var r=e("../../util/d3selection.coffee"),i=e("../../core/parse/hideElement.js"),a=e("../../core/parse/element.js"),o=e("../../core/console/print.coffee"),s=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(!t.data.value||t.data.value instanceof Array&&!r(t.data.value)?t.data.element.value&&t.data.element.value.call(i):t.data.value=a(t),void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;o.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;o.warning(s(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&o.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var l={};changes.forEach(function(e){var t=e.method;delete e.method,l[t]=e}),e(l),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":52,"../../core/parse/element.js":95,"../../core/parse/hideElement.js":96,"../../string/format.js":172,"../../util/d3selection.coffee":207}],113:[function(e,t,n){t.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(e,t){var n,r,i,a,o,s,l,u,c,d;if(r=t.data.element.value,r&&["string","number"].indexOf(typeof e)>=0)if(i=r.node().tagName.toLowerCase(),a=r.attr("type"),"select"===i)for(d=r.selectAll("option"),o=s=0,u=d.length;u>s;o=++s)n=d[o],n&&n[t.id.value]===e&&(r.node().selectedIndex=o);else if("input"===i&&"radio"===a)for(l=0,c=r.length;c>l;l++)n=r[l],this.checked=n&&n[t.id.value]===e;return e},value:!1}},{}],114:[function(e,t,n){var r,i,a,o;a=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:i(),family:a(),secondary:{align:r(),color:"#444444",decoration:i(),family:a(),size:12,spacing:0,transform:o(),weight:200},size:12,spacing:0,transform:o(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],115:[function(e,t,n){var r,i,a,o;r=e("../../number/format.coffee"),i=e("../../core/locale/locale.coffee"),a=e("../../object/merge.coffee"),o=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(i)},process:function(e){var t,n;return t="en_US",n=i[t],e!==t&&(n=a(n,i[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,i,a;return t||(t={}),a=t.vars||{},a.time&&a.time.value&&t.key===a.time.value?(i=e.constructor===Date?e:new Date(e),a.data.time.format(i)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||o)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],116:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],117:[function(e,t,n){t.exports={back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[]}},{}],118:[function(e,t,n){t.exports={accepted:[Boolean,Number,String],value:!1}},{}],119:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:r,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:r,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":88}],120:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,mute:r(!0),nesting:["value"],solo:r(!0),value:"value"}},{"../../core/methods/filter.coffee":80}],121:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"keywords"}},{"../../core/methods/filter.coffee":80}],122:[function(e,t,n){var r;r=e("../../core/methods/process/margin.coffee"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,r(e,this),t},value:0}},{"../../core/methods/process/margin.coffee":89}],123:[function(e,t,n){t.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],124:[function(e,t,n){t.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],125:[function(e,t,n){t.exports={accepted:void 0,process:function(e,t){this.initialized&&t.container.value.remove()},value:void 0}},{}],126:[function(e,t,n){t.exports={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},term:"",value:"auto"}},{}],127:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.select(e):e},value:void 0}},{}],128:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.selectAll(e):e},value:void 0}},{}],129:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,String],nesting:!0,mute:r(!0),solo:r(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],130:[function(e,t,n){t.exports={mouseevents:60,ui:200}},{}],131:[function(e,t,n){var r,i,a,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),a=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:i(),size:16,transform:o(),weight:400},link:!1,process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=a(e).toLowerCase(),t.self.container({id:n})),e},value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],132:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},value:"auto"}},{}],133:[function(e,t,n){var r,i,a,o,s;a=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/process/margin.coffee"),s=e("../../core/methods/font/transform.coffee"),t.exports={align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:r("center"),color:"#444",decoration:i(),family:a(),size:11,transform:s(),weight:200},margin:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,o(e,this),t},value:5},padding:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,o(e,this),t},value:5}}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../core/methods/process/margin.coffee":89}],134:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],135:[function(e,t,n){t.exports=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():5>t?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],136:[function(e,t,n){t.exports=function(t){var n,r,i,a,o,s,l,u;return s=e("../../../core/console/print.coffee"),i=e("./functions/color.coffee"),a=e("./functions/icons.js"),o=e("./functions/mouseevents.coffee"),l=e("./functions/style.js"),n=t.container.ui.selectAll("div.d3plus_node").data(t.data.viz,function(e){return e[t.id.value]}),t.dev.value&&s.time("enter"),n.enter().append("div").attr("class","d3plus_node").call(i,t).call(l,t).call(a,t).call(o,t),t.dev.value&&s.timeEnd("enter"),t.draw.update||t.draw.timing?(t.dev.value&&s.time("ordering"),n.order(),t.dev.value&&s.timeEnd("ordering"),u=n):(r=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(e){return e}),u=n.filter(function(e){return r.indexOf(e[t.id.value])>=0})),t.dev.value&&s.time("update"),u.classed("d3plus_button_active",function(e){return t.focus.value===e[t.id.value]}),t.draw.timing?u.transition().duration(t.draw.timing).call(i,t).call(l,t):u.call(i,t).call(l,t),u.call(a,t).call(o,t),t.dev.value&&s.timeEnd("update"),n.exit().remove()}},{"../../../core/console/print.coffee":52,"./functions/color.coffee":137,"./functions/icons.js":138,"./functions/mouseevents.coffee":139,"./functions/style.js":140}],137:[function(e,t,n){t.exports=function(t,n){var r,i,a;return r=e("../../../../color/legible.coffee"),i=e("../../../../color/lighter.coffee"),a=e("../../../../color/text.coffee"),t.style("background-color",function(e){var t;return t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).toString()),t}).style("color",function(e){var t,i,o,s;return s=n.focus.value===e[n.id.value]?.75:1,o=e[n.icon.value]&&n.data.viz.length<n.data.large,!o&&e[n.color.value]?i=r(e[n.color.value]):(t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).toString()),i=a(t)),i=d3.rgb(i),"rgba("+i.r+","+i.g+","+i.b+","+s+")"}).style("border-color",n.ui.color.secondary.value)}},{"../../../../color/legible.coffee":44,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50}],138:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),i=e("../../../../client/rtl.coffee");t.exports=function(e,t){var n="right"===t.font.align.value&&!i||i&&"right"===t.font.align.value;e.each(function(e,a){var o=["label"];e[t.icon.value]&&t.data.viz.length<=t.data.large&&o.push("icon");var s=t.icon.button.value;e[t.id.value]===t.focus.value&&t.icon.select.value?(s=t.icon.select.value,o.push("selected")):s&&e.d3plus.icon!==!1&&o.push("selected");var l=0,u=d3.select(this).selectAll("div.d3plus_button_element").data(o,function(e){return e});u.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),u.order().attr("class",function(e){var t="";return"selected"===e&&0===s.indexOf("fa-")&&(t=" fa "+s),"d3plus_button_element d3plus_button_"+e+t}).html(function(n){if("label"===n){var r=t.text.value&&t.text.value in e&&!(e[t.text.value]instanceof Array)?t.text.value:t.id.value;return t.format.value(e[r])}return"selected"===n&&s.indexOf("fa-")<0?s:""}).style("background-image",function(n){return"icon"===n?"url('"+e[t.icon.value]+"')":"none"}).style("background-color",function(n){return"icon"===n&&"knockout"===e.style?e[t.color.value]||t.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?t.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(l=t.height.value?t.height.value-(t.ui.padding.top+t.ui.padding.bottom)-2*t.ui.border:t.font.size+t.ui.border,l+"px")}).style("height",function(e){return"icon"===e?l+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var n=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===e)var n=t.font.size;else var n=l;return-n/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!n||"selected"===e&&n?t.ui.padding.left+"px":"auto"}).style("right",function(e){return"icon"===e&&n||"selected"===e&&!n?t.ui.padding.right+"px":"auto"}).style(r()+"transition",function(e){return"selected"===e?t.draw.timing/1e3+"s":"none"}).style(r()+"transform",function(e){var n="selected"===e?t.icon.select.rotate:"none";return"string"==typeof n?n:"rotate("+n+"deg)"}).style("opacity",function(e){return"selected"===e?t.icon.select.opacity:1}),u.exit().remove();var c=d3.select(this).selectAll(".d3plus_button_label");if(l>0){var d=t.ui.padding;d=3===o.length?d.top+"px "+(2*d.right+l)+"px "+d.bottom+"px "+(2*d.left+l)+"px":o.indexOf("icon")>=0&&!i||o.indexOf("selected")>=0&&i?d.top+"px "+d.right+"px "+d.bottom+"px "+(2*d.left+l)+"px":d.top+"px "+(2*d.right+l)+"px "+d.bottom+"px "+d.left+"px",c.style("padding",d)}else c.style("padding",t.ui.padding.css);if("number"==typeof t.width.value){var f=t.width.value;f-=parseFloat(c.style("padding-left"),10),f-=parseFloat(c.style("padding-right"),10),f-=2*t.ui.border,f+="px"}else var f="auto";c.style("width",f)})}},{"../../../../client/prefix.coffee":39,"../../../../client/rtl.coffee":40}],139:[function(e,t,n){t.exports=function(t,n,r){var i,a;return r=e("./color.coffee"),i=e("../../../../client/pointer.coffee"),a=e("../../../../client/ie.js"),t.on(i.over,function(e,t){return n.self.hover(e[n.id.value]),a||!n.draw.timing?d3.select(this).style("cursor","pointer").call(r,n):d3.select(this).style("cursor","pointer").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.out,function(e){return n.self.hover(!1),a||!n.draw.timing?d3.select(this).style("cursor","auto").call(r,n):d3.select(this).style("cursor","auto").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.click,function(e){return n.focus.value!==!1?n.self.focus(e[n.id.value]).draw():n.focus.callback?n.focus.callback(e,n.self):void 0})}},{"../../../../client/ie.js":37,"../../../../client/pointer.coffee":38,"./color.coffee":137}],140:[function(e,t,n){t.exports=function(e,t){e.style("position","relative").style("margin",t.ui.margin.css).style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],141:[function(e,t,n){t.exports=function(t){var n,r,i,a,o,s,l,u,c,d,f;return i=e("./functions/element.coffee"),a=e("./functions/keyboard.coffee"),f=e("./functions/window.js"),d=e("./functions/width.js"),n=e("./functions/button.js"),l=e("./functions/selector.js"),u=e("./functions/title.js"),s=e("./functions/search.js"),o=e("./functions/list.js"),r=e("./functions/data.js"),c=e("./functions/update.js"),t.margin.top=0,t.margin.title=0,i(t),a(t),f(t),d(t),n(t),l(t),u(t),s(t),o(t),r(t),c(t)}},{"./functions/button.js":144,"./functions/data.js":145,"./functions/element.coffee":146,"./functions/keyboard.coffee":149,"./functions/list.js":150,"./functions/search.js":152,"./functions/selector.js":153,"./functions/title.js":154,"./functions/update.js":155,"./functions/width.js":156,"./functions/window.js":157}],142:[function(e,t,n){t.exports=function(e,t,n){var r=[],n=n||e.active.value;if(n instanceof Array)for(var i=0;i<n.length;i++)r.push(this(e,t,n[i]));else{var a=typeof n;"number"===a?r.push(e.depth.value===n):"function"===a?r.push(n(t)):r.push(t===n)}return r.indexOf(!0)>=0}},{}],143:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var n=180+t;else var n=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:n}}).draw(),e.dev.value&&r.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":52}],144:[function(e,t,n){var r=e("../../../../util/copy.coffee"),i=e("../../../../client/pointer.coffee"),a=e("../../../form.js"),o=e("../../../../core/console/print.coffee");t.exports=function(e){if("button"in e.container||(e.dev.value&&o.time("creating main button"),e.container.button=a().container(e.container.ui).type("button").ui({margin:0}),e.dev.value&&o.timeEnd("creating main button")),e.focus.changed||e.data.changed||e.depth.changed){var t=e.depth.value,n=r(e.data.value.filter(function(n){for(var r=!1,i=0;i<e.id.nesting.length;i++){var a=e.id.nesting[i];if(r=a in n&&n[a]===e.focus.value){t=i;break}}return r})[0]);n||(n=e.container.button.data()[0]||e.data.viz[0]),e.container.button.data([n]).id(e.id.nesting).depth(t)}var s=e.hover.value===!0?e.focus.value:!1;e.container.button.draw({update:e.draw.update}).focus("").font(e.font).format(e.format).hover(s).icon({button:e.icon.drop.value,select:e.icon.drop.value,value:e.icon.value}).text(e.text.value).timing({ui:e.draw.timing}).ui({border:e.ui.border,color:e.ui.color,padding:e.ui.padding.css}).width(e.width.value).draw();var l=e.container.button.container(Object).ui;e.margin.top+=l.node().offsetHeight||l.node().getBoundingClientRect().height,l.on(i.click,function(){e.self.open(!e.open.value).draw()})}},{"../../../../client/pointer.coffee":38,"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103}],145:[function(e,t,n){var r=e("../../../../string/format.js"),i=e("../../../../string/strip.js");t.exports=function(e){if(e.data.url&&!e.data.loaded){var t={};t[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[t],e.data.changed="loading"!==e.data.lastFilter,e.data.lastFilter="loading"}else if(e.open.value)if(e.search.term){var n=i(e.search.term).split("_"),a=[e.id.value,e.text.value,e.alt.value,e.keywords.value];a=a.filter(function(e){return e}),n=n.filter(function(e){return""!==e});var o=[],s=[],l=[],u=[];if(e.id.nesting.forEach(function(t){u=u.concat(e.data.nested.all[t])}),u.forEach(function(t){var r=!1;a.forEach(function(a){if(!r&&a in t&&"string"==typeof t[a]){var u=t[a].toLowerCase();if([e.text.value,e.id.value].indexOf(a)>=0&&0===u.indexOf(e.search.term))o.push(t),r=!0;else if(u.indexOf(e.search.term)>=0)s.push(t),r=!0;else{var c=i(u).split("_");for(var d in c){if(r)break;for(var f in n)if(0===c[d].indexOf(n[f])){l.push(t),r=!0;break}}}}})}),e.data.filtered=d3.merge([o,s,l]),e.data.filtered.forEach(function(e,t){e.d3plus_order=t}),e.data.changed=!0,e.data.lastFilter="search",0===e.data.filtered.length){var c={},d=e.format.value(e.format.locale.value.ui.noResults);c[e.text.value||e.id.value]=r(d,'"'+e.search.term+'"'),e.data.filtered=[c]}}else e.data.filtered=e.data.viz,e.data.changed="viz"!==e.data.lastFilter,e.data.lastFilter="viz",e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3plus&&t.d3plus.endPoint===e.depth.value&&(t.d3plus.icon=!1),!0}),e.data.changed="depth"!==e.data.lastFilter,e.data.lastFilter="depth");else e.data.filtered=[]}},{"../../../../string/format.js":172,"../../../../string/strip.js":174}],146:[function(e,t,n){t.exports=function(e){return e.data.element.value?(e.data.element.value.on("focus."+e.container.id,function(){return e.self.hover(!0).draw()}),e.data.element.value.on("blur."+e.container.id,function(){var t;return t=e.search.enabled?d3.event.relatedTarget!==e.container.value.select("input").node():!0,t?e.self.open(!1).hover(!1).draw():void 0}),e.data.element.value.on("change."+e.container.id,function(){return e.self.focus(this.value).draw()}),e.data.element.value.on("keydown.cancel_"+e.container.id,function(){return 9!==d3.event.keyCode?d3.event.preventDefault():void 0})):void 0}},{}],147:[function(e,t,n){t.exports=function(e){var t=e.height.secondary,n=e.container.button.container().node().getBoundingClientRect(),r=window.innerHeight-n.bottom-2*e.ui.border-e.ui.margin.top-e.ui.margin.bottom-e.ui.padding.top-e.ui.padding.bottom;r<3*n.height&&(r=n.top-10,e.self.open({flipped:!0})),"number"!=typeof t&&(t=r),t>e.height.max&&(t=e.height.max),e.self.height({secondary:t})}},{}],148:[function(e,t,n){var r,i,a,o;r=e("./active.js"),i=e("../../../../util/copy.coffee"),a=e("../../../form.js"),o=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,s;e.open.value&&(e.dev.value&&o.time("updating list items"),"items"in e.container||(e.container.items=a().container(e.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),n=e.draw.timing?e.data.large:1,s=i(e.order),s.value=e.search.term.length?"d3plus_order":e.order.value,t=e.depth.value===e.id.nesting.length-1,(e.focus.changed||e.container.items.focus()===!1)&&e.container.items.focus(e.focus.value,function(t){var n,i,a,o;i=e.data.filtered.filter(function(n){return n[e.id.value]===t})[0],e.depth.value<e.id.nesting.length-1&&e.id.nesting[e.depth.value+1]in i?(a=e.depth.value,o=e.id.solo.value,e.history.states.push(function(){return e.self.depth(a).id({solo:o}).draw()}),e.self.depth(e.depth.value+1).id({solo:[t]}).draw()):(e.depth.changed||e.self.open(!1),n=t!==e.focus.value,n&&e.active.value&&(n=r(e,t)),n&&e.self.focus(t).draw())}),e.container.items.active(e.active.value).data({large:n,sort:e.data.sort.value,value:e.data.filtered}).draw({update:e.draw.update}).font(e.font.secondary).format(e.format).hover(e.hover.value).id(e.id.value).icon({button:t?!1:e.icon.next,select:t?e.icon.select:!1,value:e.icon.value}).order(s).text(e.text.secondary.value||e.text.value).timing({ui:e.draw.timing}).ui({color:{primary:1===e.id.nesting.length?e.ui.color.primary.value:e.ui.color.secondary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding.css}).draw(),e.dev.value&&o.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103,"./active.js":142}],149:[function(e,t,n){t.exports=function(e){return d3.select(window).on("keydown."+e.container.id,function(){var t,n,r,i,a,o,s,l,u,c,d,f,h;if(u=d3.event.keyCode,e.open.value||e.hover.value===!0){for(d=e.hover.value===!0?"focus":"hover",s=!1,f=e.data.filtered,o=l=0,c=f.length;c>l;o=++l)if(t=f[o],t[e.id.value]===e[d].value){s=o;break}if(9===u&&e.open.value&&(!e.search.enabled||e.search.enabled&&!d3.event.shiftKey))return e.self.open(!1).hover(!1).draw();if([38,40].indexOf(u)>=0)return s===!1?s=0:38===u?e.open.value&&(0>=s?s=e.data.filtered.length-1:s-=1):40===u&&e.open.value&&(s>=e.data.filtered.length-1?s=0:s+=1),a="boolean"!=typeof e.hover.value?e.data.filtered[s][e.id.value]:e.focus.value,e.self.hover(a).open(!0).draw();if(13===u)return"boolean"!=typeof e.hover.value?(n=e.data.filtered.filter(function(t){return t[e.id.value]===e.hover.value})[0],r=e.depth.value,r<e.id.nesting.length-1&&e.id.nesting[r+1]in n?(h=e.id.solo.value,i=function(){return e.self.depth(r).id({solo:h}).draw()},e.history.states.push(i),e.self.depth(e.depth.value+1).id({solo:[e.hover.value]}).draw()):e.self.focus(e.hover.value).hover(!0).draw()):e.self.hover(e.focus.value).open(!0).draw();if(27===u){if(e.open.value)return e.self.open(!1).hover(!0).draw();if(e.hover.value===!0)return e.self.hover(!1).draw()}}})}},{}],150:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&r.timeEnd("populating list")}},{"../../../../core/console/print.coffee":52}],151:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){if(e.open.value){e.dev.value&&r.time("calculating height");var t=!1;if("none"==e.container.selector.style("display"))var t=!0;t&&e.container.selector.style("display","block");var n=e.container.selector.style("height"),i=e.container.selector.property("scrollTop"),a=e.container.list.style("max-height"),o=e.container.list.property("scrollTop");e.container.selector.style("height","auto"),e.container.list.style("max-height","200000px"),e.container.listHeight=parseFloat(e.container.selector.style("height"),10),e.container.list.style("max-height",a).property("scrollTop",o),e.container.selector.style("height",n).property("scrollTop",i);var s=!1;if(e.container.listHeight>e.height.secondary&&(e.container.listHeight=e.height.secondary,s=!0),t&&e.container.selector.style("display","none"),e.dev.value&&r.timeEnd("calculating height"),s){e.dev.value&&r.time("calculating scroll position");var l=e.container.list.select("div").selectAll("div.d3plus_node"),u=l[0][0],c="boolean"!=typeof e.hover.value?e.hover.value:e.focus.value;l.each(function(t,n){t[e.id.value]===c&&(u=this)});var t=!1;"none"===e.container.selector.style("display")&&(t=!0,e.container.selector.style("display","block"));var d=u.offsetTop,f=u.offsetHeight||u.getBoundingClientRect().height,h=e.container.list.property("scrollTop");t&&e.container.selector.style("display","none"),t||e.data.changed||e.depth.changed?e.container.listScroll=d:(e.container.listScroll=h,h>d?e.container.listScroll=d:d+f>h+e.height.secondary-e.search.height&&(e.container.listScroll=d-(e.height.secondary-f-e.search.height))),e.dev.value&&r.timeEnd("calculating scroll position")}else e.container.listScroll=0}else e.container.listScroll=e.container.list.property("scrollTop"),e.container.listHeight=0}},{"../../../../core/console/print.coffee":52}],152:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),i=e("../../../../core/console/print.coffee");t.exports=function(t){function n(e){e.style("padding",t.ui.padding.css).style("display","block").style("background-color",d3.rgb(t.ui.color.primary.value).darker(.15).toString())}function a(e){var n=t.width.secondary-2*t.ui.padding.left-2*t.ui.padding.right+2*t.ui.border;e.style("padding",t.ui.padding.left/2+t.ui.padding.right/2+"px").style("width",n+"px").style("border-width","0px").style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("outline","none").style(r()+"border-radius","0").attr("placeholder",t.format.value(t.format.locale.value.method.search))}t.dev.value&&i.time("creating search");var o=e("./data.js"),s=e("./items.coffee"),l=e("./update.js");t.container.search=t.container.selector.selectAll("div.d3plus_drop_search").data(t.search.enabled?["search"]:[]),t.draw.timing?(t.container.search.transition().duration(t.draw.timing).call(n),t.container.search.select("input").transition().duration(t.draw.timing).call(a)):(t.container.search.call(n),t.container.search.select("input").call(a)),t.container.search.enter().insert("div","#d3plus_drop_list_"+t.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+t.container.id).call(n).append("input").attr("id","d3plus_drop_input_"+t.container.id).style("-webkit-appearance","none").call(a),
t.container.search.select("input").on("keyup."+t.container.id,function(e){var n=this.value;t.search.term!==n&&(t.search.term=n,o(t),s(t),l(t))}),t.container.search.exit().remove();var u=t.container.selector.style("display");t.container.selector.style("display","block"),t.search.height=t.search.enabled?t.container.search.node().offsetHeight||t.container.search.node().getBoundingClientRect().height:0,t.container.selector.style("display",u),t.search.enabled&&(t.margin.title+=t.search.height),t.dev.value&&i.timeEnd("creating search")}},{"../../../../client/prefix.coffee":39,"../../../../core/console/print.coffee":52,"./data.js":145,"./items.coffee":148,"./update.js":155}],153:[function(e,t,n){t.exports=function(e){e.container.selector=e.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],154:[function(e,t,n){var r=e("../../../../client/pointer.coffee"),i=e("../../../../color/lighter.coffee"),a=e("../../../../core/console/print.coffee"),o=e("../../../../color/text.coffee");t.exports=function(e){function t(t){t.style("padding",e.ui.padding.css).style("display","block").style("background-color",e.ui.color.secondary.value).style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("color",o(e.ui.color.secondary.value))}function n(t){if(!t.empty()){var n=0===e.icon.back.value.indexOf("fa-")?" fa "+e.icon.back.value:"";n="d3plus_drop_back"+n;var r=0===e.icon.back.value.indexOf("fa-")?"":e.icon.back.value;t.style("position","absolute").attr("class",n).style("top",e.ui.padding.top+e.font.secondary.size/2/2.5+"px").html(r)}}function s(t){var n=u?e.focus.value:e.format.locale.value.ui.back;t.text(e.format.value(n)).style("padding","0px "+(e.ui.padding.left+e.ui.padding.right)+"px")}if(e.open.value){e.dev.value&&a.time("creating title and back button");var l=1===e.id.solo.value.length&&e.depth.value>0,u=l,c=e.container.button.data(Object).viz[0];u=!0;for(var d=0;d<e.id.nesting.length;d++){var f=e.id.nesting[d];if(f in c&&c[f]===e.focus.value){u=!1;break}}e.container.title=e.container.selector.selectAll("div.d3plus_drop_title").data(l?["title"]:[]),e.draw.timing?(e.container.title.transition().duration(e.draw.timing).call(t),e.container.title.select("div.d3plus_drop_title_text").transition().duration(e.draw.timing).call(s)):(e.container.title.call(t),e.container.title.select("div.d3plus_drop_title_text").call(s)),e.container.title.select("span.d3plus_drop_back").call(n);var h=e.container.title.enter().insert("div","#d3plus_drop_list_"+e.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+e.container.id).call(t);h.append("span").attr("id","d3plus_drop_back_"+e.container.id).attr("class","d3plus_drop_back").call(n),h.append("div").attr("id","d3plus_drop_title_text_"+e.container.id).attr("class","d3plus_drop_title_text").call(s),e.container.title.on(r.over,function(t,n){var r=i(e.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("background-color",r).style("color",o(r))}).on(r.out,function(t){var n=e.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("background-color",n).style("color",o(n))}).on(r.click,function(t){e.history.back()}),e.container.title.exit().remove(),l&&(e.margin.title+=e.container.title.node().offsetHeight||e.container.title.node().getBoundingClientRect().height),e.dev.value&&a.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":38,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50,"../../../../core/console/print.coffee":52}],155:[function(e,t,n){var r=e("./items.coffee"),i=e("./height.js"),a=e("../../../../core/console/print.coffee"),o=e("./scroll.js"),s=e("./arrow.js");t.exports=function(e){function t(t){var n=e.open.flipped.value;t.style("top",function(){return n?"auto":e.margin.top-e.ui.border+"px"}).style("bottom",function(){return n?e.margin.top+e.ui.border+"px":"auto"})}function n(n){n.style("left",function(){return"left"===e.font.align.value?e.margin.left+"px":"center"===e.font.align.value?e.margin.left-(e.width.secondary-e.width.value)/2+"px":"auto"}).style("right",function(){return"right"===e.font.align.value?"0px":"auto"}).style("height",e.container.listHeight+"px").style("padding",e.ui.border+"px").style("background-color",e.ui.color.secondary.value).style("z-index",function(){return e.open.value?"9999":"-1"}).style("width",e.width.secondary-2*e.ui.border+"px").style("opacity",e.open.value?1:0).call(t)}function l(n){n.style("display",e.open.value?null:"none").call(t),e.search.enabled&&e.open.value&&e.container.selector.select("div.d3plus_drop_search input").node().focus()}function u(e){return function(){var t=d3.interpolateNumber(this.scrollTop,e);return function(e){this.scrollTop=t(e)}}}e.draw.timing?e.container.ui.transition().duration(e.draw.timing).each("start",function(){e.open.value&&d3.select(this).style("z-index",9999)}).style("margin",e.ui.margin.css).each("end",function(){e.open.value||d3.select(this).style("z-index","auto")}):e.container.ui.style("margin",e.ui.margin.css).style("z-index",function(){return e.open.value?9999:"auto"}),r(e),i(e),o(e),s(e),e.dev.value&&a.time("drawing list");var c=e.open.value?e.height.secondary-e.margin.title:0;e.draw.timing?(e.container.selector.transition().duration(e.draw.timing).each("start",function(){d3.select(this).style("display",e.open.value?"block":null)}).call(n).each("end",function(){d3.select(this).transition().duration(e.draw.timing).call(l)}),e.container.list.transition().duration(e.draw.timing).style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").tween("scroll",u(e.container.listScroll))):(e.container.selector.call(n).call(l),e.container.list.style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").property("scrollTop",e.container.listScroll)),e.dev.value&&a.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":52,"./arrow.js":143,"./height.js":147,"./items.coffee":148,"./scroll.js":151}],156:[function(e,t,n){var r=e("../../../../util/copy.coffee"),i=e("../../../../core/font/tester.coffee"),a=e("../../../form.js"),o=e("../../../../core/console/print.coffee"),s=e("../../../../object/validate.coffee");t.exports=function(e){function t(t){var r="primary"===t?"value":t,s="value"===r?e.icon.drop.value:e.icon.select.value||e.icon.drop.value,l="value"===r?e.text.value:e.text.secondary.value||e.text.value,u="value"===r?e.font:e.font.secondary;e.dev.value&&o.time("calculating "+t+" width");var c=a().container(i()).data({large:9999,value:n}).draw({update:!1}).font(u).format(e.format).icon({button:s,value:e.icon.value}).id(e.id.value).timing({ui:0}).text(l||e.id.value).type("button").ui({border:"primary"===t?e.ui.border:0,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(!1).draw(),d=[];c.selectAll("div.d3plus_node").each(function(e){d.push(this.offsetWidth+1)}).remove();var f={};f[r]=d3.max(d),e.self.width(f),e.dev.value&&o.timeEnd("calculating "+t+" width")}var n=[];for(var l in e.data.nested.all){var u=e.data.nested.all[l],c=s(e.text.nesting)&&l in e.text.nesting?e.text.nesting[l][0]:l;[e.id.value,e.text.value].indexOf(c)<0&&(u=r(u),u.forEach(function(t){t[e.text.value||e.id.value]=t[c]})),n=n.concat(u)}"number"!=typeof e.width.value&&t("primary"),"number"!=typeof e.width.secondary&&(e.text.secondary.value&&e.text.value!==e.text.secondary.value?t("secondary"):e.self.width({secondary:e.width.value}))}},{"../../../../core/console/print.coffee":52,"../../../../core/font/tester.coffee":68,"../../../../object/validate.coffee":171,"../../../../util/copy.coffee":206,"../../../form.js":103}],157:[function(e,t,n){var r=e("../../../../util/child.coffee"),i=function(e,t){if(void 0===t)var t=window;d3.select(t).on("click."+e.container.id,function(){var t=d3.event.target||d3.event.toElement,n=t.parentNode;n&&["d3plus_node","d3plus_drop_title"].indexOf(n.className)>=0&&(t=n.parentNode),t&&n&&!r(e.container.ui,t)&&(e.open.value||e.hover.value)&&e.self.open(!1).hover(!1).draw()});try{var n=window.parent.location.host===window.location.host}catch(a){var n=!1}n&&t.self!==window.top&&i(e,t.parent)};t.exports=i},{"../../../../util/child.coffee":204}],158:[function(e,t,n){var r=e("../form.js");t.exports=function(e){"buttons"in e.container||(e.container.buttons=r().container(e.container.ui).type("button"));var t=e.data.viz.length,n=e.width.value?e.width.value/t:!1,i=e.container.ui.selectAll("div.d3plus_toggle").data(e.data.viz,function(t){return t[e.id.value]});i.exit().remove(),i.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),i.order().each(function(t){"form"in t.d3plus||(t.d3plus.form=r().container(d3.select(this)));var i=e.id.nesting.length>e.depth.value?e.id.nesting[e.depth.value+1]:e.id.value;t[i]instanceof Array?t.d3plus.form.container({id:e.container.id+"_"+t[e.id.value]}).data(t[i]).id(e.id.nesting.slice(1)).type("drop"):t.d3plus.form.data([t]).id(e.id.value).type("button"),t.d3plus.form.color(e.color).focus(e.focus.value,function(t){t!==e.focus.value&&e.self.focus(t).draw()}).hover(e.hover.value).icon({select:!1,value:e.icon.value}).font(e.font).format(e.format).order(e.order).text(e.text.value).ui({border:e.ui.border,color:e.ui.color,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(n).draw()}),e.data.element.value&&e.data.element.value.on("focus."+e.container.id,function(){e.self.focus(this.value).hover(this.value).draw()}).on("blur."+e.container.id,function(){e.self.hover(!1).draw()})}},{"../form.js":103}],159:[function(e,t,n){var r,i,a,o,s,l,u,c,d,f,h;f=e("simplify-js"),t.exports=function(e,t){var n,i,o,l,u,d,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U,V,X,H,J,q,Q,K,$,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,de,fe,he,pe,ge,me,ve,ye,xe,be;if(e.length<3)return null;if(w=[],g=.5,u=5,null==t&&(t={}),null==t.maxAspectRatio&&(t.maxAspectRatio=15),null==t.minWidth&&(t.minWidth=0),null==t.minHeight&&(t.minHeight=0),null==t.tolerance&&(t.tolerance=.02),null==t.nTries&&(t.nTries=20),null!=t.angle&&(t.angle instanceof Array?d=t.angle:"number"==typeof t.angle?d=[t.angle]:"string"!=typeof t.angle||isNaN(t.angle)||(d=[Number(t.angle)])),null==d&&(d=d3.range(-90,90+u,u)),null!=t.aspectRatio&&(t.aspectRatio instanceof Array?m=t.aspectRatio:"number"==typeof t.aspectRatio?m=[t.aspectRatio]:"string"!=typeof t.aspectRatio||isNaN(t.aspectRatio)||(m=[Number(t.aspectRatio)])),null!=t.origin&&t.origin instanceof Array&&(J=t.origin[0]instanceof Array?t.origin:[t.origin]),p=Math.abs(d3.geom.polygon(e).area()),0===p)return null;if(ne=d3.extent(e,function(e){return e[0]}),W=ne[0],P=ne[1],re=d3.extent(e,function(e){return e[1]}),U=re[0],G=re[1],me=Math.min(P-W,G-U)*t.tolerance,ge=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)q=e[t],r.push({x:q[0],y:q[1]});return r}(),me>0&&(ge=f(ge,me),e=function(){var e,t,n;for(n=[],e=0,t=ge.length;t>e;e++)q=ge[e],n.push([q.x,q.y]);return n}()),t.vdebug&&w.push({type:"simplify",poly:e}),ie=d3.extent(e,function(e){return e[0]}),W=ie[0],P=ie[1],ae=d3.extent(e,function(e){return e[1]}),U=ae[0],G=ae[1],v=[[W,U],[P,U],[P,G],[W,G]],oe=[P-W,G-U],x=oe[0],y=oe[1],ye=Math.min(x,y)/50,null==J)for(J=[],b=d3.geom.polygon(e).centroid(),a(b,e)&&J.push(b);J.length<t.nTries;)he=Math.random()*x+W,pe=Math.random()*y+U,fe=[he,pe],a(fe,e)&&J.push(fe);for(t.vdebug&&w.push({type:"origins",points:J}),O=0,B=null,_=0,N=d.length;N>_;_++)for(o=d[_],l=-o*Math.PI/180,t.vdebug&&w.push({type:"angle",angle:o}),A=k=0,S=J.length;S>k;A=++k)for(X=J[A],se=r(e,X,l),K=se[0],ee=se[1],le=r(e,X,l+Math.PI/2),Q=le[0],$=le[1],V=[],null!=K&&null!=ee&&V.push([(K[0]+ee[0])/2,(K[1]+ee[1])/2]),null!=Q&&null!=$&&V.push([(Q[0]+$[0])/2,(Q[1]+$[1])/2]),t.vdebug&&w.push({type:"modifOrigin",idx:A,p1W:K,p2W:ee,p1H:Q,p2H:$,modifOrigins:V}),M=0,j=V.length;j>M;M++)if(H=V[M],t.vdebug&&w.push({type:"origin",cx:H[0],cy:H[1]}),ue=r(e,H,l),K=ue[0],ee=ue[1],null!==K&&null!==ee&&(Y=Math.min(h(H,K),h(H,ee)),F=2*Math.sqrt(Y),ce=r(e,H,l+Math.PI/2),Q=ce[0],$=ce[1],null!==Q&&null!==$&&(R=Math.min(h(H,Q),h(H,$)),E=2*Math.sqrt(R),!(O>F*E))))for(null!=m?i=m:(Z=Math.max(1,t.minWidth/E,O/(E*E)),L=Math.min(t.maxAspectRatio,F/t.minHeight,F*F/O),i=d3.range(Z,L+g,g)),T=0,D=i.length;D>T;T++)if(n=i[T],z=Math.max(t.minWidth,Math.sqrt(O*n)),de=Math.min(F,E*n),!(O>de*E))for(de-z>=ye&&t.vdebug&&w.push({type:"aRatio",aRatio:n});de-z>=ye;)ve=(z+de)/2,I=ve/n,xe=H[0],be=H[1],te=[[xe-ve/2,be-I/2],[xe+ve/2,be-I/2],[xe+ve/2,be+I/2],[xe-ve/2,be+I/2]],te=c(te,l,H),s(te,e)?(C=!0,O=ve*I,B={cx:xe,cy:be,width:ve,height:I,angle:o},z=ve):(C=!1,de=ve),t.vdebug&&w.push({type:"rectangle",cx:xe,cy:be,width:ve,height:I,areaFraction:ve*I/p,angle:o,insidePoly:C});return[B,O,w]},h=function(e,t){var n,r;return n=t[0]-e[0],r=t[1]-e[1],n*n+r*r},l=function(e,t,n){var r,i,a,o,s;return s=t[1]<n[1]?[t,n]:[n,t],r=s[0],i=s[1],(e[1]===i[1]||e[1]===r[1])&&(e[1]+=Number.MIN_VALUE),e[1]>i[1]||e[1]<r[1]?!1:e[0]>r[0]&&e[0]>i[0]?!1:e[0]<r[0]&&e[0]<i[0]?!0:(a=(i[1]-r[1])/(i[0]-r[0]),o=(e[1]-r[1])/(e[0]-r[0]),o>a)},a=function(e,t){var n,r,i,a,o;for(a=-1,o=t.length,r=t[o-1],i=0;++a<o;)n=r,r=t[a],l(e,n,r)&&i++;return i%2!==0},o=function(e,t,n){var r,i,a;return r=1e-9,i=e[0],a=e[1],i<Math.min(t[0],n[0])-r||i>Math.max(t[0],n[0])+r||a<Math.min(t[1],n[1])-r||a>Math.max(t[1],n[1])+r?!1:!0},i=function(e,t,n,r){var i,a,o,s,l,u,c,d,f,h;return d=1e-9,s=e[0]-t[0],u=e[1]-t[1],l=n[0]-r[0],c=n[1]-r[1],o=s*c-u*l,Math.abs(o)<d?null:(i=e[0]*t[1]-e[1]*t[0],a=n[0]*r[1]-n[1]*r[0],f=(i*l-a*s)/o,h=(i*c-a*u)/o,[f,h])},d=function(e,t,n,r){var a;return a=i(e,t,n,r),null==a?!1:o(a,e,t)&&o(a,n,r)},s=function(e,t){var n,r,i,o,s,l,u,c;for(s=-1,u=e.length,c=t.length,i=e[u-1];++s<u;)for(n=i,i=e[s],l=-1,o=t[c-1];++l<c;)if(r=o,o=t[l],d(n,i,r,o))return!1;return a(e[0],t)},u=function(e,t,n){var r,i,a,o;return null==n&&(n=[0,0]),a=e[0]-n[0],o=e[1]-n[1],r=Math.cos(t),i=Math.sin(t),[r*a-i*o+n[0],i*a+r*o+n[1]]},c=function(e,t,n){var r,i,a,o;for(o=[],r=0,i=e.length;i>r;r++)a=e[r],o.push(u(a,t,n));return o},r=function(e,t,n){var r,a,s,l,u,c,d,f,p,g,m,v,y,x,b;for(u=1e-9,t=[t[0]+u*Math.cos(n),t[1]+u*Math.sin(n)],x=t[0],b=t[1],v=[x+Math.cos(n),b+Math.sin(n)],d=0,Math.abs(v[0]-x)<u&&(d=1),c=-1,g=e.length,a=e[g-1],f=Number.MAX_VALUE,p=Number.MAX_VALUE,s=null,l=null;++c<g;)r=a,a=e[c],m=i(t,v,r,a),null!=m&&o(m,r,a)&&(y=h(t,m),m[d]<t[d]?f>y&&(f=y,s=m):m[d]>t[d]&&p>y&&(p=y,l=m));return[s,l]}},{"simplify-js":8}],160:[function(e,t,n){t.exports=function(e,t,n){var r,i,a,o;return i={x:0,y:0},0>e&&(e=2*Math.PI+e),"square"===n?(a=45*(Math.PI/180),e<=Math.PI?e<Math.PI/2?a>e?(i.x+=t,o=Math.tan(e)*t,i.y+=o):(i.y+=t,r=t/Math.tan(e),i.x+=r):e<Math.PI-a?(i.y+=t,r=t/Math.tan(Math.PI-e),i.x-=r):(i.x-=t,o=Math.tan(Math.PI-e)*t,i.y+=o):e<3*Math.PI/2?e<a+Math.PI?(i.x-=t,o=Math.tan(e-Math.PI)*t,i.y-=o):(i.y-=t,r=t/Math.tan(e-Math.PI),i.x-=r):e<2*Math.PI-a?(i.y-=t,r=t/Math.tan(2*Math.PI-e),i.x+=r):(i.x+=t,o=Math.tan(2*Math.PI-e)*t,i.y-=o)):(i.x+=t*Math.cos(e),i.y+=t*Math.sin(e)),i}},{}],161:[function(e,t,n){var r;r=e("../geom/offset.coffee"),t.exports=function(e){var t,n,i,a,o,s,l,u,c,d,f,h,p,g,m,v;if(!e)return[];for(e=e.slice(1).slice(0,-1).split(/L|A/),d=[],i=0,o=e.length;o>i;i++)if(c=e[i],c=c.split(" "),1===c.length)d.push(c[0].split(",").map(function(e){return parseFloat(e)}));else{for(f=d[d.length-1],a=c.pop().split(",").map(function(e){return parseFloat(e)}),h=parseFloat(c.shift().split(",")[0]),v=Math.sqrt(Math.pow(a[0]-f[0],2)+Math.pow(a[1]-f[1],2)),t=Math.acos((h*h+h*h-v*v)/(2*h*h)),u="1"===c[1].split(",")[0],u&&(t=2*Math.PI-t),s=t/(2*Math.PI)*(h*Math.PI*2),p=s/5,g=Math.atan2(-f[1],-f[0])-Math.PI,m=t/p,n=m;t>n;)l=r(g+n,h),d.push([l.x,l.y]),n+=m;d.push(a)}return d}},{"../geom/offset.coffee":160}],162:[function(e,t,n){var r,i,a;r={},r.version="1.9.3 - Cornflower",r.repo="https://github.com/alexandersimoes/d3plus/",r.array={comparator:e("./array/comparator.coffee"),contains:e("./array/contains.coffee"),sort:e("./array/sort.coffee"),update:e("./array/update.coffee")},r.client={css:e("./client/css.coffee"),ie:e("./client/ie.js"),pointer:e("./client/pointer.coffee"),prefix:e("./client/prefix.coffee"),rtl:e("./client/rtl.coffee"),scroll:e("./client/scroll.js"),scrollbar:e("./client/scrollbar.coffee"),touch:e("./client/touch.coffee")},r.color={legible:e("./color/legible.coffee"),lighter:e("./color/lighter.coffee"),mix:e("./color/mix.coffee"),random:e("./color/random.coffee"),scale:e("./color/scale.coffee"),sort:e("./color/sort.coffee"),text:e("./color/text.coffee"),validate:e("./color/validate.coffee")},r.data={bestRegress:e("./data/bestRegress.coffee"),lof:e("./data/lof.coffee"),mad:e("./data/mad.coffee")},r.font={sizes:e("./font/sizes.coffee"),validate:e("./font/validate.coffee")},r.form=e("./form/form.js"),r.geom={largestRect:e("./geom/largestRect.coffee"),offset:e("./geom/offset.coffee"),path2poly:e("./geom/path2poly.coffee")},r.network={cluster:e("./network/cluster.coffee"),distance:e("./network/distance.coffee"),normalize:e("./network/normalize.coffee"),shortestPath:e("./network/shortestPath.coffee"),smallestGap:e("./network/smallestGap.coffee"),subgraph:e("./network/subgraph.coffee")},r.number={format:e("./number/format.coffee")},r.object={merge:e("./object/merge.coffee"),validate:e("./object/validate.coffee")},r.string={format:e("./string/format.js"),list:e("./string/list.coffee"),strip:e("./string/strip.js"),title:e("./string/title.coffee")},r.textwrap=e("./textwrap/textwrap.coffee"),r.tooltip={create:e("./tooltip/create.js"),move:e("./tooltip/move.coffee"),remove:e("./tooltip/remove.coffee")},r.util={buckets:e("./util/buckets.coffee"),child:e("./util/child.coffee"),closest:e("./util/closest.coffee"),copy:e("./util/copy.coffee"),d3selection:e("./util/d3selection.coffee"),dataurl:e("./util/dataURL.coffee"),uniques:e("./util/uniques.coffee")},r.viz=e("./viz/viz.coffee"),a=e("./client/css.coffee"),i=e("./core/console/print.coffee"),a("d3plus.css")&&i.warning("d3plus.css has been deprecated, you do not need to load this file.",r.repo+"releases/tag/v1.4.0"),"undefined"!=typeof window&&(window.d3plus=r),t.exports=r},{"./array/comparator.coffee":32,"./array/contains.coffee":33,"./array/sort.coffee":34,"./array/update.coffee":35,"./client/css.coffee":36,"./client/ie.js":37,"./client/pointer.coffee":38,"./client/prefix.coffee":39,"./client/rtl.coffee":40,"./client/scroll.js":41,"./client/scrollbar.coffee":42,"./client/touch.coffee":43,"./color/legible.coffee":44,"./color/lighter.coffee":45,"./color/mix.coffee":46,"./color/random.coffee":47,"./color/scale.coffee":48,"./color/sort.coffee":49,"./color/text.coffee":50,"./color/validate.coffee":51,"./core/console/print.coffee":52,"./data/bestRegress.coffee":98,"./data/lof.coffee":99,"./data/mad.coffee":100,"./font/sizes.coffee":101,"./font/validate.coffee":102,"./form/form.js":103,"./geom/largestRect.coffee":159,"./geom/offset.coffee":160,"./geom/path2poly.coffee":161,"./network/cluster.coffee":163,"./network/distance.coffee":164,"./network/normalize.coffee":165,"./network/shortestPath.coffee":166,"./network/smallestGap.coffee":167,"./network/subgraph.coffee":168,"./number/format.coffee":169,"./object/merge.coffee":170,"./object/validate.coffee":171,"./string/format.js":172,"./string/list.coffee":173,"./string/strip.js":174,"./string/title.coffee":175,"./textwrap/textwrap.coffee":199,"./tooltip/create.js":200,"./tooltip/move.coffee":201,"./tooltip/remove.coffee":202,"./util/buckets.coffee":203,"./util/child.coffee":204,"./util/closest.coffee":205,"./util/copy.coffee":206,"./util/d3selection.coffee":207,"./util/dataURL.coffee":208,"./util/uniques.coffee":209,"./viz/viz.coffee":332}],163:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t){var n,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O;if(g=[],null==t&&(t={}),(null==t.nodes||"object"!=typeof t.nodes)&&(j=r(e,t),e=j[0],t=j[1],null===t))return null;f=t.distance,z=t.nodeid,O=t.startpoint,p=t.endpoint,N=t.nodes,S={};for(v in N)S[v]={node:N[v].node,degree:0};for(C=0,A={},m=0,w=e.length;w>m;m++)h=e[m],i=z(O(h)),a=z(p(h)),i in A||(A[i]={}),a in A||(A[a]={}),a in A[i]||(A[i][a]=0,A[a][i]=0,C++,S[i].degree+=1,S[a].degree+=1);u={},n=0;for(v in S)M=S[v],u[v]={score:M.degree/(2*C),nodes:[v]};for(i in A)for(a in A[i])A[i][a]=1/(2*C)-S[i].degree*S[a].degree/(4*C*C);for(y=0;1e3>y;){d=-1,_=void 0,k=void 0;for(i in A)for(a in A[i])A[i][a]>d&&(d=A[i][a],_=i,k=a);if(0>d)break;for(b in A[_])b!==k&&(b in A[k]?A[k][b]+=A[_][b]:A[k][b]=A[_][b]-2*u[k].score*u[b].score,A[b][k]=A[k][b]),delete A[b][_];for(b in A[k])b in A[_]||b===k||(A[k][b]-=2*u[_].score*u[b].score,A[b][k]=A[k][b]);for(D=u[_].nodes,x=0,I=D.length;I>x;x++)M=D[x],u[k].nodes.push(M);u[k].score+=u[_].score,t.vdebug&&g.push({type:"merge",father:k,child:_,nodes:u[k].nodes}),delete u[_],delete A[_],n+=d,y++}return l=function(){var e;e=[];for(o in u)c=u[o],e.push([o,c.nodes.length]);return e}(),l.sort(function(e,t){return t[1]-e[1]}),T=function(){var e,t,n;for(n=[],e=0,t=l.length;t>e;e++)s=l[e],n.push(u[s[0]].nodes);return n}(),[T,g]}},{"./normalize.coffee":165}],164:[function(e,t,n){t.exports=function(e,t){var n,r;return e instanceof Array||(e=[e.x,e.y]),t instanceof Array||(t=[t.x,t.y]),n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),Math.sqrt(n*n+r*r)}},{}],165:[function(e,t,n){var r;r=e("../core/console/print.coffee"),t.exports=function(e,t){var n,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T;if(S=t.source,D=t.target,o=t.directed,s=t.distance,k=t.nodeid,j=t.startpoint,c=t.endpoint,n=t.K,T=t.vdebug,o||(o=!1),null==n&&(n=1),null==k?k=function(e){return e}:"string"==typeof k&&(k=function(e){return function(t){return t[e]}}(k)),null!=S&&"object"==typeof S&&(S=k(S)),null!=D&&"object"==typeof D&&(D=k(D)),null==j?j=function(e){return e.source}:"string"==typeof j&&(j=function(e){return function(t){return t[e]}}(j)),null==c?c=function(e){return e.target}:"string"==typeof c&&(c=function(e){return function(t){return t[e]}}(c)),null==s)s=function(e){return 1};else if("number"==typeof s)s=function(e){return function(t){return e}}(s);else if("string"==typeof s)s=function(e){return function(t){return t[e]}}(s);else if(s instanceof Array){for(u={},f=v=0,b=e.length;b>v;f=++v)l=e[f],i=k(j(l)),a=k(c(l)),u[i+"_"+a]=s[f];s=function(e){return i=k(j(e)),a=k(c(e)),u[i+"_"+a]}}for(M={},y=0,w=e.length;w>y;y++){for(l=e[y],C=j(l),_=c(l),g=k(C),m=k(_),z=[C,_],x=0,I=z.length;I>x;x++)A=z[x],h=k(A),h in M||(M[h]={node:A,outedges:[]});M[g].outedges.push(l),o||M[m].outedges.push(l)}return d=null,0===e.length?d="The length of edges is 0":0>n?d="K can not have negative value":null==s(e[0])?d="Check the distance function/attribute":null==j(e[0])?d="Check the startpoint function/attribute":null==c(e[0])?d="Check the endpoint function/attribute":(p=k(j(e[0])),null==p||"string"!=(N=typeof p)&&"number"!==N?d="Check the nodeid function/attribute":null==S||S in M?null==D||D in M||(d="The target is not in the graph"):d="The source is not in the graph"),null!=d?(r.error(d),null):[e,{source:S,target:D,directed:o,distance:s,nodeid:k,startpoint:j,endpoint:c,K:n,nodes:M,vdebug:T}]}},{"../core/console/print.coffee":52}],166:[function(e,t,n){var r,i;r=e("heap"),i=e("./normalize.coffee"),t.exports=function(e,t,n){var a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T;if(null==n&&(n={}),n.source=t,(null==n.nodes||"object"!=typeof n.nodes)&&(_=i(e,n),e=_[0],n=_[1],null===n))return null;t=n.source,j=n.target,u=n.directed,c=n.distance,I=n.nodeid,S=n.startpoint,f=n.endpoint,a=n.K,A=n.nodes;for(m in A)w=A[m],w.count=0;for(p=new r(function(e,t){return e.distance-t.distance}),T={},null==j&&(T[t]=!0),p.push({edge:null,target:t,distance:0}),b=0,N=[];!p.empty()&&(b=Math.max(b,p.size()),C=p.pop(),D=C.target,A[D].count++,null==j?N.push(C):D===j&&N.push(C),N.length!==a);)if(A[D].count<=a)for(k=A[D].outedges,g=0,y=k.length;y>g;g++){if(d=k[g],o=I(S(d)),l=I(f(d)),u||l!==D||(M=[l,o],o=M[0],l=M[1]),null==j){if(T[l])continue;T[l]=!0}s=C.distance+c(d),p.push({edge:d,previous:C,target:l,distance:s})}for(h=function(t){for(e=[];null!=t.edge;)e.push(t.edge),t=t.previous;return e.reverse()},v=0,x=N.length;x>v;v++)z=N[v],null!=j&&(delete z.target,z.edges=h(z)),delete z.edge,delete z.previous;return N}},{"./normalize.coffee":165,heap:5}],167:[function(e,t,n){var r;r=e("./distance.coffee"),t.exports=function(e,t){var n,i;return t||(t={}),n=[],i=d3.geom.quadtree().x(function(e){return t.accessor?t.accessor(e)[0]:e[0]}).y(function(e){return t.accessor?t.accessor(e)[1]:e[1]}),i(e).visit(function(e){var i,a,o,s,l,u,c,d;if(!e.leaf)for(c=e.nodes,i=0,o=c.length;o>i;i++)if(l=c[i],l&&l.point)if(t.origin)n.push(r(l,t));else for(d=e.nodes,a=0,s=d.length;s>a;a++)u=d[a],u&&u.point&&u.point!==l.point&&n.push(r(l,u));return!1}),t.all?n.sort(function(e,t){return e-t}):d3.min(n)}},{"./distance.coffee":164}],168:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t,n){var i,a,o,s,l,u,c,d,f,h,p,g;return null==n&&(n={}),n.source=t,null!=n.nodes&&"object"==typeof n.nodes||(h=r(e,n),e=h[0],n=h[1],null!==n)?(t=n.source,o=n.directed,s=n.distance,d=n.nodeid,p=n.startpoint,u=n.endpoint,i=n.K,f=n.nodes,g={},g[t]=!0,a=function(e,t){var n,r,l,c,h,m,v,y,x;for(v=f[e].outedges,x=[],c=0,h=v.length;h>c;c++)l=v[c],n=d(p(l)),r=d(u(l)),o||r!==e||(y=[r,n],n=y[0],r=y[1]),r in g?x.push(void 0):(m=t+s(l),i>=m?(g[r]=!0,x.push(a(r,m))):x.push(void 0));return x},a(t,0),{nodes:function(){var e;e=[];for(c in g)e.push(f[c].node);return e}(),edges:function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)l=e[t],d(p(l))in g&&d(u(l))in g&&r.push(l);return r}()}):null}},{"./normalize.coffee":165}],169:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,i,a,o,s,l,u,c,d,f,h,p;return void 0===e||null===e||e===!1?"":(t||(t={}),l="locale"in t?t.locale:r,f=l.time.slice(),i=d3.locale(l.format),t||(t={}),h=t.vars||{},a=t.key,o="labels"in t?t.labels:!0,s=e.toString().split(".")[0].length,h.time&&h.time.value&&f.push(h.time.value),"string"==typeof a&&f.indexOf(a.toLowerCase())>=0?u=e:"share"===a?(u=0===e?0:e>=100?i.numberFormat(",f")(e):e>99?i.numberFormat(".3g")(e):i.numberFormat(".2g")(e),u+="%"):10>e&&e>-10?(s=e.toString().split("."),c=1,s.length>1&&(c=d3.min([parseFloat(s[1]).toString().length,2]),e>-1&&1>e||(p=s[1].length-parseFloat(s[1]).toString().length,c+=1+p)),u=i.numberFormat("."+c+"g")(e)):s>3?(d=d3.formatPrefix(e).symbol,d=d.replace("G","B"),e=d3.formatPrefix(e).scale(e),e=i.numberFormat(".3g")(e),e=e.replace(l.format.decimal,"."),e=parseFloat(e)+"",e=e.replace(".",l.format.decimal),u=e+d):u=3===s?i.numberFormat(",f")(e):0===e?0:e===parseInt(e,10)?i.numberFormat(".2")(e):i.numberFormat(".3g")(e),u.length>2&&""+u.indexOf(".0")===u.length-2&&(u=u.slice(0,u.length-2)),o&&a&&"format"in h&&a in h.format.affixes.value?(n=h.format.affixes.value[a],n[0]+u+n[1]):u)}},{"../core/locale/languages/en_US.coffee":69}],170:[function(e,t,n){var r,i;r=e("../util/d3selection.coffee"),i=e("./validate.coffee"),t.exports=function(e,t){var n,a;return n=function(e,t,a){var o,s,l;s=[];for(o in e)l=e[o],"undefined"!=typeof l?!a&&i(l)?("object"!=typeof t[o]&&(t[o]={}),s.push(n(l,t[o],0===o.indexOf("d3plus")))):!r(l)&&l instanceof Array?s.push(t[o]=l.slice(0)):s.push(t[o]=l):s.push(void 0);return s},a={},e&&n(e,a),t&&n(t,a),a}},{"../util/d3selection.coffee":207,"./validate.coffee":171}],171:[function(e,t,n){t.exports=function(e){return e&&e.constructor===Object}},{}],172:[function(e,t,n){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.unkeyed_index=0,t.replace(/\{(\w*)\}/g,function(n,r){if(""===r&&(r=t.unkeyed_index,t.unkeyed_index++),r==+r)return"undefined"!==e[r]?e[r]:n;for(var i=0;i<e.length;i++)if("object"==typeof e[i]&&"undefined"!=typeof e[i][r])return e[i][r];return n}.bind(t))}},{}],173:[function(e,t,n){var r,i;r=e("./format.js"),i=e("../core/locale/languages/en_US.coffee").ui,t.exports=function(e,t,n,a){var o;return e instanceof Array?(e=e.slice(0),t||(t=i.and),a||(a=i.moreText),2===e.length?e.join(" "+t+" "):(n&&e.length>n&&(o=e.length-n+1,e=e.slice(0,n-1),e[n-1]=r(a,o)),e.length>1&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", "))):e}},{"../core/locale/languages/en_US.coffee":69,"./format.js":172}],174:[function(e,t,n){t.exports=function(e){var t=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"],n=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return e+="",""+e.replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "===e)return"_";if(t.indexOf(e)>=0)return"";for(var r=e,i=0;i<n.length;i++)if(new RegExp(n[i][0]).test(e)){r=n[i][1];break}return r})}},{}],175:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,i,a,o,s;return e?(t||(t={}),a=t.key,"."===e.charAt(e.length-1)?e.charAt(0).toUpperCase()+e.substr(1):(o="locale"in this?this.locale.value:r,s=o.lowercase.map(function(e){return e.toLowerCase()}),i=o.uppercase,i=i.concat(i.map(function(e){return e+"s"})),n=i.map(function(e){return e.toLowerCase()}),e.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(t,r){var a,o;return t?(a=n.indexOf(t.toLowerCase()),o=a>=0?i[a]:s.indexOf(t.toLowerCase())>=0&&0!==r&&r!==e.length-1?t.toLowerCase():t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()):""}))):""}},{"../core/locale/languages/en_US.coffee":69}],176:[function(e,t,n){var r,i;r=e("./foreign.coffee"),i=e("./tspan.coffee"),t.exports=function(e){e.text.html.value?r(e):i(e)}},{"./foreign.coffee":177,"./tspan.coffee":180}],177:[function(e,t,n){t.exports=function(e){var t,n,r,i,a;a=e.container.value,r=a.attr("font-family")||a.style("font-family"),t=e.align.value||a.attr("text-anchor")||a.style("text-anchor"),n=a.attr("fill")||a.style("fill"),i=a.attr("opacity")||a.style("opacity"),t="end"===t?"right":"middle"===t?"center":"left",d3.select(a.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",r).style("font-size",e.size.value[1]+"px").style("color",n).style("text-align",t).style("opacity",i).text(e.text.current)}},{}],178:[function(e,t,n){t.exports=function(e){var t,n,r,i,a,o,s,l,u,c;return n=e.container.value,i=n.node().previousElementSibling,o=i?i.tagName.toLowerCase():"",i&&(i=d3.select(i)),e.container.x=e.x.value||parseFloat(n.attr("x"),10),e.container.y=e.y.value||parseFloat(n.attr("y"),10),i&&(e.shape.accepted.indexOf(o)>=0&&e.self.shape(o),"rect"===o?(u=parseFloat(i.attr("x"),10)||0,c=parseFloat(i.attr("y"),10)||0,e.padding.value===!1&&(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||(l=parseFloat(i.attr("width")),e.self.width(l)),e.height.value||(r=parseFloat(i.attr("height")),e.self.height(r))):"circle"===o?(a=parseFloat(i.attr("r"),10),u=parseFloat(i.attr("cx"),10)||0,
u-=a,c=parseFloat(i.attr("cy"),10)||0,c-=a,e.padding.value===!1&&(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||e.self.width(2*a,10),e.height.value||e.self.height(2*a,10)):(e.width.value||e.self.width(500),e.height.value||e.self.height(500))),e.container.x||(e.container.x=0),e.container.y||(e.container.y=0),e.width.inner=e.width.value-2*e.padding.value,e.height.inner=e.height.value-2*e.padding.value,s=n.attr("font-size")||n.style("font-size"),s=parseFloat(s,10),e.container.fontSize=s,e.container.dy=parseFloat(n.attr("dy"),10),e.size.value?void 0:e.resize.value?e.self.size([4,80]):e.self.size([s/2,s])}},{}],179:[function(e,t,n){t.exports=function(e){var t;return e.text.value||(t=e.container.value.text(),t&&(t.indexOf("tspan")>=0&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),t=t.replace(/(\r\n|\n|\r)/gm,""),t=t.replace(/^\s+|\s+$/g,""),e.self.text(t))),e.text.value instanceof Array?e.text.phrases=e.text.value.filter(function(e){return["string","number"].indexOf(typeof e)>=0}):e.text.phrases=[e.text.value+""],e.align.value?void 0:e.container.align=e.container.value.style("text-anchor")||e.container.value.attr("text-anchor")}},{}],180:[function(e,t,n){var r;r=e("../../client/rtl.coffee"),t.exports=function(e){var t,n,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D;return f=function(t){var r;return r=!g||t?e.container.value.append("tspan"):e.container.value.insert("tspan","tspan"),r.attr("x",N+"px").attr("dy",n+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},d=-90===e.rotate.value||90===e.rotate.value,k=d?e.height.inner:e.width.inner,s=d?e.width.inner:e.height.inner,t="circle"===e.shape.value?"middle":e.align.value||e.container.align||"start",S="end"===t||"start"===t&&r?k:"middle"===t?k/2:0,_=e.valign.value||"top",N=e.container.x+S,a=e.resize.value?e.size.value[1]:e.container.fontSize||e.size.value[0],n=e.container.dy||1.1*a,I=null,p=null,M=null,g=!1,D=0,"circle"===e.shape.value&&("middle"===_?D=s/n%1*n/2:"end"===_&&(D=s/n%1*n)),e.container.value.attr("text-anchor",t).attr("font-size",a+"px").style("font-size",a+"px").attr("x",e.container.x).attr("y",e.container.y),C=function(){return I.remove(),g?(l++,I=e.container.value.select("tspan")):(l--,I=d3.select(e.container.value.node().lastChild)),I.empty()?void 0:(M=I.text().match(/[^\s-]+-?/g),i())},u=function(){var t;return"circle"===e.shape.value?(t=(l-1)*n+D,t>s/2&&(t+=n),2*Math.sqrt(t*(2*(k/2)-t))):k},i=function(){var t,n;return M&&M.length?(n=M.pop(),t=n.charAt(n.length-1),1===n.length&&e.text.split.value.indexOf(n)>=0?i():(e.text.split.value.indexOf(t)>=0&&(n=n.substr(0,n.length-1)),I.text(M.join(" ")+" "+n+"..."),I.node().getComputedTextLength()>u()?i():void 0)):C()},h=function(t){var n,r,i,a;if(n=I.text(),a="",g){if(a=e.text.current.charAt(e.text.current.length-p.length-1)," "===a)for(i="",r=2;" "===a;)i+=" ",a=e.text.current.charAt(e.text.current.length-p.length-r),r++;else i="";p=t+i+p,I.text(t+i+n)}else{if(a=e.text.current.charAt(p.length)," "===a)for(i="",r=1;" "===a;)i+=" ",a=e.text.current.charAt(p.length+r),r++;else i="";p+=i+t,I.text(n+i+t)}return Math.floor(I.node().getComputedTextLength())>u()||"\n"===a?(I.text(n),n.length&&(I=f()),I.text(t),g?l--:l++):void 0},w=1,l=null,c=null,z=function(){var t,r,i,a,o,u;for(e.container.value.text("").html(""),M=e.text.words.slice(),g&&M.reverse(),p="",I=f(!0),l=w,r=0,i=M.length;i>r;r++){if(u=M[r],l*n>s){C();break}for(h(u),o=!0;o;){for(a=e.text.current.charAt(p.length),t=1;" "===a;)a=e.text.current.charAt(p.length+t),t++;o=e.text.split.value.indexOf(a)>=0,o&&h(a)}}return l*n>s&&C(),c=Math.abs(l-w)+1},z(),c=0,e.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?c++:void 0}),"circle"===e.shape.value&&(b=s-c*n,b>n&&("middle"===_?(w=(b/n/2>>0)+1,z()):"bottom"===_&&(g=!0,w=s/n>>0,z()))),c=0,e.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?c++:void 0}),"top"===_?j=0:(o=c*n,j="middle"===_?s/2-o/2:s-o),j-=.2*n,A="translate(0,"+j+")",180===e.rotate.value||-180===e.rotate.value?(y=e.container.x+k/2,x=e.container.y+s/2):(m=e.rotate.value<0?k:s,y=e.container.x+m/2,x=e.container.y+m/2),v="rotate("+e.rotate.value+", "+y+", "+x+")",e.container.value.attr("transform",v+A)}},{"../../client/rtl.coffee":40}],181:[function(e,t,n){var r,i,a,o;r=e("./flow.coffee"),i=e("../../font/sizes.coffee"),o=function(e){var t;e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text["break"]),t=e.text.current.charAt(0),t!==e.text.words[0].charAt(0)&&(e.text.words[0]=t+e.text.words[0]),e.container.value.html(""),e.resize.value?a(e):r(e))},t.exports=o,a=function(e){var t,n,a,s,l,u,c,d,f,h,p,g,m,v,y,x,b;for(b=[],c=0;c<e.text.words.length;)t=c===e.text.words.length-1?"":" ",b.push(e.text.words[c]+t),c++;h=-90===e.rotate.value||90===e.rotate.value,y=h?e.height.inner:e.width.inner,l=h?e.width.inner:e.height.inner,p=Math.floor(e.size.value[1]),d="circle"===e.shape.value?.75*y:y,m=i(b,{"font-size":p+"px"},{parent:e.container.value}),f=d3.max(m,function(e){return e.width}),n=1.165+y/l*.11,v=d3.sum(m,function(t){var n;return n=e.container.dy||1.2*p,t.width*n})*n,s="circle"===e.shape.value?Math.PI*Math.pow(y/2,2):d*l,(f>d||v>s)&&(a=Math.sqrt(s/v),x=d/f,g=d3.min([a,x]),p=d3.max([e.size.value[0],Math.floor(p*g)])),u=Math.floor(.8*l),p>u&&(p=u),f*(p/e.size.value[1])<=d?(p!==e.size.value[1]&&e.self.size([e.size.value[0],p]),r(e)):o(e)}},{"../../font/sizes.coffee":101,"./flow.coffee":176}],182:[function(e,t,n){t.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t+1]),e},value:!1}},{}],183:[function(e,t,n){arguments[4][107][0].apply(n,arguments)},{dup:107}],184:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e===!1?!1:r(e)?e:e instanceof Array?d3.select(e[0][0]):d3.select(e)},value:!1}},{"../../util/d3selection.coffee":207}],185:[function(e,t,n){arguments[4][111][0].apply(n,arguments)},{dup:111}],186:[function(e,t,n){var r,i;r=e("../../core/console/print.coffee"),i=e("../../string/format.js"),t.exports={accepted:[void 0],process:function(e,t){var n;return this.initialized===!1?e:(t.container.value===!1?(n=t.format.locale.value.dev.setContainer,r.warning(n,"container")):t.container.value.empty()?(n=t.format.locale.value.dev.noContainer,r.warning(i(n,'"'+t.container.value+'"'),"container")):(t.dev.value&&r.time("total draw time"),t.container.value.call(t.self)),e)},value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],187:[function(e,t,n){var r,i;r=e("../../core/locale/locale.coffee"),i=e("../../object/merge.coffee"),t.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(r)},process:function(e){var t,n;return t="en_US",n=r[t],e!==t&&(n=i(n,r[e])),this.language=e,n},value:"en_US"},process:function(e,t){if(this.initialized&&"string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":78,"../../object/merge.coffee":170}],188:[function(e,t,n){t.exports={accepted:[!1,Number],value:!1}},{}],189:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],190:[function(e,t,n){arguments[4][111][0].apply(n,arguments)},{dup:111}],191:[function(e,t,n){t.exports={accepted:[-180,-90,0,90,180],value:0}},{}],192:[function(e,t,n){t.exports={accepted:["circle","square"],value:!1}},{}],193:[function(e,t,n){t.exports={accepted:[Array,!1],value:!1}},{}],194:[function(e,t,n){t.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(e){var t;return t=this.split.value,this["break"]=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(e){return this["break"]=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g"),e},value:["-","/",";",":","&"]}}},{}],195:[function(e,t,n){t.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],196:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],197:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],198:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],199:[function(e,t,n){var r,i,a,o,s;r=e("../core/methods/attach.coffee"),a=e("./helpers/parseSize.coffee"),i=e("../core/console/print.coffee"),o=e("./helpers/parseText.coffee"),s=e("./helpers/wrap.coffee"),t.exports=function(){var t;return t={self:function(e){return e.each(function(){a(t),t.size.value[0]<=t.height.inner?(o(t),s(t)):t.container.value.html(""),t.dev.value&&i.timeEnd("total draw time")}),t.self}},r(t,{align:e("./methods/align.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),padding:e("./methods/padding.coffee"),resize:e("./methods/resize.coffee"),rotate:e("./methods/rotate.coffee"),text:e("./methods/text.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),valign:e("./methods/valign.coffee"),width:e("./methods/width.coffee"),x:e("./methods/x.coffee"),y:e("./methods/y.coffee")}),t.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"./helpers/parseSize.coffee":178,"./helpers/parseText.coffee":179,"./helpers/wrap.coffee":181,"./methods/align.coffee":182,"./methods/config.coffee":183,"./methods/container.coffee":184,"./methods/dev.coffee":185,"./methods/draw.coffee":186,"./methods/format.coffee":187,"./methods/height.coffee":188,"./methods/padding.coffee":189,"./methods/resize.coffee":190,"./methods/rotate.coffee":191,"./methods/shape.coffee":192,"./methods/size.coffee":193,"./methods/text.coffee":194,"./methods/valign.coffee":195,"./methods/width.coffee":196,"./methods/x.coffee":197,"./methods/y.coffee":198}],200:[function(e,t,n){function r(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var i=e("../core/locale/languages/en_US.coffee"),a=e("../client/pointer.coffee"),o=e("../color/legible.coffee"),s=e("./move.coffee"),l=e("../client/prefix.coffee"),u=e("../client/rtl.coffee"),c=e("./remove.coffee"),d=e("../client/scroll.js"),f=e("../string/list.coffee"),h=e("../color/text.coffee");t.exports=function(e){var t=e.fullscreen?250:200,n=l();e.width=e.width||t,e.max_width=e.max_width||386,e.id=e.id||"default",e.size=e.fullscreen||e.html?"large":"small",e.offset=e.offset||0,e.arrow_offset=e.arrow?8:0,e.x=e.x||0,e.y=e.y||0,e.parent=e.parent||d3.select("body"),e.curtain=e.curtain||"#fff",e.curtainopacity=e.curtainopacity||.8,e.background=e.background||"#fff",e.fontcolor=e.fontcolor||"#444",e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal",e.fontsize=e.fontsize||"12px",e.style=e.style||"default",e.zindex="small"==e.size?2e3:500,e.locale=e.locale||i,e.stacked=e.stacked||!1;var p=e.parent?e.parent.node().offsetHeight||e.parent.node().getBoundingClientRect().height:0;if(e.iconsize||(e.iconsize="small"==e.size?22:50),e.parent.node()===document.body?e.limit=[window.innerWidth+d.x(),window.innerHeight+d.y()]:e.limit=[parseFloat(e.parent.style("width"),10),parseFloat(e.parent.style("height"),10)],e.title instanceof Array){var g=e.locale.ui.and,m=e.locale.ui.more;e.title=f(e.title,g,3,m)}if(c(e.id),e.anchor={},e.fullscreen)e.anchor.x="center",e.anchor.y="center",e.x=e.parent?e.parent.node().offsetWidth/2:window.innerWidth/2,e.y=e.parent?p/2:window.innerHeight/2;else if(e.align){var v=e.align.split(" ");e.anchor.y=v[0],v[1]?e.anchor.x=v[1]:e.anchor.x="center"}else e.anchor.x="center",e.anchor.y="top";var y=e.width-30;e.fullscreen&&e.parent.append("div").attr("id","d3plus_tooltip_curtain_"+e.id).attr("class","d3plus_tooltip_curtain").style("background-color",e.curtain).style("opacity",e.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(a.click,function(){c(e.id)});var x=e.parent.append("div").datum(e).attr("id","d3plus_tooltip_id_"+e.id).attr("class","d3plus_tooltip d3plus_tooltip_"+e.size).style("color",e.fontcolor).style("font-family",e.fontfamily).style("font-weight",e.fontweight).style("font-size",e.fontsize+"px").style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(a.out,r);e.max_height&&x.style("max-height",e.max_height+"px"),e.fixed?(x.style("z-index",500),e.mouseevents=!0):x.style("z-index",2e3);var b=x.append("div").datum(e).attr("class","d3plus_tooltip_container").style("background-color",e.background).style("padding","6px");if(e.fullscreen&&e.html&&!e.stacked){I=e.parent?.75*e.parent.node().offsetWidth:.75*window.innerWidth,L=e.parent?.75*p:.75*window.innerHeight,b.style("width",I+"px").style("height",L+"px");var w=b.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",e.width+"px")}else{if("auto"==e.width){var I="auto";b.style("max-width",e.max_width+"px")}else var I=e.width-14+"px";var w=b.style("width",I)}if(e.title||e.icon)var A=w.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(e.fullscreen&&(x.append("div").attr("class","d3plus_tooltip_close").style("background-color",e.color).style("color",h(e.color)).style("position","absolute").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(a.over,function(){d3.select(this).style("cursor","pointer").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(a.out,function(){d3.select(this).style("cursor","auto").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(a.click,function(){c(e.id)}),d3.select("body").on("keydown.esc_"+e.id,function(){27===d3.event.keyCode&&(c(e.id),d3.select("body").on("keydown.esc_"+e.id,null))})),e.mouseevents){if(e.mouseevents!==!0){var C=d3.select(e.mouseevents).on(a.out),_=function(){var t=d3.event.toElement||d3.event.relatedTarget;if(t)var n="string"==typeof t.className?t.className:t.className.baseVal,i=0==n.indexOf("d3plus_tooltip");else var i=!1;t&&(k(x.node(),t)||k(e.mouseevents,t)||i)||(C(d3.select(e.mouseevents).datum()),r(),d3.select(e.mouseevents).on(a.out,C))},k=function(e,t){for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1};d3.select(e.mouseevents).on(a.out,_),x.on(a.out,_);var M=d3.select(e.mouseevents).on(a.move);M&&x.on(a.move,M)}}else x.style("pointer-events","none");if(e.arrow&&x.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",e.background).style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(n+"transform","rotate(45deg)").style("z-index",-1),e.icon){var z=A.append("div").attr("class","d3plus_tooltip_icon").style("width",e.iconsize+"px").style("height",e.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+e.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==e.style&&z.style("background-color",e.color),y-=z.node().offsetWidth}if(e.title){var N=e.max_width-6;e.icon&&(N-=e.iconsize+6),N+="px",A.append("div").attr("class","d3plus_tooltip_title").style("max-width",N).style("color",e.icon?e.fontcolor:o(e.color)).style("vertical-align","top").style("width",y+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===e.size?"18px":"16px").style("line-height","large"===e.size?"20px":"17px").style("padding","large"===e.size?"3px 6px":"3px").text(e.title)}if(e.description&&w.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(e.description),e.data||e.html&&!e.fullscreen)var S=w.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(e.data){var j=0,D={},T=null;e.data.forEach(function(t,i){t.group&&T!=t.group&&(T=t.group,S.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(t.group));var s=S.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(t);t.highlight===!0?s.style("color",o(e.color)):(t.allColors||t.highlight!==e.color)&&s.style("color",o(t.highlight));var c=s.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(t.name).on(a.out,function(){d3.event.stopPropagation()});if(t.link&&c.style("cursor","pointer").on(a.click,t.link),t.value instanceof Array){var d=e.locale.ui.and,f=e.locale.ui.more;t.value=list(t.value,d,3,f)}var h=s.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(t.value).on(a.out,function(){d3.event.stopPropagation()});if(u?h.style("left","6px"):h.style("right","6px"),e.mouseevents&&t.desc){var p=s.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(n+"transition","height 0.5s").style("width","85%").text(t.desc).on(a.out,function(){d3.event.stopPropagation()}),g=p.node().offsetHeight||p.node().getBoundingClientRect().height;p.style("height","0px");var m=c.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(n+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(l+"transition","background-color 0.5s").text("?").on(a.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),p.style("height",g+"px")}).on(a.out,function(){d3.event.stopPropagation()});c.style("cursor","pointer").on(a.over,function(){r();var e=d3.select(this.parentNode).style("color");m.style("background-color",e),p.style("height",g+"px")}),s.on(a.out,function(){d3.event.stopPropagation(),r()})}var v=parseFloat(h.style("width"),10);v>e.width/2&&(v=e.width/2),v>j&&(j=v),i!=e.data.length-1&&(t.group&&t.group==e.data[i+1].group||!t.group&&!e.data[i+1].group)&&S.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),S.selectAll(".d3plus_tooltip_data_name").style("width",function(){var e=parseFloat(d3.select(this.parentNode).style("width"),10);return e-j-30+"px"}),S.selectAll(".d3plus_tooltip_data_value").style("width",j+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);D[e.name]=t}),S.selectAll(".d3plus_tooltip_data_name").style("min-height",function(e){return D[e.name]+"px"})}!e.html||e.fullscreen&&!e.stacked||(S.append("div").html(e.html),e.js&&e.js(b));var O=w.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(e.footer&&O.html(e.footer),e.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,e.html&&e.fullscreen&&!e.stacked){var L=e.height-12,I=x.node().offsetWidth-e.width-44;b.append("div").attr("class","d3plus_tooltip_html").style("width",I+"px").style("height",L+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(e.html),e.js&&e.js(b)}if(e.width=x.node().offsetWidth,"center"!=e.anchor.y?e.height+=e.arrow_offset:e.width+=e.arrow_offset,e.data||(!e.fullscreen||e.stacked)&&e.html){if(!e.fullscreen||e.stacked)var E=e.fixed?p-e.y-10:p-10,L=e.height<E?e.height:E;else var L=e.height;L-=parseFloat(b.style("padding-top"),10),L-=parseFloat(b.style("padding-bottom"),10),A&&(L-=A.node().offsetHeight||A.node().getBoundingClientRect().height,L-=parseFloat(A.style("padding-top"),10),L-=parseFloat(A.style("padding-bottom"),10)),O&&(L-=O.node().offsetHeight||O.node().getBoundingClientRect().height,L-=parseFloat(O.style("padding-top"),10),L-=parseFloat(O.style("padding-bottom"),10)),S.style("max-height",L+"px")}e.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,s(e.x,e.y,e.id)}},{"../client/pointer.coffee":38,"../client/prefix.coffee":39,"../client/rtl.coffee":40,"../client/scroll.js":41,"../color/legible.coffee":44,"../color/text.coffee":50,"../core/locale/languages/en_US.coffee":69,"../string/list.coffee":173,"./move.coffee":201,"./remove.coffee":202}],201:[function(e,t,n){var r,i;i=e("../client/scroll.js"),t.exports=function(e,t,n){var a,o,s;return n||(n="default"),s=d3.select("div#d3plus_tooltip_id_"+n),s.node()&&(a=s.datum(),a.cx=e,a.cy=t,a.fixed||(o="body"===a.parent.node().tagName.toLowerCase()?[i.x(),i.y()]:[0,0],"center"!==a.anchor.y?("right"===a.anchor.x?a.x=a.cx-a.arrow_offset-4:"center"===a.anchor.x?a.x=a.cx-a.width/2:"left"===a.anchor.x&&(a.x=a.cx-a.width+a.arrow_offset+2),"bottom"===a.anchor.y?a.flip=a.cy+a.height+a.offset<=a.limit[1]:"top"===a.anchor.y&&(a.flip=a.cy-a.height-a.offset<o[1]),a.flip?a.y=a.cy+a.offset+a.arrow_offset:a.y=a.cy-a.height-a.offset-a.arrow_offset):(a.y=a.cy-a.height/2,"right"===a.anchor.x?a.flip=a.cx+a.width+a.offset<=a.limit[0]:"left"===a.anchor.x&&(a.flip=a.cx-a.width-a.offset<o[0]),"center"===a.anchor.x?(a.flip=!1,a.x=a.cx-a.width/2):a.flip?a.x=a.cx+a.offset+a.arrow_offset:a.x=a.cx-a.width-a.offset),a.x<o[0]?a.x=o[0]:a.x+a.width>a.limit[0]&&(a.x=a.limit[0]-a.width),a.y<o[1]?a.y=o[1]:a.y+a.height>a.limit[1]&&(a.y=a.limit[1]-a.height)),s.style("top",a.y+"px").style("left",a.x+"px"),a.arrow&&s.selectAll(".d3plus_tooltip_arrow").call(r)),s},r=function(e){return e.style("bottom",function(e){return"center"===e.anchor.y||e.flip?"auto":"-5px"}).style("right",function(e){return"center"!==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!==e.anchor.y&&e.flip?"-5px":"center"===e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"===e.anchor.y&&e.flip?"-5px":"center"!==e.anchor.y?"50%":"auto"}).style("margin-left",function(e){var t;return"center"===e.anchor.y?"auto":(t="right"===e.anchor.x?-e.width/2+e.arrow_offset/2:"left"===e.anchor.x?e.width/2-2*e.arrow_offset-5:-5,e.cx-e.width/2-5<t?(t=e.cx-e.width/2-5,t<2-e.width/2&&(t=2-e.width/2)):-(e.limit[0]-e.cx-e.width/2+5)>t&&(t=-(e.limit[0]-e.cx-e.width/2+5),t>e.width/2-11&&(t=e.width/2-11)),t+"px")}).style("margin-top",function(e){var t;return"center"!==e.anchor.y?"auto":(t="bottom"===e.anchor.y?-e.height/2+e.arrow_offset/2-1:"top"===e.anchor.y?e.height/2-2*e.arrow_offset-2:-9,e.cy-e.height/2-e.arrow_offset<t?(t=e.cy-e.height/2-e.arrow_offset,t<4-e.height/2&&(t=4-e.height/2)):-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t&&(t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset),t>e.height/2-22&&(t=e.height/2-22)),t+"px")})}},{"../client/scroll.js":41}],202:[function(e,t,n){t.exports=function(e){return e?(d3.selectAll("div#d3plus_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3plus_tooltip_id_"+e).remove()):(d3.selectAll("div.d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],203:[function(e,t,n){t.exports=function(e,t){var n,r;return n=[],r=1/(t-1)*(e[1]-e[0]),d3.range(e[0],e[1]+r,r)}},{}],204:[function(e,t,n){var r;r=e("./d3selection.coffee"),t.exports=function(e,t){var n;if(!e||!t)return!1;for(r(e)&&(e=e.node()),r(e)&&(t=t.node()),n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{"./d3selection.coffee":207}],205:[function(e,t,n){t.exports=function(e,t){var n,r;return t.constructor===String?(r=e.indexOf(t),r>-1?e[r]:e[0]):(n=e[0],e.forEach(function(e){return Math.abs(t-e)<Math.abs(t-n)?n=e:void 0}),n)}},{}],206:[function(e,t,n){var r,i,a;i=e("../object/merge.coffee"),a=e("../object/validate.coffee"),r=function(e){var t;return a(e)?i(e):e instanceof Array?(t=[],e.forEach(function(e){return t.push(r(e))}),t):e},t.exports=r},{"../object/merge.coffee":170,"../object/validate.coffee":171}],207:[function(e,t,n){var r;r=e("../client/ie.js"),t.exports=function(e){return r?"object"==typeof e&&e instanceof Array&&"size"in e&&"select"in e:e instanceof d3.selection}},{"../client/ie.js":37}],208:[function(e,t,n){t.exports=function(e,t){var n;n=new Image,n.src=e,n.crossOrigin="Anonymous",n.onload=function(){var e,n;e=document.createElement("canvas"),e.width=this.width,e.height=this.height,n=e.getContext("2d"),n.drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}},{}],209:[function(e,t,n){var r,i;r=e("../object/validate.coffee"),i=function(e,t,n,a,o,s){var l,u,c,d,f,h,p,g,m,v,y,x,b,w;if(void 0===e)return[];if(a&&void 0===o&&(o=a.id.value),s=!0===s&&void 0===s,e instanceof Array||(e=[e]),v=[],void 0===t)return e.reduce(function(e,t){var n;return n=JSON.stringify(t),v.indexOf(n)<0&&(e.indexOf(t)<0&&e.push(t),v.push(n)),e},[]);if(w=[],l=function(e){var t;return void 0!==e&&null!==e&&(t=JSON.stringify(e),v.indexOf(t)<0)?(w.push(e),v.push(t)):void 0},"function"==typeof n&&a)for(c=0,h=e.length;h>c;c++)for(u=e[c],b=i(n(a,u,t,o)),d=0,p=b.length;p>d;d++)x=b[d],l(x);else if("function"==typeof t)for(f=0,g=e.length;g>f;f++)u=e[f],b=t(u),l(b);else for(y=0,m=e.length;m>y;y++)u=e[y],r(u)&&(b=u[t],l(b));return s?w.sort(function(e,t){return e-t}):w},t.exports=i},{"../object/validate.coffee":171}],210:[function(e,t,n){t.exports=function(e){var t,n,r,i,a;for(e.container.value.style("position",function(){var e,t;return e=d3.select(this).style("position"),t=["absolute","fixed"].indexOf(e)>=0,t?e:"relative"}),e.container.changed&&e.container.value.html(""),i=["width","height"],n=0,r=i.length;r>n;n++)a=i[n],e[a].value||(t=function(n){var r,i;return void 0===n.tagName||["BODY","HTML"].indexOf(n.tagName)>=0?(i=window["inner"+a.charAt(0).toUpperCase()+a.slice(1)],r=document!==n?d3.select(n):!1,r&&("width"===a?(i-=parseFloat(r.style("margin-left"),10),i-=parseFloat(r.style("margin-right"),10),i-=parseFloat(r.style("padding-left"),10),i-=parseFloat(r.style("padding-right"),10)):(i-=parseFloat(r.style("margin-top"),10),i-=parseFloat(r.style("margin-bottom"),10),i-=parseFloat(r.style("padding-top"),10),i-=parseFloat(r.style("padding-bottom"),10))),e[a].value=20>=i?e[a].small:i):(i=parseFloat(d3.select(n).style(a),10),"number"==typeof i&&i>0?e[a].value=i:"BODY"!==n.tagName?t(n.parentNode):void 0)},t(e.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px")}},{}],211:[function(e,t,n){var r=e("../../core/data/format.js"),i=e("../../core/data/color.js"),a=e("../../core/data/keys.coffee"),o=e("../../core/data/load.coffee"),s=e("./ui/drawer.js"),l=e("./ui/legend.js"),u=e("./ui/timeline.coffee"),c=e("./errorCheck.js"),d=e("../../core/fetch/data.js"),f=e("./finish.js"),h=e("./focus/tooltip.coffee"),p=e("./ui/history.coffee"),g=e("../../core/parse/edges.js"),m=e("../../core/parse/nodes.js"),v=e("../../core/console/print.coffee"),y=e("../../tooltip/remove.coffee"),x=e("./types/run.coffee"),b=e("./shapes/draw.js"),w=e("../../string/format.js"),I=e("./svg/enter.js"),A=e("./svg/update.js"),C=e("./ui/titles.js"),_=e("../../object/validate.coffee");t.exports=function(e){var t=[],n=e.type.value,k=e.format.locale.value,M=k.message.ui,z=k.message.draw,N=["data","attrs","coords","nodes","edges"];if(N.forEach(function(n){e.error.value||e[n].loaded||!e[n].url||t.push({"function":function(e,t){o(e,n,t)},message:k.message.loading,wait:!0})}),e.draw.update){var S=k.visualization[n]||n,j=e.types[n].setup||!1,D=e.types[n].requirements||[],T=w(k.message.initializing,S),O=k.message.data;D instanceof Array||(D=[D]),S=S.toLowerCase(),e.error.value||"function"!=typeof j||t.push({"function":function(e){if(e.dev.value){var t="running "+S+" setup";v.time(t)}j(e),e.dev.value&&v.timeEnd(t)},message:T}),e.container.changed&&t.push({"function":I,message:T}),n in e.g.apps||t.push({"function":function(e){if(e.dev.value){var t="creating "+S+" group";v.time(t)}e.g.apps[n]=e.g.app.append("g").attr("id",n).attr("opacity",0),e.dev.value&&v.timeEnd(t)},message:T}),e.data.changed&&t.push({"function":function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,a(e,"data")},message:O}),e.attrs.changed&&t.push({"function":function(e){a(e,"attrs")},message:O}),t.push({"function":function(e){if(!e.color.type||e.color.changed||e.data.changed||e.attrs.changed||e.id.changed||e.depth.changed||e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed)){if(e.color.valueScale=!1,e.dev.value){var t="checking color type";v.time(t)}if(e.color.type=!1,e.color.value){var n=e.color.value;_(n)&&(n=n[e.id.value]?n[e.id.value]:n[d3.keys(n)[0]]),e.data.keys&&n in e.data.keys?e.color.type=e.data.keys[n]:e.attrs.keys&&n in e.attrs.keys&&(e.color.type=e.attrs.keys[n])}else e.data.keys&&(e.color.type=e.data.keys[e.id.value]);e.dev.value&&v.timeEnd(t)}},message:O}),D.indexOf("edges")>=0&&e.edges.value&&(!e.edges.linked||e.edges.changed)&&t.push({"function":g,message:O}),D.indexOf("nodes")>=0&&e.edges.value&&(!e.nodes.positions||e.nodes.changed||e.type.changed)&&t.push({"function":m,message:O}),(e.data.changed||e.time.changed||e.time.format.changed||e.id.changed||e.x.scale.changed&&[e.x.scale.value,e.x.scale.previous].indexOf("discrete")>=0||e.y.scale.changed&&[e.y.scale.value,e.y.scale.previous].indexOf("discrete")>=0)&&t.push({"function":r,message:O}),e.error.value||t.push({"function":function(e){var t=e.time.fixed.value?null:["all"];if(e.dev.value){var n=t?"fetching pool data":"fetching data";v.time(n)}e.data.pool=d(e,t),e.dev.value&&v.timeEnd(n),t?(e.dev.value&&v.time("fetching data for current year"),e.data.viz=d(e),e.dev.value&&v.timeEnd("fetching data for current year")):e.data.viz=e.data.pool,e.draw.timing=e.data.viz.length<e.data.large?e.timing.transitions:0},message:O}),e.error.value||t.push({check:function(e){return e.color.value&&"number"===e.color.type&&e.color.valueScale===!1},"function":i,message:O})}return t.push({"function":function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;v.time(t)}e.type.previous&&n!==e.type.previous&&y(e.type.previous),y(n),e.dev.value&&v.timeEnd(t)},message:M}),e.error.value||t.push({"function":c,message:M}),t.push({"function":function(e){if(e.margin.process(),C(e),!e.error.value)if(e.draw.update)s(e),u(e),l(e);else{e.dev.value&&v.time("calculating margins");var t=e.container.value.select("div#d3plus_drawer").node().offsetHeight||e.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,n=e.g.timeline.node().getBBox();n=e.timeline.value?n.height+e.ui.padding:0;var r=e.g.legend.node().getBBox();r=e.legend.value?r.height+e.ui.padding:0,e.margin.bottom+=t+n+r,e.dev.value&&v.timeEnd("calculating margins")}p(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:M}),e.error.value||t.push({"function":h,message:M}),t.push({"function":A,message:z}),!e.error.value&&e.draw.update&&t.push({"function":[x,b],message:z}),t.push({"function":f,message:z}),t}},{"../../core/console/print.coffee":52,"../../core/data/color.js":54,"../../core/data/format.js":56,"../../core/data/keys.coffee":58,"../../core/data/load.coffee":59,"../../core/fetch/data.js":64,"../../core/parse/edges.js":94,"../../core/parse/nodes.js":97,"../../object/validate.coffee":171,"../../string/format.js":172,"../../tooltip/remove.coffee":202,"./errorCheck.js":212,"./finish.js":213,"./focus/tooltip.coffee":214,"./shapes/draw.js":224,"./svg/enter.js":237,"./svg/update.js":238,"./types/run.coffee":241,"./ui/drawer.js":242,"./ui/history.coffee":243,"./ui/legend.js":244,"./ui/timeline.coffee":246,"./ui/titles.js":247}],212:[function(e,t,n){var r=e("../../core/fetch/text.js"),i=e("../../core/console/print.coffee"),a=e("../../core/methods/rejected.coffee"),o=e("../../string/format.js"),s=e("../../string/list.coffee");
t.exports=function(e){e.dev.value&&i.time("checking for errors");var t=["id"],n=e.types[e.type.value].requirements;n&&(n instanceof Array?t=t.concat(e.types[e.type.value].requirements):t.push(n));var l=[];if(t.forEach(function(t){if("string"==typeof t)e[t].value||l.push('"'+t+'"');else if("function"==typeof t){var n=t(e);!n.status&&n.text&&l.push('"'+n.text+'"')}}),l.length>1){var u=e.format.locale.value.error.methods,c=e.format.locale.value.visualization[e.type.value]||e.type.value,d=e.format.locale.value.ui.and;l=s(l,d),e.error.internal=o(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.method,c=e.format.locale.value.visualization[e.type.value]||e.type.value;e.error.internal=o(u,c,l[0])}if(!e.error.internal&&t.indexOf("edges")>=0&&t.indexOf("focus")>=0){var f=e.edges.connections(e.focus.value[0],e.id.value);if(0==f.length){var h=r(e,e.focus.value[0],e.depth.value),u=e.format.locale.value.error.connections;e.error.internal=o(u,'"'+h+'"')}}var t=["d3"];e.types[e.type.value].libs&&(t=t.concat(e.types[e.type.value].libs));var l=[];if(t.forEach(function(e){window[e]||l.push('"'+e+'"')}),l.length>1){var u=e.format.locale.value.error.libs,c=e.format.locale.value.visualization[e.type.value],d=e.format.locale.value.ui.and;l=s(l,d),e.error.internal=o(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.lib,c=e.format.locale.value.visualization[e.type.value];e.error.internal=o(u,c,l[0])}var p=e.shape.accepted(e);p instanceof Array||(p=[p]);var g=e.shape.value;if((!g||a(e,p,g,"shape"))&&e.self.shape(p[0]),"modes"in e.types[e.type.value]){var m=e.types[e.type.value].modes;m instanceof Array||(m=[m]);var v=e.type.mode.value;(!v||a(e,m,v,"mode"))&&e.self.type({mode:m[0]})}e.dev.value&&i.timeEnd("checking for errors")}},{"../../core/console/print.coffee":52,"../../core/fetch/text.js":66,"../../core/methods/rejected.coffee":90,"../../string/format.js":172,"../../string/list.coffee":173}],213:[function(e,t,n){var r=e("./shapes/edges.js"),i=e("./shapes/paths.js"),a=e("./ui/message.js"),o=e("./focus/viz.js"),s=e("../../core/methods/reset.coffee"),l=e("../../core/console/print.coffee"),u=e("./shapes/labels.js"),c=e("../../string/title.coffee"),d=e("./zoom/bounds.coffee"),f=e("./zoom/labels.coffee"),h=e("./zoom/mouse.coffee");t.exports=function(e){if(e.draw.first?setTimeout(function(){o(e)},e.draw.timing):o(e),!e.error.value){var t=e.zoom.viewport||e.zoom.bounds;e.types[e.type.value].zoom&&e.zoom.value&&t?(e.dev.value&&l.time("calculating zoom"),e.draw.first||e.zoom.reset?d(e,t,0):(e.type.changed||e.focus.changed||e.height.changed||e.width.changed||e.nodes.changed||e.legend.changed||e.timeline.changed||e.ui.changed)&&d(e,t),e.dev.value&&l.timeEnd("calculating zoom")):(e.zoom.bounds=[[0,0],[e.width.viz,e.height.viz]],e.zoom.scale=1,d(e))}var n=e.zoom.size?e.zoom.size.width:e.width.viz,p=e.zoom.size?e.zoom.size.height:e.height.viz,g=e.zoom.bounds?e.zoom.bounds[0][0]:0,m=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",n).attr("height",p).attr("x",g).attr("y",m),e.error.value||(e.draw.update?(e.edges.path?i(e):r(e),u(e,"data"),e.edges.label&&!e.edges.path&&setTimeout(function(){u(e,"edges")},e.draw.timing+200)):(e.labels.value||e.labels.changed)&&e.types[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){f(e)},e.draw.timing)),!e.error.value){var v=e.types[e.type.value].requirements||[];v instanceof Array||(v=[v]);var y=v.indexOf("data")>=0;e.error.internal||e.data.viz&&e.returned.nodes.length||!y||(e.error.internal=e.format.locale.value.error.data)}var x=e.type.previous;if(x&&e.type.value!=x&&e.g.apps[x]&&(e.dev.value&&l.time('hiding "'+x+'"'),e.draw.timing?e.g.apps[x].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[x].attr("opacity",0),e.dev.value&&l.timeEnd()),!e.error.value){var b=y&&0===e.data.viz.length||e.error.internal||e.error.value?0:e.focus.value.length&&e.types[e.type.value].zoom&&e.zoom.value?1-e.tooltip.curtain.opacity:1,w=e.draw.timing;e.group.transition().duration(w).attr("opacity",b),e.g.data.transition().duration(w).attr("opacity",b),e.g.edges.transition().duration(w).attr("opacity",b)}e.error.value?a(e,e.error.value):e.error.internal?(e.error.internal=c(e.error.internal),l.warning(e.error.internal),a(e,e.error.internal),e.error.internal=null):a(e),setTimeout(function(){s(e),e.types[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",h)),e.zoom.scroll.value||e.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||e.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):e.g.zoom.call(e.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},e.draw.timing)}},{"../../core/console/print.coffee":52,"../../core/methods/reset.coffee":92,"../../string/title.coffee":175,"./focus/viz.js":215,"./shapes/edges.js":225,"./shapes/labels.js":227,"./shapes/paths.js":229,"./ui/message.js":245,"./zoom/bounds.coffee":248,"./zoom/labels.coffee":250,"./zoom/mouse.coffee":251}],214:[function(e,t,n){var r,i,a,o;r=e("../tooltip/create.js"),i=e("../../../core/fetch/value.coffee"),a=e("../../../core/console/print.coffee"),o=e("../../../tooltip/remove.coffee"),t.exports=function(e){var t,n,s;n=e.focus,!e.error.internal&&1===n.value.length&&n.value.length&&!e.small&&n.tooltip.value?(e.dev.value&&a.time("drawing focus tooltip"),t=e.data.pool.filter(function(t){return i(e,t,e.id.value)===n.value[0]}),t.length>=1?t=t[0]:(t={},t[e.id.value]=n.value[0]),s=e.labels.padding,r({anchor:"top left",arrow:!1,data:t,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:e.height.viz-2*s,mouseevents:!0,offset:0,vars:e,width:e.tooltip.large,x:e.width.value-e.margin.right-s,y:e.margin.top+s}),e.width.viz-=e.tooltip.large+2*s,e.dev.value&&a.timeEnd("drawing focus tooltip")):o("visualization_focus")}},{"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../tooltip/remove.coffee":202,"../tooltip/create.js":239}],215:[function(t,n,r){var i=t("../../../client/pointer.coffee"),a=t("../../../client/ie.js"),o=t("../../../core/fetch/value.coffee"),s=t("../../../core/console/print.coffee"),l=t("../../../util/uniques.coffee");n.exports=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value){t.dev.value&&s.time("drawing focus elements");var n=t.g.edges.selectAll("g");if(n.size()>0){n.each(function(e){var n=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];if(n==t.focus.value[0]||r==t.focus.value[0]){var i=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(i).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return a&&t.types[t.type.value].zoom?0:t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var i="_"+e.d3plus.bucket;else var i="";return"source"==n&&r?"url(#d3plus_edge_marker_focus"+i+")":"none"}).attr("marker-end",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var i="_"+e.d3plus.bucket;else var i="";return"target"==n&&r?"url(#d3plus_edge_marker_focus"+i+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var u=l(t.edges.connections(t.focus.value[0],t.id.value,!0),t.id.value,o,t);u.push(t.focus.value[0]);var c=[],d=[],f=[0],h=[0];if(t.g.data.selectAll("g").each(function(n){if(u.indexOf(n[t.id.value])>=0){var r=t.g.data_focus.node().appendChild(this.cloneNode(!0)),r=d3.select(r).datum(n).attr("opacity",1);"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[n.d3plus.id]):"d3plus"in n&&("x"in n.d3plus&&c.push(n.d3plus.x),"y"in n.d3plus&&d.push(n.d3plus.y),"r"in n.d3plus?(f.push(n.d3plus.r),h.push(n.d3plus.r)):("width"in n.d3plus&&f.push(n.d3plus.width/2),"height"in n.d3plus&&h.push(n.d3plus.height/2)));for(e in i){var a=d3.select(this).on(i[e]);a&&r.on(i[e],a)}}}),c.length&&d.length){var p=d3.extent(c),g=d3.extent(d),m=d3.max(f),v=d3.max(h);t.zoom.viewport=[[p[0]-m,g[0]-v],[p[1]+m,g[1]+v]]}t.g.data_focus.selectAll("path").style("stroke-width",a&&t.types[t.type.value].zoom?0:2*t.data.stroke.width),t.dev.value&&s.timeEnd("drawing focus elements")}else t.zoom.viewport=!1}},{"../../../client/ie.js":37,"../../../client/pointer.coffee":38,"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../util/uniques.coffee":209}],216:[function(e,t,n){var r,i,a,o;o=e("./style.coffee"),i=e("../../../geom/largestRect.coffee"),a=e("../../../geom/path2poly.coffee"),r={start:{},end:{}},t.exports=function(e,t,n,s){var l,u,c,d;l=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return e.d3plus.startAngle}).endAngle(function(e){return e.d3plus.endAngle}),c=function(t){var n,r;return e.labels.value&&(t.d3plus.label?t.d3plus_label=t.d3plus.label:(n=a(l(t)),r=i(n,{angle:0}),r[0]?t.d3plus_label={w:r[0].width,h:r[0].height,x:r[0].cx,y:r[0].cy}:delete t.d3plus_label)),[t]},e.draw.timing?(d=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return void 0===r.start[e.d3plus.id]&&(r.start[e.d3plus.id]=0),isNaN(r.start[e.d3plus.id])&&(r.start[e.d3plus.id]=e.d3plus.startAngle),r.start[e.d3plus.id]}).endAngle(function(e){return void 0===r.end[e.d3plus.id]&&(r.end[e.d3plus.id]=0),isNaN(r.end[e.d3plus.id])&&(r.end[e.d3plus.id]=e.d3plus.endAngle),r.end[e.d3plus.id]}),u=function(e,t){return e.attrTween("d",function(e){var n,i,a,o;return void 0===t?(o=e.d3plus.startAngle,n=e.d3plus.endAngle):0===t&&(o=0,n=0),a=d3.interpolate(r.start[e.d3plus.id],o),i=d3.interpolate(r.end[e.d3plus.id],n),function(t){return r.start[e.d3plus.id]=a(t),r.end[e.d3plus.id]=i(t),d(e)}})},n.append("path").attr("class","d3plus_data").call(o,e).attr("d",d),t.selectAll("path.d3plus_data").data(c).transition().duration(e.draw.timing).call(o,e).call(u),s.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(u,0)):(n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(c).call(o,e).attr("d",l))}},{"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"./style.coffee":233}],217:[function(e,t,n){var r=e("../../../core/fetch/text.js"),i=e("../../../font/sizes.coffee"),a=e("../../../geom/largestRect.coffee"),o=e("./style.coffee");t.exports=function(e,t,n,s){var l=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),u=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y0}).interpolate(e.shape.interpolate.value);n.append("path").attr("class","d3plus_data").attr("d",function(e){return u(e.values)}).call(o,e);var c={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value};t.selectAll("path.d3plus_data").data(function(t){if(e.labels.value&&t.values.length>1){var n=d3.max(t.values,function(e){return e.d3plus.y0-e.d3plus.y}),o=!1;if(n>e.labels.font.size){var s=[],l=[],u=r(e,t);t.values.forEach(function(e){s.push([e.d3plus.x,e.d3plus.y]),l.push([e.d3plus.x,e.d3plus.y0])}),s=s.concat(l.reverse());var d=null;if(u.length){var f=i(u[0],c);d=f[0].width/f[0].height}o=a(s,{angle:d3.range(-70,71,1),aspectRatio:d,tolerance:0})}if(o&&o[0]){var h={w:~~o[0].width,h:~~o[0].height,x:~~o[0].cx,y:~~o[0].cy,angle:-1*o[0].angle,padding:2,names:u};0!==o[0].angle?h.translate={x:h.x,y:h.y}:h.translate=!1,h.w>=10&&h.h>=10&&(t.d3plus_label=h)}}return[t]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).attr("d",function(e){return l(e.values)}).call(o,e):t.selectAll("path.d3plus_data").attr("d",function(e){return l(e.values)}).call(o,e)}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"./style.coffee":233}],218:[function(e,t,n){var r=(e("../../../core/fetch/text.js"),e("../../../geom/largestRect.coffee"),e("./style.coffee"));t.exports=function(e,t,n,i){function a(e){e.attr("transform","scale(1)")}function o(e){e.attr("transform",function(e){var t=Math.min(e.d3plus.width,e.d3plus.height),n=Math.floor(t/16);return"scale("+n+")"})}n.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(a).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(o).call(r,e):t.selectAll("path.d3plus_data").call(o).call(r,e)}},{"../../../core/fetch/text.js":66,"../../../geom/largestRect.coffee":159,"./style.coffee":233}],219:[function(e,t,n){var r,i,a,o;i=e("../../../core/fetch/value.coffee"),r=e("../../../core/fetch/color.coffee"),a=e("../../../color/lighter.coffee"),o=e("./segments.coffee"),t.exports=function(e,t,n){var i,s,l,u;return s=e.d3plus.shape||t.shape.value,"line"===t.shape.value&&"circle"!==s?"none":"area"===t.shape.value||"active"===s||"line"===t.shape.value?r(t,e):"temp"===s?n?r(t,e):"url(#d3plus_hatch_"+e.d3plus.id+")":e.d3plus["static"]?a(r(t,e),.75):(i=o(t,e,"active"),l=o(t,e,"temp"),u=o(t,e,"total"),!t.active.value&&!t.temp.value||i===!0||i&&u&&i>=u&&!l||i&&!u?r(t,e):t.active.spotlight.value?t.color.missing:a(r(t,e),.75))}},{"../../../color/lighter.coffee":45,"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"./segments.coffee":232}],220:[function(e,t,n){var r,i,a,o,s,l,u,c;r=e("../../../util/copy.coffee"),i=e("../../../network/distance.coffee"),a=e("../../../core/fetch/text.js"),o=e("../../../font/sizes.coffee"),l=e("../../../geom/largestRect.coffee"),u=e("../../../geom/path2poly.coffee"),c=e("./style.coffee"),s={},t.exports=function(e,t,n,d){var f,h;return f=d3.geo[e.coords.projection.value](),f.center&&f.center(e.coords.center),e.zoom.scale||(e.zoom.scale=1),e.zoom.area=1/e.zoom.scale/e.zoom.scale,e.path=d3.geo.path().projection(f),e.draw.timing?t.selectAll("path.d3plus_data").attr("d",e.path).transition().duration(e.draw.timing).call(c,e):t.selectAll("path.d3plus_data").attr("d",e.path).call(c,e),n.append("path").attr("id",function(e){return e.id}).attr("class","d3plus_data").attr("d",e.path).call(c,e),h=e.old_height!==e.height.viz||e.height.changed||e.old_width!==e.width.viz||e.width.changed,e.old_height=e.height.viz,e.old_width=e.width.viz,e.coords.changed||h||e.coords.mute.changed||e.coords.solo.changed||e.type.changed||e.text.changed||e.coords.projection.changed||e.labels.changed?(e.zoom.bounds=null,e.zoom.reset=!0,e.zoom.coords={},t.each(function(t){var n,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N;if(e.coords.simplify.value&&t.geometry.coordinates.length>1){for(v=[],c=[],n=0,b=r(t),k=r(t),t.geometry.coordinates=t.geometry.coordinates.filter(function(t,r){var i;return k.geometry.coordinates=[t],i=e.path.area(k),i>0?(c.push(i),i>n&&(b.geometry.coordinates=[t],n=i),!0):!1}),h=e.path.centroid(b),M=t.geometry.coordinates,y=x=0,w=M.length;w>x;y=++x)f=M[y],k.geometry.coordinates=[f],v.push(i(e.path.centroid(k),h));m=v.reduce(function(e,t,n){return t&&e.push(c[n]/t),e},[]),g=d3.quantile(m,e.coords.threshold.value),k.geometry.coordinates=t.geometry.coordinates.filter(function(e,t){var n,r;return r=v[t],n=c[t],0===r||n/r>=g}),p=b.geometry.coordinates[0],p&&"MultiPolygon"===b.geometry.type&&(p=p[0],b.geometry.coordinates[0]=p,b.geometry.type="Polygon")}else k=t,b=t,p=t.geometry.coordinates[0];return e.zoom.coords[t.d3plus.id]=k,delete t.d3plus_label,e.labels.value&&(I=a(e,t),p&&I.length&&(A=u(e.path(b)),N={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value},C=null,1===I[0].split(" ").length&&(z=o(I[0],N)[0],C=z.width/z.height),_=l(A,{angle:0,aspectRatio:C}),_&&(_=_[0],t.d3plus_label={anchor:"middle",valign:"center",h:_.height,w:_.width,x:_.cx,y:_.cy,names:I}))),s[t.id]=t.d3plus_label,d=e.path.bounds(k),e.zoom.bounds?(e.zoom.bounds[0][0]>d[0][0]&&(e.zoom.bounds[0][0]=d[0][0]),e.zoom.bounds[0][1]>d[0][1]&&(e.zoom.bounds[0][1]=d[0][1]),e.zoom.bounds[1][0]<d[1][0]&&(e.zoom.bounds[1][0]=d[1][0]),e.zoom.bounds[1][1]<d[1][1]?e.zoom.bounds[1][1]=d[1][1]:void 0):e.zoom.bounds=d})):e.focus.value.length?void 0:(e.zoom.viewport=!1,t.each(function(e){return e.d3plus_label=s[e.id]}))}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"../../../network/distance.coffee":164,"../../../util/copy.coffee":206,"./style.coffee":233}],221:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.svg.symbol().type("cross").size(10))}function o(e){e.attr("d",d3.svg.symbol().type("cross").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(a).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(o).call(r,e):t.selectAll("path.d3plus_data").call(o).call(r,e)}},{"./style.coffee":233}],222:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.svg.symbol().type("diamond").size(10))}function o(e){e.attr("d",d3.svg.symbol().type("diamond").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(a).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(o).call(r,e):t.selectAll("path.d3plus_data").call(o).call(r,e)}},{"./style.coffee":233}],223:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function a(t,n,r,i){if(!n)var n=0;if("number"!=typeof r)var r=void 0;if("number"!=typeof i)var i=void 0;t.attrTween("d",function(t){if(void 0==r)var a=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var a=r;if(void 0==i)var o=t.d3plus.segments[t.d3plus.shape];else var o=i;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a=2*Math.PI);var l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,a+n),u=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,o);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=l(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=u(n),s(t)}})}function o(e){return e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var s=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"])return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){return e.arcs[t.d3plus.shape][t.d3plus.id].r});e.draw.timing?(i.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a,0,0).each("end",function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),t.selectAll("path.d3plus_data").data(o).transition().duration(e.draw.timing).call(a).call(r,e),n.append("path").attr("class","d3plus_data").transition().duration(0).call(a,0,0).call(r,e).transition().duration(e.draw.timing).call(a).call(r,e)):(i.selectAll("path.d3plus_data").each(function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(o).call(a).call(r,e))}},{"./style.coffee":233}],224:[function(e,t,n){var r=e("../../../util/child.coffee"),i=e("../../../util/closest.coffee"),a=e("../tooltip/create.js"),o=e("../../../client/pointer.coffee"),s=e("../../../core/fetch/value.coffee"),l=e("../../../core/fetch/color.coffee"),u=e("../../../core/fetch/text.js"),c=e("../../../color/legible.coffee"),d=e("../../../core/console/print.coffee"),f=e("../../../tooltip/remove.coffee"),h=e("./segments.coffee"),p=e("./fill.js"),g=e("../../../string/strip.js"),m=e("../../../client/touch.coffee"),v=e("../zoom/propagation.coffee"),y=e("../../../util/uniques.coffee"),x=e("../../../object/validate.coffee"),b=e("../zoom/direction.coffee"),w={arc:e("./arc.coffee"),area:e("./area.js"),check:e("./check.js"),coordinates:e("./coordinates.coffee"),cross:e("./cross.js"),diamond:e("./diamond.js"),donut:e("./donut.js"),line:e("./line.js"),radial:e("./radial.coffee"),rect:e("./rect.coffee"),triangle_down:e("./triangle_down.js"),triangle_up:e("./triangle_up.js"),whisker:e("./whisker.coffee")};t.exports=function(e){function t(t){if(!t.d3plus.id){t.d3plus.id="";for(var n=0;n<=e.depth.value;n++)t.d3plus.id+=s(e,t,e.id.nesting[n])+"_";t.d3plus.id+=S,["x","y","x2","y2"].forEach(function(n){if("discrete"==e[n].scale.value){var r=s(e,t,e[n].value);r.constructor===Date&&(r=r.getTime()),t.d3plus.id+="_"+r}}),t.d3plus.suffix&&(t.d3plus.id+="_"+t.d3plus.suffix),t.d3plus.id=g(t.d3plus.id)}return t}function n(t,n){var r=e.types[e.type.value].scale,i=1;r&&(x[r]&&e.shape.value in r?i=r[e.shape.value]:"function"==typeof r?i=r(e,e.shape.value):"number"==typeof r&&(i=r)),i=n?i:1,t.attr("transform",function(e){if(["line","area","coordinates"].indexOf(S)<0){var t=e.d3plus.x||0,n=e.d3plus.y||0;return"translate("+t+","+n+")scale("+i+")"}return"scale("+i+")"})}function I(t){t.attr("class",function(t){var n=e["class"].value?" "+s(e,t,e["class"].value):"";return"d3plus_"+S+n})}function A(t){if(t&&e.g.edges.selectAll("g").size()>0){e.g.edge_hover.selectAll("*").remove(),e.g.edges.selectAll("g").each(function(n){var r=t[e.id.value],i=n[e.edges.source][e.id.value],a=n[e.edges.target][e.id.value];if(i==r||i=="left_"+r||i=="right_"+r||a==r||a=="left_"+r||a=="right_"+r){var o=e.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(o).datum(n).attr("opacity",1).selectAll("line, path").datum(n)}});var n=e.edges.arrows.value;e.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",e.color.primary).style("stroke-width",function(t){return e.edges.path&&t.dy?Math.max(1,t.dy):e.edges.size.value?d3.select(this).style("stroke-width"):2*e.data.stroke.width}).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"source"==r&&n?"url(#d3plus_edge_marker_highlight"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"target"==r&&n?"url(#d3plus_edge_marker_highlight"+i+")":"none"}),e.g.edge_hover.selectAll("text").style("fill",e.color.primary),e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",1),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",.5)):e.g.edge_hover.attr("opacity",1)}else e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",1)):e.g.edge_hover.selectAll("*").remove()}var C=e.returned.nodes||[],_=e.returned.edges||[];e.draw.timing=C.length<e.data.large&&_.length<e.edges.large?e.timing.transitions:0;var k={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},M={};C.forEach(function(t){var n=t.d3plus&&t.d3plus.shape?t.d3plus.shape:e.shape.value;n in k&&(t.d3plus&&(t.d3plus.shape=n),n=k[n],M[n]||(M[n]=[]),M[n].push(t))});for(var z in k)if(!(k[z]in M)||0===d3.keys(M).length){var N=e.g.data.selectAll("g.d3plus_"+k[z]);e.draw.timing?N.transition().duration(e.draw.timing).attr("opacity",0).remove():N.remove()}for(var S in M){var j=e.g.data.selectAll("g.d3plus_"+S).data(M[S],function(n){if(n.d3plus||(n.d3plus={}),"coordinates"===S)return n.d3plus.id=n.id,n.id;if(!n.d3plus.id)if(n.values)n.values.forEach(function(e){e=t(e),e.d3plus.shape="circle"}),n.d3plus.id=n.key;else if(n=t(n),!n.d3plus.segments){n.d3plus.segments={donut:2*Math.PI};var r=h(e,n,"active"),i=h(e,n,"temp"),a=h(e,n,"total");a&&(r?n.d3plus.segments.active=r/a*(2*Math.PI):n.d3plus.segments.active=0,i?n.d3plus.segments.temp=i/a*(2*Math.PI)+n.d3plus.segments.active:n.d3plus.segments.temp=0)}return n.d3plus?n.d3plus.id:!1});if(e.draw.timing)var D=j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();else var D=j.exit().remove();e.draw.timing?j.transition().duration(e.draw.timing).call(n).call(I):j.call(n).call(I);var T=e.draw.timing?0:1,O=j.enter().append("g").attr("opacity",T).call(n).call(I);e.draw.timing&&O.transition().duration(e.draw.timing).attr("opacity",1),j.order(),e.dev.value&&d.time('drawing "'+S+'" shapes'),w[S](e,j,O,D,n),e.dev.value&&d.timeEnd('drawing "'+S+'" shapes'),["rect","donut"].indexOf(S)>=0&&e.types[e.type.value].fill&&(e.dev.value&&d.time('filling "'+S+'" shapes'),p(e,j,O,D,n),e.dev.value&&d.timeEnd('filling "'+S+'" shapes'))}if(A(),e.tooltip.value)e.g.data.selectAll("g").on(o.over,function(t){if(m&&v(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.over.value||e.draw.frozen||t.d3plus&&t.d3plus["static"])f(e.type.value);else if("function"==typeof e.mouse.over.value)e.mouse.over.value(t,e.self);else{var r=b(t.d3plus_data||t,e),s="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[o.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3plus.threshold&&t.d3plus.merged||1===r||-1===r&&e.history.states.length&&!e.tooltip.value["long"]);if(d3.select(this).style("cursor",s?"pointer":"auto").transition().duration(e.timing.mouseevents).call(n,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",1),e.covered=!1,t.values&&e.axes.discrete){var l="x"===e.axes.discrete?0:1,u=d3.mouse(e.container.value.node())[l],c=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),d=i(c,u);t.d3plus_data=t.values[c.indexOf(d)],t.d3plus=t.values[c.indexOf(d)].d3plus}var h=t.d3plus_data?t.d3plus_data:t;a({vars:e,data:h}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[o.over]&&e.mouse.viz[o.over](t.d3plus_data||t,e),A(t)}}).on(o.move,function(t){if(m&&v(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.move.value||e.draw.frozen||t.d3plus&&t.d3plus["static"])f(e.type.value);else if("function"==typeof e.mouse.move.value)e.mouse.move.value(t,e.self);else{var n=b(t.d3plus_data||t,e),r="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[o.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3plus.threshold&&t.d3plus.merged||1===n||-1===n&&e.history.states.length&&!e.tooltip.value["long"]);if(d3.select(this).style("cursor",r?"pointer":"auto"),e.types[e.type.value].tooltip||"follow",t.values&&e.axes.discrete){var s="x"===e.axes.discrete?0:1,l=d3.mouse(e.container.value.node())[s],u=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),c=i(u,l);t.d3plus_data=t.values[u.indexOf(c)],t.d3plus=t.values[u.indexOf(c)].d3plus}var d=t.d3plus_data?t.d3plus_data:t;a({vars:e,data:d}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[o.move]&&e.mouse.viz[o.move](t.d3plus_data||t,e)}}).on(o.out,function(t){if(m&&v(e,d3.event),!d3.event.buttons&&e.mouse.value&&e.mouse.out.value)if("function"==typeof e.mouse.out.value)e.mouse.out.value(t,e.self);else{var i=r(this,d3.event.toElement);i||e.draw.frozen||t.d3plus&&t.d3plus["static"]||(d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),e.covered||f(e.type.value),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[o.out]&&e.mouse.viz[o.out](t.d3plus_data||t,e),A())}else f(e.type.value)});else{var L=function(){v(e,d3.event)};e.g.data.selectAll("g").on(o.over,L).on(o.move,L).on(o.out,L)}d3.select(window).on("scroll.d3plus",function(){f(e.type.value)}),e.g.data.selectAll("g").on(o.click,function(t){if((!e.mouse.viz||e.mouse.viz.click!==!1)&&e.mouse.value&&e.mouse.click.value&&!d3.event.defaultPrevented&&!e.draw.frozen&&(!t.d3plus||!t.d3plus["static"]))if("function"==typeof e.mouse.click.value)e.mouse.click.value(t,e.self);else{if(t.values&&e.axes.discrete){var r="x"===e.axes.discrete?0:1,d=d3.mouse(e.container.value.node())[r],h=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),p=i(h,d);t.d3plus_data=t.values[h.indexOf(p)],t.d3plus=t.values[h.indexOf(p)].d3plus}"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[o.out]?e.mouse.viz[o.out](t.d3plus_data||t,e):e.mouse.viz[o.click]&&e.mouse.viz[o.click](t.d3plus_data||t,e);var g=b(t.d3plus_data||t,e),m=e.id.solo.value,v=u(e,t)[0],x=c(l(e,t)),w=e.title.sub.value||!1,I=e.title.sub.font.color,C=e.title.total.font.color;if(t.d3plus.threshold&&t.d3plus.merged&&e.zoom.value)e.history.states.push(function(){e.self.id({solo:m}).title({sub:{font:{color:I},value:w},total:{font:{color:C}}}).draw()}),e.self.id({solo:m.concat(y(t.d3plus.merged,e.id.value,s,e))}).title({sub:{font:{color:x},value:v},total:{font:{color:x}}}).draw();else if(1===g&&e.zoom.value){var _=s(e,t.d3plus_data||t,e.id.value);e.history.states.push(function(){e.self.depth(e.depth.value-1).id({solo:m}).title({sub:{font:{color:I},value:w},total:{font:{color:C}}}).draw()}),e.self.depth(e.depth.value+1).id({solo:m.concat(_)}).title({sub:{font:{color:x},value:v},total:{font:{color:x}}}).draw()}else if(-1===g&&e.zoom.value&&e.history.states.length&&!e.tooltip.value["long"])e.history.back();else if(e.types[e.type.value].zoom&&e.zoom.value)A(),d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),f(e.type.value),e.draw.update=!1,t&&t[e.id.value]!=e.focus.value[0]?e.self.focus(t[e.id.value]).draw():e.self.focus(!1).draw();else if(e.types[e.type.value].requirements.indexOf("focus")<0){A();var k=t.d3plus_data?t.d3plus_data:t;a({vars:e,data:k})}}})}},{"../../../client/pointer.coffee":38,"../../../client/touch.coffee":43,"../../../color/legible.coffee":44,"../../../core/console/print.coffee":52,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,"../../../string/strip.js":174,"../../../tooltip/remove.coffee":202,"../../../util/child.coffee":204,"../../../util/closest.coffee":205,"../../../util/uniques.coffee":209,"../tooltip/create.js":239,"../zoom/direction.coffee":249,"../zoom/propagation.coffee":252,"./arc.coffee":216,"./area.js":217,"./check.js":218,"./coordinates.coffee":220,"./cross.js":221,"./diamond.js":222,"./donut.js":223,"./fill.js":226,"./line.js":228,"./radial.coffee":230,"./rect.coffee":231,"./segments.coffee":232,"./triangle_down.js":234,"./triangle_up.js":235,"./whisker.coffee":236}],225:[function(e,t,n){var r=e("../../../util/buckets.coffee"),i=e("../../../geom/offset.coffee");t.exports=function(e){function t(t){t.attr("opacity",0).style("stroke-width",0).style("stroke",e.background.value).style("fill","none")}function n(t){var n=e.edges.arrows.value;t.attr("opacity",function(t){return"number"===p?h:"function"===p?h(t,e):e.edges.opacity.scale.value(t[h])}).style("stroke-width",function(t){return e.edges.scale(t[e.edges.size.value])}).style("stroke",e.edges.color).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"source"==r&&n?"url(#d3plus_edge_marker_default"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"target"==r&&n?"url(#d3plus_edge_marker_default"+i+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function a(t){t.attr("x1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].x}).attr("y1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].y}).attr("x2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].x}).attr("y2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].y;
})}function o(e){e.attr("d",function(e){return g(e.d3plus.spline)})}function s(t){if(delete t.d3plus_label,e.g.edges.selectAll("line, path").size()<e.edges.large&&e.edges.label&&t[e.edges.label]){if("spline"in t.d3plus)var n=this.getTotalLength(),r=this.getPointAtLength(n/2),i=this.getPointAtLength(n/2-.1*n),a=this.getPointAtLength(n/2+.1*n),o=Math.atan2(a.y-i.y,a.x-i.x),s=o*(180/Math.PI),l=(this.parentNode.getBBox(),.8*n),u=r.x,c=r.y;else var d=(this.getBBox(),t[e.edges.source]),f=t[e.edges.target],h={x:d.d3plus.edges[f[e.id.value]].x,y:d.d3plus.edges[f[e.id.value]].y},p={x:f.d3plus.edges[d[e.id.value]].x,y:f.d3plus.edges[d[e.id.value]].y},g=p.x-h.x,m=p.y-h.y,r={x:p.x-g/2,y:p.y-m/2},o=Math.atan2(m,g),s=o*(180/Math.PI),n=Math.sqrt(g*g+m*m),l=n,u=r.x,c=r.y;l+=2*e.labels.padding;var v=0;e.edges.arrows.value&&(v="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,v/=e.zoom.behavior.scaleExtent()[1],l-=2*v),(-90>s||s>90)&&(s-=180),l*e.zoom.behavior.scaleExtent()[0]>20&&(t.d3plus_label={x:u,y:c,translate:{x:u,y:c},w:l,h:15+2*e.labels.padding,angle:s,anchor:"middle",valign:"center",color:e.edges.color,resize:!1,names:[e.format.value(t[e.edges.label])],background:1})}}var l=e.returned.edges||[],u=e.zoom.behavior.scaleExtent()[0];if("string"==typeof e.edges.size.value){var c=d3.extent(l,function(t){return t[e.edges.size.value]}),d=d3.min(e.returned.nodes||[],function(e){return e.d3plus.r})*(2*e.edges.size.scale);e.edges.scale=d3.scale.sqrt().domain(c).range([e.edges.size.min,d*u])}else{var f="number"==typeof e.edges.size.value?e.edges.size.value:e.edges.size.min;e.edges.scale=function(){return f}}var h=e.edges.opacity.value,p=typeof h;e.edges.opacity.changed&&"string"===p&&e.edges.opacity.scale.value.domain(d3.extent(l,function(e){return e[h]})).range([e.edges.opacity.min.value,1]);var g=d3.svg.line().interpolate(e.edges.interpolate.value),m=e.edges.arrows.value?"string"==typeof e.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof e.edges.size.value)for(var v=r(e.edges.scale.range(),4),y=[],x=0;3>x;x++)y.push(v[x+1]+(v[1]-v[0])*(x+2)*2);else var b="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,y="number"==typeof e.edges.size.value?e.edges.size.value/b:b;var w=e.defs.selectAll(".d3plus_edge_marker").data(m,String),I=function(t){t.attr("d",function(t){var n=t.split("_");if(2==n.length&&e.edges.scale){n=parseInt(n[1]);var r=y[n]}else var r=y;return"target"==e.edges.arrows.direction.value?"M 0,-"+r/2+" L "+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2:"M 0,-"+r/2+" L -"+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2}).attr("fill",function(t){var n=t.split("_")[0];return"default"==n?e.edges.color:"focus"==n?e.color.focus:e.color.primary}).attr("transform","scale("+1/u+")")};e.draw.timing?(w.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),w.select("path").transition().duration(e.draw.timing).attr("opacity",1).call(I)):(w.exit().remove(),w.select("path").attr("opacity",1).call(I));var A=e.draw.timing?0:1,C=w.enter().append("marker").attr("id",function(e){return"d3plus_edge_marker_"+e}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",A).attr("vector-effect","non-scaling-stroke").call(I);e.draw.timing&&C.transition().duration(e.draw.timing).attr("opacity",1);var _="string"==typeof e.edges.size.value?r(e.edges.scale.domain(),4):null,k=e.edges.arrows.direction.value,M=l.filter(function(t){if(t.d3plus||(t.d3plus={}),t.d3plus.id="edge_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.spline!==!0){if(_){var n=t[e.edges.size.value];t.d3plus.bucket=n<_[1]?0:n<_[2]?1:2;var r=.85*y[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*y/u}var a=t[e.edges.source],o=t[e.edges.target];if(!a.d3plus||!o.d3plus)return!1;var s=Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x),l=Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x),c="source"==k&&e.edges.arrows.value?a.d3plus.r+r:a.d3plus.r,d="target"==k&&e.edges.arrows.value?o.d3plus.r+r:o.d3plus.r,f=i(s,c,e.shape.value),h=i(l,d,e.shape.value);return"edges"in a.d3plus||(a.d3plus.edges={}),a.d3plus.edges[o[e.id.value]]={x:a.d3plus.x-f.x,y:a.d3plus.y-f.y},"edges"in o.d3plus||(o.d3plus.edges={}),o.d3plus.edges[a[e.id.value]]={x:o.d3plus.x-h.x,y:o.d3plus.y-h.y},!0}return!1}),z=e.g.edges.selectAll("g.d3plus_edge_line").data(M,function(e){return e.d3plus.id}),N=l.filter(function(t){if(t.d3plus.spline){if(_){var n=t[e.edges.size.value];t.d3plus.bucket=n<_[1]?0:n<_[2]?1:2;var r=.85*y[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*y/u}var a=t[e.edges.source],o=t[e.edges.target],s=a.d3plus.edges?a.d3plus.edges[o[e.id.value]]||{}:{},l=o.d3plus.edges?o.d3plus.edges[a[e.id.value]]||{}:{},c=e.edges.arrows.value&&"source"==k?r:0,d=e.edges.arrows.value&&"target"==k?r:0,f=.1,h=a.d3plus.x>o.d3plus.x?1-f:1+f,p=a.d3plus.x>o.d3plus.x?1+f:1-f,g="number"==typeof s.angle?s.angle:Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x)*h,m=i(g,a.d3plus.r+c,e.shape.value),v="number"==typeof l.angle?l.angle:Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x)*p,x=i(v,o.d3plus.r+d,e.shape.value),b=[a.d3plus.x-m.x,a.d3plus.y-m.y],w=s.offset?i(g,s.offset):!1,I=w?[b[0]-w.x,b[1]-w.y]:b,A=[o.d3plus.x-x.x,o.d3plus.y-x.y],C=l.offset?i(v,l.offset):!1,M=C?[A[0]-C.x,A[1]-C.y]:A,z=M[0]-I[0],N=M[1]-I[1],S="number"==typeof s.radius?s.radius:Math.sqrt(z*z+N*N)/4,j="number"==typeof l.radius?l.radius:Math.sqrt(z*z+N*N)/4,D=i(g,S-a.d3plus.r-2*c),T=i(v,j-o.d3plus.r-2*d);t.d3plus.spline=[b,A];var O=Math.abs(Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x)).toFixed(5),L=Math.abs(g).toFixed(5),E=Math.abs(v-Math.PI).toFixed(5);return(L!==E||[L,E].indexOf(O)<0)&&(t.d3plus.spline.splice(1,0,[I[0]-D.x,I[1]-D.y],[M[0]-T.x,M[1]-T.y]),w&&t.d3plus.spline.splice(1,0,I),C&&t.d3plus.spline.splice(t.d3plus.spline.length-1,0,M)),!0}return!1}),S=e.g.edges.selectAll("g.d3plus_edge_path").data(N,function(e){return e.d3plus.id});e.draw.timing?(z.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),S.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),z.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),S.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),z.selectAll("line").data(function(e){return[e]}).transition().duration(e.draw.timing).call(a).call(n).each("end",s),S.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(o).call(n).each("end",s),z.enter().append("g").attr("class","d3plus_edge_line").append("line").call(a).call(t).transition().duration(e.draw.timing).call(n).each("end",s),S.enter().append("g").attr("class","d3plus_edge_path").append("path").call(o).call(t).transition().duration(e.draw.timing).call(n).each("end",s)):(z.exit().remove(),S.exit().remove(),z.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),S.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),z.selectAll("line").data(function(e){return[e]}).call(a).call(n).call(s),S.selectAll("path").data(function(e){return[e]}).call(o).call(n).call(s),z.enter().append("g").attr("class","d3plus_edge_line").append("line").call(a).call(t).call(n).call(s),S.enter().append("g").attr("class","d3plus_edge_path").append("path").call(o).call(t).call(n).call(s))}},{"../../../geom/offset.coffee":160,"../../../util/buckets.coffee":203}],226:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../core/fetch/color.coffee"),a=(e("../../../core/fetch/value.coffee"),e("./segments.coffee")),o=e("./style.coffee");t.exports=function(e,t,n,s){function l(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function u(t,n){n||(n=0),t.attr("x",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return-t/2-n/2}).attr("y",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return-t/2-n/2}).attr("width",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return t+n}).attr("height",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return t+n}).attr("rx",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,i=["circle","donut"].indexOf(e.shape.value)>=0;return i?(r+n)/2:0}).attr("ry",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,i=["circle","donut"].indexOf(e.shape.value)>=0;return i?(r+n)/2:0}).attr("shape-rendering",function(t){return["square"].indexOf(e.shape.value)>=0?e.shape.rendering.value:"auto"})}function c(t,n,r,i){n||(n=0),"number"!=typeof r&&(r=void 0),"number"!=typeof i&&(i=void 0),t.attrTween("d",function(t){if(void 0===r)var a=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var a=r;if(void 0===i)var o=t.d3plus.segments[t.d3plus.shape];else var o=i;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a="donut"===t.d3plus.shape?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,a+n),l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,o);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=s(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=l(n),d(t)}})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var d=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"]||"donut"!==e.shape.value)return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return"donut"===e.shape.value?n:2*n});t.each(function(t){function n(t){t.attr("stroke",p).attr("stroke-width",1).attr("shape-rendering",e.shape.rendering.value)}var s=a(e,t,"active"),d=a(e,t,"temp"),f=a(e,t,"total"),h=d3.select(this),p=i(e,t),g=[],m=[];if(f&&e.types[e.type.value].fill){if(d){var v=r(t);v.d3plus.shape="temp",g.push(v),m=["temp"]}if(s&&(f>s||d)){var v=r(t);v.d3plus.shape="active",g.push(v)}}var y=e.defs.selectAll("pattern#d3plus_hatch_"+t.d3plus.id).data(m);e.draw.timing?(y.selectAll("rect").transition().duration(e.draw.timing).style("fill",p),y.selectAll("line").transition().duration(e.draw.timing).style("stroke",p)):(y.selectAll("rect").style("fill",p),y.selectAll("line").style("stroke",p));var x=y.enter().append("pattern").attr("id","d3plus_hatch_"+t.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");x.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",p).attr("fill-opacity",.25),x.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(n),x.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(n),x.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(n);var b=g.length?[t]:[],w=h.selectAll("#d3plus_clip_"+t.d3plus.id).data(b);w.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+t.d3plus.id).append("rect").attr("class","d3plus_clipping").call(l),e.draw.timing?(w.selectAll("rect").transition().duration(e.draw.timing).call(u),w.exit().transition().delay(e.draw.timing).remove()):(w.selectAll("rect").call(u),w.exit().remove());var I=h.selectAll("path.d3plus_fill").data(g);I.transition().duration(e.draw.timing).call(o,e).call(c),I.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+t.d3plus.id+")").transition().duration(0).call(o,e).call(c,0,void 0,0).transition().duration(e.draw.timing).call(c).call(o,e),I.exit().transition().duration(e.draw.timing).call(c,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"../../../util/copy.coffee":206,"./segments.coffee":232,"./style.coffee":233}],227:[function(e,t,n){var r=(e("../../../util/copy.coffee"),e("../../../core/fetch/text.js")),i=e("../../../core/fetch/value.coffee"),a=e("../../../color/mix.coffee"),o=e("../../../core/console/print.coffee"),s=(e("../../../client/rtl.coffee"),e("./segments.coffee")),l=e("./color.coffee"),u=e("../../../string/list.coffee"),c=e("../../../color/text.coffee"),d=e("../../../textwrap/textwrap.coffee");t.exports=function(e,t){var n=e.types[e.type.value].zoom?e.zoom.behavior.scaleExtent():[1,1],f=e.g[t].selectAll("g"),h=function(t){t.attr("opacity",function(t){var r=parseFloat(d3.select(this).attr("font-size"),10);return t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},p=function(t){e.draw.timing?t.transition().duration(e.draw.timing).attr("opacity",0).remove():t.remove()},g=function(t){var r="bottom"===e.labels.valign.value?"top":"bottom";t.attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(t){if(t.color)return t.color;var n=l(t.parent,e),r=c(n),i=t.text?.15:1;return a(n,r,.2,i)}).each(function(t){t.resize instanceof Array&&(t.resize[0],t.resize[1]);var i=t.resize,a=!0;if(t.text){i instanceof Array||(i=[9,50],a=t.resize);var o=t.y-t.h*n[1]/2+t.padding/2;"bottom"===r&&(o+=t.h*n[1]/2),d().align("center").container(d3.select(this)).height(t.h*n[1]/2).padding(t.padding/2).resize(a).size(i).text(e.format.value(100*t.text,{key:"share",vars:e})).width(t.w*n[1]).valign(r).x(t.x-t.w*n[1]/2+t.padding/2).y(o).draw()}else{t.resize instanceof Array||(i=[7,40*(n[1]/n[0])],a=t.resize);var s="bottom"===e.labels.valign.value?t.share:0;d().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*n[1]-t.share).padding(t.padding/2).resize(a).size(i).shape(t.shape||"square").text(t.names).valign(e.labels.valign.value).width(t.w*n[1]).x(t.x-t.w*n[1]/2+t.padding/2).y(t.y-t.h*n[1]/2+t.padding/2+s).draw()}}).attr("transform",function(e){var t=d3.select(this).attr("transform")||"",r=e.angle||0,i=e.translate&&e.translate.x?e.translate.x:0,a=e.translate&&e.translate.y?e.translate.y:0;return t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+r+","+i+","+a+")scale("+1/n[1]+")translate("+(e.x*n[1]-e.x)+","+(e.y*n[1]-e.y)+")"+t})};if("edges"===t||e.labels.value){if(e.dev.value){var m="drawing "+t+" labels";o.time(m)}f.each(function(t){function a(t){var n="string"==typeof l.background?l.background:"none"===e.background.value?"#ffffff":e.background.value,r="string"==typeof l.background?l.background:n,i=I.attr("transform").split(")");i.pop(),i.pop(),i.push(""),i=i.join(")"),t.attr("fill",r).attr(N).attr("transform",i)}var o=t.d3plus&&"label"in t.d3plus&&!t.d3plus.label,l=t.d3plus_label||null,c=t.d3plus_share,d=t.d3plus.text?t.d3plus.text:l&&l.names?l.names:e.labels.text.value?i(e,t,e.labels.text.value):r(e,t),f=l&&"group"in l?l.group:d3.select(this),m=0,v=e.types[e.type.value].fill;if(d instanceof Array||(d=[d]),l)if(["line","area"].indexOf(e.shape.value)>=0)var y=!0;else if(t&&"d3plus"in t)var x=s(e,t,"active"),b=s(e,t,"temp"),w=s(e,t,"total"),y=!b&&!x||x>=w||!x&&b>=w;if(o||!(l&&l.force||y)&&v)delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p);else{if(c&&t.d3plus.share&&c.w-2*e.labels.padding>=10&&c.h-2*e.labels.padding>=10&&"middle"!=e.labels.valign.value){c.resize=e.labels.resize.value===!1?!1:c&&"resize"in c?c.resize:!0,c.padding=e.labels.padding,c.text=t.d3plus.share,c.parent=t;var I=f.selectAll("text#d3plus_share_"+t.d3plus.id).data([c],function(e){return e.w+""+e.h+e.text});e.draw.timing&&1===e.zoom.scale?(I.transition().duration(e.draw.timing/2).call(g),I.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(g).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).attr("opacity",1)):(I.attr("opacity",1).call(g),I.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(g)),m=I.node().getBBox().height+e.labels.padding,I.exit().call(p)}else f.selectAll("text.d3plus_share").call(p);if(l&&(l.resize=e.labels.resize.value===!1?!1:l&&"resize"in l?l.resize:!0,l.padding="number"==typeof l.padding?l.padding:e.labels.padding),l&&l.w*n[1]-l.padding>=20&&l.h*n[1]-l.padding>=10&&d.length){for(var A=e.format.locale.value.ui.and,C=e.format.locale.value.ui.more,_=0;_<d.length;_++)d[_]instanceof Array&&(d[_]=u(d[_],A,3,C));l.names=d,l.share=m,l.parent=t;var I=f.selectAll("text#d3plus_label_"+t.d3plus.id).data([l],function(e){return e?e.w+"_"+e.h+"_"+e.x+"_"+e.y+"_"+e.names.join("_"):!1}),k=l.resize?void 0:e.labels.font.size*n[0]+"px";if(e.draw.timing&&1===e.zoom.scale?(I.transition().duration(e.draw.timing/2).call(g).call(h),I.enter().append("text").attr("font-size",k).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(g).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).call(h)):(I.attr("opacity",1).call(g).call(h),I.enter().append("text").attr("font-size",k).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").call(g).call(h)),I.exit().call(p),0===I.size()||0===I.selectAll("tspan").size())delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p);else{if(l.background){var M=["background"],z=I.node().getBBox(),N={height:z.height,width:z.width,x:z.x,y:z.y};N.width+=e.labels.padding*n[0],N.height+=e.labels.padding*n[0],N.x-=e.labels.padding*n[0]/2,N.y-=e.labels.padding*n[0]/2;var S=I.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];S=S.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),S=S.split(","),S.length>1&&(S=S[S.length-1],S=S.substring(0,S.length-1),N.y+=S)}else var M=[],N={};var j=f.selectAll("rect#d3plus_label_bg_"+t.d3plus.id).data(M),D="number"==typeof l.background?l.background:"string"==typeof l.background?1:.6;e.draw.timing?(j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j.transition().duration(e.draw.timing).attr("opacity",D).call(a),j.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(a).transition().duration(e.draw.timing).attr("opacity",D)):(j.exit().remove(),j.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg"),j.attr("opacity",D).call(a))}}else delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p)}}),e.dev.value&&o.timeEnd(m)}else{if(e.dev.value){var m="removing "+t+" labels";o.time(m)}f.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),e.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),e.dev.value&&o.timeEnd(m)}}},{"../../../client/rtl.coffee":40,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../string/list.coffee":173,"../../../textwrap/textwrap.coffee":199,"../../../util/copy.coffee":206,"./color.coffee":219,"./segments.coffee":232}],228:[function(e,t,n){function r(e){e.attr("x",function(e){return e.d3plus.x}).attr("y",function(e){return e.d3plus.y}).attr("width",0).attr("height",0)}function i(e,t){void 0===t&&(t=0),e.attr("x",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return e.d3plus.x-(n/2+t/2)}).attr("y",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return e.d3plus.y-(n/2+t/2)}).attr("width",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return n+t}).attr("height",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return n+t}).attr("rx",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return(n+t)/2}).attr("ry",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return(n+t)/2})}function a(e,t,n,r){var a=e.draw.timing?e.timing.mouseevents:0;void 0===r&&(r=0),a?(d3.select(t.parentNode).selectAll("path.d3plus_line").transition().duration(a).style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var a=c(e,t,n);i=a&&a.length?d3.max(a):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").transition().duration(a).style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=c(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(i,r)):(d3.select(t.parentNode).selectAll("path.d3plus_line").style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var a=c(e,t,n);i=a&&a.length?d3.max(a):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=c(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(i,r))}var o=e("../../../util/copy.coffee"),s=e("../../../util/closest.coffee"),l=e("../../../client/pointer.coffee"),u=e("./style.coffee"),c=e("../../../core/fetch/value.coffee");t.exports=function(e,t,n,d){var f=d3.svg.line().x(function(e){return e.d3plus.x}).y(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),h=e.size.value||2*e.data.stroke.width,p=e[e.axes.discrete],g=function(t){var n=h;if(n.constructor!==Number){var r=c(e,t,h);n=r&&r.length?d3.max(r):e.data.stroke.width}return 15>n?15:n},m=p.ticks.values.map(function(e){return e.constructor===Date?e.getTime():e});t.each(function(t){var n=!1,d=[],v=[],y=o(t),x=d3.select(this);y.values=[],y.segment_key=y.key,t.values.forEach(function(r,i,a){var l=c(e,r,p.value);l.constructor===Date&&(l=l.getTime());var u=m.indexOf(s(m,l));n===!1||n===u-1?(y.values.push(r),y.segment_key+="_"+u):(y.values.length>1?d.push(y):v.push(y.values[0]),y=o(t),y.values=[r]),i===a.length-1&&(y.values.length>1?d.push(y):v.push(y.values[0])),n=u});var b=x.selectAll("path.d3plus_line").data(d,function(e){return e.d3plus||(e.d3plus={}),e.d3plus.shape="line",e.segment_key}),w=x.selectAll("rect.d3plus_anchor").data(v,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.r=2*e.data.stroke.width,t.d3plus.id});e.draw.timing?(b.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),b.transition().duration(e.draw.timing).attr("d",function(e){return f(e.values)}).call(u,e),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(e){return f(e.values)}).call(u,e).attr("opacity",0).transition().duration(e.draw.timing).attr("opacity",1),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}).call(r).call(u,e),w.transition().duration(e.draw.timing).call(i).call(u,e),w.exit().transition().duration(e.draw.timing).call(r).remove()):(b.exit().remove(),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),b.attr("d",function(e){return f(e.values)}).call(u,e),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}),w.exit().remove(),w.call(i).call(u,e));var I=x.selectAll("path.d3plus_mouse").data(d,function(e){return e.segment_key});I.enter().append("path").attr("class","d3plus_mouse").attr("d",function(e){return f(e.values)}).style("stroke","black").style("stroke-width",g).style("fill","none").style("stroke-linecap","round").attr("opacity",0),I.on(l.over,function(t){e.draw.frozen||a(e,this,h,2)}).on(l.out,function(t){e.draw.frozen||a(e,this,h,0)}),e.draw.timing?I.transition().duration(e.draw.timing).attr("d",function(e){return f(e.values)}).style("stroke-width",g):I.attr("d",function(e){return f(e.values)}).style("stroke-width",g),I.exit().remove()})}},{"../../../client/pointer.coffee":38,"../../../core/fetch/value.coffee":67,"../../../util/closest.coffee":205,"../../../util/copy.coffee":206,"./style.coffee":233}],229:[function(e,t,n){t.exports=function(e){function t(t){t.attr("d",e.edges.path).style("stroke-width",function(e){return Math.max(1,e.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(e){return"translate("+e.d3plus.x+","+e.d3plus.y+")"})}var n=e.returned.edges||[],r=e.g.edges.selectAll("g.d3plus_edge_path").data(n,function(t){return t.d3plus.id="path_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.id});e.draw.timing?(r.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),r.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(t),r.enter().append("g").attr("class","d3plus_edge_path").append("path").style("stroke-width",0).transition().duration(e.draw.timing).call(t)):(r.exit().remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),r.selectAll("path").data(function(e){return[e]}).call(t),r.enter().append("g").attr("class","d3plus_edge_path").append("path").call(t))}},{}],230:[function(e,t,n){var r,i,a,o;o=e("./style.coffee"),a={},r={},i={r:{},a:{}},t.exports=function(e,t,n,s){var l,u,c,d,f;c=e.id.nesting[e.depth.value+1],d=d3.svg.line.radial().interpolate("linear-closed").radius(function(e){return e.d3plus.r}).angle(function(e){return e.d3plus.a}),l=function(t){return e.labels.value&&(t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label),[t]},e.draw.timing?(t.each(function(t){var n,r,i,a,o;for(a=t[c],o=[],r=0,i=a.length;i>r;r++)n=a[r],o.push(n.d3plus.id=n[e.id.value]+"_"+n[c]);return o}),u=d3.svg.line.radial().interpolate("linear-closed").radius(function(e,t){return void 0===a[e.d3plus.id]&&(a[e.d3plus.id]=0),isNaN(a[e.d3plus.id])&&(a[e.d3plus.id]=e.d3plus.r),a[e.d3plus.id]}).angle(function(e,t){return void 0===r[e.d3plus.id]&&(r[e.d3plus.id]=e.d3plus.a),isNaN(r[e.d3plus.id])&&(r[e.d3plus.id]=e.d3plus.a),r[e.d3plus.id]}),f=function(e,t){return e.attrTween("d",function(e){var n,o,s,l,d,f,h;for(h=e[c],s=l=0,d=h.length;d>l;s=++l)o=h[s],n=o.d3plus.a,void 0===t?f=o.d3plus.r:0===t&&(f=0),i.a[o.d3plus.id]=d3.interpolate(r[o.d3plus.id],n),i.r[o.d3plus.id]=d3.interpolate(a[o.d3plus.id],f);return function(t){var n,l,d;for(d=e[c],s=n=0,l=d.length;l>n;s=++n)o=d[s],r[o.d3plus.id]=i.a[o.d3plus.id](t),a[o.d3plus.id]=i.r[o.d3plus.id](t);return u(e[c])}})},n.append("path").attr("class","d3plus_data").call(o,e).attr("d",function(e){return u(e[c])}),t.selectAll("path.d3plus_data").data(l).transition().duration(e.draw.timing).call(o,e).call(f),s.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(f,0)):(n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(l).call(o,e).attr("d",function(e){return d(e[c])}))}},{"./style.coffee":233}],231:[function(e,t,n){var r;r=e("./style.coffee"),t.exports=function(e,t,n,i){var a,o,s;return a=function(t){var n,r;return e.labels.value&&!t.d3plus.label?(r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,t.d3plus_label={w:r,h:n,x:0,y:0},t.d3plus_share={w:r,h:n,x:0,y:0},t.d3plus_label.shape="circle"===t.d3plus.shape?"circle":"square"):t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label,[t]},o=function(e){return e.attr("x",function(e){return e.d3plus.init&&"x"in e.d3plus.init?e.d3plus.init.x:e.d3plus.init&&"width"in e.d3plus.init?-e.d3plus.width/2:0}).attr("y",function(e){return e.d3plus.init&&"y"in e.d3plus.init?e.d3plus.init.y:e.d3plus.init&&"height"in e.d3plus.init?-e.d3plus.height/2:0}).attr("width",function(e){return e.d3plus.init&&"width"in e.d3plus.init?e.d3plus.init.width:0}).attr("height",function(e){return e.d3plus.init&&"height"in e.d3plus.init?e.d3plus.init.height:0})},s=function(t){return t.attr("x",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,-t/2}).attr("y",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,-t/2}).attr("width",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.width}).attr("height",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.height}).attr("rx",function(e){var t,n;return t="circle"===e.d3plus.shape,n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,t?(n+2)/2:0}).attr("ry",function(e){var t,n;return n="circle"===e.d3plus.shape,t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,n?(t+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3plus?"rotate("+e.d3plus.rotate+")":""}).attr("shape-rendering",function(t){return"square"!==t.d3plus.shape||"rotate"in t.d3plus?"auto":e.shape.rendering.value})},e.draw.timing?(n.append("rect").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("rect.d3plus_data").data(a).transition().duration(e.draw.timing).call(s).call(r,e),i.selectAll("rect.d3plus_data").transition().duration(e.draw.timing).call(o)):(n.append("rect").attr("class","d3plus_data"),t.selectAll("rect.d3plus_data").data(a).call(s).call(r,e))}},{"./style.coffee":233}],232:[function(e,t,n){var r;r=e("../../../core/fetch/value.coffee"),t.exports=function(e,t,n){var i;return i=e[n].value,i?n in t.d3plus?t.d3plus[n]:r(e,t,i):t.d3plus[n]}},{"../../../core/fetch/value.coffee":67}],233:[function(e,t,n){var r,i,a;r=e("./color.coffee"),i=e("../../../client/ie.js"),a=e("../../../core/fetch/value.coffee"),t.exports=function(e,t){return e.attr("fill",function(e){return e.d3plus&&e.d3plus.spline?"none":r(e,t)}).style("stroke",function(e){var n;return e.d3plus&&e.d3plus.stroke?e.d3plus.stroke:(n=e.values?r(e.values[0],t):r(e,t,!0),d3.rgb(n).darker(.6))}).style("stroke-width",function(e){var n;if(i&&t.types[t.type.value].zoom)return 0;if("line"===e.d3plus.shape&&t.size.value){if(t.size.value.constructor===Number)return t.size.value;if(n=a(t,e,t.size.value),n&&n.length)return d3.max(n)}return t.data.stroke.width}).attr("opacity",t.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"../../../client/ie.js":37,"../../../core/fetch/value.coffee":67,"./color.coffee":219}],234:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(10))}function o(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(a).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(o).call(r,e):t.selectAll("path.d3plus_data").call(o).call(r,e)}},{"./style.coffee":233}],235:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(10))}function o(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(a).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(o).call(r,e):t.selectAll("path.d3plus_data").call(o).call(r,e)}},{"./style.coffee":233}],236:[function(e,t,n){t.exports=function(e,t,n,r){var i,a,o,s,l,u,c,d,f;a=function(e){return e.d3plus.text?e.d3plus_label={w:d,h:d,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(e.d3plus.position)>=0?90:0}:e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]},f=function(t){return t.style("stroke-width",e.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",e.shape.rendering.value)},o=function(e){return e.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(e){return e.attr("x1",function(e){var t,n,r;return["top","bottom"].indexOf(e.d3plus.position)>=0?0:(t=e.d3plus.offset||0,n=e.d3plus.width||0,r=0>t?-n:n,r+t)}).attr("x2",function(e){return["top","bottom"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("y1",function(e){var t,n,r;return["left","right"].indexOf(e.d3plus.position)>=0?0:(n=e.d3plus.offset||0,t=e.d3plus.height||0,r=0>n?-t:t,r+n)}).attr("y2",function(e){return["left","right"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("marker-start","url(#d3plus_whisker_marker)")},s=e.defs.selectAll("#d3plus_whisker_marker").data([0]),s.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),i=t.datum(),i?(u=i.d3plus.position,l=["top","bottom"].indexOf(u)>=0?"horizontal":"vertical",d="horizontal"===l?i.d3plus.width:i.d3plus.height):(l="horizontal",
d=0),s.select("line").attr("x1","horizontal"===l?-d/2:0).attr("x2","horizontal"===l?d/2:0).attr("y1","vertical"===l?-d/2:0).attr("y2","vertical"===l?d/2:0).call(f).style("stroke-width",2*e.data.stroke.width),e.draw.timing?(n.append("line").attr("class","d3plus_data").call(f).call(o),t.selectAll("line.d3plus_data").data(a).transition().duration(e.draw.timing).call(f).call(c),r.selectAll("line.d3plus_data").transition().duration(e.draw.timing).call(o)):(n.append("line").attr("class","d3plus_data"),t.selectAll("line.d3plus_data").data(a).call(f).call(c))}},{}],237:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../client/prefix.coffee"),a=e("../../../core/console/print.coffee"),o=e("../../../client/touch.coffee"),s=e("../zoom/propagation.coffee");t.exports=function(e){e.dev.value&&a.time("creating SVG elements"),e.svg=e.container.value.selectAll("svg#d3plus").data([0]),e.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",e.width.value).attr("height",e.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),e.g.bg=e.svg.selectAll("rect#bg").data(["bg"]),e.g.bg.enter().append("rect").attr("id","bg").attr("fill",e.background.value).attr("stroke","none").attr("width",e.width.value).attr("height",e.height.value),e.g.timeline=e.svg.selectAll("g#timeline").data(["timeline"]),e.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+e.height.value+")"),e.g.legend=e.svg.selectAll("g#key").data(["key"]),e.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+e.height.value+")"),e.g.footer=e.svg.selectAll("g#footer").data(["footer"]),e.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+e.height.value+")");var t="clipping_"+e.container.id;e.g.clipping=e.svg.selectAll("#clipping").data(["clipping"]),e.g.clipping.enter().append("clipPath").attr("id",t).append("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container=e.svg.selectAll("g#container").data(["container"]),e.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+t+")").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.g.zoom=e.g.container.selectAll("g#zoom").data(["zoom"]),e.g.zoom.enter().append("g").attr("id","zoom"),e.g.viz=e.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),e.g.viz.enter().append("g").attr("id","d3plus_viz"),e.g.overlay=e.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),e.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",e.width.value).attr("height",e.height.value).attr("opacity",0),e.g.overlay.on(r.move,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.up,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.down,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grabbing"):d3.select(this).style("cursor","auto")}),e.g.app=e.g.viz.selectAll("g#app").data(["app"]),e.g.app.enter().append("g").attr("id","app"),e.g.edges=e.g.viz.selectAll("g#edges").data(["edges"]),e.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),e.g.edge_focus=e.g.viz.selectAll("g#focus").data(["focus"]),e.g.edge_focus.enter().append("g").attr("id","focus"),e.g.edge_hover=e.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),e.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),e.g.data=e.g.viz.selectAll("g#data").data(["data"]),e.g.data.enter().append("g").attr("id","data").attr("opacity",0),e.g.data_focus=e.g.viz.selectAll("g#data_focus").data(["data_focus"]),e.g.data_focus.enter().append("g").attr("id","data_focus"),e.g.labels=e.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),e.g.labels.enter().append("g").attr("id","d3plus_labels"),e.defs=e.svg.selectAll("defs").data(["defs"]),e.defs.enter().append("defs"),e.dev.value&&a.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../client/touch.coffee":43,"../../../core/console/print.coffee":52,"../zoom/propagation.coffee":252}],238:[function(e,t,n){var r=e("../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&r.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":52}],239:[function(e,t,n){var r=e("../../../array/sort.coffee"),i=e("../../../tooltip/create.js"),a=e("../../../core/data/nest.js"),o=e("./data.js"),s=e("../../../core/fetch/color.coffee"),l=e("../../../core/fetch/text.js"),u=e("../../../core/fetch/value.coffee"),c=e("../../../object/merge.coffee"),d=e("../../../tooltip/remove.coffee"),f=e("../shapes/segments.coffee"),h=e("../../../client/scroll.js"),p=e("../../../util/uniques.coffee"),g=e("../../../object/validate.coffee"),m=e("../zoom/direction.coffee");t.exports=function(e){function t(t){function h(e){return"string"==typeof n[e].value?n[e].value:n.format.locale.value.method[e]}var m,w="depth"in e?e.depth:y,k={},M=n.id.nesting[w+1]in v?w+1:w,z=n.id.nesting[M],T="merged"in v.d3plus?v.d3plus.merged:v[z];T instanceof Array||(T=[T]);var O=u(n,v,n.size.value);if(n.tooltip.children.value){if(T=T.slice(0),T.length>1&&g(T[0])&&(T=a(n,T,[z])),n.size.value&&g(T[0])){var L=[],E=T.filter(function(e){var t=u(n,e,n.size.value);return null===t||"d3plus"in e&&e.d3plus.merged?void L.push(e):!0});r(E,n.size.value,"desc",[],n),T=E.concat(L)}var B="short"===_?3:n.data.large,F=T.length,P=d3.min([F,B]);m={values:[]};for(var G=0;P>G&&T.length;G++){var Z=T.shift(),R=l(n,Z,M)[0],Y=g(Z)?u(n,Z,z,M):Z;if(Y!==v[n.id.nesting[w]]&&R&&!m[R]){var W=g(Z)?u(n,Z,n.size.value,z):null,U=s(n,Z,z);m[R]=!W||W instanceof Array?"":n.format.value(W,{key:n.size.value,vars:n,data:Z});var V={};V[R]=m[R],m.values.push(V),U&&(m.d3plus_colors||(m.d3plus_colors={}),m.d3plus_colors[R]=U)}else G--}F>P&&(m.d3plusMore=F-P)}v.d3plus.tooltip&&(k=c(k,v.d3plus.tooltip)),n.tooltip.size.value&&(O&&"number"!=typeof n.size.value&&(k[h("size")]=O),n.axes.opposite&&n[n.axes.opposite].value!==n.size.value&&(k[h(n.axes.opposite)]=u(n,v,n[n.axes.opposite].value)),n.axes.opposite&&n[n.axes.opposite+"2"].value!==n.size.value&&(k[h(n.axes.opposite+"2")]=u(n,v,n[n.axes.opposite+"2"].value)),n.color.valueScale&&(k[h("color")]=u(n,v,n.color.value)));var X=f(n,v,"active"),H=f(n,v,"temp"),J=f(n,v,"total");"number"==typeof X&&X>0&&J&&(k[h("active")]=X+"/"+J+" ("+n.format.value(X/J*100,{key:"share",vars:n,data:v})+")"),"number"==typeof H&&H>0&&J&&(k[h("temp")]=H+"/"+J+" ("+n.format.value(H/J*100,{key:"share",vars:n,data:v})+")"),n.tooltip.share.value&&v.d3plus.share&&(k.share=n.format.value(100*v.d3plus.share,{key:"share",vars:n,data:v}));var M="depth"in e?e.depth:y,q=e.title||l(n,v,M)[0],Q=p(v,n.icon.value,u,n,n.id.nesting[M]),K=o(n,v,_,k,m,M);if(Q=1===Q.length&&"string"==typeof Q[0]?Q[0]:!1,K.length>0||N||!v.d3plus_label&&"short"==_&&q||v.d3plus_label&&(!("visible"in v.d3plus_label)||"visible"in v.d3plus_label&&v.d3plus_label.visible===!1)){q||(q=n.format.value(Y,{key:n.id.value,vars:n}));var M="d3plus"in v&&"merged"in v.d3plus?y-1:"depth"in e?e.depth:y;if(0>M&&(M=0),M=n.id.nesting[M],"string"==typeof n.icon.style.value)var $=n.icon.style.value;else if("object"==typeof n.icon.style.value&&n.icon.style.value[M])var $=n.icon.style.value[M];else var $="default";var ee=n.tooltip.small;e.width?ee=e.width:A&&(ee=n.tooltip.large);var te=!A&&"long"!==e.length||A&&n.tooltip.fullscreen.value?d3.select("body"):n.container.value;!e.description&&v&&n.tooltip.sub.value&&(e.description=u(n,v,n.tooltip.sub.value)),i({align:C,arrow:b,locale:n.format.locale.value,background:n.tooltip.background,curtain:n.tooltip.curtain.color,curtainopacity:n.tooltip.curtain.opacity,fontcolor:n.tooltip.font.color,fontfamily:n.tooltip.font.family.value,fontsize:n.tooltip.font.size,fontweight:n.tooltip.font.weight,data:K,color:s(n,v),allColors:!0,footer:e.footer===!1?e.footer:N,fullscreen:A,html:t,js:e.js,icon:Q,id:I,max_height:e.maxheight,max_width:ee,mouseevents:x,offset:D,parent:te,stacked:n.tooltip.stacked.value,style:$,title:q,description:e.description,width:e.width||A||0!=K.length?ee:"auto",x:S,y:j})}else d(I)}"d3plus"in e.data||(e.data.d3plus={});var n=e.vars,v=e.data,y="d3plus"in v&&"depth"in v.d3plus?v.d3plus.depth:n.depth.value,x=(e.ex,e.mouseevents?e.mouseevents:!1),b="arrow"in e?e.arrow:!0,w=u(n,v,n.id.value),I=e.id||n.type.value;if(!d3.event||"click"!=d3.event.type||!n.tooltip.html.value&&!n.tooltip.value["long"]||"fullscreen"in e){var A=!1,C=e.anchor||n.tooltip.anchor,_=e.length||"short",k=m(v,n);if(-1===k){var M=n.id.nesting[y-1];u(n,w,M)}var z="";if(n.mouse.click.value&&(!n.mouse.viz||n.mouse.viz.click!==!1))if(1===k&&n.zoom.value)var z=n.format.value(n.format.locale.value.ui.expand);else if(-1===k&&n.zoom.value&&n.history.states.length&&!n.tooltip.value["long"])var z=n.format.value(n.format.locale.value.ui.collapse);else if(n.small||"short"!=_||!n.tooltip.html.value&&!n.tooltip.value["long"]||1===n.focus.value.length&&n.focus.value[0]==w){if("long"==_)var z=n.footer.value||""}else var z=n.format.locale.value.ui.moreInfo;var N=z.length?n.format.value(z,{key:"footer",vars:n}):!1}else{var A=!0,b=!1,x=!0,_="long",N=n.footer.value;n.covered=!0}if("x"in e)var S=e.x;else if("static"===n.types[n.type.value].tooltip){var S=v.d3plus.x;n.zoom.translate&&n.zoom.scale&&(S=n.zoom.translate[0]+S*n.zoom.scale),S+=n.margin.left,"long"!==e.length&&(j+=h.x(),S+=n.container.value.node().getBoundingClientRect().left,S+=parseFloat(n.container.value.style("padding-left"),10))}else var S=d3.mouse(d3.select("html").node())[0];if("y"in e)var j=e.y;else if("static"==n.types[n.type.value].tooltip){var j=v.d3plus.y;n.zoom.translate&&n.zoom.scale&&(j=n.zoom.translate[1]+j*n.zoom.scale),j+=n.margin.top,"long"!==e.length&&(j+=h.y(),j+=n.container.value.node().getBoundingClientRect().top,j+=parseFloat(n.container.value.style("padding-top"),10))}else var j=d3.mouse(d3.select("html").node())[1];if("offset"in e)var D=e.offset;else if("static"==n.types[n.type.value].tooltip){var D=v.d3plus.r?v.d3plus.r:v.d3plus.height/2;n.zoom.scale&&(D*=n.zoom.scale)}else var D=3;if(A||"long"===e.length)if("string"==typeof n.tooltip.html.value)t(n.tooltip.html.value);else if("function"==typeof n.tooltip.html.value)t(n.tooltip.html.value(w));else if(n.tooltip.html.value&&"object"==typeof n.tooltip.html.value&&n.tooltip.html.value.url){var T=n.tooltip.html.value.url;"function"==typeof T&&(T=T(w)),d3.json(T,function(e){var r=n.tooltip.html.value.callback?n.tooltip.html.value.callback(e):e;t(r)})}else t(e.html);else t(e.html)}},{"../../../array/sort.coffee":34,"../../../client/scroll.js":41,"../../../core/data/nest.js":60,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../tooltip/create.js":200,"../../../tooltip/remove.coffee":202,"../../../util/uniques.coffee":209,"../shapes/segments.coffee":232,"../zoom/direction.coffee":249,"./data.js":240}],240:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../core/fetch/value.coffee"),a=e("../../../core/fetch/color.coffee"),o=e("../../../core/fetch/text.js"),s=e("../../../color/legible.coffee"),l=e("../../../object/merge.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../string/format.js"),d=e("../../../object/validate.coffee");t.exports=function(e,t,n,f,h,p){function g(n,r){if(e.attrs.value[r])var a=r;else var a=null;r&&(r=e.format.value(r));var o=v[n]||i(e,t,n,a);if(d(o))w.push({name:e.format.value(n),value:e.format.value(o.value,{key:o.key,vars:e}),group:r});else if(null!=o&&"undefined"!=o&&!(o instanceof Array)&&("string"==typeof o&&o.indexOf("d3plus_other")<0||"string"!=typeof o)){var s=e.format.locale.value.ui[n]?e.format.value(e.format.locale.value.ui[n]):e.format.value(n),l=x.indexOf(n)>=0;o instanceof Array?o.forEach(function(r){r=e.format.value(r,{key:n,vars:e,data:t})}):o=e.format.value(o,{key:n,vars:e,data:t});var u={name:s,value:o,highlight:l,group:r};if(e.descs.value)if("function"==typeof e.descs.value){var c=e.descs.value(n);"string"==typeof c&&(u.desc=c)}else n in e.descs.value&&(u.desc=e.descs.value[n]);w.push(u)}}if(e.small)return[];if(!n)var n="long";if("long"==n)var m="short";else var m="long";var v={};if(f&&"string"==typeof f)f=[f];else if(f&&"object"==typeof f){v=l(v,f);var f=[];for(var y in v)f.push(y)}else if(!f)var f=[];var x=[];if(e.tooltip.value instanceof Array)var b=e.tooltip.value;else if("string"==typeof e.tooltip.value)var b=[e.tooltip.value];else{if(e.tooltip.value[e.id.nesting[p]])var b=e.tooltip.value[e.id.nesting[p]];else var b=e.tooltip.value;b instanceof Array||(b=b[n]?b[n]:b[m]?[]:l({"":[]},b)),"string"==typeof b?b=[b]:b instanceof Array||(b=l({"":[]},b))}var w=[];if(b.constructor===Array&&(b={"":b}),e.id.nesting.length&&p<e.id.nesting.length-1){var b=r(b);e.id.nesting.forEach(function(e,t){t>p&&b[e]&&delete b[e]})}for(var I in b){b[I].constructor!==Array&&(b[I]=[b[I]]);for(var A=f.length;A>0;A--)b[I].indexOf(f[A-1])>=0&&f.splice(A-1,1)}if(e.tooltip.value["long"]&&"object"==typeof e.tooltip.value["long"])for(var I in e.tooltip.value["long"])for(var A=f.length;A>0;A--){var C=f[A-1];e.tooltip.value["long"][I].indexOf(C)>=0&&(b[I]||(b[I]=[]),b[I].push(C),f.splice(A-1,1))}f.length&&(b[""]||(b[""]=[]),b[""]=b[""].concat(f));for(var I in b)b[I].forEach(function(e){g(e,I)});if(h){var _=e.format.locale.value.ui.including,k=h.d3plus_colors;h.values.forEach(function(t){var n=d3.keys(t)[0];w.push({group:e.format.value(_),highlight:k&&k[n]?k[n]:!1,name:n,value:t[n]})}),h.d3plusMore&&w.push({group:e.format.value(_),highlight:!0,name:c(e.format.locale.value.ui.more,h.d3plusMore),value:""})}if(e.tooltip.connections.value&&"long"===n){var M=e.edges.connections(t[e.id.value],e.id.value,!0);M.length&&M.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]===t[e.id.value]}),n=n.length?n[0]:t,r=o(e,n)[0],i=a(e,n),l=e.tooltip.font.size,c="square"==e.shape.value?0:l;styles=["background-color: "+i,"border-color: "+s(i),"border-style: solid","border-width: "+e.data.stroke.width+"px","display: inline-block","height: "+l+"px","left: 0px","position: absolute","width: "+l+"px","top: 0px",u()+"border-radius: "+c+"px"],node="<div style='"+styles.join("; ")+";'></div>";var d=function(){e.self.focus([n[e.id.value]]).draw()};w.push({group:e.format.value(e.format.locale.value.ui.primary),highlight:!1,link:d,name:"<div id='d3plustooltipfocuslink_"+n[e.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*l+"px;'>"+node+r+"</div>"})})}return w}},{"../../../client/prefix.coffee":39,"../../../color/legible.coffee":44,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../string/format.js":172,"../../../util/copy.coffee":206}],241:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n,i,a,o,s,l,u,c,d;if(e.group=e.g.apps[e.type.value],e.mouse.viz=!1,e.edges.path=!1,d=e.types[e.type.value],u=d.requirements||[],i=u.indexOf("data")>=0,a=!i||i&&e.data.viz.length,!e.error.internal&&a){for(t=e.format.locale.value.visualization[e.type.value],e.dev.value&&r.time("running "+t),l=e.data.viz,o=0,s=l.length;s>o;o++)n=l[o],n.d3plus&&(delete n.d3plus.shape,delete n.d3plus.label,delete n.d3plus.rotate,delete n.d3plus.share);c=d(e),e.dev.value&&r.timeEnd("running "+t)}else c=null;e.returned={nodes:[],edges:null},c instanceof Array?e.returned.nodes=c:c&&(c.nodes&&(e.returned.nodes=c.nodes),c.edges&&(e.returned.edges=c.edges))}},{"../../../core/console/print.coffee":52}],242:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../form/form.js"),a=e("../../../core/console/print.coffee"),o=e("../../../object/validate.coffee");t.exports=function(e){var t=e.ui.value&&e.ui.value.length,n=e.ui.position.value;e.dev.value&&t&&a.time("drawing custom UI elements");var s=e.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);s.enter().append("div").attr("id","d3plus_drawer");var l={};e.ui.position.accepted.forEach(function(t){l[t]=t==n?e.margin.bottom+"px":"auto"}),s.style("text-align",e.ui.align.value).style("position","absolute").style("width",e.width.value-2*e.ui.padding+"px").style("height","auto").style(l);var u=s.selectAll("div.d3plus_drawer_ui").data(t?e.ui.value:[],function(e){return e.method||!1});u.exit().remove(),u.enter().append("div").attr("class","d3plus_drawer_ui").style("display","inline-block"),u.style("padding",e.ui.padding+"px").each(function(t){t.form||(t.form=i().container(d3.select(this)).data({sort:!1}).id("id").text("text"));var n,a;"string"==typeof t.method&&t.method in e?(n=e[t.method].value,a=function(n){n!==e[t.method].value&&e.self[t.method](n).draw()}):(n=t.value[0],o(n)&&(n=n[d3.keys(n)[0]]),"function"==typeof t.method&&(a=function(n){t.method(n,e.self)}));var s,l=[];t.label?s=t.label:"string"==typeof t.method&&t.method in e&&(s=e.format.locale.value.method[t.method]||t.method),t.value.forEach(function(t){var n={};o(t)?(n.id=t[d3.keys(t)[0]],n.text=e.format.value(d3.keys(t)[0])):(n.id=t,n.text=e.format.value(t)),l.push(n)});var u=r(e.ui.font);u.align=r(e.font.align),u.secondary=r(u),t.form.data(l).font(u).focus(t.value.length>1?n:!1).focus({callback:a}).format(e.format.locale.language).format({number:e.format.number.value,text:e.format.text.value}).title(e.format.value(s)).type(t.type||"auto").ui({align:e.ui.align.value,border:e.ui.border,color:{primary:e.ui.color.primary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding,margin:0}).width(t.width||!1).draw()});var c=s.node().offsetHeight||s.node().getBoundingClientRect().height;c&&(e.margin[n]+=c),e.dev.value&&t&&a.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":52,"../../../form/form.js":103,"../../../object/validate.coffee":171,"../../../util/copy.coffee":206}],243:[function(e,t,n){var r,i,a,o;r=e("../../../client/pointer.coffee"),i=e("../../../color/lighter.coffee"),a=e("../../../core/console/print.coffee"),o=e("../../../client/css.coffee"),t.exports=function(e){var t,n,s,l,u,c,d,f,h,p,g,m,v,y,x;return!e.small&&e.history.states.length>0?(e.dev.value&&a.time("drawing back button"),t=e.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),h=e.title.sub.font.size,n=e.title.sub.font.color,u=e.title.sub.font.family.value,x=e.title.sub.font.weight,f=e.title.sub.padding,m=!1,e.title.sub.value&&["start","left"].indexOf(e.title.sub.font.align)<0?m="sub":e.title.total.value&&["start","left"].indexOf(e.title.total.font.align)<0?m="total":e.title.value&&["start","left"].indexOf(e.title.font.align)<0&&(m="title"),m?(p=function(e){var t;return t=e.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0],t=t.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),t=t.split(","),t=t[t.length-1],parseFloat(t.substring(0,t.length-1))},v=e.svg.select(".d3plus_title."+m),y=p(v)+p(v.select("text"))):(y=e.margin.top-e.title.padding,d=h+2*f,e.margin.top+=d),s=parseFloat(e.container.value.style("padding-top"),10),y+=s,s=parseFloat(e.container.value.style("padding-left"),10),c=e.margin.left+h/2+s,g=function(e){return e.style("position","absolute").style("left",c+"px").style("top",y+"px").style("color",n).style("font-family",u).style("font-weight",x).style("font-size",h+"px")},l=t.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(g).html(function(){var t;return o("font-awesome")&&0===e.icon.back.value.indexOf("fa-")?(t="<i class='fa "+e.icon.back.value,t+="' style='margin-top:2px;margin-right:4px;'></i>"):t=e.icon.back.value+" ",t+e.format.value(e.format.locale.value.ui.back)}),t.on(r.over,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("color",i(n,.25)):void 0}).on(r.out,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("color",n):void 0}).on(r.click,function(){return e.history.back()}).transition().duration(e.draw.timing).style("opacity",1).call(g),e.dev.value?a.timeEnd("drawing back button"):void 0):e.container.value.selectAll("div#d3plus_back_button").transition().duration(e.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../color/lighter.coffee":45,"../../../core/console/print.coffee":52}],244:[function(e,t,n){var r=e("../../../array/sort.coffee"),i=e("../../../util/buckets.coffee"),a=e("../../../util/copy.coffee"),o=e("../tooltip/create.js"),s=e("../../../core/data/nest.js"),l=e("../../../util/dataURL.coffee"),u=e("../../../client/pointer.coffee"),c=e("../../../core/fetch/value.coffee"),d=e("../../../core/fetch/color.coffee"),f=e("../../../core/fetch/text.js"),h=e("../../../core/console/print.coffee"),p=e("../../../tooltip/remove.coffee"),g=e("../../../color/text.coffee"),m=e("../../../util/uniques.coffee"),v=e("../../../client/scroll.js"),y=e("../../../string/strip.js"),x=e("../../../textwrap/textwrap.coffee"),b=(e("../../../client/touch.coffee"),e("../../../object/validate.coffee"));t.exports=function(e){function t(t){t.attr("transform",function(t,n){var r=D+n*(e.ui.padding+I);return"translate("+r+","+e.ui.padding+")"})}function n(t){t.attr("width",I).attr("height",I).attr("fill",function(t){d3.select(this.parentNode).select("text").remove();var n=m(t,e.icon.value,c,e,P),r=d(e,t,P);if(e.legend.icons.value&&1===n.length&&"string"==typeof n[0]){n=n[0];var i,a=y(n+"_"+r),o=e.icon.style.value,s=e.defs.selectAll("pattern#"+a).data([a]);i="string"==typeof o?e.icon.style.value:b(o)&&o[P]?o[P]:"default",r="knockout"==i?r:"none",s.select("rect").transition().duration(e.draw.timing).attr("fill",r).attr("width",I).attr("height",I),s.select("image").transition().duration(e.draw.timing).attr("width",I).attr("height",I);var u=s.enter().append("pattern").attr("id",a).attr("width",I).attr("height",I);return u.append("rect").attr("fill",r).attr("width",I).attr("height",I),u.append("image").attr("xlink:href",n).attr("width",I).attr("height",I).each(function(e){0===n.indexOf("/")||n.indexOf(window.location.hostname)>=0?l(n,function(e){s.select("image").attr("xlink:href",e)}):s.select("image").attr("xlink:href",n)}),"url(#"+a+")"}if(e.legend.labels.value){var h;if(h=e.legend.text.value?[c(e,t,e.legend.text.value,F)]:f(e,t,F),1===h.length&&!(h[0]instanceof Array)&&h[0].length){var p=d3.select(this.parentNode).append("text"),v=e.legend.font.size;v instanceof Array||(v=[v]),p.attr("font-size",v[v.length-1]+"px").attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("stroke","none").attr("fill",g(r)).attr("x",0).attr("y",0).each(function(t){x().align("middle").container(d3.select(this)).height(I).padding(e.ui.padding).resize(v.length>1).size(v).text(h[0]).width(I).valign("middle").draw()}),p.select("tspan").empty()&&p.remove()}}return r})}var w=!0,I=0;if(!e.error.internal&&e.color.value&&!e.small&&e.legend.value)if(e.color.valueScale)if(e.color.valueScale){e.dev.value&&h.time("drawing color scale"),e.g.legend.selectAll("g.d3plus_color").transition().duration(e.draw.timing).attr("opacity",0).remove();var A=e.color.valueScale.domain(),C=e.color.valueScale.range();A.length<=2&&(A=i(A,6));var _=e.g.legend.selectAll("g.d3plus_scale").data(["scale"]);_.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var k=_.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);k.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var M=k.selectAll("stop").data(d3.range(0,C.length));M.enter().append("stop").attr("stop-opacity",1),M.attr("offset",function(e){return Math.round(e/(C.length-1)*100)+"%"}).attr("stop-color",function(e){return C[e]}),M.exit().remove();var z=_.selectAll("rect#gradient").data(["gradient"]);z.enter().append("rect").attr("id","gradient").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.legend.gradient.height).attr("stroke",e.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");var N=_.selectAll("text.d3plus_tick").data(d3.range(0,A.length));N.enter().append("text").attr("class","d3plus_tick").attr("stroke","none").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding});var S=0;N.order().attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("font-size",e.legend.font.size+"px").style("text-anchor",e.legend.font.align).attr("fill",e.legend.font.color).text(function(t){return e.format.value(A[t],{key:e.color.value,vars:e})}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding}).each(function(e){var t=Math.ceil(this.getBBox().width);t>S&&(S=t)}),S+=2*e.labels.padding;var j=S*(A.length-1);if(j+S<e.width.value){j+S<e.width.value/2&&(j=e.width.value/2,S=j/A.length,j-=S);var D;D="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?e.width.value-e.ui.padding-j:e.width.value/2-j/2,N.transition().duration(e.draw.timing).attr("x",function(e){return D+S*e}),N.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();var T=_.selectAll("rect.d3plus_tick").data(d3.range(0,A.length));T.enter().append("rect").attr("class","d3plus_tick").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),T.transition().duration(e.draw.timing).attr("x",function(e){var t=0===e?1:0;return D+S*e-t}).attr("y",e.ui.padding).attr("width",1).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),T.exit().transition().duration(e.draw.timing).attr("width",0).remove(),z.transition().duration(e.draw.timing).attr("x",function(t){return"middle"==e.legend.align?e.width.value/2-j/2:"end"==e.legend.align?e.width.value-j-e.ui.padding:e.ui.padding}).attr("y",e.ui.padding).attr("width",j).attr("height",e.legend.gradient.height),_.transition().duration(e.draw.timing).attr("opacity",1),e.dev.value&&h.timeEnd("drawing color scale")}else w=!1}else w=!1;else{e.dev.value&&h.time("grouping data by colors");var O;if(e.nodes.value&&e.types[e.type.value].requirements.indexOf("nodes")>=0){if(O=a(e.nodes.restriced||e.nodes.value),e.data.viz.length)for(var L=0;L<O.length;L++){var E=e.data.viz.filter(function(t){return t[e.id.value]===O[L][e.id.value]});E.length&&(O[L]=E[0])}}else O=e.data.viz;O.length&&"key"in O[0]&&"values"in O[0]&&(O=d3.merge(O.map(function(e){return e.values})));var B=function(t){return d(e,t,F)},F=0,P=e.id.value,G=e.id.nesting.indexOf(e.color.value);if(G>=0)F=G,P=e.id.nesting[G];else for(var Z=0;Z<=e.depth.value;Z++){F=Z,P=e.id.nesting[Z];var R=m(O,function(t){return c(e,t,P)}),Y=m(O,B);if(R.length>=Y.length&&Y.length>1)break}var W=[e.color.value],C=s(e,O,W,!1);e.dev.value&&h.timeEnd("grouping data by color");var U=e.width.value;I=e.legend.size;var j=I*C.length+e.ui.padding*(C.length+1);if(I instanceof Array){e.dev.value&&h.time("calculating legend size");for(var L=I[1];L>=I[0];L--)if(j=L*C.length+e.ui.padding*(C.length+1),U>=j){I=L;break}e.dev.value&&h.timeEnd("calculating legend size")}else"number"!=typeof I&&I!==!1&&(I=30);if(j>U||1==C.length)w=!1;else{j-=2*e.ui.padding,e.dev.value&&h.time("sorting legend");var V=e[e.legend.order.value].value,X=e.color.value;V?"color"!==e.legend.order.value&&(X=[]):V=e[e.color.value].value,r(C,V,e.legend.order.sort.value,X,e,F),e.dev.value&&h.timeEnd("sorting legend"),e.dev.value&&h.time("drawing legend");var D;D="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?U-e.ui.padding-j:U/2-j/2,e.g.legend.selectAll("g.d3plus_scale").transition().duration(e.draw.timing).attr("opacity",0).remove();var H={},J=e.g.legend.selectAll("g.d3plus_color").data(C,function(t){var n=d(e,t,P);return n in H||(H[n]=-1),H[n]++,H[n]+"_"+n});J.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(t).append("rect").attr("class","d3plus_color").call(n),J.order().transition().duration(e.draw.timing).call(t).attr("opacity",1).selectAll("rect.d3plus_color").call(n),J.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.legend.tooltip.value&&J.on(u.over,function(t,n){d3.select(this).style("cursor","pointer");var r,i,a=this.getBoundingClientRect(),s=a.left+I/2+v.x(),l=a.top+I/2+v.y()+5,d=c(e,t,P),h=e.id.nesting.indexOf(P),p=h>=0?f(e,t,h)[0]:e.format.value(c(e,t,e.color.value,P),{key:e.color.value,vars:e,data:t});if(e.legend.filters.value&&!(d instanceof Array)){r="<div style='text-align:center;'>";var g=e.format.locale.value;r+="<div class='mute'>"+e.format.value(g.method.mute)+"</div>",r+="<div class='solo'>"+e.format.value(g.method.solo)+"</div>",r+="</div>",i=function(t){var n={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};t.select(".mute").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.mute.value;e.history.states.push(function(){e.self.id({mute:t}).draw()}),e.self.id({mute:d}).draw()}),t.select(".solo").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.solo.value;e.history.states.push(function(){e.self.id({solo:t}).draw()}),e.self.id({solo:d}).draw()})}}o({data:t,html:r,js:i,depth:F,footer:!1,vars:e,x:s,y:l,mouseevents:this,title:p,offset:.4*I})}).on(u.out,function(t){p(e.type.value)}),e.dev.value&&h.timeEnd("drawing legend")}}else w=!1;if(e.legend.value&&key&&w){if(e.dev.value&&h.time("positioning legend"),I)var q=I+e.ui.padding;else var Q=e.g.legend.node().getBBox(),q=Q.height+Q.y;0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=q,e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom)+")"),e.dev.value&&h.timeEnd("positioning legend")}else e.dev.value&&h.time("hiding legend"),e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")"),e.dev.value&&h.timeEnd("hiding legend")}},{"../../../array/sort.coffee":34,"../../../client/pointer.coffee":38,"../../../client/scroll.js":41,"../../../client/touch.coffee":43,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/nest.js":60,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,"../../../string/strip.js":174,"../../../textwrap/textwrap.coffee":199,"../../../tooltip/remove.coffee":202,"../../../util/buckets.coffee":203,"../../../util/copy.coffee":206,"../../../util/dataURL.coffee":208,"../../../util/uniques.coffee":209,"../tooltip/create.js":239}],245:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../color/text.coffee");
t.exports=function(e,t){function n(t){t.style(o).style("position","absolute").style("background-color",l).style("text-align","center").style("left",function(){return"center"==s?"50%":"0px"}).style("width",function(){return"center"==s?"auto":e.width.value+"px"}).style("margin-left",function(){return"center"==s?-(this.offsetWidth/2)+"px":"0px"}).style("top",function(){return"center"==s?"50%":"top"==s?"0px":"auto"}).style("bottom",function(){return"bottom"==s?"0px":"auto"}).style("margin-top",function(){if("large"==a){var e=this.offsetHeight||this.getBoundingClientRect().height;return-e/2+"px"}return"0px"})}t=e.messages.value?t:null;var a=e.messages.style.value||(t===e.error.internal?"large":e.messages.style.backup);if("large"===a)var o=e.messages,s="center";else{if(e.footer.value)var o=e.footer;else if(e.title.value)var o=e.title;else if(e.title.sub.value)var o=e.title.sub;else if(e.title.total.value)var o=e.title.total;else var o=e.title.sub;var s=o.position}var o={color:o.font.color,"font-family":o.font.family.value,"font-weight":o.font.weight,"font-size":o.font.size+"px",padding:o.padding+"px"},l=e.messages.background.value;l||(l=e.background.value,("none"===l||"transparent"===l)&&(l=i(o.color))),e.g.message=e.container.value.selectAll("div#d3plus_message").data(["message"]);var u=e.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);u.append("div").attr("class","d3plus_message_text").style("display","block"),e.g.message.select(".d3plus_message_text").text(t?t:e.g.message.text());var c=navigator.onLine,d=75,f=e.g.message.selectAll(".d3plus_message_branding").data(e.messages.branding.value&&"center"===s?[0]:[]);f.enter().append("div").attr("class","d3plus_message_branding").style("margin-top","15px").style("padding-top","0px").style("display","block").style("font-size","11px").style("background-size",d+"px").style("background-position","center 10px").style("background-repeat","no-repeat").style("cursor","pointer").on(r.click,function(){window.open("http://www.d3plus.org/","_blank")});var h=d3.hsl(l).l<.5?e.messages.branding.image.dark:e.messages.branding.image.light;f.text(c?"Powered by:":"Powered by D3plus").style("background-color",c?l:"transparent").style("background-image",c?"url('"+h+"')":"none").style("min-width",c?d+"px":"auto").style("height",c?d+"px":"auto"),f.exit().remove(),e.g.message.style("display",t?"inline-block":"none").call(n).style("opacity",t?1:0)}},{"../../../client/pointer.coffee":38,"../../../color/text.coffee":50}],246:[function(e,t,n){var r,i,a,o,s,l,u,c,d,f;r=e("../../../util/closest.coffee"),i=e("../../../client/css.coffee"),o=e("../../../font/sizes.coffee"),a=e("../../../client/pointer.coffee"),s=e("../../../color/mix.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../core/console/print.coffee"),d=e("../../../color/text.coffee"),f=e("../../../core/data/time.coffee"),l=!1,t.exports=function(e){var t,n,o,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U,V,X,H,J,q,Q,K,$,ee,te,ne,re,ie,ae,oe;if(!e.timeline.value||e.error.internal&&e.data.missing||e.small||!e.data.time||!(e.data.time.values.length>1))return e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")");if(e.dev.value&&c.time("drawing timeline"),U={"font-weight":e.ui.font.weight,"font-family":e.ui.font.family.value,"font-size":e.ui.font.size+"px","text-anchor":"middle"},oe=e.data.time.ticks.map(function(e){return new Date(e)}),q=f(e,{values:oe,style:U}),te=q.values.map(Number),J=q.format,e.time.solo.value.length)for(w=d3.extent(e.time.solo.value),b=I=0,_=w.length;_>I;b=++I)v=w[b],v.constructor!==Date&&(v+="",4===v.length&&parseInt(v)+""===v&&(v+="/01/01"),v=new Date(v),w[b]=v);else w=d3.extent(oe);if(ae=oe.slice(),re=d3.max(q.sizes.map(function(e){return e.height})),A=~~d3.max(q.sizes.map(function(e){return e.width}))+1,A+=2*e.ui.padding,K=e.timeline.height.value||re+2*e.ui.padding,ee=A*oe.length,E=K,R=K-2*e.ui.padding>=re,t=e.width.value-2*e.ui.padding,R&&e.timeline.play.value&&(t-=E+e.ui.padding),!R||te.length<oe.length||t<A*te.length){for(N=A,A=(t-A)/oe.length,ee=A*oe.length,$=1,X=~~(N/(ee/te.length))+1;X<te.length-1&&(te.length-1)%X!==0;)X++;te=te.filter(function(e,t){return t%X===0})}else $=0,M=new Date(oe[0]),G=e.data.time.stepType,M["set"+G](M["get"+G]()+oe.length),ae.push(M);return F=new Date(w[0]),F=r(ae,F),y=new Date(w[1]),$||y["set"+e.data.time.stepType](y["get"+e.data.time.stepType]()+1),y=r(ae,y),ie=ae.map(Number),z=ie.indexOf(+F),k=ie.indexOf(+y),h=[F,y],P="start"===e.timeline.align?e.ui.padding:"end"===e.timeline.align?e.width.value-e.ui.padding-ee:e.width.value/2-ee/2,R&&e.timeline.play.value&&(P+=(E+e.ui.padding)/2),Z=function(){return clearInterval(l),l=!1,j.call(D,"icon")},g=function(){var e,t,n;if(null!==d3.event.sourceEvent){if(l&&Z(),h=o.extent(),n=r(ae,h[0]),t=r(ae,h[1]),n===t&&(z=ie.indexOf(+n),n<h[0]||0===z?t=ae[z+1]:n=ae[z-1]),z=ie.indexOf(+n),k=ie.indexOf(+t),k-z>=1)e=[n,t];else if(z+1<=oe.length)e=[n,ae[z+1]];else{for(e=[n],b=1;1>=b;)z+b<=oe.length?e.push(ae[z+b]):e.unshift(ae[z-(z+b-oe.length)]),b++;e=[e[0],e[e.length-1]]}return h=e,Y.attr("fill",W),d3.select(this).call(o.extent(e))}},B=function(){var t;return k-z===oe.length-$?t=[]:(t=ie.filter(function(e,t){return t>=z&&k+$>t}),t=t.map(function(e){return new Date(e)})),L(),e.self.time({solo:t}).draw()},m=function(){var t,n,i,a;return null!==d3.event.sourceEvent&&(e.time.solo.value.length?(a=d3.extent(e.time.solo.value),i=ie.indexOf(+r(ae,a[0])),n=ie.indexOf(+r(ae,a[1])),t=i!==z||n!==k):t=k-z!==oe.length-$,t)?B():void 0},S=e.g.timeline.selectAll("rect.d3plus_timeline_play").data(R&&e.timeline.play.value?[0]:[]),O=function(t){return t.attr("width",E+1).attr("height",K+1).attr("fill",e.ui.color.primary.value).attr("stroke",e.ui.color.primary.value).attr("stroke-width",1).attr("x",P-E-1-e.ui.padding).attr("y",e.ui.padding)},S.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(O),S.transition().duration(e.draw.timing).call(O),S.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j=e.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(R&&e.timeline.play.value?[0]:[]),D=function(t,n){var r;return n=e.timeline.play[n],i("font-awesome")?(n=n.awesome,r="FontAwesome"):(n=n.fallback,r="inherit"),t.style("font-family",r).text(n)},T=function(t){var n;return n=K/2+e.ui.padding+1,t.attr("fill",d(e.ui.color.primary.value)).attr("stroke","none").attr(U).attr("x",P-(E-1)/2-e.ui.padding).attr("y",n).attr("dy","0.5ex").call(D,l?"pause":"icon")},j.enter().append("text").attr("class","d3plus_timeline_playIcon").call(T).style("pointer-events","none").attr("opacity",0),j.call(T).transition().duration(e.draw.timing).attr("opacity",1),j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),L=function(){return k-z===oe.length-$?(S.on(a.hover,null).on(a.click,null).transition().duration(e.draw.timing).attr("opacity",.3),j.transition().duration(e.draw.timing).attr("opacity",.3)):(S.on(a.over,function(){return d3.select(this).style("cursor","pointer")}).on(a.out,function(){return d3.select(this).style("cursor","auto")}).on(a.click,function(){return l?Z():(j.call(D,"pause"),k===oe.length?(k-=z,z=0):(z++,k++),B(),l=setInterval(function(){return k===oe.length-$?Z():(z++,k++,B())},e.timeline.play.timing.value))}).transition().duration(e.draw.timing).attr("opacity",1),j.transition().duration(e.draw.timing).attr("opacity",1))},L(),W=function(t){var n,r,i;return r=$?t<=h[1]:t<h[1],t>=h[0]&&r?(i=1,n=d(e.ui.color.secondary.value)):(i=.5,n=d(e.ui.color.primary.value)),$&&e.background.value&&"none"!==e.background.value&&(n=d3.rgb(d(e.background.value))),n=d3.rgb(n),"rgba("+n.r+","+n.g+","+n.b+","+i+")"},n=e.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]),n.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",ee+2).attr("height",K+2).attr("fill",e.ui.color.primary.value).attr("x",P-1).attr("y",e.ui.padding),n.transition().duration(e.draw.timing).attr("width",ee+2).attr("height",K+2).attr("fill",e.ui.color.primary.value).attr("x",P-1).attr("y",e.ui.padding),H=e.g.timeline.selectAll("g#ticks").data(["ticks"]),H.enter().append("g").attr("id","ticks").attr("transform","translate("+e.width.value/2+","+e.ui.padding+")"),p=e.g.timeline.selectAll("g#brush").data(["brush"]),p.enter().append("g").attr("id","brush"),C=e.g.timeline.selectAll("g#labels").data(["labels"]),C.enter().append("g").attr("id","labels"),Y=C.selectAll("text").data(oe,function(e,t){return t}),Y.enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),ne=d3.time.scale().domain(d3.extent(ae)).rangeRound([0,ee]),Y.order().attr(U).text(function(e,t){return te.indexOf(+e)>=0?J(e):""}).attr("opacity",function(t,n){return e.data.time.dataSteps.indexOf(n)>=0?1:.4}).attr("fill",W).attr("transform",function(t,n){var r,i;return r=P+ne(t),$||(r+=A/2),i=K/2+e.ui.padding+1,$&&(i+=K/2+re),"translate("+Math.round(r)+","+Math.round(i)+")"}),Y.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),o=d3.svg.brush().x(ne).extent(h).on("brush",g).on("brushend",m),V=e.axes.discrete&&e[e.axes.discrete].value===e.time.value?e[e.axes.discrete].ticks.color:e.x.ticks.color,H.attr("transform","translate("+P+","+(e.ui.padding+1)+")").transition().duration(e.draw.timing).call(d3.svg.axis().scale(ne).orient("top").ticks(function(){return ae}).tickFormat("").tickSize(-K).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(t){return te.indexOf(+t)>=0?V:s(V,e.background.value,.4,1)}),H.selectAll("path").attr("fill","none"),p.attr("transform","translate("+P+","+(e.ui.padding+1)+")").attr("opacity",1).call(o),Y.attr("pointer-events","none"),p.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",K).attr("shape-rendering","crispEdges").on(a.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),p.selectAll("rect.extent").attr("opacity",.75).attr("height",K).attr("fill",e.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(a.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),e.timeline.handles.value?(x=p.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),x.enter().insert("rect","rect").attr("class","d3plus_handle"),x.attr("fill",e.timeline.handles.color).attr("transform",function(t){var n;return n="resize e"===this.parentNode.className.baseVal?-e.timeline.handles.size:0,"translate("+n+",0)"}).attr("width",e.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",e.timeline.handles.opacity),p.selectAll("g.resize").selectAll("rect").attr("height",K)):p.selectAll("g.resize").remove(),Q=e.g.timeline.node().getBBox(),0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=Q.height+Q.y,e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+Math.round(e.height.value-e.margin.bottom-e.ui.padding/2)+")"),e.margin.bottom+=e.ui.padding,e.dev.value?c.time("drawing timeline"):void 0}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/time.coffee":62,"../../../font/sizes.coffee":101,"../../../util/closest.coffee":205}],247:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../core/fetch/value.coffee"),a=e("../../../core/console/print.coffee"),o=e("../../../client/rtl.coffee"),s=e("../../../textwrap/textwrap.coffee");t.exports=function(e){function t(t){t.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(t){return t.link?e.links.font.color:t.style.font.color}).attr("font-family",function(t){return t.link?e.links.font.family.value:t.style.font.family.value}).attr("font-weight",function(t){return t.link?e.links.font.weight:t.style.font.weight}).style("text-decoration",function(t){return t.link?e.links.font.decoration.value:t.style.font.decoration.value}).style("text-transform",function(t){return t.link?e.links.font.transform.value:t.style.font.transform.value})}function n(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!o||"right"==t&&o?"start":"left"==t&&o||"right"==t&&!o?"end":t}var l=e.size.value?e.size.value:"number"===e.color.type?e.color.value:!1;if(e.data.viz&&e.title.total.value&&!e.small)if(l){e.dev.value&&a.time("calculating total value");var u=e.data.pool;e.focus.value.length&&(u=e.data.viz.filter(function(t){return t[e.id.value]==e.focus.value[0]}));var c,d=e.aggs.value[l]||"sum";if(d.constructor===Function?c=d(u):(u=u.reduce(function(t,n){var r=i(e,n,l);return r instanceof Array?t=t.concat(r):t.push(r),t},[]),c=d3[d](u)),(0===c||null===c||void 0===c)&&(c=!1),"number"==typeof c){var f="";if(e.data.mute.length||e.data.solo.length||e.focus.value.length){var h=d3.sum(e.data.value,function(t){if(e.time.solo.value.length>0)var n=e.time.solo.value.indexOf(i(e,t,e.time.value))>=0;else if(e.time.mute.value.length>0)var n=e.time.solo.value.indexOf(i(e,t,e.time.value))<0;else var n=!0;return n?i(e,t,l):void 0});if(h>c){var f=c/h*100,p=e.format.value(h,{key:e.size.value,vars:e});f=" ("+e.format.value(f,{key:"share",vars:e})+" of "+p+")"}}c=e.format.value(c,{key:e.size.value,vars:e});var g=e.title.total.value,m=g.prefix||e.format.value(e.format.locale.value.ui.total)+": ";c=m+c,g.suffix?c+=g.suffix:null,c+=f}e.dev.value&&a.timeEnd("calculating total value")}else var c=!1;else var c=!1;var v=[];if(e.footer.value&&v.push({link:e.footer.link,style:e.footer,type:"footer",value:e.footer.value}),!e.small){if(e.title.value){var y=e.title.value;"function"==typeof y&&(y=y(e.self)),v.push({link:e.title.link,style:e.title,type:"title",value:y})}if(e.title.sub.value){var y=e.title.sub.value;"function"==typeof y&&(y=y(e.self)),v.push({link:e.title.sub.link,style:e.title.sub,type:"sub",value:y})}e.title.total.value&&c&&v.push({link:e.title.total.link,style:e.title.total,type:"total",value:c})}e.dev.value&&a.time("drawing titles");var x=e.svg.selectAll("g.d3plus_title").data(v,function(e){return e.type}),b=e.title.width||e.width.value-e.margin.left-e.margin.right;x.enter().append("g").attr("class",function(e){return"d3plus_title "+e.type}).attr("opacity",0).append("text").attr("stroke","none").call(t),x.each(function(r){var i=d3.select(this).select("text").call(t),a=n(r);s().align(a).container(i).height(e.height.value/2).size(!1).text(r.value).width(b).draw(),r.y=e.margin[r.style.position],e.margin[r.style.position]+=this.getBBox().height+2*r.style.padding}).on(r.over,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",e.links.hover.color).attr("font-family",e.links.hover.family.value).attr("font-weight",e.links.hover.weight).style("text-decoration",e.links.hover.decoration.value).style("text-transform",e.links.hover.transform.value)}).on(r.out,function(n){n.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","auto").select("text").call(t)}).on(r.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).attr("opacity",1).attr("transform",function(t){var r=t.style.position,i="top"==r?0+t.y:e.height.value-t.y;"bottom"==r?i-=this.getBBox().height+t.style.padding:i+=t.style.padding;var a=n(t);if("start"===a)var o=e.margin.left+e.title.padding;else d3.select(this).select("text").node().getBBox().width,o="middle"===a?e.width.value/2-b/2:e.width.value-b-e.margin.right-e.title.padding;return"translate("+o+","+i+")"}),x.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.margin.top>0&&(e.margin.top+=e.title.padding),e.margin.bottom>0&&(e.margin.bottom+=e.title.padding);var w=e.title.height;w&&e.margin[e.title.position]<w&&(e.margin[e.title.position]=w),e.dev.value&&a.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":38,"../../../client/rtl.coffee":40,"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../textwrap/textwrap.coffee":199}],248:[function(e,t,n){var r,i;r=e("./labels.coffee"),i=e("./transform.coffee"),t.exports=function(e,t,n){var a,o,s,l,u,c,d,f,h;return t||(t=e.zoom.bounds),"number"!=typeof n&&(n=e.timing.transitions),e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]},h=e.types[e.type.value],s=e.coords.fit.value,a="auto"===s||h.requirements.indexOf("coords")<0?d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]):e.zoom.size[s]/e["app_"+s],u=d3.min([e.width.viz,e.height.viz]),c=h.zoom?2*e.coords.padding:0,d=(u-c)/u/a,o=e.zoom.behavior.scaleExtent(),(o[0]===o[1]||t===e.zoom.bounds)&&e.zoom.behavior.scaleExtent([d,16*d]),l=e.zoom.behavior.scaleExtent()[1],d>l&&(d=l),e.zoom.scale=d,f=[e.width.viz/2-e.zoom.size.width*d/2-t[0][0]*d,e.height.viz/2-e.zoom.size.height*d/2-t[0][1]*d],e.zoom.translate=f,e.zoom.behavior.translate(f).scale(d),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},e.zoom.reset=!1,(e.labels.value||e.labels.changed)&&r(e),i(e,n)}},{"./labels.coffee":250,"./transform.coffee":253}],249:[function(e,t,n){t.exports=function(e,t){var n,r,i;return r=t.id.nesting.length-1,n=t.depth.value,i=t.id.nesting[n+1],t.types[t.type.value].nesting===!1?0:(e.d3plus.merged||i in e&&r>n)&&(!e||i in e)?1:!(n===r&&n>0||e&&i&&!(i in e))||!t.small&&t.tooltip.html.value?0:-1}},{}],250:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n;return e.dev.value&&r.time("determining label visibility"),n=e.zoom.behavior.scaleExtent(),t=function(t){return t.attr("opacity",function(t){var r;return t||(t={}),r=parseFloat(d3.select(this).attr("font-size"),10),t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},e.draw.timing?e.g.viz.selectAll("text.d3plus_label").transition().duration(e.draw.timing).call(t):e.g.viz.selectAll("text.d3plus_label").call(t),e.dev.value?r.timeEnd("determining label visibility"):void 0}},{"../../../core/console/print.coffee":52}],251:[function(e,t,n){var r,i,a;r=e("./labels.coffee"),i=e("../../../tooltip/remove.coffee"),a=e("./transform.coffee"),t.exports=function(e){var t,n,o,s,l,u,c,d,f,h,p;return n=d3.event.sourceEvent?d3.event.sourceEvent.type:null,l=d3.event.translate,s=d3.event.scale,o=e.zoom.bounds,d=(e.width.viz-e.zoom.size.width*s)/2,c=d>0?d:0,u=d>0?e.width.viz-d:e.width.viz,p=(e.height.viz-e.zoom.size.height*s)/2,h=p>0?p:0,f=p>0?e.height.viz-p:e.height.viz,l[0]+o[0][0]*s>c?l[0]=-o[0][0]*s+c:l[0]+o[1][0]*s<u&&(l[0]=u-o[1][0]*s),l[1]+o[0][1]*s>h?l[1]=-o[0][1]*s+h:l[1]+o[1][1]*s<f&&(l[1]=f-o[1][1]*s),e.zoom.behavior.translate(l).scale(s),e.zoom.translate=l,e.zoom.scale=s,"wheel"===n&&i(e.type.value),(e.labels.value||e.labels.changed)&&("wheel"===n?(t=e.draw.timing?100:250,clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){return r(e)},t)):r(e)),"dblclick"===n?a(e,e.timing.transitions):a(e,0)}},{"../../../tooltip/remove.coffee":202,"./labels.coffee":250,"./transform.coffee":253}],252:[function(e,t,n){t.exports=function(e,t){var n,r,i,a;r=e.zoom,t||(t=d3.event),a=r.scale>r.behavior.scaleExtent()[0],n=e.types[e.type.value].zoom&&r.value&&r.scroll.value,i=t.touches&&t.touches.length>1&&n,i||a||t.stopPropagation()}},{}],253:[function(e,t,n){t.exports=function(e,t){var n;return"number"!=typeof t&&(t=e.timing.transitions),n="translate("+e.zoom.translate+")",n+="scale("+e.zoom.scale+")",t?e.g.viz.transition().duration(t).attr("transform",n):e.g.viz.attr("transform",n)}},{}],254:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:r(!0),solo:r(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],255:[function(e,t,n){t.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],256:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:r,value:!1}},{"../../core/methods/process/data.coffee":86}],257:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={background:{color:"#fafafa",rendering:r(),stroke:{color:"#ccc",width:1}},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},ticks:{accepted:[Boolean],value:!0}}},{"../../core/methods/rendering.coffee":91}],258:[function(e,t,n){t.exports={accepted:[String],value:"#ffffff"}},{}],259:[function(e,t,n){t.exports={accepted:[Function,String],value:!1}},{}],260:[function(e,t,n){var r,i;r=e("../../core/methods/filter.coffee"),i=e("../../color/scale.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:r(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(e){return e instanceof Array?d3.scale.ordinal().range(e):"d3plus"===e?i:"string"==typeof e?d3.scale[e]():e},value:"d3plus"},solo:r(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":48,"../../core/methods/filter.coffee":80}],261:[function(e,t,n){t.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(e,t){return"string"==typeof e&&(e=[e]),e},value:!1}},{}],262:[function(e,t,n){arguments[4][107][0].apply(n,arguments)},{dup:107}],263:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],id:"default",process:function(e,t){return e===!1?!1:("default"===t.container.id&&t.self.container({id:"d3plus_"+ +new Date}),r(e)?e.append("div"):e instanceof Array?d3.select(e[0][0]).append("div"):d3.select(e).append("div"))},value:!1}},{"../../util/d3selection.coffee":207}],264:[function(e,t,n){var r,i;r=e("../../core/methods/filter.coffee"),i=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:r(!1),padding:20,process:i,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:r(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":80,"../../core/methods/process/data.coffee":86}],265:[function(e,t,n){var r,i,a;r=e("../../core/fetch/value.coffee"),i=e("../../client/ie.js"),a=e("../../string/strip.js"),t.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(e,t){var n,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G;if(void 0===t.returned)return[];if(e=e||t.cols.value,e instanceof Array?l=e:"string"==typeof e&&(l=[e]),c=[],P=[],t.title.value?(F=t.title.value,"function"==typeof F&&(F=F(t.self)),F=a(F),z=250,F=F.substr(0,z)):F="D3plus Visualization Data",e===!0)for(l=d3.keys(t.data.keys),c.push(l),O=t.data.value,g=0,y=O.length;y>g;g++){for(d=O[g],B=[],m=0,x=l.length;x>m;m++)o=l[m],G=d[o],"string"===t.data.keys[o]&&(G='"'+G+'"'),B.push(G);c.push(B)}else{for(l||(l=[t.id.value],t.time.value&&l.push(t.time.value),t.size.value&&l.push(t.size.value),t.text.value&&l.push(t.text.value)),v=0,b=l.length;b>v;v++)o=l[v],P.push(t.format.value(o));for(c.push(P),L=t.returned.nodes,M=0,w=L.length;w>M;M++)if(S=L[M],null!=S.values&&S.values instanceof Array)for(E=S.values,N=0,I=E.length;I>N;N++){for(G=E[N],B=[],j=0,A=l.length;A>j;j++)s=l[j],G=r(t,G,s),"string"==typeof G&&(G='"'+G+'"'),B.push(G);c.push(B)}else{for(B=[],D=0,C=l.length;C>D;D++)s=l[D],B.push(r(t,S,s));c.push(B)}}for(u="data:text/csv;charset=utf-8,",p=T=0,_=c.length;_>T;p=++T)o=c[p],f=o.join(","),u+=p<c.length?f+"\n":f;return i?(n=new Blob([u],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(n,F+".csv")):(h=encodeURI(u),k=document.createElement("a"),k.setAttribute("href",h),k.setAttribute("download",F+".csv"),k.click()),this.data=c,l},value:void 0}},{"../../client/ie.js":37,"../../core/fetch/value.coffee":67,"../../string/strip.js":174}],266:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(e,t){return r(e,t,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":86}],267:[function(e,t,n){t.exports={accepted:[Function,Number],value:0}},{}],268:[function(e,t,n){t.exports={accepted:[!1,Function,Object],value:!1}},{}],269:[function(e,t,n){arguments[4][111][0].apply(n,arguments)},{dup:111}],270:[function(e,t,n){var r=e("../../core/console/print.coffee"),i=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;r.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;r.warning(i(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&r.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var a={};changes.forEach(function(e){var t=e.method;delete e.method,a[t]=e}),e(a),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],271:[function(e,t,n){var r=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(e,t,n){var r=this;if(!r.value)return[];if(!t)var t="id";var i=r.restricted||r.value,a=[];if(!e)return i;var o=i.filter(function(i){var o=!1;return i[r.source][t]==e?(o=!0,n&&a.push(i[r.target])):i[r.target][t]==e&&(o=!0,n&&a.push(i[r.source])),o});return n?a:o},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scale.linear()},value:1},process:r,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":86}],272:[function(e,t,n){t.exports={accepted:[Boolean,String],value:!1}},{}],273:[function(e,t,n){t.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(e){return e===!1?[]:e instanceof Array?e:[e]},tooltip:{accepted:[Boolean],value:!0},value:[]}},{}],274:[function(e,t,n){var r,i,a,o;r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:i(),family:a(),secondary:{align:r(),color:"#444444",decoration:i(),family:a(),size:12,spacing:0,transform:o(),weight:200},size:12,spacing:0,transform:o(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],275:[function(e,t,n){var r,i,a;i=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:r(),family:i(),size:11,transform:a(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],276:[function(e,t,n){var r,i,a,o;r=e("../../number/format.coffee"),i=e("../../core/locale/locale.coffee"),a=e("../../object/merge.coffee"),o=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(i)},process:function(e){var t,n;return t="en_US",n=i[t],e!==t&&(n=a(n,i[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,i,a;return t||(t={}),t.locale||(t.locale=this.locale.value),a=t.vars||{},a.time&&a.time.value&&t.key===a.time.value?(i=e.constructor===Date?e:new Date(e),a.data.time.format(i)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||o)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],277:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],278:[function(e,t,n){var r,i,a,o,s,l,u,c;r=e("../../../core/methods/font/align.coffee"),i=e("../../../core/methods/font/decoration.coffee"),a=e("../../../core/methods/font/family.coffee"),o=e("../../../core/methods/filter.coffee"),l=e("../../../core/methods/font/position.coffee"),u=e("../../../core/methods/rendering.coffee"),c=e("../../../core/methods/font/transform.coffee"),s={x:"bottom",x2:"top",y:"left",y2:"right"},t.exports=function(e){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:i(!1),family:a(""),size:!1,spacing:0,transform:c(!1),weight:!1},rendering:u(),value:!0},dataFilter:!0,deprecates:[e+"axis",e+"axis_val",e+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:u(),value:!0},label:{accepted:[Boolean,String],fetch:function(t){return this.value===!0?t.format.value(t[e].value,{key:e,vars:t}):this.value},font:{color:"#444",decoration:i(),family:a(),size:12,spacing:0,transform:c(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"10, 10"},color:"#888",font:{align:r("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:i(),family:a(),padding:{accepted:[Number],value:10},position:l("middle"),size:12,transform:c(),weight:200},process:Array,rendering:u(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"none"},rendering:u(),width:2,value:!0},mute:o(!0),orient:{accepted:["top","right","bottom","left"],value:s[e]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",e+"axis_scale"],process:function(t,n){var r,i,a,o;for(a=["log","discrete","share"],r=0,i=a.length;i>r;r++)o=a[r],o===t?n.axes[o]=e:n.axes[o]===e&&(n.axes[o]=!1);return"discrete"===t&&(n.axes.opposite=0===e.indexOf("x")?"y":"x"),t},value:"linear"},solo:o(!0),stacked:{accepted:[Boolean],process:function(t,n){return t||n.axes.stacked!==e?t&&(n.axes.stacked=e):n.axes.stacked=!1,t},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:i(),family:a(),size:10,spacing:0,transform:c(),
weight:200},labels:{accepted:[Boolean,Array],value:!0},rendering:u(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":80,"../../../core/methods/font/align.coffee":81,"../../../core/methods/font/decoration.coffee":82,"../../../core/methods/font/family.coffee":83,"../../../core/methods/font/position.coffee":84,"../../../core/methods/font/transform.coffee":85,"../../../core/methods/rendering.coffee":91}],279:[function(e,t,n){t.exports={accepted:[Boolean],back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[],value:!0}},{}],280:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":88}],281:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],grouping:{accepted:[Boolean],value:!0},mute:r(!0),nesting:["id"],solo:r(!0),value:"id"}},{"../../core/methods/filter.coffee":80}],282:[function(e,t,n){var r,i,a;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t]),e},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:r(),family:i(),size:11,transform:a(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],283:[function(e,t,n){var r;r=e("../../core/methods/font/family.coffee"),t.exports={accepted:[Boolean],align:"middle",filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:r(),size:[8,14],weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83}],284:[function(e,t,n){var r,i,a;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={font:{color:"#444444",decoration:r(),family:i(),transform:a(),weight:200},hover:{color:"#444444",decoration:r(),family:i(),transform:a(),weight:200}}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],285:[function(e,t,n){arguments[4][122][0].apply(n,arguments)},{"../../core/methods/process/margin.coffee":89,dup:122}],286:[function(e,t,n){var r,i,a;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},branding:{accepted:[Boolean],image:{dark:"http://d3plus.org/assets/img/icon-transparent-invert.png",light:"http://d3plus.org/assets/img/icon-transparent.png"},value:!1},font:{color:"#444",decoration:r(),family:i(),size:16,transform:a(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],287:[function(e,t,n){t.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}},{}],288:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:r,value:!1}},{"../../core/methods/process/data.coffee":86}],289:[function(e,t,n){t.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],value:"desc"},value:!1}},{}],290:[function(e,t,n){t.exports={accepted:[Boolean],value:!1,timeout:400,process:function(e,t){var n,r;return e?(n=null,r=function(){var e,n,r;return n=t.container.value.node().parentNode.getBoundingClientRect(),r=n.width,e=n.height,t.width.value=r,t.height.value=e,t.self(t.container.value)},d3.select(window).on("resize."+t.container.id,function(e){return function(t){return clearTimeout(n),n=setTimeout(r,e.timeout)}}(this)),e):!1}}},{}],291:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={accepted:function(e){var t;return t=e.types[e.type.value].shapes,!t||t instanceof Array||(t=[t]),t.length?t:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:r(),value:!1}},{"../../core/methods/rendering.coffee":91}],292:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value","value_var"],mute:r(!0),scale:{accepted:[Function],deprecates:"size_scale",max:{accepted:[Function,Number],value:function(e){return Math.floor(d3.max([d3.min([e.width.viz,e.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3},value:d3.scale.sqrt()},solo:r(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],293:[function(e,t,n){t.exports={value:!1}},{}],294:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["else_var","else"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":80}],295:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":80}],296:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:r(!1),solo:r(!1),value:!1}},{"../../core/methods/filter.coffee":80}],297:[function(e,t,n){t.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"\uf04b",fallback:"\u25ba"},pause:{accepted:[!1,String],awesome:"\uf04c",fallback:"\u275a\u275a"},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],298:[function(e,t,n){t.exports={mouseevents:60,transitions:600,ui:200}},{}],299:[function(e,t,n){var r,i,a,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),a=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:i(),size:16,transform:o(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=a(e).toLowerCase(),t.self.container({id:n})),e},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:r(),family:i(),size:12,transform:o(),weight:200},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:r(),family:i(),size:12,transform:o(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],300:[function(e,t,n){var r,i;r=e("../../core/methods/font/family.coffee"),i=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:r(),size:12,transform:i(),weight:200},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],301:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":80}],302:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},mode:{accepted:function(e){return e.types[e.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],303:[function(e,t,n){var r,i,a,o;a=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Array,Boolean],align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:i(),family:a(),size:11,transform:o(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],304:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],305:[function(e,t,n){t.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],306:[function(e,t,n){var r,i,a,o,s,l,u,c;i=e("../../util/closest.coffee"),a=e("../../core/fetch/value.coffee"),o=e("./helpers/graph/draw.coffee"),s=e("./helpers/graph/nest.coffee"),l=e("../../array/sort.coffee"),u=e("./helpers/graph/stack.coffee"),c=e("../../core/data/threshold.js"),r=function(e){var t,n,r,i,s,c,d,f,h,p,g;if(o(e,{buffer:e.axes.opposite,zero:!0}),i=e.x.domain.viz.concat(e.y.domain.viz),i.indexOf(void 0)>=0)return[];for(n=l(e.data.viz,null,null,null,e),r=e[e.axes.discrete],h=e[e.axes.opposite],s=0,d=n.length;d>s;s++)for(p=n[s],p.d3plus||(p.d3plus={}),g=p.values,c=0,f=g.length;f>c;c++)t=g[c],t.d3plus||(t.d3plus={}),t.d3plus.x=r.scale.viz(a(e,t,r.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=h.scale.viz(a(e,t,h.value)),t.d3plus.y+=e.axes.margin.top,t.d3plus.merged instanceof Array&&(p.d3plus.merged||(p.d3plus.merged=[]),p.d3plus.merged=p.d3plus.merged.concat(t.d3plus.merged)),t.d3plus.text&&!p.d3plus.text&&(p.d3plus.text=t.d3plus.text);return u(e,n)},r.filter=function(e,t){return s(e,c(e,t,e[e.axes.discrete].value))},r.requirements=["data","x","y"],r.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),e[e.axes.discrete].zerofill.value||e.self[e.axes.discrete]({zerofill:!0}),e[e.axes.opposite].stacked.value||"stacked"!==e.type.value||e.self[e.axes.opposite]({stacked:!0}),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},r.shapes=["area"],r.threshold=function(e){return 20/e.height.viz},r.tooltip="static",t.exports=r},{"../../array/sort.coffee":34,"../../core/data/threshold.js":61,"../../core/fetch/value.coffee":67,"../../util/closest.coffee":205,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],307:[function(e,t,n){var r,i,a,o,s,l,u,c=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("../../util/buckets.coffee"),a=e("../../core/fetch/value.coffee"),o=e("./helpers/graph/draw.coffee"),s=e("./helpers/graph/nest.coffee"),l=e("./helpers/graph/stack.coffee"),u=e("../../util/uniques.coffee"),r=function(e){var t,n,r,s,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U;if(f=e.axes.discrete,m="x"===f?"height":"width",Y="x"===f?"width":"height",L=e.axes.opposite,r="x"===f?"left":"top",j="x"===f?"top":"left",o(e,{buffer:!0,zero:L}),g=e.x.domain.viz.concat(e.y.domain.viz),g.indexOf(void 0)>=0)return[];if(N=e.data.viz,e.axes.stacked)for(x=0,I=N.length;I>x;x++)F=N[x],l(e,F.values);for(Z=e.axes[Y]/e[e.axes.discrete].ticks.values.length,B=e[e.axes.discrete].padding.value,1>B&&(B*=Z),2*B>Z&&(B=.1*Z),M=Z-2*B,e.axes.stacked||(e[f].persist.position.value?(P=e[f].value,p=c.call(e.id.nesting,P)>=0?d3.max(N,function(e){return e.values.length}):u(N,e.id.value,a,e).length,M/=p,D=Z/2-M/2-B,W=d3.scale.ordinal(),1===p?W.domain([0]).range([0]):W.domain([0,p-1]).range([-D,D])):W=d3.scale.linear()),d=[],U=0,e[f].persist.position.value&&!e.axes.stacked&&(y=u(d3.merge(N.map(function(e){return e.values})),e.id.value,a,e,e.id.value,!1),W.domain(y),1===y.length?W.range([0]):W.range(i(W.range(),y.length))),k=d3.max(N,function(e){return e.values.length}),b=0,A=N.length;A>b;b++)for(E=N[b],e.axes.stacked?(t=1,S=M):e[f].persist.position.value?(t=p,S=M):(t=E.values.length,e[f].persist.size.value?(S=M/k,D=Z/2-(k-t)*(S/2)-S/2-B):(S=M/t,D=Z/2-S/2-B),W.domain([0,t-1]),W.range([-D,D])),G=E.values,v=w=0,C=G.length;C>w;v=++w){if(s=G[v],z=e.axes.stacked?0:W(e[f].persist.position.value?a(e,s,e.id.value):v%t),T=e[L],e.axes.stacked)R=s.d3plus[L],n=s.d3plus[L+"0"];else{if(O=a(e,s,T.value),null===O&&(T=e[L+"2"],O=a(e,s,T.value)),0===O)continue;"log"===T.scale.value&&(U=0>O?-1:1),R=T.scale.viz(O),n=T.scale.viz(U)}h=a(e,s,e[f].value),s.d3plus[f]=e[f].scale.viz(h),s.d3plus[f]+=e.axes.margin[r]+z,_=n-R,s.d3plus[L]=n-_/2,e.axes.stacked||(s.d3plus[L]+=e.axes.margin[j]),delete s.d3plus.r,s.d3plus[Y]=S,s.d3plus[m]=Math.abs(_),s.d3plus.init={},s.d3plus.init[L]=T.scale.viz(U),s.d3plus.init[L]-=s.d3plus[L],s.d3plus.init[L]+=e.axes.margin[j],s.d3plus.init[Y]=s.d3plus[Y],e.text.value?delete s.d3plus.label:s.d3plus.label=!1,d.push(s)}return d},r.filter=function(e,t){return s(e,t,e[e.axes.discrete].value)},r.requirements=["data","x","y"],r.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},r.shapes=["square"],t.exports=r},{"../../core/fetch/value.coffee":67,"../../util/buckets.coffee":203,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],308:[function(e,t,n){var r,i,a,o,s;i=e("../../core/fetch/value.coffee"),a=e("./helpers/graph/draw.coffee"),o=e("../../string/strip.js"),s=e("../../util/uniques.coffee"),r=function(e){var t,n,r,l,u,c,d,f,h,p,g,m,v,y;return a(e,{buffer:!0}),r=e.x.domain.viz.concat(e.y.domain.viz),r.indexOf(void 0)>=0?[]:(n=e.axes.discrete,p=e.axes.opposite,t="x"===n?e.axes.margin.left:e.axes.margin.top,h="x"===p?e.axes.margin.left:e.axes.margin.top,l="x"===n?"height":"width",y="x"===n?"width":"height",v=e.axes[y]/e[n].ticks.values.length,m=e.size.value,m="number"==typeof m?m:100,v=d3.min([v-2*e.labels.padding,m]),d=e.type.mode.value,d instanceof Array||(d=[d,d]),c=function(t){var n,r,a;r={};for(n in e.data.keys)a=s(t,n,i,e),r[n]=1===a.length?a[0]:a;return r},f=!1,u=[],g=[],d3.nest().key(function(t){return i(e,t,e[n].value)}).rollup(function(r){var a,m,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U,V,X,H;for(F=e[p].scale.viz,V=r.map(function(t){return i(e,t,e[p].value)}),V.sort(function(e,t){return e-t}),W=s(V),C=d3.quantile(V,.25),D=d3.quantile(V,.5),P=d3.quantile(V,.75),G={},"tukey"===d[1]?(k=C-P,Z=P-1.5*k,R="top tukey"):"extent"===d[1]?(Z=d3.max(V),R="maximum"):"number"==typeof d[1]&&(Z=d3.quantile(V,(100-d[1])/100),R=d[1]+" percentile"),Z=d3.min([d3.max(V),Z]),e.tooltip.extent.value&&(G[R]={key:e[p].value,value:Z}),e.tooltip.iqr.value&&(G["third quartile"]={key:e[p].value,value:P},G.median={key:e[p].value,value:D},G["first quartile"]={key:e[p].value,value:C}),"tukey"===d[0]?(k=C-P,a=C+1.5*k,m="bottom tukey"):"extent"===d[0]?(a=d3.min(V),m="minimum"):"number"==typeof d[0]&&(a=d3.quantile(V,d[0]/100),m=d[0]+" percentile"),a=d3.max([d3.min(V),a]),e.tooltip.extent.value&&(G[m]={key:e[p].value,value:a}),b=[],x=[],Y=[],B=[],_=0,S=r.length;S>_;_++)w=r[_],U=i(e,w,e[p].value),U>=C&&P>=U?b.push(w):U>=a&&C>U?x.push(w):Z>=U&&U>P?Y.push(w):B.push(w);for(z=i(e,r[0],e[n].value),X=e[n].scale.viz(z),X+=t,N=e.format.value(z,{key:e[n].value,vars:e}),z.constructor===Date&&(z=z.getTime()),z=o(z),b=c(b),b.d3plus={color:"white",id:"box_"+z,init:{},label:!1,shape:"square",stroke:"#444",text:"Interquartile Range for "+N},b.d3plus[y]=v,b.d3plus.init[y]=v,b.d3plus[l]=Math.abs(F(C)-F(P)),b.d3plus[n]=X,H=d3.min([F(C),F(P)])+b.d3plus[l]/2,H+=h,b.d3plus[p]=H,b.d3plus.tooltip=G,g.push(b),O={d3plus:{id:"median_line_"+z,position:"height"===l?"top":"right",shape:"whisker","static":!0}},E=e.format.value(D,{key:e[p].value,vars:e}),N={background:"#fff",names:[E],padding:0,resize:!1,x:0,y:0},I=Math.abs(F(D)-F(C)),A=Math.abs(F(D)-F(P)),L=2*d3.min([I,A]),T=2*e.data.stroke.width+2*e.labels.padding,N["width"===y?"w":"h"]=v-T,N["width"===l?"w":"h"]=L-T,O.d3plus.label=N,O.d3plus[y]=v,O.d3plus[n]=X,O.d3plus[p]=F(D)+h,g.push(O),x=c(x),x.d3plus={id:"bottom_whisker_line_"+z,offset:b.d3plus[l]/2,position:"height"===l?"bottom":"left",shape:"whisker","static":!0},"x"===p&&(x.d3plus.offset*=-1),x.d3plus[l]=Math.abs(F(a)-F(C)),x.d3plus[y]=v,x.d3plus[n]=X,x.d3plus[p]=H,g.push(x),Y=c(Y),Y.d3plus={id:"top_whisker_line_"+z,offset:b.d3plus[l]/2,position:"height"===l?"top":"right",shape:"whisker","static":!0},"y"===p&&(Y.d3plus.offset*=-1),Y.d3plus[l]=Math.abs(F(Z)-F(P)),Y.d3plus[y]=v,Y.d3plus[n]=X,Y.d3plus[p]=H,g.push(Y),M=0,j=B.length;j>M;M++)w=B[M],w.d3plus[n]=X,w.d3plus[p]=F(i(e,w,e.y.value)),w.d3plus[p]+=h,w.d3plus.r=4,w.d3plus.shape=e.shape.value;return f=!B.length&&Z-a===0,u.push(D),g=g.concat(B),r}).entries(e.data.viz),f&&1===s(u).length?[]:g)},r.modes=["tukey","extent",Array,Number],r.requirements=["data","x","y"],r.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],r.setup=function(e){var t;return e.axes.discrete?void 0:(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},t.exports=r},{"../../core/fetch/value.coffee":67,"../../string/strip.js":174,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313}],309:[function(e,t,n){var r,i,a,o,s,l,u;r=e("../../array/sort.coffee"),s=e("../../core/fetch/value.coffee"),a=e("../../core/fetch/color.coffee"),o=e("../../core/fetch/text.js"),u=e("../../color/legible.coffee"),l=e("../../core/data/group.coffee"),i=function(e){var t,n,i,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z;if(v=l(e,e.data.viz),v=r(v,null,null,null,e),f=v.length,4>f?(i=f,S=1):(j=e.width.viz/e.height.viz,i=Math.ceil(Math.sqrt(f*j)),S=Math.ceil(Math.sqrt(f/j))),f>0)for(;(S-1)*i>=f;)S--;for(n=e.width.viz/i,t=e.height.viz/S,e.size.value?(g=d3.min(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value,"min")}),p=d3.max(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value)}),h=[g,p]):h=[0,0],z=5,T=d3.min([n,t])/2-2*z,I=e.labels.value&&!e.small&&T>=40?d3.max([20,d3.min([.25*T,50])]):0,T-=I,O=d3.min([T,e.size.scale.min.value]),D=e.size.scale.value.domain(h).rangeRound([O,T]),M=d3.layout.pack().children(function(e){return e.values}).padding(z).radius(function(e){return D(e)}).size([n-2*z,t-2*z-I]).value(function(e){return e.value}),d=[],N=0,y=x=0,A=v.length;A>x;y=++x){for(c=v[y],E=M.nodes(c),F=n*y%e.width.viz,Z=t*N,b=0,C=E.length;C>b;b++)L=E[b],L.children?(k={d3plus:{}},k[e.id.value]=L.key):k=L.d3plus,k.d3plus.depth=e.id.grouping.value?L.depth:e.depth.value,k.d3plus.x=L.x,k.d3plus.xOffset=F,k.d3plus.y=L.y,k.d3plus.yOffset=Z+I,k.d3plus.r=L.r,d.push(k);(y+1)%i===0&&N++}for(m=T/d3.max(d,function(e){return e.d3plus.r}),B=M.size()[0]/2,G=M.size()[1]/2,w=0,_=d.length;_>w;w++)c=d[w],c.d3plus.x=(c.d3plus.x-B)*m+B+c.d3plus.xOffset,c.d3plus.y=(c.d3plus.y-G)*m+G+c.d3plus.yOffset,c.d3plus.r=c.d3plus.r*m,delete c.d3plus.xOffset,delete c.d3plus.yOffset,c.d3plus["static"]=c.d3plus.depth<e.depth.value&&e.id.grouping.value,!I||0!==c.d3plus.depth&&e.id.grouping.value!==!1?delete c.d3plus.label:(c.d3plus.text=o(e,c[e.id.value],c.d3plus.depth),P=I>3*e.labels.padding?e.labels.padding:0,c.d3plus.label={x:0,y:-(T+P+I/2),w:2*T,h:I-P,padding:0,resize:!0,color:u(a(e,c,c.d3plus.depth)),force:!0});return d.sort(function(e,t){return e.d3plus.depth-t.d3plus.depth})},i.fill=!0,i.requirements=["data"],i.scale=1.05,i.shapes=["circle","donut"],t.exports=i},{"../../array/sort.coffee":34,"../../color/legible.coffee":44,"../../core/data/group.coffee":57,"../../core/fetch/color.coffee":63,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67}],310:[function(e,t,n){var r,i;i=e("../../../core/console/print.coffee"),r=function(e){var t,n;n={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"},t=n[e.shape.value],i.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+t+'" visualization type.'),e.self.type(t).draw()},r.shapes=["circle","donut","line","square","area"],t.exports=r},{"../../../core/console/print.coffee":52}],311:[function(e,t,n){var r;r=function(e){var t,n,r,i,a,o;return t=e.coords.value,r=e.coords.key||d3.keys(t.objects)[0],o=topojson.feature(t,t.objects[r]),n=o.features,a=e.coords.solo.value,i=e.coords.mute.value,n=n.filter(function(t){return t[e.id.value]=t.id,a.length?a.indexOf(t.id)>=0:i.length?i.indexOf(t.id)<0:!0})},r.libs=["topojson"],r.nesting=!1,r.requirements=["coords"],r.scale=1,r.shapes=["coordinates"],r.zoom=!0,t.exports=r},{}],312:[function(e,t,n){var r,i,a;r=e("../../../../core/fetch/color.coffee"),i=e("../../../../color/legible.coffee"),a=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,o,s,l,u,c,d,f,h,p;for(t=e.axes,s=t.stacked||!t.ticks.value?[]:e.data.viz,p=2*s.length>e.data.large?0:e.draw.timing,d=function(n,a){return 0===a.indexOf("y")?n.attr("x1",-2).attr("x2",-8).attr("y1",function(e){return e.d3plus.y-t.margin.top}).attr("y2",function(e){return e.d3plus.y-t.margin.top}):n.attr("x1",function(e){return e.d3plus.x-t.margin.left}).attr("x2",function(e){return e.d3plus.x-t.margin.left}).attr("y1",t.height+2).attr("y2",t.height+8),n.style("stroke",function(t){return i(r(e,t))}).style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value)},e.dev.value&&a.time("creating axis tick groups"),h=e.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(s,function(n){var r;return r=t.discrete?"_"+n.d3plus[t.discrete]:"","tick_"+n[e.id.value]+"_"+n.d3plus.depth+r}),h.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0),e.dev.value&&a.timeEnd("creating axis tick groups"),c=["x","y"],l=0,u=c.length;u>l;l++)n=c[l],e.dev.value&&p&&a.time("creating "+n+" ticks"),o=p&&n!==t.discrete?s:[],f=h.selectAll("line.d3plus_data_"+n).data(o,function(t){return"tick_"+t[e.id.value]+"_"+t.d3plus.depth}),e.dev.value&&p&&a.timeEnd("creating "+n+" ticks"),e.dev.value&&p&&a.time("styling "+n+" ticks"),p>0?f.transition().duration(p).call(d,n):f.call(d,n),f.enter().append("line").attr("class","d3plus_data_"+n).call(d,n),e.dev.value&&p&&a.timeEnd("styling "+n+" ticks");p>0?(h.transition().duration(p).attr("opacity",1),h.exit().transition().duration(p).attr("opacity",0).remove()):(h.attr("opacity",1),h.exit().remove())}},{"../../../../color/legible.coffee":44,"../../../../core/console/print.coffee":52,"../../../../core/fetch/color.coffee":63}],313:[function(e,t,n){var r,i,a,o;r=e("./includes/axes.coffee"),i=e("./includes/svg.coffee"),a=e("./includes/mouse.coffee"),o=e("./includes/plot.coffee"),t.exports=function(e,t){void 0===t&&(t={}),r(e,t),o(e,t),i(e,t),e.mouse.viz=t.mouse===!0?a:!1}},{"./includes/axes.coffee":314,"./includes/mouse.coffee":316,"./includes/plot.coffee":317,"./includes/svg.coffee":318}],314:[function(e,t,n){var r,i,a,o,s,l,u,c,d,f,h,p;r=e("../../../../../array/sort.coffee"),o=e("./buffer.coffee"),a=e("../../../../../util/buckets.coffee"),l=e("../../../../../core/fetch/data.js"),u=e("../../../../../core/fetch/value.coffee"),f=e("../../../../../core/console/print.coffee"),p=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,a,l,g,m,v,y,x,b,w,I;for(a=s(e),(a||!e.axes.dataset)&&(e.axes.dataset=c(e)),e.axes.scale=t.buffer&&t.buffer!==!0?h(e,t.buffer):!1,n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],g=0,v=n.length;v>g;g++)r=n[g],x=0===r.indexOf("x")?"y":"x",w=e.order.changed||e.order.sort.changed||e.order.value===!0&&e[x].changed,e[r].value&&(!e[r].ticks.values||a||w)&&(e.dev.value&&f.time("calculating "+r+" axis"),e[r].reset=!0,e[r].ticks.values=!1,r===e.axes.discrete&&e[r].value!==e.time.value&&(e[r].ticks.values=p(e.axes.dataset,e[r].value,u,e)),I=t.zero===!0||0===r.indexOf(t.zero)?!0:!1,b=i(e,r,I),0===r.indexOf("y")&&(b=b.reverse()),e[r].scale.viz=d(e,r,b),e[r].domain.viz=b,e.dev.value&&f.timeEnd("calculating "+r+" axis"));if(e.axes.mirror.value&&(l=d3.extent(e.y.domain.viz.concat(e.x.domain.viz)),e.x.domain.viz=l,e.x.scale.viz.domain(l),l=l.slice().reverse(),e.y.domain.viz=l,e.y.scale.viz.domain(l)),t.buffer)for(m=0,y=n.length;y>m;m++)r=n[m],r!==e.axes.discrete&&o(e,r,t.buffer)},s=function(e){var t,n,r,i,a,o,s,l,u,c,d,f,h;if(n=e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed),n||(n=e.id.solo.changed||e.id.mute.changed),n)return n;for(r=["data","time","id","depth","type","x","y","x2","y2"],i=0,l=r.length;l>i;i++)if(o=r[i],e[o].changed){n=!0;break}if(n)return n;for(h=["mute","range","scale","solo","stacked","zerofill"],d=["x","y","x2","y2"],a=0,u=d.length;u>a;a++)for(t=d[a],s=0,c=h.length;c>s;s++)if(f=h[s],e[t][f].changed){n=!0;break}return n},c=function(e){var t,n;return e.time.fixed.value?e.data.viz:(n=d3.range(0,e.id.nesting.length),d3.merge([function(){var r,i,a;for(a=[],r=0,i=n.length;i>r;r++)t=n[r],a.push(l(e,"all",t));return a}()]))},i=function(e,t,n,i){var a,o,s,l,c,d,f,h,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L;if(_=0===t.indexOf("x")?"y":"x",e[t].range.value&&2===e[t].range.value.length)return e[t].range.value.slice();if("share"===e[t].scale.value)return e[t].ticks.values=d3.range(0,1.1,.1),[0,1];if(e[t].stacked.value){for(D=[],k=e.axes.dataset,g=0,x=k.length;x>g;g++)f=k[g],f.values?D=D.concat(f.values):D.push(f);return c=d3.nest().key(function(t){return u(e,t,e[_].value)}).rollup(function(n){var r,i;return i=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),r>0?r:0}),r=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),0>r?r:0}),[r,i]}).entries(D),L=d3.merge(c.map(function(e){return e.values})),d3.extent(L)}if(e[t].value===e.time.value)return e.time.solo.value.length?d3.extent(e.time.solo.value).map(function(e){return e.constructor!==Date?(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e)):e}):d3.extent(e.data.time.ticks);for(L=[],M=e.axes.dataset,m=0,b=M.length;b>m;m++)f=M[m],O=u(e,f,e[t].value),O instanceof Array?L=L.concat(O):L.push(O);if(L=L.filter(function(e){return null!==e}),t===e.axes.discrete){if(j=e.order.value===!0?e[_].value:e.order.value){for(S=e.order.sort.value,a=e.order.agg.value||e.aggs.value[j]||"max",o=typeof a,d=L.reduce(function(e,t){return e[t]=[],e},{}),z=e.axes.dataset,y=0,w=z.length;w>y;y++)if(f=z[y],f.values)for(N=f.values,A=0,I=N.length;I>A;A++)T=N[A],h=u(e,T,e[t].value),d[h].push(u(e,T,j));else h=u(e,f,e[t].value),d[h].push(u(e,f,j));for(v in d)T=d[v],"string"===o?d[v]=d3[a](T):"function"===o&&(d[v]=a(T,j));return d=r(d3.entries(d),"value",S),d=d.reduce(function(e,t){return e.push(t.key),e},[])}return p(L).sort()}return L.sort(function(e,t){return e-t}),"log"===e[t].scale.value&&(0===L[0]&&(L[0]=1),0===L[L.length-1]&&(L[L.length-1]=-1)),n&&(l=L.every(function(e){return e>0}),s=L.every(function(e){return 0>e}),(l||s)&&(C=l?1:-1,L.push("log"===e[t].scale.value?C:0))),d3.extent(L)},d=function(e,t,n){var r,i,o,s;return i=0===t.indexOf("x")?e.width.viz:e.height.viz,o=e[t].scale.value,["discrete","share"].indexOf(o)>=0&&(o="linear"),s=10,"string"==typeof n[0]?(o="ordinal",r=a([0,i],n.length)):(r=[0,i],"linear"===e[t].scale.value&&(s=Math.floor(i/(4*e[t].ticks.font.size)))),e[t].scale.ticks=s,d3.scale[o]().domain(n).range(r)},h=function(e,t){var n,r,i;return t===!0&&(t="size"),t in e&&(t=e[t].value),i=e.size.scale.min.value,"function"==typeof i&&(i=i(e)),r=e.size.scale.max.value,"function"==typeof r&&(r=r(e)),t===!1?e.size.scale.value.rangeRound([r,r]):"number"==typeof t?e.size.scale.value.rangeRound([t,t]):t?(e.dev.value&&f.time("calculating buffer scale"),n=d3.extent(e.axes.dataset,function(n){var r;return r=u(e,n,t),r?r:0}),n[0]===n[1]&&(i=r),e.dev.value&&f.timeEnd("calculating buffer scale"),e.size.scale.value.domain(n).rangeRound([i,r])):void 0}},{"../../../../../array/sort.coffee":34,"../../../../../core/console/print.coffee":52,"../../../../../core/fetch/data.js":64,"../../../../../core/fetch/value.coffee":67,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],315:[function(e,t,n){var r,i;r=e("../../../../../util/buckets.coffee"),i=e("../../../../../util/closest.coffee"),t.exports=function(e,t,n){var a,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L;if("share"!==e[t].scale.value&&!e[t].range.value&&e[t].reset){if(t===e.axes.discrete){if(p=e[t].scale.viz.domain(),"string"==typeof p[0]){for(y=p.length;y>=0;)p.splice(y,0,"d3plus_buffer_"+y),y--;return k=e[t].scale.viz.range(),k=r(d3.extent(k),p.length),e[t].scale.viz.domain(p).range(k)}if(0===t.indexOf("y")&&(p=p.slice().reverse()),1===e[t].ticks.values.length)e[t].value===e.time.value&&1!==e.data.time.ticks.length?(u=i(e.data.time.ticks,p[0]),S=e.data.time.ticks.indexOf(u),S>0?p[0]=e.data.time.ticks[S-1]:(f=e.data.time.ticks[S+1]-u,p[0]=new Date(u.getTime()-f)),S<e.data.time.ticks.length-1?p[1]=e.data.time.ticks[S+1]:(f=u-e.data.time.ticks[S-1],p[1]=new Date(u.getTime()+f))):(p[0]-=1,p[1]+=1);else if(e.axes.scale)h=Math.abs(p[1]-p[0]),o=h/(e[t].ticks.values.length-1),o/=2,M=e[t].scale.viz.range()[1],A=1.5*e.axes.scale.range()[1],v=e[t].scale.viz.invert(-A),m=e[t].scale.viz.invert(M+A),p[0]-o<v?(p[0]=p[0]-o,p[1]=p[1]+o):(p=[v,m],0===t.indexOf("y")&&(p=p.reverse()),g=e[t].scale.viz.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1));else if(e[t].value===e.time.value)h=Math.abs(p[1]-p[0]),o=h/(e[t].ticks.values.length-1),o/=2,p[0]=p[0]-o,p[1]=p[1]+o;else{for(h=Math.abs(p[1]-p[0]),a=h/2,y=p.length,_=p.slice();y>=0;)d=y?_[y-1]+a:_[y]-a,p.splice(y,0,d),y--;k=e[t].scale.viz.range(),k=r(d3.extent(k),p.length),e[t].scale.viz.domain(p).range(k)}return 0===t.indexOf("y")&&(p=p.reverse()),e[t].scale.viz.domain(p)}if("x"===n&&0===t.indexOf("x")||"y"===n&&0===t.indexOf("y")||n===!0)return p=e[t].scale.viz.domain(),l=p[0]>=0&&p[1]>=0,s=p[0]<=0&&p[1]<=0,"log"===e[t].scale.value?(L=l?1:-1,l&&0===t.indexOf("y")&&(p=p.slice().reverse()),
w=Math.pow(10,parseInt(Math.abs(p[0])).toString().length-1)*L,b=p[0]%w,x=b,b&&.1>=x/w&&(x+=w*L),I=0===b?w:x,p[0]-=I,0===p[0]&&(p[0]=L),T=Math.pow(10,parseInt(Math.abs(p[1])).toString().length-1)*L,D=p[1]%T,j=Math.abs(T-D),D&&.1>=j/T&&(j+=T*L),O=0===D?T:j,p[1]+=O,0===p[1]&&(p[1]=L),l&&0===t.indexOf("y")&&(p=p.reverse())):(L=0,0===t.indexOf("y")&&(p=p.slice().reverse()),N=p.filter(function(e){return e.constructor===String}),o=.05*Math.abs(p[1]-p[0])||1,N.length||(p[0]=p[0]-o,p[1]=p[1]+o,(l&&p[0]<L||s&&p[0]>L)&&(p[0]=L),(l&&p[1]<L||s&&p[1]>L)&&(p[1]=L)),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p);if(e.axes.scale)return c=!1,e.axes.mirror.value&&(C=0===t.indexOf("y")?"x":"y",c=e[C].scale.viz,z=e.width.viz>e.height.viz?"x":"y"),t===z&&c?p=c.domain().slice().reverse():(M=e[t].scale.viz.range()[1],A=e.axes.scale.range()[1],v=e[t].scale.viz.invert(1.5*-A),m=e[t].scale.viz.invert(M+1.5*A),p=[v,m],0===t.indexOf("y")&&(p=p.reverse()),g=e[t].scale.viz.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p)}}},{"../../../../../util/buckets.coffee":203,"../../../../../util/closest.coffee":205}],316:[function(e,t,n){var r,i,a,o,s,l;r=e("../../../../../util/copy.coffee"),i=e("../../../../../client/pointer.coffee"),a=e("../../../../../core/fetch/color.coffee"),o=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../color/legible.coffee"),l=e("../../../../../color/text.coffee"),t.exports=function(e,t){var n,r,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C;return n=d3.event.type===i.click&&(t.tooltip.value["long"]||t.tooltip.html.value),u=[i.over,i.move].indexOf(d3.event.type)>=0,A=e.d3plus.x,C=e.d3plus.y,m=e.d3plus.r||0,x=t.types[t.type.value].scale||1,m*=x,c=t.axes,I=t.draw.timing?t.timing.mouseevents:0,!n&&u?(r=s(a(t,e)),d=["x","y","x2","y2"].filter(function(n){var r;return r=o(t,e,t[n].value),r&&!(r instanceof Array)&&n!==t.axes.stacked&&t[n].mouse.value&&n!==t.axes.discrete})):d=[],f=function(e){return e.attr("x1",function(e){return 0===e.indexOf("x")?A:A-m}).attr("y1",function(e){return 0===e.indexOf("y")?C:C+m}).attr("x2",function(e){return 0===e.indexOf("x")?A:A-m}).attr("y2",function(e){return 0===e.indexOf("y")?C:C+m}).attr("opacity",0)},h=function(e){return e.style("stroke",function(e){return"area"===t.shape.value?"white":r}).attr("stroke-dasharray",function(e){return t[e].mouse.dasharray.value}).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},p=function(n){return n.attr("x1",function(e){return 0===e.indexOf("x")?A:A-m}).attr("y1",function(e){return 0===e.indexOf("y")?C:C+m}).attr("x2",function(n){return 0===n.indexOf("x")?A:e.d3plus.x0?e.d3plus.x0:"y"===n?c.margin.left-t[n].ticks.size:c.margin.left+c.width+t[n].ticks.size}).attr("y2",function(n){return 0===n.indexOf("y")?C:e.d3plus.y0?e.d3plus.y0:"x"===n?c.height+c.margin.top+t[n].ticks.size:c.margin.top-t[n].ticks.size}).style("opacity",1)},g=t.g.labels.selectAll("line.d3plus_mouse_axis_label").data(d),I?(g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(f).call(h),g.transition().duration(I).call(p).call(h),g.exit().transition().duration(I).call(f).remove()):(g.call(p).call(h),g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(f).call(h),g.exit().remove()),b=function(n){return n.attr("font-size",function(e){return t[e].ticks.font.size+"px"}).attr("font-family",function(e){return t[e].ticks.font.family.value}).attr("font-weight",function(e){return t[e].ticks.font.weight}).attr("x",function(e){return 0===e.indexOf("x")?A:"y"===e?c.margin.left-5-t[e].ticks.size:c.margin.left+c.width+5+t[e].ticks.size}).attr("y",function(n){return 0===n.indexOf("y")?C:e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+c.margin.top-6:"x"===n?c.height+c.margin.top+5+t[n].ticks.size:c.margin.top-5-t[n].ticks.size-1.35*t[n].ticks.font.size}).attr("fill","area"===t.shape.value?"white":l(r))},w=t.g.labels.selectAll("text.d3plus_mouse_axis_label").data(d),w.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(e){return e+"_d3plusmouseaxislabel"}).attr("dy",function(e){return 0===e.indexOf("y")?.35*t[e].ticks.font.size:t[e].ticks.font.size}).style("text-anchor",function(e){return"y"===e?"end":"y2"===e?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(b),w.text(function(n){var r,i;return r=t.axes.stacked||n,i=o(t,e,t[r].value),t.format.value(i,{key:t[r].value,vars:t,labels:t[r].affixes.value})}),I?(w.transition().duration(I).delay(I).attr("opacity",1).call(b),w.exit().transition().duration(I).attr("opacity",0).remove()):(w.attr("opacity",1).call(b),w.exit().remove()),v=function(n){var i;return i=function(e){var t;return t=d3.select("text#"+e+"_d3plusmouseaxislabel"),t.size()?t.node().getBBox():{width:0,height:0}},n.attr("x",function(e){var n;return n=i(e).width,0===e.indexOf("x")?A-n/2-5:"y"===e?c.margin.left-t[e].ticks.size-n-10:c.margin.left+c.width+t[e].ticks.size}).attr("y",function(n){var r;return r=i(n).height,0===n.indexOf("y")?C-(r/2+5):e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+c.margin.top-(r/2+5):"x"===n?c.height+c.margin.top+t[n].ticks.size:c.margin.top-t[n].ticks.size-r-10}).attr("width",function(e){return i(e).width+10}).attr("height",function(e){return i(e).height+10}).style("stroke","area"===t.shape.value?"transparent":r).attr("fill",r).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},y=t.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(d),I?(y.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(v),y.transition().duration(I).delay(I).attr("opacity",1).call(v),y.exit().transition().duration(I).attr("opacity",0).remove()):(y.attr("opacity",1).call(v),y.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(v),y.exit().remove())}},{"../../../../../client/pointer.coffee":38,"../../../../../color/legible.coffee":44,"../../../../../color/text.coffee":50,"../../../../../core/fetch/color.coffee":63,"../../../../../core/fetch/value.coffee":67,"../../../../../util/copy.coffee":206}],317:[function(e,t,n){var r,i,a,o,s,l,u,c,d,f,h,p;r=e("../../../../../util/buckets.coffee"),i=e("./buffer.coffee"),o=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../font/sizes.coffee"),f=e("../../../../../textwrap/textwrap.coffee"),h=e("../../../../../core/data/time.coffee"),p=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,s,l,d,f,p,g,m,v,y,x,b,w,I,A,C,_;for(e.axes.margin=c(e),e.axes.height=e.height.viz,e.axes.width=e.width.viz,n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],d=0,p=n.length;p>d;d++)if(r=n[d],e[r].value){if(e[r].ticks.values===!1)if(e[r].value===e.time.value){for(A=e.time.solo.value,A=A.length?A.map(function(e){return e.constructor!==Date&&(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),e}):e.data.time.values,l=d3.extent(A),b=e.data.time.stepType,A=[l[0]],I=l[0];I<l[1];)m=new Date(I),I=new Date(m["set"+b](m["get"+b]()+1)),A.push(I);e[r].ticks.values=A}else 1===r.indexOf("2")?(y=e[r.slice(0,1)].scale.viz,x=e[r].scale.viz,A=e[r.slice(0,1)].scale.ticks,e[r].ticks.values=y.ticks(A).map(function(e){return parseFloat(d3.format(".5f")(x.invert(y(e))))})):e[r].ticks.values=e[r].scale.viz.ticks(e[r].scale.ticks);e[r].ticks.values.length||(_=o(e,e.data.viz,e[r].value),_ instanceof Array||(_=[_]),e[r].ticks.values=_),v=0===r.indexOf("x")?"y":"x",(1===e[r].ticks.values.length||t.buffer&&t.buffer!==v&&r===e.axes.discrete&&e[r].reset===!0)&&i(e,r,t.buffer),e[r].reset=!1,e[r].value===e.time.value?(s={"font-family":e[r].ticks.font.family.value,"font-weight":e[r].ticks.font.weight,"font-size":e[r].ticks.font.size+"px","text-transform":e[r].ticks.font.transform.value,"letter-spacing":e[r].ticks.font.spacing+"px"},C=h(e,{values:e[r].ticks.values,limit:e.width.viz,style:s}),e[r].ticks.value?e[r].ticks.visible=e[r].ticks.value.map(Number):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value.map(Number):e[r].ticks.visible=C.values.map(Number),e[r].ticks.format=C.format):e[r].ticks.value?(e[r].ticks.values=e[r].ticks.value,e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:e[r].ticks.visible=e[r].ticks.value):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:"log"===e[r].scale.value?(A=e[r].ticks.values,w=A.filter(function(e){return"1"===Math.abs(e).toString().charAt(0)}),w.length<3?e[r].ticks.visible=A:e[r].ticks.visible=w):e[r].ticks.visible=e[r].ticks.values}for(e.small||u(e),f=0,g=n.length;g>f;f++)r=n[f],e[r].axis.svg=a(e,r)},c=function(e){return e.small?{top:0,right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10}},u=function(e){var t,n,i,a,o,u,c,d,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O;for(b=e.x.scale.viz.domain(),S=e.y.scale.viz.domain(),e.x2.value&&(m=e.x2.scale.viz.domain()),e.y2.value&&(M=e.y2.scale.viz.domain()),d=["y","y2"],n=0,o=d.length;o>n;n++)t=d[n],e[t].value&&(c="y"===t?"left":"right",z={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},O=e[t].ticks.visible,"log"===e[t].scale.value?T=O.map(function(e){return l(e)}):"share"===e[t].scale.value?T=O.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?T=O.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof O[0]&&(O=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),T=O.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),e[t].ticks.labels.value?(e[t].ticks.hidden=!1,N=d3.max(s(T,z),function(e){return e.width}),N=Math.ceil(N+e.labels.padding),e.axes.margin[c]+=N):e[t].ticks.hidden=!0,j=e[t].label.fetch(e),j?(D={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=s([j],D)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin[c]+=e[t].label.height,e.axes.margin[c]+=2*e[t].label.padding));for(e.axes.width-=e.axes.margin.left+e.axes.margin.right,e.x.scale.viz.range(r([0,e.axes.width],b.length)),m&&e.x2.scale.viz.range(r([0,e.axes.width],m.length)),h=["x","x2"],i=0,u=h.length;u>i;i++)t=h[i],e[t].value&&(c="x"===t?"bottom":"top",e[t].ticks.labels.value?(e[t].ticks.hidden=!1,v={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},k=e[t].ticks.visible,"log"===e[t].scale.value?_=k.map(function(e){return l(e)}):"share"===e[t].scale.value?_=k.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?_=k.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof k[0]&&(k=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),_=k.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),C=s(_,v),x=d3.max(C,function(e){return e.width}),y=d3.max(C,function(e){return e.height}),1===k.length?A=e.axes.width:(A=e[t].scale.viz(k[1])-e[t].scale.viz(k[0]),A=Math.abs(A)),x>A&&_.join("").indexOf(" ")>0?(e[t].ticks.wrap=!0,C=s(_,v,{mod:function(t){return f().container(d3.select(t)).height(e.axes.height/2).width(A).draw()}}),x=d3.max(C,function(e){return e.width}),y=d3.max(C,function(e){return e.height})):e[t].ticks.wrap=!1,e[t].ticks.baseline="auto",A>=x?e[t].ticks.rotate=0:x<e.axes.height/2?(C=s(_,v,{mod:function(t){return f().container(d3.select(t)).width(e.axes.height/2).height(A).draw()}}),y=d3.max(C,function(e){return e.width}),x=d3.max(C,function(e){return e.height}),e[t].ticks.rotate=-90):(x=0,y=0),x&&y||(e[t].ticks.hidden=!0,e[t].ticks.rotate=0),x=Math.ceil(x),y=Math.ceil(y),e[t].ticks.maxHeight=y,e[t].ticks.maxWidth=x,e.axes.margin[c]+=y+e.labels.padding,a=e[t].ticks.visible[e[t].ticks.visible.length-1],p=e[t].scale.viz(a),p+=x/2+e.axes.margin.left,p>e.width.value&&(g=p-e.width.value+e.axes.margin.right,e.axes.width-=g,e.axes.margin.right+=g)):e[t].ticks.hidden=!0,w=e[t].label.fetch(e),w?(I={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=s([w],I)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin[c]+=e[t].label.height,e.axes.margin[c]+=2*e[t].label.padding));return e.axes.height-=e.axes.margin.top+e.axes.margin.bottom,e.x.scale.viz.range(r([0,e.axes.width],b.length)),m&&e.x2.scale.viz.range(r([0,e.axes.width],m.length)),e.y.scale.viz.range(r([0,e.axes.height],S.length)),M?e.y2.scale.viz.range(r([0,e.axes.height],M.length)):void 0},a=function(e,t){return d3.svg.axis().tickSize(e[t].ticks.size).tickPadding(5).orient(e[t].orient.value).scale(e[t].scale.viz).tickValues(e[t].ticks.values).tickFormat(function(n,r){var i,a;return e[t].ticks.hidden?null:(a=e[t].scale.value,i=n.constructor===Date?+n:n,e[t].ticks.visible.indexOf(i)>=0?"share"===a?e.format.value(100*n,{key:"share",vars:e,labels:e[t].affixes.value,output:t}):n.constructor===Date?e[t].ticks.format(n):"log"===a?l(n):e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t}):null)})},d="\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079",l=function(e){var t,n,r;return n=Math.round(Math.log(Math.abs(e))/Math.LN10),r=Math.abs(e).toString().charAt(0),t="10 "+(n+"").split("").map(function(e){return d[e]}).join(""),"1"!==r&&(t=r+" x "+t),0>e?"-"+t:t}},{"../../../../../core/data/time.coffee":62,"../../../../../core/fetch/value.coffee":67,"../../../../../font/sizes.coffee":101,"../../../../../textwrap/textwrap.coffee":199,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],318:[function(e,t,n){var r,i,a;r=e("../../../../../color/mix.coffee"),i=e("../../../../../textwrap/textwrap.coffee"),a=e("../../../../../object/validate.coffee"),t.exports=function(e){var t,n,o,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U,V,X,H,J,q,Q,K,$,ee,te,ne,re,ie,ae,oe,se,le,ue,ce;if(p=e.x.domain.viz.concat(e.y.domain.viz),p.indexOf(void 0)>=0)return null;for(d={width:e.axes.width,height:e.axes.height,fill:e.axes.background.color,stroke:e.axes.background.stroke.color,"stroke-width":e.axes.background.stroke.width,"shape-rendering":e.axes.background.rendering.value},n={left:"start",center:"middle",right:"end"},s=e.small?[]:[0],ae=function(t,n){return t.attr("x1",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):0}).attr("x2",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):e.axes.width}).attr("y1",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):0}).attr("y2",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):e.axes.height})},oe=function(t,n,i){var a,o;return a=i?e[n].grid.color:e[n].ticks.color,o="log"===e[n].scale.value,t.attr("stroke",function(t){var s;return 0===t?e[n].axis.color:(t.constructor===Date&&(t=+t),s=e[n].ticks.visible.indexOf(t)>=0,!s||o&&"1"!==Math.abs(t).toString().charAt(0)?i&&"transparent"!==e.axes.background.color?r(a,e.axes.background.color,.4,1):"transparent"!==e.background.value?r(a,e.background.value,.4,1):r(a,"white",.4,1):a)}).attr("stroke-width",e[n].ticks.width).attr("shape-rendering",e[n].ticks.rendering.value)},g=function(t,n,r){var i;return i=0===n?"axis":"ticks",n=e[t][i].font[r],n&&(n.length||"number"==typeof n)?n:e[t].ticks.font[r]},ie=function(t,n){var i;return i="log"===e[n].scale.value,t.attr("font-size",function(e){return g(n,e,"size")+"px"}).attr("stroke","none").attr("fill",function(t){var a;return a=g(n,t,"color"),i&&"1"!==Math.abs(t).toString().charAt(0)?r(a,e.background.value,.4,1):a}).attr("font-family",function(e){return g(n,e,"family").value}).attr("font-weight",function(e){return g(n,e,"weight")}).style("text-transform",function(e){return g(n,e,"transform").value}).style("letter-spacing",function(e){return g(n,e,"spacing")+"px"})},L=function(t,n){var r,i;return r=0===n.indexOf("x")?"height":"width",i=0===n.indexOf("x")?"y":"x",t.attr(i+"1",0).attr(i+"2",e.axes[r]).attr(n+"1",function(e){return e.coords.line}).attr(n+"2",function(e){return e.coords.line}).attr("stroke",function(t){return t.color||e[n].lines.color}).attr("stroke-width",e[n].lines.width).attr("shape-rendering",e[n].lines.rendering.value).attr("stroke-dasharray",e[n].lines.dasharray.value)},D=function(t,r){var i;return i=0===r.indexOf("x")?"y":"x",t.attr(i,function(e){return e.coords.text[i]+"px"}).attr(r,function(e){return e.coords.text[r]+"px"}).attr("dy",e[r].lines.font.position.value).attr("text-anchor",n[e[r].lines.font.align.value]).attr("transform",function(e){return e.transform}).attr("font-size",e[r].lines.font.size+"px").attr("fill",function(t){return t.color||e[r].lines.color}).attr("font-family",e[r].lines.font.family.value).attr("font-weight",e[r].lines.font.weight)},Y="translate("+e.axes.margin.left+","+e.axes.margin.top+")",R=e.group.selectAll("g#d3plus_graph_plane").data([0]),R.transition().duration(e.draw.timing).attr("transform",Y),R.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",Y),c=R.selectAll("rect#d3plus_graph_background").data([0]),c.transition().duration(e.draw.timing).attr(d),c.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(d),P=R.selectAll("path#d3plus_graph_mirror").data([0]),P.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),P.transition().duration(e.draw.timing).attr("opacity",function(){return e.axes.mirror.value?1:0}).attr("d",function(){var e,t;return t=d.width,e=d.height,"M "+t+" "+e+" L 0 "+e+" L "+t+" 0 Z"}),K=0!==e.x.ticks.rotate,ue=function(t,n){var r,a;return a="x"===n?e.axes.height:0,r=t.attr("transform","translate(0,"+a+")").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick"),r.selectAll("line").attr("y2",function(t){var r;return t.constructor===Date&&(t=+t),r=d3.select(this).attr("y2"),e[n].ticks.visible.indexOf(t)>=0?r:r/2}),r.select("text").style("text-anchor",K&&"x"===n?"end":K?"start":"middle").call(ie,n).each(function(t){return d3.select(this).attr("dy","0px").attr("font-size",function(e){return g(n,e,"size")+"px"}),t.constructor===Date&&(t=+t),!e[n].ticks.hidden&&e[n].ticks.visible.indexOf(t)>=0?i().container(d3.select(this)).rotate(e[n].ticks.rotate).align(K?"end":"center").valign(K?"middle":"x"===n?"top":"bottom").width(e[n].ticks.maxWidth).height(e[n].ticks.maxHeight).padding(0).x(-e[n].ticks.maxWidth/2).y("x2"===n?-(e[n].ticks.maxHeight+2*e.labels.padding):0).draw():void 0})},ce=function(t,n){var r,i;return i="y2"===n?e.axes.width:0,r=t.attr("transform","translate("+i+", 0)").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick"),r.selectAll("line").attr("y2",function(t){var n;return t.constructor===Date&&(t=+t),n=d3.select(this).attr("y2"),e.x.ticks.visible.indexOf(t)>=0?n:n/2}),r.select("text").call(ie,n)},H=["x","x2","y","y2"],x=0,_=H.length;_>x;x++)o=H[x],ee=0===o.indexOf("x")?ue:ce,U=s.length&&e[o].value?[0]:[],l=R.selectAll("g#d3plus_graph_"+o+"ticks").data(U),l.transition().duration(e.draw.timing).call(ee,o),l.selectAll("line").transition().duration(e.draw.timing).call(oe,o),y=l.enter().append("g").attr("id","d3plus_graph_"+o+"ticks").call(ee,o),y.selectAll("path").attr("fill","none").attr("stroke","none"),y.selectAll("line").call(oe,o),l.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(C=function(t,n){return t.attr("x",0===n.indexOf("x")?e.width.viz/2:-(e.axes.height/2+e.axes.margin.top)).attr("y","x"===n?e.height.viz-e[n].label.height/2-e[n].label.padding:"y2"===n?e.width.viz-e[n].label.height/2-e[n].label.padding:e[n].label.height/2+e[n].label.padding).attr("transform",0===n.indexOf("y")?"rotate(-90)":null).attr("font-family",e[n].label.font.family.value).attr("font-weight",e[n].label.font.weight).attr("font-size",e[n].label.font.size+"px").attr("fill",e[n].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",e[n].label.font.transform.value).style("letter-spacing",e[n].label.font.spacing+"px")},J=["x","y"],b=0,k=J.length;k>b;b++)o=J[b],e[o].grid.value?v=e[o].ticks.value?e[o].ticks.value:e[o].ticks.values:(v=[],Z="x"===o?"y":"x",e[o].ticks.values.indexOf(0)>=0&&e[Z].axis.value&&(v=[0])),m=R.selectAll("g#d3plus_graph_"+o+"grid").data([0]),m.enter().append("g").attr("id","d3plus_graph_"+o+"grid"),E=m.selectAll("line").data(v,function(e,t){return e.constructor===Date?e.getTime():e}),E.transition().duration(e.draw.timing).call(ae,o).call(oe,o,!0),E.enter().append("line").style("opacity",0).call(ae,o).call(oe,o,!0).transition().duration(e.draw.timing).delay(e.draw.timing/2).style("opacity",1),E.exit().transition().duration(e.draw.timing/2).style("opacity",0).remove();for(q=["x","x2","y","y2"],w=0,M=q.length;M>w;w++)o=q[w],e[o].value?(u=e[o].label.fetch(e),A=s&&u?[0]:[],t=e.format.affixes.value[e[o].value],u&&!e[o].affixes.value&&t&&($=e[o].affixes.separator.value,$===!0?$=["[","]"]:$===!1&&($=["",""]),u+=" "+$[0]+t[0]+" "+t[1]+$[1])):(u="",A=[]),I=e.group.selectAll("text#d3plus_graph_"+o+"label").data(A),I.text(u).transition().duration(e.draw.timing).call(C,o),I.enter().append("text").attr("stroke","none").attr("id","d3plus_graph_"+o+"label").text(u).call(C,o),I.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(Q=["x","y","x2","y2"],F=0,z=Q.length;z>F;F++)if(o=Q[F],e[o].value){for(T=R.selectAll("g#d3plus_graph_"+o+"_userlines").data([0]),T.enter().append("g").attr("id","d3plus_graph_"+o+"_userlines"),h=e[o].scale.viz.domain(),0===o.indexOf("y")&&(h=h.slice().reverse()),te=[],j=[],se=e[o].lines.value||[],G=0,N=se.length;N>G;G++)S=se[G],f=a(S)?S.position:S,le=o===e.axes.discrete?h.indexOf(f)>=0:f>=h[0]&&f<=h[1],le&&(f=a(S)?S:{position:f},f.coords={line:e[o].scale.viz(f.position)},j.push(f),f.text&&(f.axis=o,f.padding=.5*e[o].lines.font.padding.value,f.align=e[o].lines.font.align.value,W=e[o].lines.font.position.text,ne="middle"===W?0:2*f.padding,"top"===W&&(ne=-ne),0===o.indexOf("x")?(re="left"===f.align?e.axes.height:"center"===f.align?e.axes.height/2:0,"left"===f.align&&(re-=2*f.padding),"right"===f.align&&(re+=2*f.padding)):(re="left"===f.align?0:"center"===f.align?e.axes.width/2:e.axes.width,"right"===f.align&&(re-=2*f.padding),"left"===f.align&&(re+=2*f.padding)),f.coords.text={},f.coords.text[0===o.indexOf("x")?"y":"x"]=re,f.coords.text[o]=e[o].scale.viz(f.position)+ne,f.transform=0===o.indexOf("x")?"rotate(-90,"+f.coords.text.x+","+f.coords.text.y+")":null,te.push(f)));E=T.selectAll("line.d3plus_graph_"+o+"line").data(j,function(e){return e.position}),E.enter().append("line").attr("class","d3plus_graph_"+o+"line").attr("opacity",0).call(L,o),E.transition().duration(e.draw.timing).attr("opacity",1).call(L,o),E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),B=T.selectAll("text.d3plus_graph_"+o+"line_text").data(te,function(e){return e.position}),B.enter().append("text").attr("class","d3plus_graph_"+o+"line_text").attr("id",function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),"d3plus_graph_"+o+"line_text_"+t}).attr("opacity",0).call(D,o),B.text(function(e){return e.text}).transition().duration(e.draw.timing).attr("opacity",1).call(D,o),B.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),X=function(t){var n;return n=function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),R.select("text#d3plus_graph_"+e.axis+"line_text_"+t).node().getBBox()},t.attr("x",function(e){return n(e).x-e.padding}).attr("y",function(e){return n(e).y-e.padding}).attr("transform",function(e){return e.transform}).attr("width",function(e){return n(e).width+2*e.padding}).attr("height",function(e){return n(e).height+2*e.padding}).attr("fill","transparent"!==e.axes.background.color?e.axes.background.color:"white")},V=e[o].lines.font.background.value?te:[],O=T.selectAll("rect.d3plus_graph_"+o+"line_rect").data(V,function(e){return e.position}),O.enter().insert("rect","text.d3plus_graph_"+o+"line_text").attr("class","d3plus_graph_"+o+"line_rect").attr("pointer-events","none").attr("opacity",0).call(X),O.transition().delay(e.draw.timing).each("end",function(t){return d3.select(this).transition().duration(e.draw.timing).attr("opacity",1).call(X)}),O.exit().transition().duration(e.draw.timing).attr("opacity",0).remove()}}},{"../../../../../color/mix.coffee":46,"../../../../../object/validate.coffee":171,"../../../../../textwrap/textwrap.coffee":199}],319:[function(e,t,n){var r,i,a;r=e("../../../../core/fetch/value.coffee"),i=e("../../../../string/strip.js"),a=e("../../../../util/uniques.coffee"),t.exports=function(e,t,n){var o,s,l,u,c,d,f;return void 0===n?n=e.id.nesting.slice(0,e.depth.value+1):n.constructor!==Array&&(n=[n]),void 0===s&&(s=[]),t||(t=e.data.viz),o=e[e.axes.discrete],u=e[e.axes.opposite],f=o.value===e.time.value,f?(d=e.data.time.ticks,l=e.time.solo.value.length?"solo":"mute",e.time[l].value.length&&(c=e.time[l].value.slice().map(function(e){return e.constructor!==Date&&(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),+e}),d=d.filter(function(e){return"solo"===l?c.indexOf(+e)>=0:c.indexOf(+e)<0}))):d=o.ticks.values?o.ticks.values:a(t,o.value,r,e),d3.nest().key(function(t){var a,o,s,l,u;for(l="nesting",o=0,s=n.length;s>o;o++)a=n[o],u=r(e,t,a),u instanceof Array&&(u=u.join("_")),l+="_"+i(u);return l}).rollup(function(t){var n,i,s,c,h,p,g,m,v,y,x,b;if(n=a(t,o.value,r,e),b=n.length&&n[0].constructor===Date,b&&(n=n.map(Number)),o.zerofill.value)for(i="log"===o.scale.value?u.scale.viz.domain().every(function(e){return 0>e})?-1:1:0,s=c=0,p=d.length;p>c;s=++c)if(x=d[s],y=f?+x:x,n.indexOf(y)<0){for(m={d3plus:{}},v=e.id.nesting,h=0,g=v.length;g>h;h++)l=v[h],l in t[0]&&(m[l]=t[0][l]);m[o.value]=x,m[u.value]=0,m[u.value]=i,t.splice(s,0,m)}return"string"==typeof t[0][o.value]?t:t.sort(function(t,n){var i,a,s,l,c;return i=r(e,t,o.value),s=r(e,n,o.value),(c=i-s)?c:(a=r(e,t,u.value),l=r(e,n,u.value),a-l)})}).entries(t)}},{"../../../../core/fetch/value.coffee":67,"../../../../string/strip.js":174,"../../../../util/uniques.coffee":209}],320:[function(e,t,n){var r;r=e("../../../../core/fetch/value.coffee"),t.exports=function(e,t){var n,i,a,o,s,l,u,c,d,f,h,p,g,m,v,y,x;for(v=e.axes.stacked||e.axes.opposite,i=e[v].scale.viz(0),g=e[v].scale.value,h="x"===v?"y":"x",u="y"===v?e.axes.margin.top:e.axes.margin.left,f="share"===g?"expand":"zero",m=d3.layout.stack().values(function(e){return e.values||[e]}).offset(f).x(function(e){return e.d3plus[h]}).y(function(t){return i-e[v].scale.viz(r(e,t,e[v].value))}).out(function(t,n,a){var o,s;return s=r(e,t,e[v].value),o=0>s,"share"===g?(t.d3plus[v+"0"]=(1-n)*i,t.d3plus[v]=t.d3plus[v+"0"]-a*i):(t.d3plus[v+"0"]=i,e.axes.stacked&&(t.d3plus[v+"0"]-=n),t.d3plus[v]=t.d3plus[v+"0"]-a),t.d3plus[v]+=u,t.d3plus[v+"0"]+=u}),p=[],d=[],a=0,s=t.length;s>a;a++)if(n=t[a],x=r(e,n,e[v].value),x instanceof Array){for(c=!0,o=0,l=x.length;l>o;o++)if(y=x[o],y>=0){c=!1;break}c?d.push(n):p.push(n)}else x>=0&&p.push(n),0>x&&d.push(n);return 0===p.length||0===d.length?m(t):(p.length&&(p=m(p)),d.length&&(d=m(d)),p.concat(d))}},{"../../../../core/fetch/value.coffee":67}],321:[function(e,t,n){var r,i,a,o,s,l;r=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),o=e("./helpers/graph/nest.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/stack.coffee"),a=function(e){var t,n,a,o,u,c,d,f,h,p,g;if(i(e,{buffer:e.axes.opposite,mouse:!0}),a=e.x.domain.viz.concat(e.y.domain.viz),a.indexOf(void 0)>=0)return[];for(n=s(e.data.viz,null,null,null,e),o=0,c=n.length;c>o;o++)for(f=n[o],h=f.values,u=0,d=h.length;d>u;u++)t=h[u],p=r(e,t,e.x.value),null!==p?(t.d3plus.x2=!1,t.d3plus.x=e.x.scale.viz(p)):(t.d3plus.x2=!0,t.d3plus.x=e.x2.scale.viz(r(e,t,e.x2.value))),t.d3plus.x+=e.axes.margin.left,g=r(e,t,e.y.value),null!==g?(t.d3plus.y2=!1,t.d3plus.y=e.y.scale.viz(g)):(t.d3plus.y2=!0,t.d3plus.y=e.y2.scale.viz(r(e,t,e.y2.value))),t.d3plus.y+=e.axes.margin.top;return e.axes.stacked?l(e,n):n},a.filter=function(e,t){return o(e,t)},a.requirements=["data","x","y"],a.setup=function(e){var t;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},a.shapes=["line"],a.tooltip="static",t.exports=a},{"../../array/sort.coffee":34,"../../core/fetch/value.coffee":67,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],322:[function(e,t,n){var r=e("../../network/smallestGap.coffee"),i=e("../../core/fetch/value.coffee"),a=function(e){var t=e.nodes.restricted||e.nodes.value,n=e.edges.restricted||e.edges.value,a=d3.extent(t,function(e){return e.x}),o=d3.extent(t,function(e){return e.y}),s=[1,1];if("number"==typeof e.size.value?s=[e.size.value,e.size.value]:e.size.value&&(s=d3.extent(t,function(t){var n=i(e,t,e.size.value);return 0===n?null:n})),"undefined"==typeof s[0]&&(s=[1,1]),"number"==typeof e.size.value)var l=e.size.value,u=e.size.value;else{var l=r(t,{accessor:function(e){return[e.x,e.y]}}),c=l/2,d=e.size.value?e.nodes.overlap:.4;if(l*=d,e.edges.arrows.value&&(l=.5*l),s[0]===s[1]){var u=c;l=c}else{var f=a[1]+1.1*l-(a[0]-1.1*l),h=o[1]+1.1*l-(o[0]-1.1*l),p=f/h,g=e.width.viz/e.height.viz;if(g>p)var m=e.height.viz/h;else var m=e.width.viz/f;var u=.25*l;2>u*m&&(u=2/m)}}var v=e.size.scale.value.domain(s).range([u,l]);e.zoom.bounds=[[a[0]-1.1*l,o[0]-1.1*l],[a[1]+1.1*l,o[1]+1.1*l]];var y=[],x={};return t.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]==t[e.id.value]})[0],r=n||{};r[e.id.value]=t[e.id.value],r.d3plus={},r.d3plus.x=t.x,r.d3plus.y=t.y;var a=i(e,r,e.size.value);r.d3plus.r=a?v(a):v.range()[0],x[r[e.id.value]]={x:r.d3plus.x,y:r.d3plus.y,r:r.d3plus.r},y.push(r)}),y.sort(function(e,t){return t.d3plus.r-e.d3plus.r}),n.forEach(function(t,n){t.d3plus&&delete t.d3plus.spline,t[e.edges.source].d3plus={};var r=x[t[e.edges.source][e.id.value]];t[e.edges.source].d3plus.r=r.r,t[e.edges.source].d3plus.x=r.x,t[e.edges.source].d3plus.y=r.y,t[e.edges.target].d3plus={};var i=x[t[e.edges.target][e.id.value]];t[e.edges.target].d3plus.r=i.r,t[e.edges.target].d3plus.x=i.x,t[e.edges.target].d3plus.y=i.y}),{nodes:y,edges:n}};a.nesting=!1,a.requirements=["nodes","edges"],a.scale=1.05,a.shapes=["circle","square","donut"],a.tooltip="static",a.zoom=!0,t.exports=a},{"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167}],323:[function(e,t,n){var r,i,a,o,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("../../network/shortestPath.coffee"),r=e("../../core/fetch/value.coffee"),a=e("../../util/uniques.coffee"),o=function(e){var t,n,i,a,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U,V,X,H,J,q,Q,K,$,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,de,fe;for(p=[],U={},U[e.focus.value[0]]=0,U[e.focus.value[1]]=0,V={all:[[e.focus.value[0]],[e.focus.value[1]]]},q=o.paths,W=v=0,A=q.length;A>v;W=++v)for(Y=q[W],p=p.concat(Y.edges),I=e.focus.value[0],V[W]=[I],Q=Y.edges,h=y=0,C=Q.length;C>y;h=++y)f=Q[h],f[e.edges.source]=e.data.viz.filter(function(t){return f[e.edges.source][e.id.value]===t[e.id.value]})[0],f[e.edges.target]=e.data.viz.filter(function(t){return f[e.edges.target][e.id.value]===t[e.id.value]})[0],B=f[e.edges.source][e.id.value]===I?"target":"source",F=f[e.edges[B]][e.id.value],void 0===U[F]&&(U[F]=W),V[W].push(F),I=F;ae=0;for(W in V)if(Y=V[W],"all"!==W){for(L=0,g=x=0,_=Y.length;_>x;g=++x)if(m=Y[g],0!==g&&g!==Y.length-1&&U[m]===parseFloat(W)){for(L=1,X=Y[g-1],E=Y[g+1],H=null,P=null,K=V.all,u=j=0,k=K.length;k>j;u=++j)l=K[u],s.call(l,X)>=0&&(H=u),s.call(l,E)>=0&&(P=u);null!==H&&null===P?H+1===V.all.length-1?V.all.splice(H+1,0,[m]):V.all[H+1].push(m):P-H===1?V.all.splice(P,0,[m]):P-H>1&&V.all[P-1].push(m)}ae+=L}for(ie=Math.floor(e.height.viz/ae),fe=[],g=0;ae>g;)g%2===0?fe.push(g):fe.unshift(g),g++;for(b=e.size.value&&!e.small?30:0,de=d3.scale.ordinal().domain(fe).range(d3.range(ie/2-b,e.height.viz+ie/2-b,(e.height.viz-ie)/(ae-1))),
d=V.all.length,c=Math.floor(e.width.viz/d),ue=d3.scale.linear().domain([0,d-1]).rangeRound([c/2,e.width.viz-c/2]),T=5,D=.4*d3.min([c,ie-b]),se=d3.extent(e.data.viz,function(t){var n;return n=r(e,t,e.size.value),n||0}),oe=e.size.scale.value.domain(se).rangeRound([T,D]),$=e.data.viz,O=0,M=$.length;M>O;O++){for(G=$[O],null==G.d3plus&&(G.d3plus={}),ee=V.all,u=Z=0,z=ee.length;z>Z;u=++Z)l=ee[u],te=G[e.id.value],s.call(l,te)>=0&&(G.d3plus.x=ue(u));G.d3plus.y=de(U[G[e.id.value]]),e.size.value?(le=r(e,G,e.size.value),G.d3plus.r=le?oe(le):T):G.d3plus.r=D,G.d3plus.r<.1*c&&!e.small?G.d3plus.label={x:0,y:G.d3plus.r+2*e.labels.padding,w:.6*c,h:b+D-G.d3plus.r,resize:!1}:delete G.d3plus.label}for(ne=o.paths,W=R=0,N=ne.length;N>R;W=++R)for(Y=ne[W],I=e.focus.value[0],re=Y.edges,h=J=0,S=re.length;S>J;h=++J)f=re[h],B=f[e.edges.source][e.id.value]===I?"target":"source",w="target"===B?"source":"target",F=f[e.edges[B]][e.id.value],U[I]!==U[F]?(f.d3plus={spline:!0},null==(t=f[e.edges.source]).d3plus&&(t.d3plus={}),null==(n=f[e.edges.source].d3plus).edges&&(n.edges={}),null==(i=f[e.edges.target]).d3plus&&(i.d3plus={}),null==(a=f[e.edges.target].d3plus).edges&&(a.edges={}),ce=f[B].d3plus.x-f[w].d3plus.x,f[w].d3plus.edges[f[B][e.id.value]]={angle:Math.PI,radius:c/2},f[B].d3plus.edges[f[w][e.id.value]]={angle:0,radius:c/2,offset:ce-c}):delete f.d3plus,I=F;return{nodes:e.data.viz,edges:p}},o.filter=function(e,t){var n,s,l,u,c,d,f,h,p,g,m,v,y,x,b,w,I,A,C;for(u=e.edges.filtered||e.edges.value,o.paths=i(u,e.focus.value[0],{target:e.focus.value[1],distance:e.edges.size.value||void 0,nodeid:e.id.value,startpoint:e.edges.source,endpoint:e.edges.target,K:e.edges.limit.value||5}),o.nodes=[],n=[],b=o.paths,f=0,g=b.length;g>f;f++)for(x=b[f],w=x.edges,h=0,m=w.length;m>h;h++)l=w[h],A=l[e.edges.source],C=l[e.edges.target],n.indexOf(A[e.id.value])<0&&(o.nodes.push(A),n.push(A[e.id.value])),n.indexOf(C[e.id.value])<0&&(o.nodes.push(C),n.push(C[e.id.value]));for(d=a(o.nodes,e.id.value,r,e),I=[],p=0,v=d.length;v>p;p++)c=d[p],s=t.filter(function(t){return t[e.id.value]===c}),s[0]?I.push(s[0]):(y={d3plus:{}},y[e.id.value]=c,I.push(y));return I},o.nesting=!1,o.requirements=[function(e){return{status:2===e.focus.value.length,text:e.format.locale.value.method.focus+" x 2"}},"edges"],o.scale=1,o.shapes=["circle","square","donut"],o.tooltip="static",t.exports=o},{"../../core/fetch/value.coffee":67,"../../network/shortestPath.coffee":166,"../../util/uniques.coffee":209}],324:[function(e,t,n){var r,i,a,o;r=e("../../array/comparator.coffee"),i=e("../../core/data/threshold.js"),a=e("../../core/data/group.coffee"),o=function(e){var t,n,i,o,s,l,u,c,d;for(u=d3.layout.pie().value(function(e){return e.value}).sort(function(t,n){return e.order.value?r(t.d3plus,n.d3plus,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?r(t.d3plus,n.d3plus,e.id.nesting.concat([e.size.value]),void 0,[],e):r(t.d3plus,n.d3plus,[e.size.value],"desc",[],e)}),n=a(e,e.data.viz,[]),l=u(n),d=[],c=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,i=0,s=l.length;s>i;i++)t=l[i],o=t.data.d3plus,o.d3plus.startAngle=t.startAngle,o.d3plus.endAngle=t.endAngle,o.d3plus.r=c,o.d3plus.x=e.width.viz/2,o.d3plus.y=e.height.viz/2,o.d3plus.share=(t.endAngle-t.startAngle)/(2*Math.PI),d.push(o);return d},o.filter=i,o.requirements=["data","size"],o.shapes=["arc"],o.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=o},{"../../array/comparator.coffee":32,"../../core/data/group.coffee":57,"../../core/data/threshold.js":61}],325:[function(e,t,n){var r,i,a,o,s,l,u,c,d,f,h;i=e("../../array/comparator.coffee"),d=e("../../array/sort.coffee"),a=e("../../core/data/threshold.js"),o=e("../../core/fetch/text.js"),s=e("../../core/fetch/value.coffee"),l=e("../../font/sizes.coffee"),u=e("../../geom/offset.coffee"),f=e("../../textwrap/textwrap.coffee"),r=e("../../util/buckets.coffee"),h=e("../../util/uniques.coffee"),c=function(e){var t,n,i,a,c,d,p,g,m,v,y,x,b,w,I,A,C,_,k,M,z,N,S,j,D,T,O,L,E,B,F,P,G,Z,R,Y,W,U,V,X,H,J,q,Q,K,$,ee,te,ne,re,ie,ae,oe,se;for(v=e.data.viz,Y=e.depth.value+1,W=e.id.nesting[Y],g=function(){var e,t,n;for(n=[],e=0,t=v.length;t>e;e++)m=v[e],n.push(m[W]);return n}(),ae=function(){var t,n,r;for(r=[],t=0,n=v.length;n>t;t++)m=v[t],r.push(h(v,W,s,e,Y));return r}(),ae=h(d3.merge(ae)).length,a=2*Math.PI/ae,Z=d3.min([e.width.viz,e.height.viz])/2,S=0,T=0,O=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)d=g[t],r.push(o(e,d,Y)[0]);return r}(),O=h(d3.merge(O)),e.labels.value&&(y=u(Math.PI/2,Z),ee=u(a+Math.PI/2,Z),S=y.x-ee.x-2*e.labels.padding,re={fill:e.x.ticks.font.color,"font-family":e.x.ticks.font.family.value,"font-weight":e.x.ticks.font.weight,"font-size":e.x.ticks.font.size+"px"},te=l(O,re,{mod:function(t){return f().container(d3.select(t)).width(e.height.viz/8).height(S).draw()}}),T=d3.max(te,function(e){return e.width}),Z-=T,Z-=2*e.labels.padding),G=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)d=g[t],r.push(function(){var t,n,r;for(r=[],t=0,n=d.length;n>t;t++)m=d[t],r.push(s(e,m,e.size.value));return r}());return r}(),G=d3.max(d3.merge(G)),X=d3.scale.linear().domain([0,G]).range([0,Z]),A=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)d=g[t],r.push(s(e,d,W));return r}(),A=h(d3.merge(A)),I=d3.scale.ordinal().domain(A).range(d3.range(0,A.length)),_=0,L=v.length;L>_;_++)for(m=v[_],m.d3plus.x=e.width.viz/2+e.margin.top,m.d3plus.y=e.height.viz/2+e.margin.left,H=m[W],w=k=0,E=H.length;E>k;w=++k)t=H[w],t.d3plus||(t.d3plus={}),t.d3plus.r=X(s(e,t,e.size.value)),t.d3plus.a=I(s(e,t,W))*a;for(C=1,J=[10,5,4,2],P=0,B=J.length;B>P;P++)if(w=J[P],Z/w>=20){C=w;break}for(Q=r([Z/C,Z],C-1).reverse(),Q.length===C&&Q.shift(),$=e.group.selectAll(".d3plus_radar_rings").data(Q,function(e,t){return t}),K=function(t){return t.attr("fill",function(t,n){return 0===n?e.axes.background.color:"transparent"}).attr("cx",e.width.viz/2+e.margin.top).attr("cy",e.height.viz/2+e.margin.left).attr("stroke",e.x.grid.value?e.x.grid.color:"transparent")},$.enter().append("circle").attr("class","d3plus_radar_rings").call(K).attr("r",0),$.transition().duration(e.draw.timing).call(K).attr("r",function(e){return e}),$.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j=d3.scale.ordinal().domain(O).range(d3.range(0,O.length)),z=[],R=0,F=O.length;F>R;R++)M=O[R],n=a*j(M)-Math.PI/2,t=n*(180/Math.PI),-90>t||t>90?(t-=180,c=-(Z+2*e.labels.padding+T),i="end"):(c=Z+2*e.labels.padding,i="start"),ie=0>n||n>Math.PI,q=n<Math.PI/2,V=Z,e.labels.value&&(V+=e.labels.padding),U=u(n,V),oe=U.x,se=U.y,q||(oe-=T),ie&&(se-=S),p=[0,Math.PI].indexOf(a*j(M))>=0,p&&(oe-=T/2),z.push({text:M,angle:t,x:c,anchor:i,offset:U});return N=e.group.selectAll("g.d3plus_radar_label_group").data([0]),N.enter().append("g").attr("class","d3plus_radar_label_group").attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),N.transition().duration(e.draw.timing).attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),ne=N.selectAll(".d3plus_radar_labels").data(e.labels.value?z:[],function(e,t){return t}),D=function(e){return e.attr(re).each(function(e,t){return f().container(d3.select(this)).height(S).width(T).align(e.anchor).text(e.text).padding(0).valign("middle").x(e.x).y(-S/2).draw()}).attr("transform",function(e){var t;return t=d3.select(this).attr("transform")||"",t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+e.angle+")"+t})},ne.call(D),ne.enter().append("text").attr("class","d3plus_radar_labels").attr("opacity",0).call(D).transition().duration(e.draw.timing).attr("opacity",1),ne.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),x=e.group.selectAll(".d3plus_radar_lines").data(z,function(e,t){return t}),b=function(t){return t.attr("stroke",e.x.grid.color).attr("x1",e.width.viz/2+e.margin.left).attr("y1",e.height.viz/2+e.margin.top)},x.enter().append("line").attr("class","d3plus_radar_lines").call(b).attr("x2",e.width.viz/2+e.margin.left).attr("y2",e.height.viz/2+e.margin.top),x.transition().duration(e.draw.timing).call(b).attr("x2",function(t){return e.width.viz/2+e.margin.left+t.offset.x}).attr("y2",function(t){return e.height.viz/2+e.margin.top+t.offset.y}),x.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.mouse.viz={click:!1},v},c.requirements=["data","size"],c.shapes=["radial"],t.exports=c},{"../../array/comparator.coffee":32,"../../array/sort.coffee":34,"../../core/data/threshold.js":61,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67,"../../font/sizes.coffee":101,"../../geom/offset.coffee":160,"../../textwrap/textwrap.coffee":199,"../../util/buckets.coffee":203,"../../util/uniques.coffee":209}],326:[function(e,t,n){var r=e("../../array/sort.coffee"),i=e("../../client/pointer.coffee"),o=e("../../core/fetch/value.coffee"),s=e("../../core/fetch/color.coffee"),l=e("../../color/legible.coffee"),u=e("../../tooltip/remove.coffee"),c=e("../../network/smallestGap.coffee"),d=e("../../color/text.coffee"),f=e("../../util/uniques.coffee"),h=function(e){var t=d3.min([e.height.viz,e.width.viz])/2,n=e.small||!e.labels.value?(t-2*e.labels.padding)/2:t/3,h=e.small||!e.labels.value?1.4*n:n,p=2*n,g=[],m=[],v=e.data.viz.filter(function(t){return t[e.id.value]===e.focus.value[0]})[0];v||(v={d3plus:{}},v[e.id.value]=e.focus.value[0]),v.d3plus.x=e.width.viz/2,v.d3plus.y=e.height.viz/2,v.d3plus.r=.65*h;var y=[],x=[e.focus.value[0]];e.edges.connections(e.focus.value[0],e.id.value).forEach(function(t){var n=t[e.edges.source][e.id.value]==e.focus.value[0]?t[e.edges.target]:t[e.edges.source],r=e.data.viz.filter(function(t){return t[e.id.value]===n[e.id.value]})[0];r||(r={d3plus:{}},r[e.id.value]=n[e.id.value]),r.d3plus.edges=e.edges.connections(r[e.id.value],e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!=e.focus.value[0]&&t[e.edges.target][e.id.value]!=e.focus.value[0]}),r.d3plus.edge=t,x.push(r[e.id.value]),y.push(r)});var b=e.order.value||e.color.value||e.size.value||e.id.value;y.sort(function(t,n){var i=t.d3plus.edges.length-n.d3plus.edges.length;return i?i:r([t,n],b,e.order.sort.value,e.color.value||[],e)}),"number"==typeof e.edges.limit.value?y=y.slice(0,e.edges.limit.value):"function"==typeof e.edges.limit.value&&(y=e.edges.limit.value(y));var w=[],I=0;y.forEach(function(t){var n=t[e.id.value];t.d3plus.edges=t.d3plus.edges.filter(function(t){var r=t[e.edges.source][e.id.value],i=t[e.edges.target][e.id.value];return x.indexOf(r)<0&&i==n||x.indexOf(i)<0&&r==n}),I+=t.d3plus.edges.length||1,t.d3plus.edges.forEach(function(t){var r=t[e.edges.source],i=t[e.edges.target],a=i[e.id.value]==n?r:i;x.push(a[e.id.value])})}),r(y,b,e.order.sort.value,e.color.value||[],e);var A=0,C=2*Math.PI,_=0;y.forEach(function(t,n){var i=t.d3plus.edges.length||1,o=C/I*i;0==n&&(_=s,A-=o/2);var s=A+o/2;s-=C/4,t.d3plus.radians=s,t.d3plus.x=e.width.viz/2+h*Math.cos(s),t.d3plus.y=e.height.viz/2+h*Math.sin(s),A+=o,t.d3plus.edges.sort(function(n,i){var n=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],i=i[e.edges.source][e.id.value]==t[e.id.value]?i[e.edges.target]:i[e.edges.source];return r([n,i],b,e.order.sort.value,e.color.value||[],e)}),t.d3plus.edges.forEach(function(n,r){var o=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],l=C/I,u=e.data.viz.filter(function(t){return t[e.id.value]===o[e.id.value]})[0];u||(u={d3plus:{}},u[e.id.value]=o[e.id.value]),a=s-l*i/2+l/2+l*r,u.d3plus.radians=a,u.d3plus.x=e.width.viz/2+p*Math.cos(a),u.d3plus.y=e.height.viz/2+p*Math.sin(a),w.push(u)})});var k=c(y,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}}),M=c(w,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}});if(k||(k=n/2),M||(M=n/4),8>k/2-4)var z=d3.min([k/2,8]);else var z=k/2-4;if(4>M/2-4)var N=d3.min([M/2,4]);else var N=M/2-4;N>n/10&&(N=n/10),N>z&&N>10&&(N=.75*z),z>1.5*N&&(z=1.5*N),z=Math.floor(z),N=Math.floor(N);var S=f(y,e.id.value,o,e);S=S.concat(f(w,e.id.value,o,e)),S.push(e.focus.value[0]);var j=e.data.viz.filter(function(t){return S.indexOf(t[e.id.value])>=0});if(e.size.value){var D=d3.extent(j,function(t){return o(e,t,e.size.value)});D[0]==D[1]&&(D[0]=0);var t=d3.scale.linear().domain(D).rangeRound([3,d3.min([z,N])]),T=o(e,v,e.size.value);v.d3plus.r=t(T)}else{var t=d3.scale.linear().domain([1,2]).rangeRound([z,N]);e.edges.label&&(v.d3plus.r=1.5*t(1))}w.forEach(function(n){n.d3plus.ring=2;var r=e.size.value?o(e,n,e.size.value):2;n.d3plus.r=t(r)}),y.forEach(function(n){n.d3plus.ring=1;var r=e.size.value?o(e,n,e.size.value):1;n.d3plus.r=t(r)}),m=[v].concat(y).concat(w),y.forEach(function(t,r){var i=[e.edges.source,e.edges.target],a=t.d3plus.edge;i.forEach(function(t){a[t]=m.filter(function(n){return n[e.id.value]==a[t][e.id.value]})[0]}),delete a.d3plus,g.push(a),e.edges.connections(t[e.id.value],e.id.value).forEach(function(r){var i=r[e.edges.source][e.id.value]==t[e.id.value]?r[e.edges.target]:r[e.edges.source];if(i[e.id.value]!=v[e.id.value]){var a=w.filter(function(t){return t[e.id.value]==i[e.id.value]})[0];if(a||(a=y.filter(function(t){return t[e.id.value]==i[e.id.value]})[0]),a){r.d3plus={spline:!0,translate:{x:e.width.viz/2,y:e.height.viz/2}};var o=[e.edges.source,e.edges.target];o.forEach(function(i,o){r[i]=m.filter(function(t){return t[e.id.value]==r[i][e.id.value]})[0],void 0===r[i].d3plus.edges&&(r[i].d3plus.edges={});var s=0===o?r[e.edges.target][e.id.value]:r[e.edges.source][e.id.value];r[i][e.id.value]==t[e.id.value]?r[i].d3plus.edges[s]={angle:t.d3plus.radians+Math.PI,radius:n/2}:r[i].d3plus.edges[s]={angle:a.d3plus.radians,radius:n/2}}),g.push(r)}}})});var O=!1;return e.background.value&&["transparent","none"].indexOf(e.background.value)<0&&d3.hsl(e.background.value).l<.5&&(O=d(e.background.value)),m.forEach(function(t){if(!e.small&&e.labels.value)if(t[e.id.value]!=e.focus.value[0]){t.d3plus.rotate=t.d3plus.radians*(180/Math.PI);var r=t.d3plus.rotate,i=n-3*e.labels.padding-t.d3plus.r;if(-90>r||r>90){r-=180;var a=-(t.d3plus.r+i/2+e.labels.padding),o="end"}else var a=t.d3plus.r+i/2+e.labels.padding,o="start";var u=y.indexOf(t)>=0?!0:!1,c=1==t.d3plus.ring?k:M;t.d3plus.label={x:a,y:0,w:i,h:c,angle:r,anchor:o,valign:"center",color:O||l(s(e,t)),resize:[8,e.labels.font.size],background:u,mouse:!0}}else if(e.size.value||e.edges.label){var c=h-2*t.d3plus.r-2*e.labels.padding;t.d3plus.label={x:0,y:t.d3plus.r+c/2,w:h,h:c,color:O||l(s(e,t)),resize:[10,40],background:!0,mouse:!0}}else delete t.d3plus.rotate,delete t.d3plus.label;else delete t.d3plus.rotate,delete t.d3plus.label}),e.mouse.viz={},e.mouse.viz[i.click]=function(t){if(t[e.id.value]!=e.focus.value[0]){u(e.type.value);var n=e.focus.value[0];e.history.states.push(function(){e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()}},{edges:g,nodes:m,data:j}};h.filter=function(e,t){var n=e.edges.connections(e.focus.value[0],e.id.value,!0),r=[];n.forEach(function(t){r=r.concat(e.edges.connections(t[e.id.value],e.id.value,!0))});var i=n.concat(r),a=f(i,e.id.value,o,e),s=[];return a.forEach(function(n){var r=t.filter(function(t){return t[e.id.value]==n})[0];if(r)s.push(r);else{var i={d3plus:{}};i[e.id.value]=n,s.push(i)}}),s},h.nesting=!1,h.scale=1,h.shapes=["circle","square","donut"],h.requirements=["edges","focus"],h.tooltip="static",t.exports=h},{"../../array/sort.coffee":34,"../../client/pointer.coffee":38,"../../color/legible.coffee":44,"../../color/text.coffee":50,"../../core/fetch/color.coffee":63,"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167,"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209}],327:[function(e,t,n){var r,i,a,o,s;r=e("./sankey.js"),i=e("../../client/pointer.coffee"),a=e("../../tooltip/remove.coffee"),s=e("../../util/uniques.coffee"),o=function(e){var t,n,o,s,l,u,c,d,f,h,p,g,m,v,y;for(s=e.focus.value[0],g=2*e.data.stroke.width,y=e.size.value.constructor===Number?e.size.value:20,o=e.edges.connections(s,e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!==s||t[e.edges.target][e.id.value]!==s}),p=[],m=[],o=o.map(function(t){var n,r;return t[e.edges.target][e.id.value]===s?(n={id:"left_"+t[e.edges.source][e.id.value],dupe:"left",data:t[e.edges.source],value:t[e.edges.strength.value]},r=t[e.edges.target]):(n=t[e.edges.source],r={id:"right_"+t[e.edges.target][e.id.value],dupe:"right",data:t[e.edges.target],value:t[e.edges.strength.value]}),m.indexOf(n.id)<0&&p.push(n),m.indexOf(r.id)<0&&p.push(r),m.push(n.id),m.push(r.id),{source:n,target:r,value:t[e.edges.strength.value]||1}}),c=r().nodeWidth(y).nodePadding(e.data.padding.value).size([e.width.viz-2*g,e.height.viz-2*g]).nodes(p).links(o).layout(2),v=[],l=0,d=p.length;d>l;l++)h=p[l],t=h.data||h,t={id:t[e.id.value]},t.d3plus={x:h.x+h.dx/2+g,y:h.y+h.dy/2+g,width:h.dx,height:h.dy,suffix:h.dupe},t.id!==s&&(t[e.edges.strength.value]=h.value),v.push(t);for(e.edges.path=c.link(),u=0,f=o.length;f>u;u++)n=o[u],n.d3plus={x:g,y:g};return e.mouse.viz={},e.mouse.viz[i.click]=function(t){var n;return t[e.id.value]!==e.focus.value[0]?(a(e.type.value),n=e.focus.value[0],e.history.states.push(function(){return e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()):void 0},{nodes:v,edges:o}},o.requirements=["edges","focus","nodes"],o.shapes=["square"],t.exports=o},{"../../client/pointer.coffee":38,"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209,"./sankey.js":328}],328:[function(e,t,n){t.exports=function(){function e(){h.forEach(function(e){e.sourceLinks=[],e.targetLinks=[]}),p.forEach(function(e){var t=e.source,n=e.target;"number"==typeof t&&(t=e.source=h[e.source]),"number"==typeof n&&(n=e.target=h[e.target]),t.sourceLinks.push(e),n.targetLinks.push(e)})}function t(){h.forEach(function(e){e.value=Math.max(d3.sum(e.sourceLinks,l),d3.sum(e.targetLinks,l))})}function n(){for(var e,t=h,n=0;t.length;)e=[],t.forEach(function(t){t.x=n,t.dx=c,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++n;r(n),i((f[0]-c)/(n-1))}function r(e){h.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})}function i(e){h.forEach(function(t){t.x*=e})}function a(e){function t(){var e=d3.min(o,function(e){return(f[1]-(e.length-1)*d)/d3.sum(e,l)});o.forEach(function(t){t.forEach(function(t,n){t.y=n,t.dy=t.value*e})}),p.forEach(function(t){t.dy=t.value*e})}function n(e){function t(e){return s(e.source)*e.value}o.forEach(function(n,r){n.forEach(function(n){if(n.targetLinks.length){var r=d3.sum(n.targetLinks,t)/d3.sum(n.targetLinks,l);n.y+=(r-s(n))*e}})})}function r(e){function t(e){return s(e.target)*e.value}o.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var r=d3.sum(n.sourceLinks,t)/d3.sum(n.sourceLinks,l);n.y+=(r-s(n))*e}})})}function i(){o.forEach(function(e){var t,n,r,i=0,o=e.length;for(e.sort(a),r=0;o>r;++r)t=e[r],n=i-t.y,n>0&&(t.y+=n),i=t.y+t.dy+d;if(n=i-d-f[1],n>0)for(i=t.y-=n,r=o-2;r>=0;--r)t=e[r],n=t.y+t.dy+d-i,n>0&&(t.y-=n),i=t.y})}function a(e,t){return e.y-t.y}var o=d3.nest().key(function(e){return e.x}).sortKeys(d3.ascending).entries(h).map(function(e){return e.values});t(),i();for(var u=1;e>0;--e)r(u*=.99),i(),n(u),i()}function o(){function e(e,t){return e.source.y-t.source.y}function t(e,t){return e.target.y-t.target.y}h.forEach(function(n){n.sourceLinks.sort(t),n.targetLinks.sort(e)}),h.forEach(function(e){var t=0,n=0;e.sourceLinks.forEach(function(e){e.sy=t,t+=e.dy}),e.targetLinks.forEach(function(e){e.ty=n,n+=e.dy})})}function s(e){return e.y+e.dy/2}function l(e){return e.value}var u={},c=24,d=8,f=[1,1],h=[],p=[];return u.nodeWidth=function(e){return arguments.length?(c=+e,u):c},u.nodePadding=function(e){return arguments.length?(d=+e,u):d},u.nodes=function(e){return arguments.length?(h=e,u):h},u.links=function(e){return arguments.length?(p=e,u):p},u.size=function(e){return arguments.length?(f=e,u):f},u.layout=function(r){return e(),t(),n(),a(r),o(),u},u.relayout=function(){return o(),u},u.link=function(){function e(e){var n=e.source.x+e.source.dx,r=e.target.x,i=d3.interpolateNumber(n,r),a=i(t),o=i(1-t),s=e.source.y+e.sy+e.dy/2,l=e.target.y+e.ty+e.dy/2;return"M"+n+","+s+"C"+a+","+s+" "+o+","+l+" "+r+","+l}var t=.5;return e.curvature=function(n){return arguments.length?(t=+n,e):t},e},u}},{}],329:[function(e,t,n){var r,i,a,o,s,l;r=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),a=e("../../core/console/print.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/dataTicks.coffee"),o=function(e){var t,n,a,o,u;if(i(e,{buffer:"size",mouse:!0}),n=e.x.domain.viz.concat(e.y.domain.viz),n.indexOf(void 0)>=0)return[];for(u=e.data.viz,a=0,o=u.length;o>a;a++)t=u[a],t.d3plus.x=e.x.scale.viz(r(e,t,e.x.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=e.y.scale.viz(r(e,t,e.y.value)),t.d3plus.y+=e.axes.margin.top,"number"!=typeof e.size.value&&e.size.value?t.d3plus.r=e.axes.scale(r(e,t,e.size.value)):t.d3plus.r=e.axes.scale(0);return l(e),s(e.data.viz,e.order.value||e.size.value||e.id.value,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e)},o.fill=!0,o.requirements=["data","x","y"],o.scale=1.1,o.setup=function(e){return e.time.value&&!e.axes.discrete&&(e.time.value===e.x.value&&e.self.x({scale:"discrete"}),e.time.value===e.y.value)?e.self.y({scale:"discrete"}):void 0},o.shapes=["circle","square","donut"],o.tooltip="static",t.exports=o},{"../../array/sort.coffee":34,"../../core/console/print.coffee":52,"../../core/fetch/value.coffee":67,"./helpers/graph/dataTicks.coffee":312,"./helpers/graph/draw.coffee":313}],330:[function(e,t,n){var r=e("../../core/fetch/value.coffee"),i=e("../../util/uniques.coffee"),a=e("../../util/copy.coffee"),o=e("../../color/random.coffee"),s=function(e){var t=i(e.data.viz,e.id.value,r,e),n=i(e.cols.value);n.indexOf("label")<0&&e.cols.index.value&&n.unshift("label");var s=e.height.viz/(t.length+1),l=e.width.viz/n.length;e.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",e.height.viz).attr("width",e.width.viz).style("fill",e.color.missing);var u=e.group.selectAll("line.horiz").data(e.data.viz);u.enter().append("line").attr("class","horiz"),u.attr("x1",0).attr("y1",function(e,t){return s*t+s}).attr("x2",e.width.viz).attr("y2",function(e,t){return s*t+s}).style("fill","#fff").style("stroke","#fff"),u.exit().remove();var c=e.group.selectAll("line.vert").data(n);c.enter().append("line").attr("class","vert"),c.attr("x1",function(e,t){return l*t+l}).attr("y1",0).attr("x2",function(e,t){return l*t+l}).attr("y2",e.height.viz).style("fill","#fff").style("stroke","#fff"),c.exit().remove();var d=[],f={};return n.forEach(function(t,n){var r={d3plus:{x:l*n+l/2,y:s/2,width:l,height:s,id:"d3p_header_"+t.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:e.format.value(t)}};if(t==e.id.value&&(r.d3plus.color="#fff"),"label"==t&&(r.d3plus.label=!1,r.d3plus.color="#fff",r.d3plus.stroke="#fff"),d.push(r),"number"==e.data.keys[t]){var i=d3.extent(e.data.viz,function(e){return e[t]});i[0]==i[1]&&(i=[i[0]-1,i[1]]),f[t]=d3.scale.linear().domain(i).range([e.color.missing,o(t)])}else"boolean"==e.data.keys[t]&&(f[t]=function(n){return n?o(t):e.color.missing})}),e.data.viz.forEach(function(t,r){r+=1,n.forEach(function(n,i){var o=a(t);o.d3plus.id="d3p_"+o[e.id.value].toString().replace(/ /g,"_")+"_"+n,o.d3plus.x=l*i+l/2,o.d3plus.y=s*r+s/2,o.d3plus.width=l,o.d3plus.height=s,"label"==n&&(o.d3plus.shape="square",o.d3plus.color="#fff",d.push(o)),d3.keys(t).indexOf(n)>=0&&n in t&&(f[n]&&(o.d3plus.color=f[n](o[n])),o.d3plus.text=e.format.value(o[n]),"boolean"==e.data.keys[n]?o.d3plus.label=!1:"string"==e.data.keys[n]&&(o.d3plus.color=e.color.missing,o.d3plus.stroke="#fff",o.d3plus.shape="square"),d.push(o))})}),d};s.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],s.requirements=["data","cols"],t.exports=s},{"../../color/random.coffee":47,"../../core/fetch/value.coffee":67,"../../util/copy.coffee":206,"../../util/uniques.coffee":209}],331:[function(e,t,n){var r,i,a,o;r=e("../../core/data/threshold.js"),i=e("../../core/data/group.coffee"),a=e("../../object/merge.coffee"),o=function(e){var t,n,r,o,s,l,u;if(r=i(e,e.data.viz),n=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(e.data.padding.value).sort(function(e,t){var n;return n=e.value-t.value,0===n?e.id<t.id:n}).nodes({name:"root",values:r}).filter(function(e){return!e.values&&e.area}),n.length){for(u=n[0];u.parent;)u=u.parent;for(l=[],o=0,s=n.length;s>o;o++)t=n[o],t.d3plus.d3plus=a(t.d3plus.d3plus,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/u.value}),l.push(t.d3plus)}return l},o.filter=r,o.modes=["squarify","slice","dice","slice-dice"],o.requirements=["data","size"],o.shapes=["square"],o.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=o},{"../../core/data/group.coffee":57,"../../core/data/threshold.js":61,"../../object/merge.coffee":170}],332:[function(e,t,n){var r,i,a,o,s,l,u;r=e("../core/methods/attach.coffee"),i=e("./methods/helpers/axis.coffee"),o=e("./helpers/ui/message.js"),s=e("./helpers/drawSteps.js"),l=e("../core/console/print.coffee"),a=e("./helpers/container.coffee"),u=e("../object/validate.coffee"),t.exports=function(){var t;return t={g:{apps:{}},types:{area:e("./types/area.coffee"),bar:e("./types/bar.coffee"),bubbles:e("./types/bubbles.coffee"),box:e("./types/box.coffee"),chart:e("./types/deprecated/chart.coffee"),geo_map:e("./types/geo_map.coffee"),line:e("./types/line.coffee"),network:e("./types/network.js"),paths:e("./types/paths.coffee"),pie:e("./types/pie.coffee"),radar:e("./types/radar.coffee"),rings:e("./types/rings.js"),sankey:e("./types/sankey.coffee"),scatter:e("./types/scatter.coffee"),stacked:e("./types/area.coffee"),table:e("./types/table.js"),tree_map:e("./types/tree_map.coffee")}},t.self=function(e){return e.each(function(){var e,n,r,i,u,c,d;t.draw.frozen=!0,t.error.internal=null,"timing"in t.draw||(t.draw.timing=t.timing.transitions),t.error.value&&(t.draw.timing=0),a(t),c=t.width.value<=t.width.small,u=t.height.value<=t.height.small,t.small=c||u,t.width.viz=t.width.value,t.height.viz=t.height.value,e=!1,n=function(){d.length?i():t.dev.value&&(l.groupEnd(),l.timeEnd("total draw time"),l.log("\n"))},r=function(e,r){r=r||"function",e[r]instanceof Array?e[r].forEach(function(e){e(t,n)}):"function"==typeof e[r]&&e[r](t,n),e.wait||n()},i=function(){var i,a,s,u;u=d.shift(),s=t.g.message&&e===u.message,a="check"in u?u.check:!0,"function"==typeof a&&(a=a(t)),a?s?r(u):(t.dev.value&&(e!==!1&&l.groupEnd(),l.group(u.message)),"string"==typeof t.messages.value?(e=t.messages.value,i=t.messages.value):(e=u.message,i=t.format.value(u.message)),t.draw.update?(o(t,i),t.error.value?r(u):setTimeout(function(){return r(u)},10)):r(u)):"otherwise"in u?t.error.value?r(u,"otherwise"):setTimeout(function(){return r(u,"otherwise")},10):n()},t.messages.style.backup=t.group&&"1"===t.group.attr("opacity")?"small":"large",d=s(t),i()}),t.self},r(t,{active:e("./methods/active.coffee"),aggs:e("./methods/aggs.coffee"),attrs:e("./methods/attrs.coffee"),axes:e("./methods/axes.coffee"),background:e("./methods/background.coffee"),"class":e("./methods/class.coffee"),color:e("./methods/color.coffee"),cols:e("./methods/cols.js"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),coords:e("./methods/coords.coffee"),csv:e("./methods/csv.coffee"),data:e("./methods/data.coffee"),depth:e("./methods/depth.coffee"),descs:e("./methods/descs.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),edges:e("./methods/edges.js"),error:e("./methods/error.coffee"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),footer:e("./methods/footer.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),labels:e("./methods/labels.coffee"),legend:e("./methods/legend.coffee"),links:e("./methods/links.coffee"),margin:e("./methods/margin.coffee"),messages:e("./methods/messages.coffee"),mouse:e("./methods/mouse.coffee"),nodes:e("./methods/nodes.coffee"),order:e("./methods/order.coffee"),resize:e("./methods/resize.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),style:e("./methods/style.coffee"),temp:e("./methods/temp.coffee"),text:e("./methods/text.coffee"),time:e("./methods/time.coffee"),timeline:e("./methods/timeline.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),tooltip:e("./methods/tooltip.coffee"),total:e("./methods/total.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee"),x:i("x"),x2:i("x2"),y:i("y"),y2:i("y2"),zoom:e("./methods/zoom.js")}),t.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"../object/validate.coffee":171,"./helpers/container.coffee":210,"./helpers/drawSteps.js":211,"./helpers/ui/message.js":245,"./methods/active.coffee":254,"./methods/aggs.coffee":255,"./methods/attrs.coffee":256,"./methods/axes.coffee":257,"./methods/background.coffee":258,"./methods/class.coffee":259,"./methods/color.coffee":260,"./methods/cols.js":261,"./methods/config.coffee":262,"./methods/container.coffee":263,"./methods/coords.coffee":264,"./methods/csv.coffee":265,"./methods/data.coffee":266,"./methods/depth.coffee":267,"./methods/descs.coffee":268,"./methods/dev.coffee":269,"./methods/draw.js":270,"./methods/edges.js":271,"./methods/error.coffee":272,"./methods/focus.coffee":273,"./methods/font.coffee":274,"./methods/footer.coffee":275,"./methods/format.coffee":276,"./methods/height.coffee":277,"./methods/helpers/axis.coffee":278,"./methods/history.coffee":279,"./methods/icon.coffee":280,"./methods/id.coffee":281,"./methods/labels.coffee":282,"./methods/legend.coffee":283,"./methods/links.coffee":284,"./methods/margin.coffee":285,"./methods/messages.coffee":286,"./methods/mouse.coffee":287,"./methods/nodes.coffee":288,"./methods/order.coffee":289,"./methods/resize.coffee":290,"./methods/shape.coffee":291,"./methods/size.coffee":292,"./methods/style.coffee":293,"./methods/temp.coffee":294,"./methods/text.coffee":295,"./methods/time.coffee":296,"./methods/timeline.coffee":297,"./methods/timing.coffee":298,"./methods/title.coffee":299,"./methods/tooltip.coffee":300,"./methods/total.coffee":301,"./methods/type.coffee":302,"./methods/ui.coffee":303,"./methods/width.coffee":304,"./methods/zoom.js":305,"./types/area.coffee":306,"./types/bar.coffee":307,"./types/box.coffee":308,"./types/bubbles.coffee":309,"./types/deprecated/chart.coffee":310,"./types/geo_map.coffee":311,"./types/line.coffee":321,"./types/network.js":322,"./types/paths.coffee":323,"./types/pie.coffee":324,"./types/radar.coffee":325,"./types/rings.js":326,"./types/sankey.coffee":327,"./types/scatter.coffee":329,"./types/table.js":330,"./types/tree_map.coffee":331}]},{},[162]),!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,r){var i=["opacity",t,~~(100*e),n,r].join("-"),a=.01+100*(n/r),o=Math.max(1-(1-e)/t*(100-a),e),s=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return d[i]||(f.insertRule("@"+l+"keyframes "+i+"{0%{opacity:"+o+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",f.cssRules.length),d[i]=1),i}function r(e,t){var n,r,i=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<c.length;r++)if(n=c[r]+t,void 0!==i[n])return n;return void 0!==i[t]?t:void 0}function i(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function o(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=a(e||{},s.defaults,h)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}f.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,r){function a(){return i(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function s(e,s,l){t(f,t(i(a(),{rotation:360/r.lines*e+"deg",left:~~s}),t(i(n("roundrect",{arcsize:r.corners}),{width:u,height:r.width,left:r.radius,top:-r.width>>1,filter:l}),n("fill",{color:o(r.color,e),opacity:r.opacity}),n("stroke",{opacity:0}))))}var l,u=r.length+r.width,c=2*u,d=2*-(r.width+r.length)+"px",f=i(a(),{position:"absolute",top:d,left:d});if(r.shadow)for(l=1;l<=r.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=r.lines;l++)s(l);
return t(e,f)},s.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var u,c=["webkit","Moz","ms","O"],d={},f=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},a(s.prototype,{spin:function(t){this.stop();var n=this,r=n.opts,a=n.el=i(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});if(r.radius+r.length+r.width,i(a,{left:r.left,top:r.top}),t&&t.insertBefore(a,t.firstChild||null),a.setAttribute("role","progressbar"),n.lines(a,n.opts),!u){var o,s=0,l=(r.lines-1)*(1-r.direction)/2,c=r.fps,d=c/r.speed,f=(1-r.opacity)/(d*r.trail/100),h=d/r.lines;!function p(){s++;for(var e=0;e<r.lines;e++)o=Math.max(1-(s+(r.lines-e)*h)%d*f,r.opacity),n.opacity(a,e*r.direction+l,o,r);n.timeout=n.el&&setTimeout(p,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,a){function s(t,n){return i(e(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*c+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var l,c=0,d=(a.lines-1)*(1-a.direction)/2;c<a.lines;c++)l=i(e(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:u&&n(a.opacity,a.trail,d+c*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&t(l,i(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(l,s(o(a.color,c),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var p=i(e("group"),{behavior:"url(#default#VML)"});return!r(p,"transform")&&p.adj?l():u=r(p,"animation"),s}),function(){}.call(this);